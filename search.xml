<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ•°æ®å‘ç°å¼€æºå·¥å…·è°ƒç ”</title>
      <link href="/2025/10/28/%E6%95%B0%E6%8D%AE%E5%8F%91%E7%8E%B0%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E8%B0%83%E7%A0%94/"/>
      <url>/2025/10/28/%E6%95%B0%E6%8D%AE%E5%8F%91%E7%8E%B0%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E8%B0%83%E7%A0%94/</url>
      
        <content type="html"><![CDATA[<h1 id="å¿…è¦æ€§"><a href="#å¿…è¦æ€§" class="headerlink" title="å¿…è¦æ€§"></a>å¿…è¦æ€§</h1><p>æ•°æ®å‘ç°å¹³å°çš„ç›®æ˜¯å¸®åŠ©æ›´å¥½çš„å‘ç°ã€ç†è§£å’Œä½¿ç”¨æ•°æ®ã€‚å°±æ˜¯è§£å†³ä»¥ä¸‹é—®é¢˜ï¼šæ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿå¦‚ä½•ä½¿ç”¨è¿™äº›æ•°æ®ï¼Ÿæ•°æ®åšä»€ä¹ˆï¼Ÿæ•°æ®æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Ÿæ•°æ®æ˜¯å¦‚ä½•æ›´æ–°çš„ï¼Ÿ</p><p>é€šè¿‡ Amundsenï¼ŒLyft å°†å…¶æ•°æ®å›¢é˜Ÿçš„ç”Ÿäº§åŠ›æé«˜äº†20%ã€‚åŒæ ·ï¼ŒDataHub å¸®åŠ© LinkedIn å®ç°äº†æ•°æ®å¤§ä¼—åŒ–â€”â€”æ¯å‘¨æœ‰1,500 åå‘˜å·¥è®¿é—® DataHubï¼Œä»¥æœç´¢ã€å‘ç°å’Œä½¿ç”¨æ•°æ®æ¥å®Œæˆä»–ä»¬çš„å·¥ä½œã€‚</p><h1 id="å¼€æºå·¥å…·"><a href="#å¼€æºå·¥å…·" class="headerlink" title="å¼€æºå·¥å…·"></a>å¼€æºå·¥å…·</h1><ul><li>Atlasï¼ˆApacheï¼ŒClouderaï¼‰</li><li>Amundsenï¼ˆLF AI &amp; Dataï¼ŒLyftï¼‰</li><li>DataHubï¼ˆApacheï¼ŒLinkedinï¼‰</li></ul><h1 id="è¯„ä¼°ç»“è®º"><a href="#è¯„ä¼°ç»“è®º" class="headerlink" title="è¯„ä¼°ç»“è®º"></a>è¯„ä¼°ç»“è®º</h1><p>æ¨èDatahubã€‚åŠŸèƒ½å®Œæ•´ï¼›å¼€æºç¤¾åŒºç›¸å½“æ´»è·ƒï¼›å¼€å‘è¯­è¨€Javaã€Pythonä¸ºä¸»ï¼Œæ¯”è¾ƒé€‚åˆå›¢é˜Ÿç°çŠ¶ã€‚</p><p>Amundsenä¼˜åŠ¿åœ¨æ•°æ®å‘ç°ï¼Œå¾®æœåŠ¡æ¶æ„åŠPython+TypeScriptè¯­è¨€ä¸ºä¸»ä¸¤ä¸ªæ–¹é¢ä¸å›¢é˜Ÿç°çŠ¶ä¸ç¬¦ã€‚</p><p>Atlasçº¯Javaä¸ºä¸»å¼€å‘è¯­è¨€ä¸å›¢é˜Ÿç°çŠ¶æœ€ç¬¦ï¼Œä½†å¤ªåæŠ€æœ¯åŒ–ã€‚</p><p>æ¼”ç¤ºç¯å¢ƒï¼š</p><ul><li>DataHubï¼š<a href="https://demo.datahubproject.io/">https://demo.datahubproject.io/</a></li></ul><table><thead><tr><th>å·¥å…·</th><th>Atlas</th><th>Amundsen</th><th>DataHub</th></tr></thead><tbody><tr><td>å¼€å‘è€…</td><td>Clouder</td><td>Lyft</td><td>LinkedIn</td></tr><tr><td>æ¶æ„</td><td>å…ƒæ•°æ®æ‘„å–çš„Hook</td><td>åŸºäº ETL çš„å…ƒæ•°æ®æ‘„å–</td><td>åŸºäºæ’ä»¶çš„å…ƒæ•°æ®æ‘„å–</td></tr><tr><td>ç‰¹å¾</td><td>1. æœç´¢å’Œå‘ç°</td><td>1. æ˜“äºè®¾ç½®ã€ä¿®æ”¹å’Œéƒ¨ç½²</td><td>1. æœç´¢å’Œå‘ç°</td></tr><tr><td></td><td>2. ä½¿ç”¨ JanusGraph ä½œä¸ºå…ƒæ•°æ®åº“å’Œ Solr è¿›è¡Œæœç´¢</td><td>2. æœç´¢å’Œå‘ç°</td><td>2. ä½¿ç”¨ Kafka ä¸æµç”Ÿæ€ç³»ç»Ÿé›†æˆå¹¶æ”¯æŒ GraphQL</td></tr><tr><td></td><td>3. ä¸“æ³¨äºåˆ†ç±»ã€æ•°æ®æ²»ç†å’Œè¡€ç¼˜ï¼ˆè¡¨å’Œåˆ—ï¼‰</td><td>3. å¤šåç«¯æ”¯æŒ</td><td>3. æ•°æ®è¡€ç¼˜ï¼ˆåŸºäºåˆ—çš„è¡€ç¼˜åœ¨è·¯çº¿å›¾ä¸­ï¼‰</td></tr><tr><td></td><td>4. ç»†ç²’åº¦è®¿é—®æ§åˆ¶ï¼ˆRangerï¼‰</td><td>4. æ•°æ®è¡€ç¼˜ï¼ˆè¡¨å’Œåˆ—ï¼‰</td><td>4. ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶</td></tr><tr><td></td><td>5. æ•°æ®åˆ†ç±»å’Œæ ‡è®°</td><td>5. æ•°æ®åˆ†ç±»å’Œæ ‡è®°</td><td>5. æ•°æ®åˆ†ç±»å’Œæ ‡è®°</td></tr><tr><td></td><td>6. ä¸º Hadoop æ„å»ºç”Ÿæ€ç³»ç»Ÿå¹¶ä½¿ç”¨ Hive å…ƒæ•°æ®ä¸ä»»ä½•æ•°æ®æºä¸€èµ·å·¥ä½œ</td><td></td><td></td></tr><tr><td>éƒ¨ç½²</td><td>æ²¡æœ‰å®˜æ–¹éƒ¨ç½²å»ºè®®</td><td>1. Kubernetes</td><td>1. Kubernetes</td></tr><tr><td></td><td></td><td>2. AWS ECS</td><td>2. è°·æ­Œäº‘ GKEï¼ˆè°·æ­Œ Kubernetes å¼•æ“ï¼‰</td></tr><tr><td></td><td></td><td>3. ç‹¬ç«‹docker</td><td>3. ç‹¬ç«‹docker</td></tr><tr><td>è®¤è¯</td><td>1. æ–‡ä»¶</td><td>OAuth OIDCï¼ˆOpenID è¿æ¥ï¼‰</td><td>1. OAuth OIDC</td></tr><tr><td></td><td>2. Kerberos SSO</td><td></td><td>2. JaaS (Java Authentication and Authorization Service)</td></tr><tr><td></td><td>3. LDAP</td><td></td><td></td></tr><tr><td>é‰´æƒ</td><td>1. åŸºäº Ranger çš„æˆæƒ</td><td>åœ¨è·¯çº¿å›¾ä¸­</td><td>å¹³å°å’Œå…ƒæ•°æ®ç­–ç•¥</td></tr><tr><td></td><td>2. æ•°æ®å±è”½</td><td></td><td></td></tr><tr><td>è·¯çº¿å›¾å’Œæ›´æ–°</td><td>1. ä¸€ä¸ªå…¬å¼€çš„ JIRA é¡¹ç›®</td><td>1. Amundsen è·¯çº¿å›¾</td><td>1. DataHub è·¯çº¿å›¾</td></tr><tr><td></td><td>2. Medium ä¸Šç¤¾åŒºçš„åšå®¢æ–‡ç« </td><td>2. Medium å’Œ Stemma çš„æ›´æ–°</td><td>2. åª’ä½“æ›´æ–°</td></tr><tr><td></td><td></td><td>3. GitHubï¼ˆä¹Ÿå¯ä»¥è®©ä½ è´¡çŒ®ï¼‰</td><td></td></tr></tbody></table><h1 id="è¯„ä¼°é¡¹"><a href="#è¯„ä¼°é¡¹" class="headerlink" title="è¯„ä¼°é¡¹"></a>è¯„ä¼°é¡¹</h1><h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><ul><li>Atlasï¼šè¾ƒå°‘å…³æ³¨é›†æˆï¼Œè€Œæ›´å¤šåœ°å…³æ³¨ï¼š<ul><li>ä¿¡æ¯åˆ†ç±»ï¼šç”¨æˆ·å¯ä»¥ä½¿ç”¨è¯æ±‡è¡¨æ·»åŠ ç‰¹å®šäºä¸šåŠ¡çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li><li>æ•°æ®æ²»ç†ï¼šæ²»ç†å›¢é˜Ÿå¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ•°æ®åº“å®ä½“çš„åˆ†ç±»ã€‚æ­¤å¤–ï¼Œè¯æ±‡è¡¨å’Œåˆ†ç±»å¯ä»¥ç›¸äº’å…³è”ä»¥ç®€åŒ–ç®¡ç†ã€‚</li><li>é›†æˆå„ç§å…ƒæ•°æ®æºï¼šä½¿ç”¨ Hiveï¼Œç”¨æˆ·å¯ä»¥è¿æ¥ä»»æ„æ•°é‡çš„å…ƒæ•°æ®æºï¼Œè€Œæ— éœ€è‡ªå®šä¹‰é›†æˆã€‚æ­¤å¤–ï¼ŒAtlas é»˜è®¤å®Œå…¨æ”¯æŒæ‰€æœ‰åŸºäº Hadoop ç”Ÿæ€ç³»ç»Ÿçš„æ•°æ®æºã€‚</li></ul></li><li>Amundsenï¼šæ˜“äºä½¿ç”¨ï¼Œæ”¯æŒå¤šç§åç«¯ç¯å¢ƒï¼Œå¹¶æä¾›å¤æ‚çš„é¢„è§ˆåŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°äº†è§£ä»–ä»¬çš„æ•°æ®ã€‚</li><li>DataHubï¼šçš„ä¼˜åŠ¿åœ¨äºå…¶æ•°æ®æ²»ç†èƒ½åŠ›ã€‚è¿™äº›åŒ…æ‹¬ï¼š<ul><li>æ›´ç²¾ç»†çš„è®¿é—®æ§åˆ¶ï¼šDataHub æ”¯æŒåˆ—çº§å’Œæ•°æ®é›†çº§åˆ†ç±»ã€PII æ ‡è®°ã€è‡ªåŠ¨æ•°æ®åˆ é™¤ï¼ˆä»¥å¸®åŠ©éµå®ˆ GDPRï¼‰ç­‰ã€‚</li><li>æ•°æ®è¡€ç¼˜ï¼šåœ¨å…¶è·¯çº¿å›¾ä¸­ï¼ŒDataHub æ‰¿è¯ºåˆ—çº§è¡€ç¼˜ä»¥åŠä¸ Great Expectationsã€dbt test å’Œ deequ ç­‰æµ‹è¯•æ¡†æ¶çš„é›†æˆã€‚</li></ul></li></ul><table><thead><tr><th>å·¥å…·</th><th>Atlas</th><th>Amundsen</th><th>DataHub</th></tr></thead><tbody><tr><td>æœç´¢å’Œå‘ç°</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>è®¤è¯</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Airflowæ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>DBT</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å¤šåç«¯æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>è¡¨è¡€ç¼˜</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>åˆ—è¡€ç¼˜</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table><h2 id="è¯­è¨€"><a href="#è¯­è¨€" class="headerlink" title="è¯­è¨€"></a>è¯­è¨€</h2><p>å°±å¼€å‘è¯­è¨€æ¥è¯´Atlasæœ€é€‚åˆæˆ‘ä»¬å›¢é˜Ÿï¼ŒDatahubæ¬¡ä¹‹ï¼ŒAmundsenåŒ¹é…åº¦æœ€ä½ã€‚</p><table><thead><tr><th>æ¡†æ¶</th><th>Atlas</th><th>Amundsen</th><th>DataHub</th></tr></thead><tbody><tr><td>è¯­è¨€</td><td>Javaï¼š60.2%</td><td>Pythonï¼š67.8%</td><td>Javaï¼š45.5%</td></tr><tr><td></td><td>JavaScriptï¼š30.9%</td><td>TypeScriptï¼š29.7%</td><td>Pythonï¼š34.4%</td></tr><tr><td></td><td>Pythonï¼š2.9%</td><td>SCSSï¼š2.1%</td><td>TypeScriptï¼š17.9%</td></tr><tr><td></td><td>HTMLï¼š2.8%</td><td>HTMLï¼š0.1%</td><td>Shellï¼š0.7%</td></tr><tr><td></td><td>SCSSï¼š2.1%</td><td>Makefileï¼š0.1%</td><td>JavaScriptï¼š0.6%</td></tr><tr><td></td><td>Shellï¼š0.8%</td><td>Scalaï¼š0.1%</td><td>Dockerfileï¼š0.2%</td></tr><tr><td></td><td>Otherï¼š0.3%</td><td>Otherï¼š0.1%</td><td>Otherï¼š0.7%</td></tr></tbody></table><h2 id="ç¤¾åŒº"><a href="#ç¤¾åŒº" class="headerlink" title="ç¤¾åŒº"></a>ç¤¾åŒº</h2><ul><li>Apache Atlas æœ‰ä¸€ä¸ªå…¬å…± JIRA é¡¹ç›®ï¼Œä½†æ²¡æœ‰æ˜ç¡®å®šä¹‰çš„è·¯çº¿å›¾ã€‚æ–‡æ¡£ä¸»è¦æ˜¯å®˜ç½‘ã€‚</li><li>Amundsenï¼šå®šæœŸæ›´æ–°ï¼Œå¹¶æ‹¥æœ‰ä¸€ä¸ªæ”¯æŒè¯¥é¡¹ç›®çš„å¤§å‹ç¤¾åŒºã€‚å®˜æ–¹æ–‡æ¡£åŠç¤¾åŒºåšæ–‡ã€‚</li><li>æœ‰ä¸€ä¸ªå…¬å…±è·¯çº¿å›¾å’Œå¹¿æ³›çš„ç¤¾åŒºæ”¯æŒã€‚DataHub ä¹Ÿç»´æŠ¤äº§å“è·¯çº¿å›¾å¹¶åœ¨ Medium ä¸Šåˆ†äº«é¢‘ç¹æ›´æ–°ã€‚</li></ul><table><thead><tr><th>å·¥å…·</th><th>å¼€æºæ—¶é—´</th><th>Star</th><th>Fork</th><th>Watch</th><th>ç‰ˆæœ¬æ•°</th><th>Contributors</th><th>Issues</th><th>PR</th><th>æœ€æ–°ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>Atlas</td><td>2015å¹´5æœˆ</td><td>1.3K</td><td>692</td><td>65</td><td>37</td><td>115</td><td>845ï¼Œ3714</td><td>78ï¼Œ101</td><td>2021-08-17</td></tr><tr><td>Amundsen</td><td>2019å¹´10æœˆ</td><td>3.3K</td><td>836</td><td>245</td><td>95</td><td>205</td><td>103ï¼Œ507</td><td>21ï¼Œ1237</td><td>2022-05-17</td></tr><tr><td>DataHub</td><td>2020å¹´2æœˆ</td><td>5.6K</td><td>1.5K</td><td>223</td><td>56</td><td>241</td><td>204ï¼Œ915</td><td>34ï¼Œ3982</td><td>2022-06-10</td></tr></tbody></table><blockquote><p>Issuesã€PRéƒ½æ˜¯é‡‡ç”¨â€œOpenæ•°é‡ ï¼ŒClosedæ•°é‡â€çš„æ•°é‡å±•ç¤ºã€‚</p></blockquote><h2 id="åº•å±‚æ¶æ„"><a href="#åº•å±‚æ¶æ„" class="headerlink" title="åº•å±‚æ¶æ„"></a>åº•å±‚æ¶æ„</h2><table><thead><tr><th>å·¥å…·</th><th>æ•°æ®åº“</th><th>æœç´¢</th><th>æœåŠ¡</th></tr></thead><tbody><tr><td>Atlas</td><td>JanusGraph</td><td>Solr</td><td>REST APIã€Kafka</td></tr><tr><td>Amundsen</td><td>neo4j</td><td>Elasticsearch</td><td>REST API</td></tr><tr><td>DataHub</td><td>neo4j</td><td>Elasticsearch</td><td>REST APIã€GraphQLã€Kafka</td></tr></tbody></table><h2 id="åº”ç”¨å…¬å¸æˆ–ç»„ç»‡"><a href="#åº”ç”¨å…¬å¸æˆ–ç»„ç»‡" class="headerlink" title="åº”ç”¨å…¬å¸æˆ–ç»„ç»‡"></a>åº”ç”¨å…¬å¸æˆ–ç»„ç»‡</h2><table><thead><tr><th>å·¥å…·</th><th>Atlas</th><th>Amundsen</th><th>DataHub</th></tr></thead><tbody><tr><td>å…¬å¸æˆ–ç»„ç»‡</td><td>Clouderaï¼Œå…¶ä»–æ— ç›¸å…³ä¿¡æ¯</td><td>Lyftã€Databricksç­‰38ä¸ªå…¬å¸æˆ–ç»„ç»‡</td><td>LinkedInã€æµ·åšç§‘æŠ€ã€ä¸Šæµ·åç‘é“¶è¡Œç­‰26ä¸ªå…¬å¸æˆ–ç»„ç»‡</td></tr></tbody></table><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li>Data Discovery Platforms and Their Open Source Solutions (eugeneyan.com)</li><li>Onebridge | Data Catalogs for Metadata Management</li><li>æ•°æ®æ²»ç†å·¥å…·-å…ƒæ•°æ®ç®¡ç† (daimajiaoliu.com)</li><li>Data Catalogs, the Luxury of Choice | by Fadi Maali | Zendesk Engineering</li><li>2103.07532.pdf (arxiv.org)</li><li>How LinkedIn, Uber, Lyft, Airbnb and Netflix are Solving Data Management and Discovery for Machine Learning Solutions - KDnuggets</li><li>End-to-End Data Discovery, Observability, and Governance on AWS with LinkedInâ€™s Open-source DataHub | Programmatic Ponderings</li><li>æ•°æ®æ²»ç†æ–¹æ¡ˆæŠ€æœ¯è°ƒç ” Atlas VS Datahub VS Amundsen - äº‘+ç¤¾åŒº - è…¾è®¯äº‘ (tencent.com)</li><li>Apache Atlas Alternatives â€” Amundsen, DataHub, Metacat, Databook (atlan.com)</li><li>Github 1.9K Starçš„æ•°æ®æ²»ç†æ¡†æ¶-Amundsen - çŸ¥ä¹ (zhihu.com)</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å‘ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> æ•°æ®å‘ç° </tag>
            
            <tag> Atlas </tag>
            
            <tag> Amundsen </tag>
            
            <tag> DataHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sparkå®½ä¾èµ–ä¸çª„ä¾èµ–</title>
      <link href="/2025/10/28/Spark%E5%AE%BD%E4%BE%9D%E8%B5%96%E4%B8%8E%E7%AA%84%E4%BE%9D%E8%B5%96/"/>
      <url>/2025/10/28/Spark%E5%AE%BD%E4%BE%9D%E8%B5%96%E4%B8%8E%E7%AA%84%E4%BE%9D%E8%B5%96/</url>
      
        <content type="html"><![CDATA[<p>Sparkçš„å®½ä¾èµ–ä¸çª„ä¾èµ–æ˜¯è·Ÿæ•°æ®åˆ†åŒºå…³è”çš„æ¦‚å¿µã€‚</p><ul><li>çª„ä¾èµ–ï¼šæ¯ä¸ªè¾“å…¥åˆ†åŒºä»…å†³å®šä¸€ä¸ªè¾“å‡ºåˆ†åŒºã€‚Sparkçª„ä¾èµ–è‡ªåŠ¨æ‰§è¡Œæµæ°´çº¿å¤„ç†ï¼Œæ„å‘³ç€å¤šä¸ªè¿‡æ»¤æ“ä½œå…¨éƒ¨åœ¨å†…å­˜ä¸­æ‰§è¡Œã€‚</li><li>å®½ä¾èµ–ï¼šæ¯ä¸ªè¾“å…¥åˆ†åŒºå†³å®šå¤šä¸ªè¾“å‡ºåˆ†åŒºã€‚å…·æœ‰å®½ä¾èµ–å…³ç³»çš„è½¬æ¢å°±æ˜¯ç»å¸¸è¯´çš„æ´—ç‰Œï¼ˆshuffleï¼‰æ“ä½œã€‚æ‰§è¡Œshuffleæ“ä½œæ—¶ï¼ŒSparkä¼šå°†ç»“æœå†™å…¥ç£ç›˜ã€‚<br><img src="/images/202510/52.jpg"></li></ul><p>é’ˆå¯¹å®½ä¾èµ–çš„ä¼˜åŒ–æ˜¯è®¨è®ºæ¯”è¾ƒå¤šçš„è¯é¢˜ã€‚è¿™ä¹Ÿå¼•å‡ºäº†æƒ°æ€§è¯„ä¼°çš„ä¸»é¢˜ã€‚æƒ°æ€§è¯„ä¼°çš„æ„æ€å°±æ˜¯ç­‰åˆ°ç»å¯¹éœ€è¦æ—¶æ‰æ‰§è¡Œè®¡ç®—ã€‚æƒ°æ€§è¯„ä¼°çš„å¥½å¤„æ˜¯Sparkå¯ä»¥ä¼˜åŒ–æ•´ä¸ªä»è¾“å…¥åˆ°è¾“å‡ºç«¯çš„æ•°æ®æµã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å°±æ˜¯Dataframeçš„è°“è¯ä¸‹æ¨ã€‚</p><p>å…¶å®ï¼Œæˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­ä¼šæœ‰å¾ˆå¤šæƒ°æ€§è¯„ä¼°çš„åœºæ™¯ï¼Œå°¤å…¶æ˜¯è§£å†³å†å²å­˜é‡é—®é¢˜çš„æ—¶å€™ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå…ˆæ”¶é›†æŸæ–¹é¢çš„å­˜é‡é—®é¢˜ï¼Œç„¶åæ•´ä½“åˆ†æåæä¾›å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚è¿™æ ·æ›´æœ‰åŠ©äºä»æ•´ä½“ç»Ÿç­¹è€ƒè™‘ï¼Œä»è€Œæä¾›æ›´æ›´é«˜æ•ˆã€ä½æˆæœ¬çš„è§£å†³æ–¹æ¡ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sparkæ¶æ„</title>
      <link href="/2025/10/28/Spark%E6%9E%B6%E6%9E%84/"/>
      <url>/2025/10/28/Spark%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p>Sparkæ¶æ„éå¸¸ç®€æ´ã€‚ç®€æ´çš„æ¶æ„æ˜¯è‰¯å¥½å¼€æ”¾æ€§ã€å…¼å®¹æ€§çš„åŸºç¡€ã€‚<br><img src="/images/202510/51.jpg"></p><ul><li>é©±åŠ¨å™¨ï¼ˆé©±åŠ¨è¿›ç¨‹ï¼‰ï¼šè¿è¡Œmain()å‡½æ•°ï¼Œè´Ÿè´£ä¸‰ä»¶äº‹ã€‚<ul><li>ç»´æŠ¤Sparkåº”ç”¨ç¨‹åºç›¸å…³ä¿¡æ¯</li><li>å›åº”ç”¨æˆ·ç¨‹åºæˆ–è¾“å…¥</li><li>åˆ†æä»»åŠ¡å¹¶åˆ†å‘ç»™è‹¥å¹²æ‰§è¡Œå™¨å¤„ç†</li></ul></li><li>æ‰§è¡Œå™¨ï¼šæ‰§è¡Œé©±åŠ¨å™¨åˆ†é…çš„å®é™…è®¡ç®—å·¥ä½œï¼Œè´Ÿè´£ä¸¤ä»¶äº‹ã€‚<ul><li>æ‰§è¡Œé©±åŠ¨å™¨åˆ†é…çš„ä»£ç </li><li>æŠ¥å‘Šæ‰§è¡Œå™¨çš„è®¡ç®—çŠ¶æ€ç»™é©±åŠ¨å™¨</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive 3.1.0ç¼–è¯‘ldap-client-api-0.1-SNAPSHOT.jaré—®é¢˜è§£å†³</title>
      <link href="/2025/10/28/Hive-3-1-0%E7%BC%96%E8%AF%91ldap-client-api-0-1-SNAPSHOT-jar%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2025/10/28/Hive-3-1-0%E7%BC%96%E8%AF%91ldap-client-api-0-1-SNAPSHOT-jar%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>è§£å†³æ–¹æ³•å‚è§ï¼š<a href="https://link.zhihu.com/?target=https://issues.apache.org/jira/browse/HIVE-21777">HIVE-21777</a></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®ä»“åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹^Må¤„ç†</title>
      <link href="/2025/10/28/Linux%E4%B8%8B-M%E5%A4%84%E7%90%86/"/>
      <url>/2025/10/28/Linux%E4%B8%8B-M%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>æ­¤å¤„é’ˆå¯¹shellè„šæœ¬è¿è¡Œæ—¶æŠ¥^Må¼•èµ·çš„å¼‚å¸¸ï¼Œä½†æ˜¯é€šè¿‡viæŸ¥çœ‹æœªæ˜¾ç¤º^Mçš„æƒ…å†µä¸‹å¦‚ä½•å¤„ç†ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ä½¿ç”¨sedå‘½ä»¤è¿›è¡Œæ›¿æ¢ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/^M//g&#x27;</span> file1.txt</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š^Må…¶å®æ˜¯CTRL+Vä¸CTRL+Mçš„ç»„åˆã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spark SQLæŸ¥è¯¢HBaseè¡¨å¼‚å¸¸è§£å†³</title>
      <link href="/2025/10/28/Spark-SQL%E6%9F%A5%E8%AF%A2HBase%E8%A1%A8%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3/"/>
      <url>/2025/10/28/Spark-SQL%E6%9F%A5%E8%AF%A2HBase%E8%A1%A8%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="hbase-default-xml-file-seems-to-be-for-an-older-version"><a href="#hbase-default-xml-file-seems-to-be-for-an-older-version" class="headerlink" title="hbase-default.xml file seems to be for an older version"></a>hbase-default.xml file seems to be for an older version</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">spark-sql&gt;</span><span class="language-bash">SELECT FROM test.test_hbase_table LIMIT 100;</span></span><br><span class="line">java.lang.RuntimeException:java.lang.RuntimeException:hbase-default.xml file seems to be for an older version of HBase</span><br><span class="line"></span><br><span class="line"> (1.2.3),this version is 2.0.0.3.0.1.0.187</span><br><span class="line">        at org,apache.hadoop.hive.ql.metadata.Table.getStorageHandler(Table.java:292)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImplsSanon funSgetTableOptions1ssanon funSapplys7.apply(HiveClientImpl.scala:407)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImplsSanon funsgetTableOptions1ssanon funsapplys7.apply(HiveClientImpl.scala:374)</span><br><span class="line">        at scala.Option.map(Option.scala:146)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImplssanon funSgetTableOptions1.apply(HiveClientImpl.scala:374)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImplssanon funSgetTableOptions1.apply(HiveClientImpl.scala:372)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImplsSanonfunSwithHiveStates1.apply(HiveClientImpl.scala:281)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImpl.liftedTreels1(HiveClientImpl.scala:219)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImpl.retryLocked(HiveClientImpl.scala:218)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImpl.withHiveState(HiveClientImpl.scala:264)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImpl.getTableOption(HiveClientImpl.scala:372)</span><br><span class="line">        at org.apache.spark.sql.hive.client.Hiveclientsclass.getTable(Hiveclient.scala:81)</span><br><span class="line">        at org.apache.spark.sql.hive.client.HiveClientImpl.getTable(HiveClientImpl.scala:84)</span><br><span class="line">        at org.apache.spark.sql.hive.HiveExternalCatalog.getRawTable(HiveExternalCatalog.scala:118)</span><br><span class="line">        at org.apache.spark.sql.hive.HiveExternalCatalogssanon funSgetTables1.apply(HiveExternalCatalog.scala:700)</span><br><span class="line">        at org.apache.spark.sql.hive.HiveExternalCatalogssanon funSgetTables1.apply(HiveExternalCatalog.scala:700)</span><br><span class="line">        at org.apache.spark.sql.hive.HiveExternalCatalog.withClient(HiveExternalCatalog.scala:97)</span><br><span class="line">        at org.apache.spark.sql.hive.HiveExternalCatalog.getTable(HiveExternalCatalog.scala:699)</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯åœ¨hbase-site.xmlæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.defaults.for.version.skip<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">    Set to true to skip the &#x27;hbase.defaults.for.version&#x27; check. Setting this to true can be useful in contexts other than the other side of a maven generation; i.e. running in an ide. You&#x27;ll want to set this boolean to true to avoid seeing the RuntimException complaint: &quot;hbase-default.xml file seems to be for and old version of HBase (0.92.1), this version is X.X.X-SNAPSHOT&quot;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œhbase-site.xmlå¿…é¡»åœ¨SPARK_CLASSPATHä¸­ï¼Œç®€å•æ–¹æ³•æ˜¯å°†è¯¥æ–‡ä»¶æ”¾åˆ°sparkçš„confç›®å½•ä¸‹ã€‚</p><h1 id="unread-block-data"><a href="#unread-block-data" class="headerlink" title="unread block data"></a>unread block data</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">spark-sql&gt;</span><span class="language-bash">SELECT FROM test.test_hbase_table LIMIT 100;</span></span><br><span class="line">org.apache.spark.SparkException:Job aborted due to stage failure: Task 0 in stage 0.0 failed 4 times, most recent failure: Lost task 0.3 in stage 0.0 (TID 3, kde-test6, executor 1): Java.Lang.IllegalStateException: unread block data</span><br><span class="line">        at java.io.0bjectInputStreamsBlockDataInputStream.setBlockDataMode(ObjectInputStream.java:2783)</span><br><span class="line">        at java.io.ObjectInputStream.readobjecto(objectInputStream.java:1605)</span><br><span class="line">        at java.io.0bjectInputStream.defaultReadFields(ObjectInputstream.java:2287)</span><br><span class="line">        at java.io.ObjectInputStream,readSerialData(ObjectInputStream.java:2211)</span><br><span class="line">        at java.io..readordinaryobject(objectInputStream.java:2069)</span><br><span class="line">        at java.io.ObjectInputStream.readobjecte(objectInputstream.java:1573)</span><br><span class="line">        at java.io.objectInputstream,readobject(objectInputstream.java:431)</span><br><span class="line">        at org.apache.spark.serializer.JavaDeserializationstrean.readobject(JavaSerializer.scala:75)</span><br><span class="line">        at org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:114)</span><br><span class="line">        at org.apache.spark.executor.ExecutorsTaskRunner.run(Executor.scala:376)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutor.runworker(ThreadPoolExecutor.java:1149)</span><br><span class="line">        at java.util.concurrent.ThreadPoolExecutorsWorker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">Driver stacktrace:</span><br><span class="line">        at org.apache.spark.scheduler.DAGScheduler.orgSapachessparksschedulerSDAGSchedulerssfailJobAndIndependentStages(DAGScheduler.scala:1891)</span><br><span class="line">        at org.apache.spark.scheduler.DAGSchedulerssanonfunSabortStages1.apply(DAGScheduler.scala:1879)</span><br><span class="line">        at org.apache.spark.scheduler.DAGSchedulerssanonfunSabortStages1.apply(DAGScheduler.scala:1878)</span><br><span class="line">        at scala.collection.mutable.ResizableArraysclass.foreach(ResizableArray.scala:59)</span><br><span class="line">        at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)</span><br><span class="line">        at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1878)</span><br><span class="line">        at org.apache.spark.scheduler.DAGSchedulerssanonfunshandleTaskSetFaileds1.apply(DAGScheduler.scala:927)</span><br><span class="line">        at org.apache.spark.scheduler.DAGSchedulerssanon funshandleTaskSetFaileds1.apply(DAGScheduler.scala:927)</span><br><span class="line">        at scala.Option.foreach(Option.scala:257)</span><br><span class="line">        at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:927)</span><br><span class="line">        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2112)</span><br><span class="line">        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2061)</span><br><span class="line">        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2050)</span><br><span class="line">        at org.apache.spark.util.EventLoopssanons1.run(EventLoop.scala:49)</span><br><span class="line">        at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:738)</span><br><span class="line">        at org.apache.spark.SparkContext,runJob(SparkContext.scala:2061)</span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ³•ä¸€"><a href="#è§£å†³æ–¹æ³•ä¸€" class="headerlink" title="è§£å†³æ–¹æ³•ä¸€"></a>è§£å†³æ–¹æ³•ä¸€</h2><p>é€šè¿‡â€“jarså‚æ•°æŒ‡å®šéœ€è¦çš„åŒ…ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spark-sql --jars /usr/hdp/3.0.1.0-187/hive/lib/hive-hbase-handler-3.1.0.3.0.1.0-187.jar,/usr/lib/ams-hbase/lib/hbase-client-2.0.0.3.0.0.0-1634.jar,/usr/lib/ams-hbase/lib/hbase-common-2.0.0.3.0.0.0-1634.jar,/usr/lib/ams-hbase/lib/hbase-server-2.0.0.3.0.0.0-1634.jar,/usr/lib/ams-hbase/lib/hbase-hadoop2-compat-2.0.0.3.0.0.0-1634.jar,/usr/lib/ams-hbase/lib/guava-11.0.2.jar,/usr/lib/ams-hbase/lib/guava-11.0.2.jar,/usr/lib/ams-hbase/lib/hbase-protocol-2.0.0.3.0.0.0-1634.jar,/usr/lib/ams-hbase/lib/htrace-core-3.2.0-incubating.jar,/usr/lib/ams-hbase/lib/protobuf-java-2.5.0.jar,/usr/lib/ams-hbase/lib/metrics-core-3.2.1.jar</span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ³•äºŒ"><a href="#è§£å†³æ–¹æ³•äºŒ" class="headerlink" title="è§£å†³æ–¹æ³•äºŒ"></a>è§£å†³æ–¹æ³•äºŒ</h2><p>æ›´ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨spark-defaults.confä¸­æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spark.driver.extraClassPath    /usr/hdp/3.0.1.0-187/hive/lib/hive-hbase-handler-3.1.0.3.0.1.0-187.jar:/usr/lib/ams-hbase/lib/hbase-client-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/hbase-common-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/hbase-server-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/hbase-hadoop2-compat-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/guava-11.0.2.jar:/usr/lib/ams-hbase/lib/guava-11.0.2.jar:/usr/lib/ams-hbase/lib/hbase-protocol-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/htrace-core-3.2.0-incubating.jar:/usr/lib/ams-hbase/lib/protobuf-java-2.5.0.jar:/usr/lib/ams-hbase/lib/metrics-core-3.2.1.jar</span><br><span class="line">spark.executor.extraClassPath    /usr/hdp/3.0.1.0-187/hive/lib/hive-hbase-handler-3.1.0.3.0.1.0-187.jar:/usr/lib/ams-hbase/lib/hbase-client-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/hbase-common-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/hbase-server-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/hbase-hadoop2-compat-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/guava-11.0.2.jar:/usr/lib/ams-hbase/lib/guava-11.0.2.jar:/usr/lib/ams-hbase/lib/hbase-protocol-2.0.0.3.0.0.0-1634.jar:/usr/lib/ams-hbase/lib/htrace-core-3.2.0-incubating.jar:/usr/lib/ams-hbase/lib/protobuf-java-2.5.0.jar:/usr/lib/ams-hbase/lib/metrics-core-3.2.1.jar</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Spark </tag>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerä¿®æ”¹å·²æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„</title>
      <link href="/2025/10/28/Docker%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%9C%89%E5%AE%B9%E5%99%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/"/>
      <url>/2025/10/28/Docker%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%9C%89%E5%AE%B9%E5%99%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<p>æ­¤æ–‡æ˜¯åœ¨ç°åœ¨å®¹å™¨å®ä¾‹ä¸Šä¿®æ”¹ç«¯å£æ˜ å°„ï¼Œå¹¶ä¸å¸Œæœ›åˆ›å»ºæ–°çš„å®¹å™¨ï¼Œè¿™æ ·å¯ä»¥ä¿æŒåŸæœ‰å®¹å™¨ä¸­çš„æ•°æ®ã€‚</p><p>æ–¹æ³•æ˜¯ä¿®æ”¹å®¹å™¨ç›®å½•ä¸‹ hostconfig.json é…ç½®æ–‡ä»¶ä¸­çš„ PortBindings é…ç½®é¡¹å†…å®¹ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;PortBindings&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;8080/tcp&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;HostIp&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;HostPort&quot;</span><span class="punctuation">:</span><span class="string">&quot;8080&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å‰ä¸€ä¸ªæ•°å­—æ˜¯å®¹å™¨ç«¯å£ï¼Œåä¸€ä¸ªæ˜¯å®¿ä¸»æœºç«¯å£ã€‚å°†å®¿ä¸»æœºçš„8080ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„8080ç«¯å£ã€‚å¦‚ä¿®æ”¹ç°æœ‰ç«¯å£æ˜ å°„åˆ™æŠŠç«¯å£å·æ”¹æ‰å°±OKã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äº‘è®¡ç®— </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> äº‘è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL Workbench CSVå¯¼å…¥ç¼–ç é—®é¢˜</title>
      <link href="/2025/10/28/MySQL-Workbench-CSV%E5%AF%BC%E5%85%A5%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/"/>
      <url>/2025/10/28/MySQL-Workbench-CSV%E5%AF%BC%E5%85%A5%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>å¼‚å¸¸ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unhandled exception: &#x27;gbk&#x27; codec can&#x27;t decode byte 0xa2 in position 43; illegal multibyte sequence</span><br></pre></td></tr></table></figure><p>å¦‚å›¾ï¼š<br><img src="/images/202510/48.jpg"></p><p>å› ä¸ºWindowsç¯å¢ƒä¸‹Mysql Workbenchç¼–ç å™¨åªæœ‰gbkï¼Œè€Œcsvæ–‡ä»¶æ˜¯utf-8ç¼–ç çš„ï¼Œæ‰€ä»¥å¯¼è‡´è¯¥é—®é¢˜ã€‚å¦‚å›¾ï¼š<br><img src="/images/202510/49.jpg"></p><p>å°†csvç¼–ç æ”¹ä¸ºgbkåå†æ¬¡å¯¼å…¥æˆåŠŸã€‚å¦‚å›¾ï¼š<br><img src="/images/202510/50.jpg"></p><p>å¦å¤–ä¸€ç§æ€è·¯ï¼šä¸ºMysql Workbenchå®‰è£…UTF-8ç¼–ç å™¨ã€‚è¿™ç§æ–¹æ³•æ²¡æœ‰å®é™…è¿›è¡Œå°è¯•ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥æ¢ç´¢ä¸‹^_^</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL- </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨åˆ—è¡¨æ¯è¡Œæœ«å°¾è¿½åŠ å­—ç¬¦ä¸²çš„å‘½ä»¤</title>
      <link href="/2025/10/28/%E5%9C%A8%E5%88%97%E8%A1%A8%E6%AF%8F%E8%A1%8C%E6%9C%AB%E5%B0%BE%E8%BF%BD%E5%8A%A0%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/10/28/%E5%9C%A8%E5%88%97%E8%A1%A8%E6%AF%8F%E8%A1%8C%E6%9C%AB%E5%B0%BE%E8%BF%BD%E5%8A%A0%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>å‘½ä»¤æ ·ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">_config.next.yml  _config.yml  db.json  node_modules  package.json  package-lock.json  public  scaffolds  <span class="built_in">source</span>  themes</span><br><span class="line">$ <span class="built_in">ls</span> | grep json</span><br><span class="line">db.json</span><br><span class="line">package.json</span><br><span class="line">package-lock.json</span><br><span class="line">$ <span class="built_in">ls</span> | grep json | sed</span><br><span class="line"></span><br><span class="line"> <span class="string">&quot;s:$: abc:&quot;</span></span><br><span class="line">db.json abc</span><br><span class="line">package.json abc</span><br><span class="line">package-lock.json abc</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤æ˜¯åœ¨æœ«å°¾è¿½åŠ â€œ abcâ€ã€‚å…³é”®å°±æ˜¯sedå·¥å…·çš„ä½¿ç”¨ï¼Œè¯¦ç»†çš„å¯ä»¥æŸ¥çœ‹sedä½¿ç”¨æ‰‹å†Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ¬¡DataNodeè´Ÿè½½ä¸¥é‡ä¸å‡è¡¡é—®é¢˜çš„æ’æŸ¥è¿‡ç¨‹</title>
      <link href="/2025/10/28/%E4%B8%80%E6%AC%A1DataNode%E8%B4%9F%E8%BD%BD%E4%B8%A5%E9%87%8D%E4%B8%8D%E5%9D%87%E8%A1%A1%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%92%E6%9F%A5%E8%BF%87%E7%A8%8B/"/>
      <url>/2025/10/28/%E4%B8%80%E6%AC%A1DataNode%E8%B4%9F%E8%BD%BD%E4%B8%A5%E9%87%8D%E4%B8%8D%E5%9D%87%E8%A1%A1%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%92%E6%9F%A5%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ä¸¤å¤©å‘ç°Hadoopé›†ç¾¤ä¸­çš„Datanodeå­˜å‚¨ä¸¥é‡ä¸å‡è¡¡ï¼Œæœ‰ä¸€å°DNå­˜å‚¨å¢é•¿éå¸¸å¿«ï¼Œè¿œè¿œè¶…å‡ºäº†å…¶ä»–èŠ‚ç‚¹ã€‚å³ä½¿å¯åŠ¨äº†Balanceè¿›åŸä¹Ÿæ— æ³•è§£å†³é—®é¢˜ã€‚</p><p>ç»è¿‡æ’æŸ¥å‘ç°æ˜¯å› ä¸€ä¸ªå¼‚å¸¸ä»»åŠ¡åœç•™åœ¨reduceé˜¶æ®µï¼Œåœ¨ä¸åœçš„å‘HDFSå†™æ•°æ®ã€‚è€Œè¿™ä¸ªReduce Taskå°±æ˜¯åœ¨å­˜å‚¨å¢é•¿éå¸¸å¿«çš„èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ã€‚åˆ†æåŸå› æ˜¯Reduce Taskä¼šä¼˜å…ˆå‘è¿è¡Œåœ¨çš„èŠ‚ç‚¹æœ¬åœ°å†™æ•°æ®ï¼Œå‰¯æœ¬ä¼šåˆ†å¸ƒåœ¨å…¶ä»–èŠ‚ç‚¹ä¸Šã€‚æ‰€ä»¥ï¼Œé—®é¢˜èŠ‚ç‚¹å¢é•¿éå¸¸å¿«ï¼Œè€Œå…¶ä»–èŠ‚ç‚¹å¹¶çœ‹ä¸å‡ºæ˜æ˜¾å¼‚å¸¸ã€‚</p><p>ä»¥ä¸‹æ˜¯æ’æŸ¥è¿‡ç¨‹çš„å›¾ç‰‡ï¼š<br><img src="/images/202510/43.jpg"><br><img src="/images/202510/44.jpg"><br><img src="/images/202510/45.jpg"><br><img src="/images/202510/46.jpg"><br><img src="/images/202510/47.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼å­˜å‚¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxæŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦é‡å¯è¿‡çš„ä¸€ç§æ–¹æ³•</title>
      <link href="/2025/10/28/Linux%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%98%AF%E5%90%A6%E9%87%8D%E5%90%AF%E8%BF%87%E7%9A%84%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95/"/>
      <url>/2025/10/28/Linux%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%98%AF%E5%90%A6%E9%87%8D%E5%90%AF%E8%BF%87%E7%9A%84%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ uptime å‘½ä»¤å¯ä»¥æ–¹ä¾¿æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å‘ç”Ÿäº†é‡å¯ã€‚uptime å‘½ä»¤æ‰‹å†Œä¸­è¯´ï¼šuptimeä¼šåœ¨ä¸€è¡Œä¸­æ˜¾ç¤ºä¸‹åˆ—ä¿¡æ¯ï¼šå½“å‰æ—¶é—´ã€ç³»ç»Ÿè¿è¡Œäº†å¤šä¹…æ—¶é—´ã€å½“å‰ç™»å½•çš„ç”¨æˆ·æœ‰å¤šå°‘ï¼Œä»¥åŠå‰ 1ã€5 å’Œ 15 åˆ†é’Ÿç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ã€‚å½“ç„¶å¯ä»¥æ·»åŠ å‚æ•°ä»¥ä¸åŒçš„æ–¹å¼å±•ç¤ºä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">uptime</span></span><br><span class="line"> 17:30:22 up 23 min,  1 user,  load average: 0.55, 0.63, 0.46</span><br><span class="line">$ <span class="built_in">uptime</span> -p</span><br><span class="line">up 25 minutes</span><br><span class="line">$ <span class="built_in">uptime</span> -s</span><br><span class="line">2022-03-09 17:06:48</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SourceForgeä¸‹è½½åŠ é€Ÿ</title>
      <link href="/2025/10/28/SourceForge%E4%B8%8B%E8%BD%BD%E5%8A%A0%E9%80%9F/"/>
      <url>/2025/10/28/SourceForge%E4%B8%8B%E8%BD%BD%E5%8A%A0%E9%80%9F/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸ªåŠ é€Ÿé•œåƒç½‘ç«™â€œliquidtelecomâ€ï¼Œä»¥TCL</p><p>ä¸‹è½½ä¸ºä¾‹ï¼ŒåŸä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://jaist.dl.sourceforge.net/project/tcl/Tcl/8.6.11/tcl8.6.11-src.tar.gz</span><br></pre></td></tr></table></figure><p>æ›¿æ¢åçš„ä¸‹è½½åœ°å€ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://liquidtelecom.dl.sourceforge.net/project/tcl/Tcl/8.6.11/tcl8.6.11-src.tar.gz</span><br></pre></td></tr></table></figure><p>ä¸‹è½½é€Ÿåº¦éå¸¸å¿«ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> SourceForge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2025/10/28/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/10/28/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<ul><li>æŒ‡å®šåç§°å¯åŠ¨å®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name Redis -it centos bash</span><br></pre></td></tr></table></figure><ul><li>åˆ—å‡ºæ‰€æœ‰å®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">CONTAINER ID   IMAGE    COMMAND    CREATED        STATUS                       PORTS     NAMES</span><br><span class="line">8aeb92ae184b   centos   <span class="string">&quot;bash&quot;</span>     4 hours ago    Exited (130) 5 minutes ago             Redis</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨å·²å­˜åœ¨çš„å®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start Redis</span><br></pre></td></tr></table></figure><ul><li>è¿æ¥å·²è¿è¡Œçš„å®¹å™¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it Redis bash</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> äº‘è®¡ç®— </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> äº‘è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo éƒ¨ç½²æ—¶å‡ºç° Push cannot contain secrets å¼‚å¸¸</title>
      <link href="/2025/10/28/Hexo-%E9%83%A8%E7%BD%B2%E6%97%B6%E5%87%BA%E7%8E%B0-Push-cannot-contain-secrets-%E5%BC%82%E5%B8%B8/"/>
      <url>/2025/10/28/Hexo-%E9%83%A8%E7%BD%B2%E6%97%B6%E5%87%BA%E7%8E%B0-Push-cannot-contain-secrets-%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨æ‰§è¡Œ <code>hexo deploy</code> éƒ¨ç½²æ—¶ï¼Œå‡ºç°ä»¥ä¸‹å¼‚å¸¸ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">remote: error: GH013: Repository rule violations found for refs/heads/master.</span><br><span class="line">remote: </span><br><span class="line">remote: - GITHUB PUSH PROTECTION</span><br><span class="line">remote:   â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">remote:     Resolve the following violations before pushing again</span><br><span class="line">remote: </span><br><span class="line">remote:     - Push cannot contain secrets</span><br><span class="line">remote: </span><br><span class="line">remote:     </span><br><span class="line">remote:      (?) Learn how to resolve a blocked push</span><br><span class="line">remote:      https://docs.github.com/code-security/secret-scanning/working-with-secret-scanning-and-push-protection/working-with-push-protection-from-the-command-line#resolving-a-blocked-push</span><br><span class="line">remote:     </span><br><span class="line">remote:      (?) This repository does not have Secret Scanning enabled, but is eligible. Enable Secret Scanning to view and manage detected secrets.</span><br><span class="line">remote:      Visit the repository settings page, https://github.com/zhang-jc/zhang-jc.github.io/settings/security_analysis</span><br><span class="line">remote:     </span><br><span class="line">remote:     </span><br><span class="line">remote:       â€”â€” Amazon AWS Access Key ID â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">remote:        locations:</span><br><span class="line">remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0f</span><br><span class="line">remote:            path: search.xml:6170</span><br><span class="line">remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0f</span><br><span class="line">remote:            path: search.xml:6170</span><br><span class="line">remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0f</span><br><span class="line">remote:            path: search.xml:6170</span><br><span class="line">remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0f</span><br><span class="line">remote:            path: search.xml:6170</span><br><span class="line">remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0f</span><br><span class="line">remote:            path: search.xml:6173</span><br><span class="line">remote:     </span><br><span class="line">remote:        (?) To push, remove secret from commit(s) or follow this URL to allow the secret.</span><br><span class="line">remote:        https://github.com/zhang-jc/zhang-jc.github.io/security/secret-scanning/unblock-secret/34dtqbomcHD2FyadsoLZcpSJp6k</span><br><span class="line">remote:     </span><br><span class="line">remote: </span><br><span class="line">remote: </span><br><span class="line">To github.com:zhang-jc/zhang-jc.github.io.git</span><br><span class="line"> ! [remote rejected] HEAD -&gt; master (push declined due to repository rule violations)</span><br><span class="line">error: æ— æ³•æ¨é€ä¸€äº›å¼•ç”¨åˆ° &#x27;github.com:zhang-jc/zhang-jc.github.io.git&#x27;</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: Spawn failed</span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (/home/zhangjc/github/zhangjc/node_modules/hexo-deployer-git/node_modules/hexo-util/lib/spawn.js:51:21)</span><br><span class="line">    at ChildProcess.emit (node:events:519:28)</span><br><span class="line">    at ChildProcess._handle.onexit (node:internal/child_process:293:12)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„å…³é”®æç¤ºä¿¡æ¯æ˜¯ï¼š</p><pre><code class="text">remote:       â€”â€” Amazon AWS Access Key ID â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”remote:        locations:remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0fremote:            path: search.xml:6170remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0fremote:            path: search.xml:6170remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0fremote:            path: search.xml:6170remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0fremote:            path: search.xml:6170remote:          - commit: 2573f22a136850f3aa0bf54402cdf02f882b9e0fremote:            path: search.xml:6173</code></pre><p>ä½¿ç”¨å…³é”®å­— <code>AWS</code> æŸ¥æ‰¾ <code>search.xml</code> å‘ç°æ˜¯å› ä¸ºä¸€ç¯‡åšæ–‡ä¸­ç²˜è´´çš„ä¸€ä¸ªä¸‹è½½åœ°å€ä¸­åŒ…å«äº†å¯†é’¥ä¿¡æ¯å¯¼è‡´çš„ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="/images/202510/42.png"></p><p>æ‰¾åˆ°ä¸Šå›¾ä¸­å‡ºç°é—®é¢˜çš„é“¾æ¥ï¼Œè„±æ•åé‡æ–°æäº¤æ‰§è¡Œ <code>hexo g -d</code> é—®é¢˜ä»ç„¶å‡ºç°ã€‚åˆ é™¤ <code>public</code> å’Œ <code>.deploy_git</code> ç›®å½•ï¼Œå†æ¬¡æ‰§è¡Œé—®é¢˜è§£å†³ã€‚ğŸ’</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wgetä¸‹è½½æ–‡ä»¶é‡å‘½å</title>
      <link href="/2025/10/27/wget%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D/"/>
      <url>/2025/10/27/wget%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D/</url>
      
        <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ wget -c <span class="string">&#x27;https://camel-builds.s3.amazonaws.com/ActiveTcl/x86_64-linux-glibc-2.17/20210816T193804Z/ActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327.tar.gz?****************=***************************=******************************************-east-1%2Fs3%2F***********&amp;X-Amz-Date=20220224T060023Z&amp;*******************************=host&amp;***********=****************************************************************&#x27;</span></span><br><span class="line">--2022-02-24 06:01:04--  https://camel-builds.s3.amazonaws.com/ActiveTcl/x86_64-linux-glibc-2.17/20210816T193804Z/ActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327.tar.gz?****************=***************************=************************************-east-1%2Fs3%2F***********&amp;X-Amz-Date=20220224T060023Z&amp;*******************************=host&amp;***********=*****************************************************</span><br><span class="line">Resolving camel-builds.s3.amazonaws.com (camel-builds.s3.amazonaws.com)... 52.216.240.84</span><br><span class="line">Connecting to camel-builds.s3.amazonaws.com (camel-builds.s3.amazonaws.com)|52.216.240.84|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 27637315 (26M) [application/gzip]</span><br><span class="line">ActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327.tar.gz?****************=*********************************************************************-east-1%2Fs3%2F***********&amp;X-Amz-Date=20220224T060023Z&amp;*******************************=host&amp;***********=****************************************************************: File name too long</span><br><span class="line"></span><br><span class="line">Cannot write to <span class="string">&#x27;ActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327.tar.gz?****************=********************************************************************-east-1%2Fs3%2F***********&amp;X-Amz-Date=20220224T060023Z&amp;*******************************=host&amp;***********=***************************************************************&#x27;</span> (Success).</span><br></pre></td></tr></table></figure><p>å› ä¸ºå†™å…¥æ–‡ä»¶åå¤ªé•¿äº†ï¼Œå¯¼è‡´å†™å…¥å¤±è´¥ï¼Œæ–¹æ³•æ˜¯å¯¹ä¸‹è½½æ–‡ä»¶é‡å‘½åã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -c <span class="string">&#x27;https://camel-builds.s3.amazonaws.com/ActiveTcl/x86_64-linux-glibc-2.17/20210816T193804Z/ActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327.tar.gz?****************=**********************************************************************-east-1%2Fs3%2F***********&amp;X-Amz-Date=20220224T060023Z&amp;*******************************=host&amp;***********=***************************************************************&#x27;</span> -O tcl-8.6.tar.gz</span><br></pre></td></tr></table></figure><blockquote><p>URL åšäº†è„±æ•å¤„ç†ï¼Œå¦åˆ™åœ¨ Hexo éƒ¨ç½²æ—¶ä¼šå‡ºç°å¼‚å¸¸ã€‚é—´å¦å¤–ä¸€ç¯‡åšæ–‡ï¼š<a href="https://www.zhangjc.com/2025/10/28/Hexo-%E9%83%A8%E7%BD%B2%E6%97%B6%E5%87%BA%E7%8E%B0-Push-cannot-contain-secrets-%E5%BC%82%E5%B8%B8/">Hexo éƒ¨ç½²æ—¶å‡ºç° Push cannot contain secrets å¼‚å¸¸</a>ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisç¼–è¯‘å®‰è£…è¿‡ç¨‹é—®é¢˜</title>
      <link href="/2025/10/27/Redis%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E9%97%AE%E9%A2%98/"/>
      <url>/2025/10/27/Redis%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="jemalloc-jemalloc-h"><a href="#jemalloc-jemalloc-h" class="headerlink" title="jemalloc&#x2F;jemalloc.h"></a>jemalloc&#x2F;jemalloc.h</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory</span><br><span class="line"> #include &lt;jemalloc/jemalloc.h&gt;</span><br><span class="line">                               ^</span><br><span class="line">compilation terminated.</span><br><span class="line">make[1]: *** [adlist.o] Error 1</span><br><span class="line">make[1]: Leaving directory `/home/redis/redis-stable/src&#x27;</span><br><span class="line">make: *** [all] Error 2</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make distclean</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p>å¦‚æœé—®é¢˜æœªè§£å†³åˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å†è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make MALLOC=libc</span><br></pre></td></tr></table></figure><h1 id="tcl-8-5"><a href="#tcl-8-5" class="headerlink" title="tcl 8.5"></a>tcl 8.5</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">You need tcl 8.5 or newer in order to run the Redis test</span><br><span class="line">make[1]: *** [test] Error 1</span><br><span class="line">make[1]: Leaving directory `/home/redis/redis-stable/src&#x27;</span><br><span class="line">make: *** [test] Error 2</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ <a href="https://link.zhihu.com/?target=https://www.activestate.com/">Active State</a>ã€‚æ­¤å¤„ä¸‹è½½äºŒè¿›åˆ¶åŒ…â€œActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327.tar.gzâ€ã€‚å®‰è£…è¿‡ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar xzvf ActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327.tar.gz</span><br><span class="line"><span class="built_in">mv</span> ActiveTcl-8.6.11.1.0000-x86_64-linux-glibc-2.17-e4e2f327 ActiveTcl-8.6</span><br><span class="line"><span class="built_in">cd</span> ActiveTcl-8.6</span><br><span class="line">./install.sh</span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºè¾“å…¥å®Œæˆå®‰è£…è¿‡ç¨‹ã€‚å°†Tcl8.6åŠ å…¥Pathä¸­ï¼Œå°†ä»¥ä¸‹å†…å®¹æ·»åŠ è‡³&#x2F;etc&#x2F;profile.d&#x2F;tcl.shï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> TCL_HOME=/opt/ActiveTcl-8.6</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$TCL_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åŠ è½½ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œåœ¨æˆ‘çš„ç¯å¢ƒé‡Œé¢ä»ç„¶æç¤ºä¸Šé¢çš„é”™è¯¯ã€‚æŸ¥çœ‹runtestè„šæœ¬æºç ï¼Œå¹¶ä½¿ç”¨whichå‘½ä»¤éªŒè¯æ‰å‘ç°æ˜¯æˆ‘çš„Docker</p><p>ç¯å¢ƒä¸­æ²¡æœ‰å®‰è£…whichå‘½ä»¤ã€‚-_-||</p><p>æ‰€ä»¥ï¼Œä¸€è¨€ä¸åˆå°±æ’¸æºä»£ç æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯(*ï¿£ï¸¶ï¿£)</p><h1 id="release-h"><a href="#release-h" class="headerlink" title="release.h"></a>release.h</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">release.c:37:21: fatal error: release.h: No such file or directory</span><br><span class="line"> #include &quot;release.h&quot;</span><br><span class="line">                     ^</span><br><span class="line">compilation terminated.</span><br><span class="line">make[1]: *** [release.o] Error 1</span><br></pre></td></tr></table></figure><p>ç«Ÿç„¶æ˜¯å› ä¸ºä¸‹é¢çš„è„šæœ¬æ²¡æœ‰æƒé™å¯¼è‡´çš„ã€‚é‡åˆ°é—®é¢˜ä»”ç»†æ£€æŸ¥Logçš„é‡è¦æ€§å•Šï¼ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> src &amp;&amp; make all</span><br><span class="line">sh: ./mkreleasehdr.sh: Permission denied</span><br><span class="line">make[1]: Entering directory `/home/redis/redis-6.2.6/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">    CC Makefile.dep</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10ä¸‹Mavenç¼–è¯‘Hive2.3.0æ‰¾ä¸åˆ°tools.jaré—®é¢˜</title>
      <link href="/2025/10/27/Windows10%E4%B8%8BMaven%E7%BC%96%E8%AF%91Hive2-3-0%E6%89%BE%E4%B8%8D%E5%88%B0tools-jar%E9%97%AE%E9%A2%98/"/>
      <url>/2025/10/27/Windows10%E4%B8%8BMaven%E7%BC%96%E8%AF%91Hive2-3-0%E6%89%BE%E4%B8%8D%E5%88%B0tools-jar%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>è¯¦ç»†æŠ¥é”™ä¿¡æ¯å¦‚å›¾ï¼š<br><img src="/images/202510/39.jpg"></p><p>åœ¨Hiveæºä»£ç ç›®å½•ä¸‹æœç´¢tools.jarå‘ç°æ²¡æœ‰æŒ‡æ˜ç‰¹å®šç›®å½•çš„é…ç½®ã€‚å¦‚ä¸‹ï¼š<br><img src="/images/202510/40.png"></p><p>æ€€ç–‘æ˜¯Mavené…ç½®æˆ–è€…ä¾èµ–åŒ…ä¸­å­˜åœ¨æŒ‡å®šçš„æƒ…å†µã€‚åœ¨.m2ç›®å½•ä¸‹æœç´¢ï¼š<br><img src="/images/202510/41.jpg"></p><p>ä»ä¸Šé¢çš„æœç´¢å¯ä»¥çœ‹åˆ°å¾ˆå¤šä»${JAVA_HOME}ä¸‹æŸ¥æ‰¾è¯¥åŒ…çš„é…ç½®ã€‚æ£€æŸ¥ç¯å¢ƒå˜é‡${JAVA_HOME}å‘ç°æœªé…ç½®ï¼Œé”™è¯¯åŸå› å°±å‡ºåœ¨è¿™é‡Œã€‚</p><p>é…ç½®JAVA_HOMEåé—®é¢˜è§£å†³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®ä»“åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkdownåŸºæœ¬è¯­æ³•</title>
      <link href="/2025/10/27/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2025/10/27/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="1-åŸºæœ¬è¯­æ³•"><a href="#1-åŸºæœ¬è¯­æ³•" class="headerlink" title="1. åŸºæœ¬è¯­æ³•"></a>1. åŸºæœ¬è¯­æ³•</h1><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å•ä¸ªå›è½¦ã€è¿™é‡Œæœ‰ä¸€ä¸ªå›è½¦ç¬¦-&gt;ã€‘</span><br><span class="line">è§†ä¸ºç©ºæ ¼ã€‚</span><br><span class="line">è¿ç»­å›è½¦ã€è¿™é‡Œæœ‰ä¸¤ä¸ªå›è½¦ç¬¦-&gt;ã€‘</span><br><span class="line"></span><br><span class="line">è§†ä¸ºåˆ†æ®µã€‚</span><br><span class="line">è¡Œå°¾åŠ ä¸¤ä¸ªç©ºæ ¼ã€è¿™é‡Œæœ‰ä¸¤ä¸ªç©ºæ ¼å’Œä¸€ä¸ªå›è½¦ç¬¦-&gt;ã€‘  </span><br><span class="line">å³å¯æ®µå†…æ¢è¡Œã€‚</span><br><span class="line"><span class="emphasis">*è¿™æ˜¯æ–œä½“*</span></span><br><span class="line"><span class="strong">**è¿™æ˜¯ç²—ä½“**</span></span><br><span class="line">\ä¸ºè½¬ä¹‰å­—ç¬¦ã€è¿™æ˜¯ä¸€ä¸ªæ–œæ  \\ ã€‘</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>å•ä¸ªå›è½¦ã€è¿™é‡Œæœ‰ä¸€ä¸ªå›è½¦ç¬¦-&gt;ã€‘<br>è§†ä¸ºç©ºæ ¼ã€‚<br>è¿ç»­å›è½¦ã€è¿™é‡Œæœ‰ä¸¤ä¸ªå›è½¦ç¬¦-&gt;ã€‘</p><p>è§†ä¸ºåˆ†æ®µã€‚<br>è¡Œå°¾åŠ ä¸¤ä¸ªç©ºæ ¼ã€è¿™é‡Œæœ‰ä¸¤ä¸ªç©ºæ ¼å’Œä¸€ä¸ªå›è½¦ç¬¦-&gt;ã€‘<br>å³å¯æ®µå†…æ¢è¡Œã€‚<br>è¿™æ˜¯æ–œä½“<br>è¿™æ˜¯ç²—ä½“<br>\ä¸ºè½¬ä¹‰å­—ç¬¦ã€è¿™æ˜¯ä¸€ä¸ª\ã€‘</p><h1 id="2-æ ‡é¢˜"><a href="#2-æ ‡é¢˜" class="headerlink" title="2. æ ‡é¢˜"></a>2. æ ‡é¢˜</h1><h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># è¿™æ˜¯ä¸€çº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">## è¿™æ˜¯äºŒçº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">#### è¿™æ˜¯å››çº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">##### è¿™æ˜¯äº”çº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">###### è¿™æ˜¯å…­çº§æ ‡é¢˜</span></span><br><span class="line">åœ¨è¡Œä¸‹é¢åŠ  = è¡¨ç¤ºå¤§æ ‡é¢˜</span><br><span class="line">åœ¨è¡Œä¸‹é¢åŠ  - è¡¨ç¤ºå°æ ‡é¢˜</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ-1"><a href="#æ•ˆæœ-1" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><h1 id="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸€çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸€çº§æ ‡é¢˜</h1><h2 id="è¿™æ˜¯äºŒçº§æ ‡é¢˜"><a href="#è¿™æ˜¯äºŒçº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯äºŒçº§æ ‡é¢˜"></a>è¿™æ˜¯äºŒçº§æ ‡é¢˜</h2><h3 id="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸‰çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</h3><h4 id="è¿™æ˜¯å››çº§æ ‡é¢˜"><a href="#è¿™æ˜¯å››çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯å››çº§æ ‡é¢˜"></a>è¿™æ˜¯å››çº§æ ‡é¢˜</h4><h5 id="è¿™æ˜¯äº”çº§æ ‡é¢˜"><a href="#è¿™æ˜¯äº”çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯äº”çº§æ ‡é¢˜"></a>è¿™æ˜¯äº”çº§æ ‡é¢˜</h5><h6 id="è¿™æ˜¯å…­çº§æ ‡é¢˜"><a href="#è¿™æ˜¯å…­çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯å…­çº§æ ‡é¢˜"></a>è¿™æ˜¯å…­çº§æ ‡é¢˜</h6><h1 id="åœ¨è¡Œä¸‹é¢åŠ -è¡¨ç¤ºå¤§æ ‡é¢˜"><a href="#åœ¨è¡Œä¸‹é¢åŠ -è¡¨ç¤ºå¤§æ ‡é¢˜" class="headerlink" title="åœ¨è¡Œä¸‹é¢åŠ  &#x3D; è¡¨ç¤ºå¤§æ ‡é¢˜"></a>åœ¨è¡Œä¸‹é¢åŠ  &#x3D; è¡¨ç¤ºå¤§æ ‡é¢˜</h1><h2 id="åœ¨è¡Œä¸‹é¢åŠ -è¡¨ç¤ºå°æ ‡é¢˜"><a href="#åœ¨è¡Œä¸‹é¢åŠ -è¡¨ç¤ºå°æ ‡é¢˜" class="headerlink" title="åœ¨è¡Œä¸‹é¢åŠ  - è¡¨ç¤ºå°æ ‡é¢˜"></a>åœ¨è¡Œä¸‹é¢åŠ  - è¡¨ç¤ºå°æ ‡é¢˜</h2><blockquote><p>è¯´æ˜ åœ¨è¡Œé¦–æ·»åŠ  1 åˆ° 6 ä¸ª # ï¼Œè¡¨ç¤º 1 åˆ° 6 çº§æ ‡é¢˜ã€‚ Markdown å…±æœ‰6çº§æ ‡é¢˜ã€‚åœ¨æ–‡å­—è¡Œä¸‹é¢åŠ  &#x3D; æˆ–è€… - åˆ†åˆ«è¡¨ç¤ºå¤§æ ‡é¢˜å’Œå°æ ‡é¢˜ã€‚</p></blockquote><h1 id="3-åˆ—è¡¨"><a href="#3-åˆ—è¡¨" class="headerlink" title="3. åˆ—è¡¨"></a>3. åˆ—è¡¨</h1><h2 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> æ— åºåˆ—è¡¨é¡¹ç›®1</span><br><span class="line"><span class="bullet">-</span> æ— åºåˆ—è¡¨é¡¹ç›®2</span><br><span class="line"><span class="bullet">-</span> æ— åºåˆ—è¡¨é¡¹ç›®3</span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ªåˆ—è¡¨ä¸èƒ½ç›¸é‚»ï¼Œå¦åˆ™ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> æœ‰åºåˆ—è¡¨é¡¹ç›®1</span><br><span class="line"><span class="bullet">2.</span> æœ‰åºåˆ—è¡¨é¡¹ç›®2</span><br><span class="line"><span class="bullet">3.</span> æœ‰åºåˆ—è¡¨é¡¹ç›®3</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯åµŒå¥—åˆ—è¡¨ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å¤–å±‚åˆ—è¡¨é¡¹ç›®1</span><br><span class="line"><span class="bullet">+</span> å†…å±‚åˆ—è¡¨é¡¹ç›®11</span><br><span class="line"><span class="bullet">+</span> å†…å±‚åˆ—è¡¨é¡¹ç›®12</span><br><span class="line"><span class="bullet">-</span> å¤–å±‚åˆ—è¡¨é¡¹ç›®2</span><br><span class="line"><span class="bullet">+</span> å†…å±‚åˆ—è¡¨é¡¹ç›®21</span><br><span class="line"><span class="bullet">+</span> å†…å±‚åˆ—è¡¨é¡¹ç›®22</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ-2"><a href="#æ•ˆæœ-2" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><ul><li>æ— åºåˆ—è¡¨é¡¹ç›®1</li><li>æ— åºåˆ—è¡¨é¡¹ç›®2</li><li>æ— åºåˆ—è¡¨é¡¹ç›®3</li></ul><p>ä¸¤ä¸ªåˆ—è¡¨ä¸èƒ½ç›¸é‚»ï¼Œå¦åˆ™ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p><ol><li>æœ‰åºåˆ—è¡¨é¡¹ç›®1</li><li>æœ‰åºåˆ—è¡¨é¡¹ç›®2</li><li>æœ‰åºåˆ—è¡¨é¡¹ç›®3</li></ol><p>ä¸‹é¢æ˜¯åµŒå¥—åˆ—è¡¨ï¼š</p><ul><li>å¤–å±‚åˆ—è¡¨é¡¹ç›®1<ul><li>å†…å±‚åˆ—è¡¨é¡¹ç›®11</li><li>å†…å±‚åˆ—è¡¨é¡¹ç›®12</li></ul></li><li>å¤–å±‚åˆ—è¡¨é¡¹ç›®2<ul><li>å†…å±‚åˆ—è¡¨é¡¹ç›®21</li><li>å†…å±‚åˆ—è¡¨é¡¹ç›®22</li></ul></li></ul><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>æ³¨æ„ï¼Œä¸¤ä¸ªåˆ—è¡¨ä¸èƒ½ç›¸é‚»ï¼Œå¦åˆ™ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼›å†…å±‚åˆ—è¡¨é¡¹ç›®å‰éœ€è¦æœ‰ç¼©è¿›ã€‚</p><h1 id="4-åˆ†å‰²çº¿"><a href="#4-åˆ†å‰²çº¿" class="headerlink" title="4. åˆ†å‰²çº¿"></a>4. åˆ†å‰²çº¿</h1><h2 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">ä¸Šé¢æ˜¯ä¸€æ¡åˆ†å‰²çº¿</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ-3"><a href="#æ•ˆæœ-3" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><hr><p>ä¸Šé¢æ˜¯ä¸€æ¡åˆ†å‰²çº¿</p><h1 id="5-ç¨‹åºä»£ç "><a href="#5-ç¨‹åºä»£ç " class="headerlink" title="5. ç¨‹åºä»£ç "></a>5. ç¨‹åºä»£ç </h1><h2 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Javaï¼š</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeView</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ-4"><a href="#æ•ˆæœ-4" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>Javaï¼š</p><pre><code>public class CodeView &#123;    public static void main(String[] args) &#123;        System.out.println(&quot;Hello World!&quot;);    &#125;&#125;</code></pre><h2 id="è¯´æ˜-1"><a href="#è¯´æ˜-1" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>è¡Œçš„å¼€å¤´ç©º4ä¸ªç©ºæ ¼æˆ–è€…tabç¬¦ï¼Œè¡¨ç¤ºç¨‹åºä»£ç ã€‚</p><h1 id="6-å¼•ç”¨"><a href="#6-å¼•ç”¨" class="headerlink" title="6. å¼•ç”¨"></a>6. å¼•ç”¨</h1><h2 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; è¿™æ˜¯å¼•ç”¨æ–‡å­—</span></span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ-5"><a href="#æ•ˆæœ-5" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><blockquote><p>è¿™æ˜¯å¼•ç”¨æ–‡å­—</p></blockquote><h1 id="7-å…¶ä»–"><a href="#7-å…¶ä»–" class="headerlink" title="7. å…¶ä»–"></a>7. å…¶ä»–</h1><h2 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;http://example.com/&gt;</span></span><br><span class="line">[<span class="string">é“¾æ¥æ–‡å­—</span>](<span class="link">http://example.com/ &quot;æ ‡é¢˜æ–‡å­—&quot;</span>)</span><br><span class="line">![<span class="string">å›¾ç‰‡æ–‡å­—</span>](<span class="link">/uploads/avatar.jpg &quot;å›¾ç‰‡æ–‡å­—&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ-6"><a href="#æ•ˆæœ-6" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><a href="http://example.com/">http://example.com/</a></p><p><a href="http://example.com/" title="æ ‡é¢˜æ–‡å­—">é“¾æ¥æ–‡å­—</a></p><p><img src="/images/avatar.jpg" alt="å›¾ç‰‡æ–‡å­—" title="å›¾ç‰‡æ–‡å­—"></p><h2 id="è¯´æ˜-2"><a href="#è¯´æ˜-2" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><ul><li>ç›´æ¥æ˜¾ç¤ºé“¾æ¥åœ°å€ï¼Œåˆ™ç”¨ &lt;&gt; åŒ…å›´é“¾æ¥å³å¯ã€‚</li><li>é“¾æ¥è¦æ˜¾ç¤ºçš„æ–‡å­—æ”¾åˆ° [] ä¸­ã€‚</li><li>é“¾æ¥åœ°å€æ”¾åˆ° [] åç´§è·Ÿçš„ ()ä¸­ã€‚</li><li>è¦æ˜¾ç¤ºé“¾æ¥æ ‡é¢˜æ–‡å­—ï¼ˆé¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤ºçš„å†…å®¹ï¼‰åˆ™åœ¨é“¾æ¥ååŠ ç©ºæ ¼ï¼Œä¸”æ ‡é¢˜æ–‡å­—æ”¾åˆ°â€â€ä¸­ã€‚</li><li>å›¾ç‰‡è·Ÿé“¾æ¥ä¸€æ ·ï¼Œåªæ˜¯åœ¨æœ€å‰é¢åŠ  ! ç¬¦å·ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDBä¸­sumçš„æ–¹æ³•</title>
      <link href="/2025/10/27/MongoDB%E4%B8%ADsum%E7%9A%84%E6%96%B9%E6%B3%95/"/>
      <url>/2025/10/27/MongoDB%E4%B8%ADsum%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>MongoDBä¸­æ±‚å’Œçš„æ–¹æ³•æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p><h1 id="èšåˆç®¡é“ï¼ˆAggregation-Pipelinesï¼‰"><a href="#èšåˆç®¡é“ï¼ˆAggregation-Pipelinesï¼‰" class="headerlink" title="èšåˆç®¡é“ï¼ˆAggregation Pipelinesï¼‰"></a>èšåˆç®¡é“ï¼ˆAggregation Pipelinesï¼‰</h1><p>ä»¥ä¸‹æ˜¯MongoDBå®˜ç½‘çš„ç¤ºä¾‹ï¼Œå¾ˆæ¸…æ¥šã€‚æ³¨æ„ï¼Œç”¨æ¥ç»Ÿè®¡çš„ field çš„æ•°æ®ç±»å‹å¾—æ˜¯æ•°å€¼ç±»å‹ï¼Œä¸èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¦åˆ™ç»Ÿè®¡ç»“æœä¸º 0ã€‚<br><img src="/images/202510/37.jpg"></p><h1 id="Map-Reduce"><a href="#Map-Reduce" class="headerlink" title="Map-Reduce"></a>Map-Reduce</h1><p>ä»¥ä¸‹æ˜¯MongoDBå®˜ç½‘çš„ç¤ºä¾‹ï¼Œä¹Ÿå¾ˆæ¸…æ¥šã€‚æ³¨æ„ï¼ŒMap-Reduceçš„æ•°æ®ç»“æœä¿å­˜åœ¨ä¸€ä¸ªæ–°çš„Collectionä¸­ï¼›Collectionçš„åå­—å°±æ˜¯outçš„å€¼ã€‚åœ¨è¯¥ç¤ºä¾‹ä¸­å³ order_totalsã€‚<br><img src="/images/202510/38.jpg"></p><p>å¦‚æœè¦ sum çš„ field éœ€è¦æ•°æ®ç±»å‹è½¬æ¢ï¼Œå¯ä»¥åœ¨ Map é˜¶æ®µå®Œæˆã€‚å¦‚ä¸‹æ•°æ®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.orders_str.insert(&#123;cust_id:&quot;A123&quot;,amount:&quot;500&quot;,status:&quot;A&quot;&#125;)</span><br><span class="line">db.orders_str.insert(&#123;cust_id:&quot;A123&quot;,amount:&quot;250&quot;,status:&quot;A&quot;&#125;)</span><br><span class="line">db.orders_str.insert(&#123;cust_id:&quot;B212&quot;,amount:&quot;200&quot;,status:&quot;A&quot;&#125;)</span><br><span class="line">db.orders_str.insert(&#123;cust_id:&quot;A123&quot;,amount:&quot;300&quot;,status:&quot;D&quot;&#125;)</span><br></pre></td></tr></table></figure><p>Map-Reduceï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">db.orders_str.mapReduce(</span><br><span class="line">    function()&#123;</span><br><span class="line">        var cnt = parseInt(this.amount);</span><br><span class="line">        emit(this.cust_id,cnt);</span><br><span class="line">    &#125;,</span><br><span class="line">    function(key,values)&#123;</span><br><span class="line">        return Array.sum(values);</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        query:&#123;status:&quot;A&quot;&#125;,</span><br><span class="line">        out: &quot;order_totals_str&quot;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.order_totals_str.find(&#123;&#125;)</span><br><span class="line">&#123; â€œ_idâ€ : â€œA123â€, â€œvalueâ€ : 750 &#125;</span><br><span class="line">&#123; â€œ_idâ€ : â€œB212â€, â€œvalueâ€ : 200 &#125;</span><br></pre></td></tr></table></figure><p>DONEï¼!</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx ngx_http_core_module å†…ç½®å˜é‡</title>
      <link href="/2025/10/27/nginx-ngx-http-core-module-%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F/"/>
      <url>/2025/10/27/nginx-ngx-http-core-module-%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<p>ngx_http_core_module æ¨¡å—æ”¯æŒä¸ Apache æœåŠ¡å™¨ç›¸åŒåç§°çš„å†…ç½®å˜é‡ã€‚é¦–å…ˆï¼Œè¿™äº›éƒ½æ˜¯è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚å¤´å­—æ®µçš„å˜é‡ï¼Œä¾‹å¦‚ $http_user_agent ã€$http_cookie ç­‰ç­‰ã€‚è¿˜æœ‰å…¶ä»–å˜é‡ï¼š</p><p>$arg_name</p><p>è¯·æ±‚è¡Œä¸­çš„å‚æ•°åç§°</p><p>$args</p><p>è¯·æ±‚è¡Œä¸­çš„å‚æ•°</p><p>$binary_remote_addr</p><p>äºŒè¿›åˆ¶å½¢å¼çš„å®¢æˆ·ç«¯åœ°å€ï¼Œå€¼çš„é•¿åº¦æ€»æ˜¯ 4 ä¸ªå­—èŠ‚</p><p>$body_bytes_sent</p><p>å‘é€ç»™å®¢æˆ·ç«¯çš„å­—èŠ‚æ•°ï¼Œä¸ç®—å“åº”å¤´ï¼›è¿™ä¸ªå˜é‡å…¼å®¹ mod_log_config Apache æ¨¡å—çš„â€œ%Bâ€å‚æ•°ã€‚</p><p>$bytes_sent</p><p>å‘é€ç»™å®¢æˆ·ç«¯çš„å­—èŠ‚æ•°(1.3.8, 1.2.5)</p><p>$connection</p><p>è¿æ¥åºåˆ—æ•°(1.3.8, 1.2.5)</p><p>$connection_requests</p><p>ä¸€ä¸ªè¿æ¥äº§ç”Ÿçš„å½“å‰è¯·æ±‚æ•° (1.3.8, 1.2.5)</p><p>$content_length</p><p>è¯·æ±‚å¤´å˜é‡â€œContent-Lengthâ€</p><p>$content_type</p><p>è¯·æ±‚å¤´å˜é‡â€œContent-Typeâ€</p><p>$cookie_name</p><p>cookie åç§°</p><p>$document_root</p><p>å½“å‰è¯·æ±‚çš„ root æˆ– alias æŒ‡ä»¤çš„å€¼</p><p>$document_uri</p><p>åŒ $uri</p><p>$host</p><p>æŒ‰ç…§è¿™ä¸ªä¼˜å…ˆçº§é¡ºåºï¼šè¯·æ±‚è¡Œçš„ä¸»æœºåï¼Œè¯·æ±‚å¤´å‚æ•°â€œHostâ€ ä¸­çš„ä¸»æœºåï¼ŒåŒ¹é…è¯·æ±‚çš„æœåŠ¡å™¨åç§°</p><p>$hostname</p><p>ä¸»æœºåç§°</p><p>$http_name</p><p>ä»»æ„è¯·æ±‚å¤´å‚æ•°ï¼›å˜é‡åçš„æœ€åéƒ¨åˆ†æ˜¯è½¬æˆå°å†™çš„å‚æ•°åï¼Œå¹¶ä¸”ç”¨ä¸‹åˆ’çº¿æ›¿æ¢ç ´æŠ˜å·ã€‚</p><p>$https</p><p>â€œonâ€å¦‚æœè¿æ¥è¿è¡Œåœ¨ SSL æ¨¡å¼ï¼Œå¦åˆ™æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p><p>$is_args</p><p>â€œ?â€å¦‚æœè¯·æ±‚è¡Œæœ‰å‚æ•°ï¼Œå¦åˆ™æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p><p>$limit_rate</p><p>è®¾ç½®è¿™ä¸ªå˜é‡å¯ç”¨å“åº”é¢‘ç‡é™åˆ¶ï¼›å‚è§ <a href="https://link.zhihu.com/?target=http://nginx.org/en/docs/http/ngx_http_core_module.html%23limit_rate">limit_rate</a></p><p>$msec</p><p>ä»¥æ¯«ç§’ä¸ºå•ä½çš„å½“å‰æ—¶é—´çš„ç§’æ•° (1.3.9, 1.2.6)</p><p>$nginx_version</p><p>nginx ç‰ˆæœ¬</p><p>$pid</p><p>å·¥ä½œè¿›ç¨‹çš„ PID</p><p>$pipe</p><p>å¦‚æœè¯·æ±‚æ¥è‡ªç®¡é“é€šä¿¡ï¼Œå€¼ä¸ºâ€œpâ€ï¼Œå¦åˆ™ä¸ºâ€œ.â€ (1.3.12, 1.2.7)</p><p>$proxy_protocol_addr</p><p>è·å–ä»£ç†ä»£ç†åè®®å¤´çš„å®¢æˆ·ç«¯åœ°å€ï¼Œå¦‚æœæ˜¯ç›´æ¥è®¿é—®ï¼Œè¯¥å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚(1.5.12)<br>ä»£ç†åè®®å¿…é¡»é¢„å…ˆåœ¨ listen æŒ‡ä»¤ä¸­é€šè¿‡è®¾ç½® proxy_protocol å‚æ•°å¯ç”¨ã€‚</p><p>$query_string</p><p>åŒ $args</p><p>$realpath_root</p><p>å½“å‰è¯·æ±‚çš„æ–‡æ¡£æ ¹ç›®å½•æˆ–åˆ«åçš„çœŸå®è·¯å¾„ï¼Œä¼šå°†æ‰€æœ‰ç¬¦å·è¿æ¥è½¬æ¢ä¸ºçœŸå®è·¯å¾„ã€‚</p><p>$remote_addr</p><p>å®¢æˆ·ç«¯åœ°å€</p><p>$remote_port</p><p>å®¢æˆ·ç«¯ç«¯å£</p><p>$remote_user</p><p>ç”¨äºHTTPåŸºç¡€è®¤è¯æœåŠ¡çš„ç”¨æˆ·å</p><p>$request</p><p>å®Œæ•´çš„åŸå§‹è¯·æ±‚è¡Œ</p><p>$request_body</p><p>è¯·æ±‚ä½“<br>æ­¤å˜é‡å¯åœ¨ location ä¸­ä½¿ç”¨ï¼Œå°†è¯·æ±‚ä¸»ä½“é€šè¿‡ proxy_pass, fastcgi_pass, uwsgi_pass, å’Œ scgi_pass ä¼ é€’ç»™ä¸‹ä¸€çº§çš„ä»£ç†æœåŠ¡å™¨ã€‚</p><p>$request_body_file</p><p>å°†å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚å¤„ç†è¿‡ç¨‹æ¥æ”¶åï¼Œéœ€è¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœä¸€ç›´å°†è¯·æ±‚ä½“å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œ client_body_in_file_only éœ€è¦è¢«å¯ç”¨ã€‚å¦‚æœä¸€ä¸ªä¸´æ—¶æ–‡ä»¶çš„åç§°æ˜¯åœ¨ä»£ç†è¯·æ±‚ä¸­ä¼ é€’çš„ï¼Œæˆ–è€…åœ¨è¯·æ±‚ä¸­ä¼ é€’ç»™ä¸€ä¸ª FastCGI&#x2F;uwsgi&#x2F;SCGI æœåŠ¡å™¨ï¼Œ ä¼ é€’è¯·æ±‚ä½“éœ€è¦åˆ†åˆ«ç¦ç”¨ proxy_pass_request_body off ã€ fastcgi_pass_request_body off ã€ uwsgi_pass_request_body off æˆ–è€… scgi_pass_request_body off æŒ‡ä»¤ã€‚</p><p>$request_completion</p><p>å¦‚æœè¯·æ±‚å®Œæˆï¼Œåˆ™å€¼ä¸ºâ€œOKâ€ï¼Œå¦åˆ™ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><p>$request_filename</p><p>å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼ŒåŸºäº root æˆ–è€… alias æŒ‡ä»¤ï¼Œä»¥åŠ URIã€‚</p><p>$request_length</p><p>è¯·æ±‚é•¿åº¦ï¼ˆåŒ…å«è¯·æ±‚è¡Œã€å¤´å’Œè¯·æ±‚ä½“ï¼‰(1.3.12, 1.2.7)</p><p>$request_method</p><p>è¯·æ±‚æ–¹æ³•ï¼Œé€šå¸¸æ˜¯ â€œGETâ€ æˆ–è€… â€œPOSTâ€</p><p>$request_time</p><p>è¯·æ±‚å¤„ç†æ—¶é—´ç§’æ•°ï¼Œç²¾åº¦åˆ°æ¯«ç§’(1.3.9, 1.2.6)ï¼›ä»å®¢æˆ·ç«¯ç¬¬ä¸€ä¸ªå­—èŠ‚è¢«è¯»å–å¼€å§‹ã€‚</p><p>$request_uri</p><p>å®Œæ•´çš„è¯·æ±‚ URI ï¼ˆå¸¦å‚æ•°ï¼‰</p><p>$scheme</p><p>è¯·æ±‚æ–¹æ¡ˆï¼Œâ€œhttpâ€ æˆ– â€œhttpsâ€</p><p>$sent_http_name</p><p>è‡ªå®šä¹‰å½±å“å¤´å­—æ®µï¼›å˜é‡åçš„æœ€åéƒ¨åˆ†æ˜¯ç ´æŠ˜å·æ›¿æ¢ä¸ºä¸‹åˆ’çº¿å¹¶ä¸”è½¬æ¢ä¸ºå°å†™å­—ç¬¦çš„å­—æ®µåå­—ã€‚</p><p>$server_addr</p><p>æ¥å—è¯·æ±‚çš„æœåŠ¡å™¨åœ°å€<br>è®¡ç®—è¿™ä¸ªå˜é‡çš„å€¼é€šå¸¸éœ€è¦ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ã€‚ä¸ºäº†é¿å…ç³»ç»Ÿè°ƒç”¨ï¼ŒlistenæŒ‡ä»¤å¿…é¡»æŒ‡å®šåœ°å€ï¼Œå¹¶ä¸”ä½¿ç”¨ç»‘å®šå‚æ•°ã€‚</p><p>$server_name</p><p>æ¥å—è¯·æ±‚çš„æœåŠ¡å™¨åç§°</p><p>$server_port</p><p>æ¥å—è¯·æ±‚çš„æœåŠ¡å™¨ç«¯å£</p><p>$server_protocol</p><p>è¯·æ±‚åè®®ï¼Œé€šå¸¸æ˜¯ â€œHTTP&#x2F;1.0â€ ã€ â€œHTTP&#x2F;1.1â€ æˆ–è€… â€œHTTP&#x2F;2.0â€</p><p>$status</p><p>å“åº”çŠ¶æ€(1.3.2, 1.2.2)</p><p>$tcpinfo_rtt, $tcpinfo_rttvar, $tcpinfo_snd_cwnd, $tcpinfo_rcv_space</p><p>å…³äºå®¢æˆ·ç«¯ TCP è¿æ¥çš„ä¿¡æ¯ï¼›åœ¨æ”¯æŒ TCP_INFO</p><p>å¥—æ¥å­—çš„ç³»ç»Ÿä¸Šå¯ç”¨ã€‚</p><p>$time_iso8601</p><p>ISO 8601 æ ‡å‡†æ ¼å¼çš„æœ¬åœ°æ—¶é—´(1.3.12, 1.2.7)</p><p>$time_local</p><p>Common Log æ ¼å¼çš„æœ¬åœ°æ—¶é—´(1.3.12, 1.2.7)</p><p>$uri</p><p>å½“å‰è¯·æ±‚æ ‡å‡†åŒ–çš„ URI<br>$uri çš„å€¼åœ¨è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­å¯èƒ½æ”¹å˜ï¼Œä¾‹å¦‚ï¼Œå½“å†…éƒ¨è½¬å‘ï¼Œæˆ–è€…ä½¿ç”¨ç´¢å¼•æ–‡ä»¶æ—¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native windows ç³»ç»Ÿæœ¬åœ°å›¾ç‰‡ä¸èƒ½æ˜¾ç¤ºé—®é¢˜</title>
      <link href="/2025/10/27/react-native-windows-%E7%B3%BB%E7%BB%9F%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E4%B8%8D%E8%83%BD%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/"/>
      <url>/2025/10/27/react-native-windows-%E7%B3%BB%E7%BB%9F%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E4%B8%8D%E8%83%BD%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ windows å¼€å‘ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ React Native çš„ Image UI ç»„ä»¶é€šè¿‡ç›¸å¯¹è·¯å¾„åŠ è½½æœ¬åœ°å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ react native æºä»£ç è§£å†³ã€‚ä½†æ˜¯ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ä¸ç¡®å®šæ˜¯å¦ä¼šå¼•èµ·å…¶ä»–å¹³å°ä¸‹æ–°çš„é—®é¢˜ã€‚</p><p>å°†æ–‡ä»¶ packager&#x2F;react-packager&#x2F;src&#x2F;Bundler&#x2F;index.js ä¸­çš„ä¸‹é¢ä¸€è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">httpServerLocation</span>: path.<span class="title function_">join</span>(<span class="string">&#x27;/assets&#x27;</span>, path.<span class="title function_">dirname</span>(relPath)),</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">httpServerLocation</span>: path.<span class="title function_">join</span>(<span class="string">&#x27;assets&#x27;</span>, path.<span class="title function_">dirname</span>(relPath)),</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DOSå‘½ä»¤</title>
      <link href="/2025/10/27/DOS%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/10/27/DOS%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€å‘½ä»¤"><a href="#åŸºç¡€å‘½ä»¤" class="headerlink" title="åŸºç¡€å‘½ä»¤"></a>åŸºç¡€å‘½ä»¤</h1><ol><li>dir</li></ol><ul><li>æ— å‚æ•°ï¼š æŸ¥çœ‹å½“å‰æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚</li><li>&#x2F;sï¼š æŸ¥çœ‹å½“å‰ç›®å½•å·²åŠå…¶æ‰€æœ‰å­ç›®å½•çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚</li><li>&#x2F;aï¼š æŸ¥çœ‹åŒ…æ‹¬éšè—æ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶ã€‚</li><li>&#x2F;ahï¼š åªæ˜¾ç¤ºå‡ºéšå«æ–‡ä»¶ã€‚</li><li>&#x2F;wï¼š ä»¥ç´§å‡‘æ–¹å¼ï¼ˆä¸€è¡Œæ˜¾ç¤º3ä¸ªæ–‡ä»¶ï¼‰æ˜¾ç¤ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚</li><li>&#x2F;pï¼š ä»¥åˆ†é¡µæ–¹å¼ï¼ˆæ˜¾ç¤ºä¸€é¡µä¹‹åä¼šè‡ªåŠ¨æš‚åœï¼‰æ˜¾ç¤ºã€‚</li></ul><ol start="2"><li>cd</li></ol><ul><li>cd ç›®å½•åï¼š è¿›å…¥ç‰¹å®šçš„ç›®å½•ã€‚</li><li>cd \ï¼š é€€å›åˆ°æ ¹ç›®å½•ã€‚</li><li>cd ..ï¼š é€€å›åˆ°ä¸Šä¸€çº§ç›®å½•ã€‚</li></ul><ol start="3"><li>md</li></ol><p>md ç›®å½•åï¼š å»ºç«‹ç‰¹å®šçš„æ–‡ä»¶å¤¹ã€‚</p><ol start="4"><li>rd</li></ol><p>rd ç›®å½•åï¼š åˆ é™¤ç‰¹å®šçš„æ–‡ä»¶å¤¹ã€‚</p><ol start="5"><li>cls</li></ol><p>æ¸…é™¤å±å¹•ã€‚</p><ol start="6"><li>copy</li></ol><p>copy è·¯å¾„\æ–‡ä»¶å è·¯å¾„\æ–‡ä»¶åï¼š æŠŠä¸€ä¸ªæ–‡ä»¶æ‹·è´åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚</p><ol start="7"><li>move</li></ol><p>move è·¯å¾„\æ–‡ä»¶å è·¯å¾„\æ–‡ä»¶åï¼š æŠŠä¸€ä¸ªæ–‡ä»¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚</p><ol start="8"><li>del</li></ol><p>delä¸èƒ½åˆ é™¤æ–‡ä»¶å¤¹ã€‚</p><ul><li>del æ–‡ä»¶åï¼š åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚</li><li>del *.*ï¼š åˆ é™¤å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ã€‚</li></ul><ol start="9"><li>deltree</li></ol><p>åˆ é™¤æ–‡ä»¶å¤¹å’Œå®ƒä¸‹é¢çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹è¿˜æœ‰æ–‡ä»¶ã€‚</p><ol start="10"><li>format</li></ol><p>format x: xä»£è¡¨ç›˜ç¬¦ï¼Œæ ¼å¼åŒ–ä¸€ä¸ªåˆ†åŒºã€‚åœ¨dosä¸‹æ˜¯ç”¨fatæ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–çš„ï¼Œåœ¨windows2000å®‰è£…çš„æ—¶å€™ä¼šé—®ä½ è¦ä¸è¦è½¬æ¢ä¸ºntfsã€‚</p><ol start="11"><li>type</li></ol><p>type æ–‡æœ¬æ–‡ä»¶åï¼š æ˜¾ç¤ºå‡ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ã€‚</p><ol start="12"><li>ren</li></ol><p>ren æ—§æ–‡ä»¶å æ–°æ–‡ä»¶åï¼š æ”¹æ–‡ä»¶åã€‚</p><h1 id="å…³äºç½‘ç»œçš„å¸¸ç”¨å‘½ä»¤"><a href="#å…³äºç½‘ç»œçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å…³äºç½‘ç»œçš„å¸¸ç”¨å‘½ä»¤"></a>å…³äºç½‘ç»œçš„å¸¸ç”¨å‘½ä»¤</h1><ol><li>ping</li></ol><ul><li>ping ä¸»æœºipæˆ–åå­—ï¼š å‘ç›®æ ‡ä¸»æœºå‘é€4ä¸ªicmpæ•°æ®åŒ…ï¼Œæµ‹è¯•å¯¹æ–¹ä¸»æœºæ˜¯å¦æ”¶åˆ°å¹¶å“åº”ï¼Œä¸€èˆ¬å¸¸ç”¨äºåšæ™®é€šç½‘ç»œæ˜¯å¦é€šç•…çš„æµ‹è¯•ã€‚ä½†æ˜¯pingä¸åŒä¸ä»£è¡¨ç½‘ç»œä¸é€šï¼Œæœ‰å¯èƒ½æ˜¯ç›®æ ‡ä¸»æœºè£…æœ‰é˜²ç«å¢™å¹¶ä¸”é˜»æ­¢äº†icmpå“åº”ã€‚</li><li>ping -tï¼š ä¸åœçš„å‘é€æ•°æ®åŒ…ã€‚å½“ç„¶éƒ½å¾ˆå°ï¼Œä¸èƒ½ç§°ä½œæ”»å‡»ã€‚æœ‰äº›äººè‡ªå·±å†™äº†ä¸€äº›ç±»ä¼¼äºpingå‘½ä»¤çš„ç¨‹åºï¼Œä¸åœçš„å‘é€å¾ˆå¤§çš„æ•°æ®åŒ…ï¼Œä»¥é˜»å¡ç›®æ ‡ä¸»æœºçš„ç½‘ç»œè¿æ¥ã€‚</li></ul><ol start="2"><li>net</li></ol><p>å»ºè®®æ˜¯ç”¨ net &#x2F;? è·å–å…·ä½“å¸®åŠ©ä¿¡æ¯ã€‚å®åœ¨æ˜¯æœ‰å¾ˆå¤šå‚æ•°ï¼Œå‚æ•°ä¸‹é¢è¿˜æœ‰å‚æ•°ã€‚å¸¸ç”¨ï¼šnet view \ä¸»æœº æ¥çœ‹å…±äº«ï¼Œnet start&#x2F;stop æœåŠ¡æ¥å¯åŠ¨å’Œåœæ­¢æœåŠ¡ã€‚</p><ol start="3"><li>netstat</li></ol><p>netstat ä¸»æœºï¼š æŸ¥çœ‹ä¸»æœºå½“å‰çš„ tcp&#x2F;ip è¿æ¥çŠ¶æ€ï¼Œå¦‚ç«¯å£çš„çŠ¶æ€ã€‚</p><ol start="4"><li>nbtstat</li></ol><p>æŸ¥çœ‹ä¸»æœºä½¿ç”¨çš„ NetBIOS nameã€‚ä½¿ç”¨ nbtstat &#x2F;? æŸ¥çœ‹å¸®åŠ©ã€‚</p><ol start="5"><li>tracert</li></ol><p>tracert ä¸»æœºï¼š æŸ¥çœ‹ä»ä½ è‡ªå·±åˆ°ç›®æ ‡ä¸»æœºåˆ°åº•ç»è¿‡äº†é‚£äº›è·¯å¾„ã€‚å¦‚ï¼š tracert <a href="http://www.baidu.com/">www.baidu.com</a> ç„¶åç­‰å¾…ã€‚ã€‚ã€‚ å°±ä¼šçœ‹åˆ°ä½ ç»è¿‡çš„ä¸€ä¸ªä¸ªè·¯ç”±èŠ‚ç‚¹ï¼Œä¸€èˆ¬å¤§ä¸€ç‚¹çš„è·¯ç”±å™¨ï¼Œå¦‚ç”µä¿¡çš„ä¸»å¹²è·¯ç”±ï¼Œé™¤äº†ipä»¥å¤–ï¼Œéƒ½æœ‰è‹±æ–‡æ ‡ç¤ºçš„ã€‚</p><ol start="6"><li>pathping</li></ol><p>pathping ä¸»æœºï¼š ç±»ä¼¼tracertï¼Œä½†å¯ä»¥æ˜¾ç¤ºä¸€äº›tracertä¸èƒ½æ˜¾ç¤ºå‡ºæ¥çš„ä¿¡æ¯ã€‚</p><ol start="7"><li>ftp</li></ol><p>å­—ç¬¦æ–¹å¼çš„ ftp ã€‚</p><ol start="8"><li>telnet</li></ol><p>å­—ç¬¦æ–¹å¼çš„è¿œç¨‹ç™»å½•ç¨‹åºï¼Œæ˜¯ç½‘ç»œäººå‘˜æå…¶çˆ±ç”¨çš„è¿œç¨‹ç™»å½•ç¨‹åºã€‚ä¸€èˆ¬å¯ä»¥ç”¨æ¥æµ‹è¯•ä¸»æœºç«¯å£æ˜¯å¦å¯ç”¨ï¼š<br>telnet ä¸»æœºIP ç«¯å£å·</p><ol start="9"><li>ipconfig</li></ol><p>éå¸¸æœ‰ç”¨çš„ç½‘ç»œé…ç½®ã€æ’é”™å‘½ä»¤ã€‚</p><ul><li>ä¸åŠ å‚æ•°ï¼š æ˜¾ç¤ºå½“å‰æœºå™¨çš„ç½‘ç»œæ¥å£çŠ¶æ€ã€‚</li><li>&#x2F;allï¼š æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯ã€‚</li><li>&#x2F;releaseï¼š é‡Šæ”¾å½“å‰ipã€‚</li><li>&#x2F;renewï¼š é‡æ–°ç”³è¯·ipã€‚</li><li>&#x2F;flushdnsï¼š åˆ·æ–°dnsç¼“å­˜ã€‚</li><li>&#x2F;registerdnsï¼š é‡æ–°åœ¨dnsæœåŠ¡å™¨ä¸Šæ³¨å†Œè‡ªå·±ã€‚</li></ul><ol start="10"><li>arp</li></ol><p>æ“ä½œå½“å‰çš„arpç¼“å­˜ã€‚</p><ul><li>arp -aï¼š æ˜¾ç¤ºarpç¼“å­˜ã€‚</li><li>arp -dï¼š åˆ é™¤ä¸€æ¡ç¼“å­˜çºªå½•ã€‚</li><li>arp -sï¼š æ·»åŠ ä¸€æ¡ç¼“å­˜çºªå½•ã€‚</li></ul><ol start="11"><li>nslookup</li></ol><p>æ’é™¤dnsé”™è¯¯çš„åˆ©å™¨ã€‚æ˜¯ä¸€ä¸ªäº¤äº’çš„å·¥å…·ã€‚ä½¿ç”¨ä¹‹å‰è¯·å…ˆåŠªåŠ›å¼„æ¸…æ¥šdnsçš„ä½œç”¨ä»¥åŠdnsçš„å·¥ä½œåŸç†ã€‚</p><ol start="12"><li>route</li></ol><p>ä¸€èˆ¬ç”¨æ¥æŸ¥çœ‹è·¯ç”±è¡¨æˆ–è€…æ·»åŠ é™æ€è·¯ç”±ï¼š</p><ul><li>route printï¼š æ‰“å°è·¯ç”±</li><li>route addï¼š æ·»åŠ è·¯ç”±</li></ul><p>æ·»åŠ è·¯ç”±å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route ADD 157.0.0.0 MASK 255.0.0.0  157.55.80.1</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³æ¯æ¬¡å¼€æœºä¿ç•™è¯¥è·¯ç”±ï¼Œåˆ™æ·»åŠ  -p å‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route ADD 157.0.0.0 MASK 255.0.0.0  157.55.80.1 -p</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mongooseå®‰è£…</title>
      <link href="/2025/10/27/mongoose%E5%AE%89%E8%A3%85/"/>
      <url>/2025/10/27/mongoose%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œå·²ç»å®‰è£…äº† MongoDB å’Œ Node.jsã€‚</p><p>ç„¶åï¼Œç”¨ npm å‘½ä»¤å®‰è£… Mongooseã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install mongoose</span><br></pre></td></tr></table></figure><h1 id="gyp-ERR-build-error"><a href="#gyp-ERR-build-error" class="headerlink" title="gyp ERR! build error"></a>gyp ERR! build error</h1><p>å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼Œè¯·å°è¯•ä¸‹é¢çš„è§£å†³æ–¹æ³•ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">make: *** [Release/obj.target/kerberos/lib/kerberos.o] Error 1</span><br><span class="line">make: Leaving directory `/letv/DataInspector/node_modules/mongoose/node_modules/mongodb/node_modules/kerberos/build&#x27;</span><br><span class="line">gyp ERR! build error</span><br><span class="line">gyp ERR! stack Error: `make` failed with exit code: 2</span><br><span class="line">gyp ERR! stack     at ChildProcess.onExit (/letv/nodejs/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:270:23)</span><br><span class="line">gyp ERR! stack     at emitTwo (events.js:87:13)</span><br><span class="line">gyp ERR! stack     at ChildProcess.emit (events.js:172:7)</span><br><span class="line">gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)</span><br><span class="line">gyp ERR! System Linux 2.6.32-926.504.30.3.letv.el6.x86_64</span><br><span class="line">gyp ERR! command &quot;/letv/nodejs/bin/node&quot; &quot;/letv/nodejs/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js&quot; &quot;rebuild&quot;</span><br><span class="line">gyp ERR! cwd /letv/DataInspector/node_modules/mongoose/node_modules/mongodb/node_modules/kerberos</span><br><span class="line">gyp ERR! node -v v4.2.2</span><br><span class="line">gyp ERR! node-gyp -v v3.0.3</span><br><span class="line">gyp ERR! not ok</span><br></pre></td></tr></table></figure><p>ï¼ˆ1ï¼‰æ£€æŸ¥ python æ˜¯å¦å®‰è£…ä»¥åŠç‰ˆæœ¬å·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python -V</span><br><span class="line">Python 2.6.6</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æ£€æŸ¥ g++ ç‰ˆæœ¬</p><p>è¿™ä¸ªæ£€æŸ¥æ˜¯å€Ÿé‰´ç½‘å‹çš„åšæ³•ã€‚ï¼ˆè¿™å—å„¿çœŸå¿ƒä¸æ‡‚ï¼Œæ„Ÿè°¢åº¦å¨˜å’Œgoogleï¼Œè¿˜æœ‰çƒ­è¡€ç½‘å‹^_^ï¼‰</p><p>å¦‚æœg++ä½äº 4.8 éœ€è¦å‡çº§g++ç‰ˆæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ g++ -v</span><br><span class="line">Using built-in specs.</span><br><span class="line">Target: x86_64-redhat-linux</span><br><span class="line">Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux</span><br><span class="line">Thread model: posix</span><br><span class="line">gcc version 4.4.7 20120313 (Red Hat 4.4.7-11) (GCC)</span><br></pre></td></tr></table></figure><p>å‡çº§æ–¹æ³•å‚è€ƒï¼š<a href="http://xg2007524.blog.51cto.com/869106/1337465">http://xg2007524.blog.51cto.com/869106/1337465</a></p><p>å¦‚æœå‚è€ƒåšæ–‡ä¸­çš„ç¬¬äºŒæ­¥â€œä¸‹è½½ç¼–è¯‘æ‰€éœ€ä¾èµ–åº“â€ä¸èƒ½è‡ªåŠ¨å®Œæˆçš„è¯ï¼Œå¯ä»¥æ ¹æ® contrib&#x2F;download_prerequisites ä¸­çš„å†…å®¹æ‰‹åŠ¨ä¸‹è½½ï¼Œå¹¶è¿è¡Œç›¸åº”çš„å‘½ä»¤å®Œæˆæ“ä½œã€‚</p><p>å®Œæˆ gcc å‡çº§åï¼Œéœ€è¦æ›¿æ¢ç³»ç»Ÿé»˜è®¤çš„g++</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/bin</span><br><span class="line">$ <span class="built_in">rm</span> -f g++</span><br><span class="line">$ <span class="built_in">ln</span> -s /usr/local/bin/g++ g++</span><br><span class="line">$ g++ --version</span><br><span class="line">g++ (GCC) 4.8.2</span><br><span class="line">Copyright (C) 2013 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the <span class="built_in">source</span> <span class="keyword">for</span> copying conditions.  There is NO</span><br><span class="line">warranty; not even <span class="keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure><p>g++ å‡çº§å®Œæˆï¼Œé‡æ–°å®‰è£… mongoose æˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>timed out waiting for input: auto-logout</title>
      <link href="/2025/10/27/timed-out-waiting-for-input-auto-logout/"/>
      <url>/2025/10/27/timed-out-waiting-for-input-auto-logout/</url>
      
        <content type="html"><![CDATA[<p>å‘ç”Ÿè¿™ä¸ªçš„åŸå› æ˜¯ç³»ç»Ÿè®¾ç½®äº†ç­‰å¾…ç”¨æˆ·è¾“å…¥ time out ï¼ˆè¶…æ—¶ï¼‰å‚æ•°ã€‚ç™»é™†ç³»ç»Ÿï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹å‚æ•°å€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 ~]# <span class="built_in">echo</span> <span class="variable">$TMOUT</span></span><br><span class="line">120</span><br></pre></td></tr></table></figure><p>å½“å‰å‚æ•°æ˜¯ 120 ç§’ï¼Œæ‰€ä»¥å¾ˆå¿«å°±è¶…æ—¶è‡ªåŠ¨é€€å‡ºã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨ &#x2F;etc&#x2F;profile ä¸­ä¿®æ”¹è¯¥å‚æ•°çš„å€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 ~]# vi /etc/profile</span><br></pre></td></tr></table></figure><p>åœ¨ &#x2F;etc&#x2F;profile æœ«å°¾å¢åŠ ä¸€ä¸‹é…ç½®ï¼Œå°†è¶…æ—¶æ—¶é—´æ”¹ä¸º 10 å°æ—¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TMOUT=36000</span><br><span class="line"><span class="built_in">export</span> TMOUT</span><br></pre></td></tr></table></figure><p>ä¿å­˜ï¼Œé€€å‡ºç³»ç»Ÿå¹¶é‡æ–°ç™»å½•ï¼Œæˆ–è€…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæ•ˆæ–°é…ç½®å‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 ~]# <span class="built_in">source</span> /etc/profile</span><br><span class="line">[root@vm-10-176-30-167 ~]# <span class="built_in">echo</span> <span class="variable">$TMOUT</span></span><br><span class="line">36000</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins REST API</title>
      <link href="/2025/10/27/Jenkins-REST-API/"/>
      <url>/2025/10/27/Jenkins-REST-API/</url>
      
        <content type="html"><![CDATA[<h1 id="buildWithParametersï¼ˆå‚æ•°åŒ–æ„å»ºé¡¹ç›®ï¼‰"><a href="#buildWithParametersï¼ˆå‚æ•°åŒ–æ„å»ºé¡¹ç›®ï¼‰" class="headerlink" title="buildWithParametersï¼ˆå‚æ•°åŒ–æ„å»ºé¡¹ç›®ï¼‰"></a>buildWithParametersï¼ˆå‚æ•°åŒ–æ„å»ºé¡¹ç›®ï¼‰</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url=http://<span class="variable">$&#123;ip&#125;</span>:<span class="variable">$&#123;port&#125;</span>/job/<span class="variable">$&#123;projectName&#125;</span>/buildWithParameters?args=<span class="variable">$&#123;argsValue&#125;</span></span><br><span class="line">curl -X POST <span class="variable">$&#123;url&#125;</span> --user <span class="variable">$&#123;userName&#125;</span>:<span class="variable">$&#123;password&#125;</span></span><br></pre></td></tr></table></figure><ul><li>url â€“ å®Œæ•´çš„ REST API è¯·æ±‚åœ°å€ï¼ŒåŒ…å«è¯·æ±‚å‚æ•°</li><li>ip â€“ Jenkins Master ä¸»æœºçš„ipåœ°å€ï¼ˆå¦‚æœæœ‰åŸŸåå¯ä»¥ä½¿ç”¨åŸŸåï¼‰</li><li>port â€“ Jenkins æœåŠ¡ç›‘å¬ç«¯å£</li><li>projectName â€“ Jenkins é€šè¿‡å‚æ•°æ„å»ºçš„é¡¹ç›®çš„åç§°</li><li>args â€“ è¦æ„å»ºé¡¹ç›®é…ç½®çš„æ„å»ºæ—¶éœ€è¦è¾“å…¥å‚æ•°çš„åç§°ï¼Œåœ¨æ„å»ºä»»åŠ¡å†…éƒ¨å¯ä»¥é€šè¿‡ ${args} è·å–è¾“å…¥çš„å€¼ï¼ˆä»¥ shell ä¸ºä¾‹ï¼‰</li><li>argsValue â€“ æ„å»ºæ—¶éœ€è¦è¾“å…¥çš„å‚æ•°å€¼</li><li>curl -X POST â€“ ä»¥ POST æ–¹æ³•è¯·æ±‚</li><li>userName â€“ å…·æœ‰æ„å»ºé¡¹ç›®æƒé™çš„ç”¨æˆ·å</li><li>password â€“ å…·æœ‰æ„å»ºé¡¹ç›®æƒé™çš„ç”¨æˆ·çš„å£ä»¤</li></ul><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœå‚æ•°ä¸­åŒ…å« url ä¿ç•™å­—ç¬¦æˆ–è€…ä¸­æ–‡éœ€è¦åš url ç¼–ç ï¼Œå¦‚ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=http://<span class="variable">$&#123;ip&#125;</span>:<span class="variable">$&#123;port&#125;</span>/job/<span class="variable">$&#123;projectName&#125;</span>/buildWithParameters?args=a b</span><br></pre></td></tr></table></figure><p>url ç¼–ç åå˜ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=http://<span class="variable">$&#123;ip&#125;</span>:<span class="variable">$&#123;port&#125;</span>/job/<span class="variable">$&#123;projectName&#125;</span>/buildWithParameters?args=a%20b</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ Jenkins è®¾ç½®åŒ¿åç”¨æˆ·å¯ä»¥è§¦å‘æ„å»ºï¼Œåˆ™ â€“user å‚æ•°å¯ä»¥ä¸ç”¨ã€‚å®‰å…¨è€ƒè™‘åº”ç¦ç”¨åŒ¿åç”¨æˆ·è§¦å‘æ„å»ºã€‚</li></ul><h1 id="Disable-Enableï¼ˆç¦ç”¨-å¯ç”¨é¡¹ç›®ï¼‰"><a href="#Disable-Enableï¼ˆç¦ç”¨-å¯ç”¨é¡¹ç›®ï¼‰" class="headerlink" title="Disable&#x2F;Enableï¼ˆç¦ç”¨&#x2F;å¯ç”¨é¡¹ç›®ï¼‰"></a>Disable&#x2F;Enableï¼ˆç¦ç”¨&#x2F;å¯ç”¨é¡¹ç›®ï¼‰</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="variable">$&#123;ip&#125;</span>:<span class="variable">$&#123;port&#125;</span>/job/<span class="variable">$&#123;projectName&#125;</span>/enable</span><br><span class="line">http://<span class="variable">$&#123;ip&#125;</span>:<span class="variable">$&#123;port&#125;</span>/job/<span class="variable">$&#123;projectName&#125;</span>/disable</span><br></pre></td></tr></table></figure><p>é¡¹ç›®ç¦ç”¨åï¼Œè¯¥é¡¹ç›®åœ¨æ„å»ºé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¸ä¼šå†æ„å»ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VirtualBoxå¿«æ·é”®</title>
      <link href="/2025/10/27/VirtualBox%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>/2025/10/27/VirtualBox%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<p>Right Ctrl + Home â€“ æ˜¾ç¤ºæ§åˆ¶èœå•</p><p>Right Ctrl + F â€“ åˆ‡æ¢åˆ°å…¨å±æ¨¡å¼</p><p>Right Ctrl + L â€“ åˆ‡æ¢åˆ°æ— ç¼æ¨¡å¼</p><p>Right Ctrl + C â€“ åˆ‡æ¢åˆ°æ¯”ä¾‹æ¨¡å¼</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> è™šæ‹ŸåŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VirtualBox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VirtualBoxå¯ç”¨æ— ç¼æ¨¡å¼</title>
      <link href="/2025/10/27/VirtualBox%E5%90%AF%E7%94%A8%E6%97%A0%E7%BC%9D%E6%A8%A1%E5%BC%8F/"/>
      <url>/2025/10/27/VirtualBox%E5%90%AF%E7%94%A8%E6%97%A0%E7%BC%9D%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>VirtualBoxæ˜¯ä¸ªä¸é”™çš„äº§å“ï¼Œå…è´¹è€Œä¸”è½»é‡ã€‚å¹³æ—¶å­¦ä¹ ã€å¼€å‘ä½¿ç”¨å¾ˆæ–¹ä¾¿ã€‚vboxå®‰è£…ubuntuåä¸èƒ½å¯ç”¨æ— ç¼æ¨¡å¼ï¼Œå¤–è§‚ä¸èƒ½å…¨å±ï¼Œæ“ä½œä¹Ÿå¾ˆä¸æ–¹ä¾¿ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202510/32.jpg"></p><p>è¦å¯ç”¨vboxæ— ç¼æ¨¡å¼éœ€è¦å®‰è£…å¢å¼ºåŠŸèƒ½ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202510/33.jpg"></p><p>ç‚¹å‡»â€œå®‰è£…å¢å¼ºåŠŸèƒ½â€åï¼Œåœ¨å®¢æˆ·æœºä¸­ä¼šå‡ºç°å®‰è£…ç•Œé¢ï¼Œæ ¹æ®æç¤ºå®‰è£…å³å¯ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="/images/202510/34.jpg"></p><p>å¦‚æœæç¤ºæ²¡æœ‰å…‰é©±é”™è¯¯ï¼ˆå¦‚ä¸‹å›¾ä¸€ï¼‰ï¼Œåˆ™éœ€è¦åœ¨è™šæ‹Ÿæœºè®¾ç½®ä¸­å¢åŠ å…‰é©±ï¼Œå¹¶ä¸”å°†å¢å¼ºåŠŸèƒ½çš„åŒ…æ·»åŠ è¿›è¯¥å…‰é©±ï¼ˆå¦‚ä¸‹å›¾äºŒï¼‰ã€‚å¢å¼ºåŠŸèƒ½åŒ…é€šå¸¸åœ¨vboxå®‰è£…ç›®å½•ä¸‹ï¼Œåä¸ºVBoxGuestAdditions.isoçš„æ–‡ä»¶ã€‚<br><img src="/images/202510/35.jpg" alt="å›¾ä¸€ï¼šå®‰è£…å¢å¼ºåŠŸèƒ½é”™è¯¯"><br><img src="/images/202510/36.jpg" alt="å›¾äºŒï¼šè™šæ‹Ÿæœºé…ç½®å…‰é©±"></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> è™šæ‹ŸåŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VirtualBox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Missing artifact jdk.tools:jdk.tools:jar:1.6</title>
      <link href="/2025/10/27/Missing-artifact-jdk-tools-jdk-tools-jar-1-6/"/>
      <url>/2025/10/27/Missing-artifact-jdk-tools-jdk-tools-jar-1-6/</url>
      
        <content type="html"><![CDATA[<p>Eclipse mavenå·¥ç¨‹ Missing artifact jdk.tools:jdk.tools:jar:1.6 å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•è§£å†³ã€‚æ€è·¯æ˜¯é…ç½® maven ä¾èµ–æœ¬åœ°çš„ tools.jarï¼Œéœ€è¦æœ¬åœ°å®‰è£…æœ‰ jdk 1.6 ã€‚</p><h1 id="ä¸‹è½½å®‰è£…JDK-1-6"><a href="#ä¸‹è½½å®‰è£…JDK-1-6" class="headerlink" title="ä¸‹è½½å®‰è£…JDK 1.6"></a>ä¸‹è½½å®‰è£…JDK 1.6</h1><p>Oracle å®˜ç½‘ä¸‹è½½JDK 1.6 çš„é“¾æ¥ä¸å¤ªå®¹æ˜“æ‰¾åˆ°ï¼Œå¯ä»¥åœ¨ <a href="https://link.zhihu.com/?target=http://www.oracle.com/technetwork/java/javase/sitemap-jsp-139155.html">Java SE Site Map</a> é¡µé¢æ‰¾åˆ°ä»¥ä¸‹ä½ç½®ï¼Œç‚¹å‡»å³å¯çœ‹åˆ° JDK æ‰€æœ‰ç‰ˆæœ¬çš„åˆ—è¡¨ï¼š<br><img src="/images/202510/31.jpg"></p><h1 id="é…ç½®-maven-ä¾èµ–"><a href="#é…ç½®-maven-ä¾èµ–" class="headerlink" title="é…ç½® maven ä¾èµ–"></a>é…ç½® maven ä¾èµ–</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jdk.tools<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jdk.tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;JAVA_HOME&#125;/lib/tools.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ ${JAVA_HOME} é…ç½®ï¼Œç³»ç»Ÿç¯å¢ƒå˜é‡å¿…é¡»è¦é…ç½® JAVA_HOME ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°è·¯å¾„ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jdk.tools<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jdk.tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>C:/Program Files/Java/jdk1.6.0_45/lib/tools.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>addShutdownHook</title>
      <link href="/2025/10/27/addShutdownHook/"/>
      <url>/2025/10/27/addShutdownHook/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–¹æ³•ä»‹ç»"><a href="#æ–¹æ³•ä»‹ç»" class="headerlink" title="æ–¹æ³•ä»‹ç»"></a>æ–¹æ³•ä»‹ç»</h1><p><strong>addShutdownHook</strong> æ˜¯ Runtime ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•å£°æ˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addShutdownHook</span><span class="params">(Thread hook)</span></span><br></pre></td></tr></table></figure><p>JDK å¸®åŠ©æ‰‹å†Œä¸­çš„è§£é‡Šå¦‚ä¸‹ï¼š</p><p>æ³¨å†Œä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœºå…³é—­é’©å­ã€‚</p><p>Java è™šæ‹Ÿæœºåœ¨å“åº”ä¸¤ç§äº‹ä»¶æ—¶å…³é—­ï¼š</p><ul><li>å½“æœ€åçš„éå®ˆæŠ¤çº¿ç¨‹é€€å‡ºï¼Œæˆ–è€…è°ƒç”¨ exit ï¼ˆç­‰åŒäº System.exit ï¼‰æ–¹æ³•æ—¶ï¼Œç¨‹åºæ­£å¸¸é€€å‡ºã€‚</li><li>å“åº”ç”¨æˆ·ä¸­æ–­è€Œç»ˆæ­¢è™šæ‹Ÿæœºï¼Œä¾‹å¦‚é”®å…¥ ^Cï¼›æˆ–è€…å“åº”ç³»ç»Ÿäº‹ä»¶ç»ˆæ­¢è™šæ‹Ÿæœºï¼Œä¾‹å¦‚ç”¨æˆ·æ³¨é”€æˆ–è€…ç³»ç»Ÿå…³é—­ã€‚</li></ul><p>å…³é—­é’©å­åªæ˜¯ä¸€ä¸ªå·²åˆå§‹åŒ–ä½†å°šæœªå¯åŠ¨çš„çº¿ç¨‹ã€‚å½“è™šæ‹Ÿæœºå¼€å¯å…³é—­åºåˆ—æ—¶ï¼Œå®ƒä¼šä»¥ä¸ç¡®å®šçš„é¡ºåºå¯åŠ¨å…¨éƒ¨æ³¨å†Œçš„å…³é—­é’©å­ï¼Œå¹¶è®©å®ƒä»¬å¹¶å‘è¿è¡Œã€‚å½“æ‰€æœ‰çš„é’©å­å·²ç»è¿è¡Œå®Œï¼Œå¦‚æœå·²å¯ç”¨é€€å‡ºç»ˆç»“æ–¹æ³•ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºæ¥ç€ä¼šè¿è¡Œæ‰€æœ‰æœªè°ƒç”¨çš„ç»ˆç»“æ–¹æ³•ã€‚æœ€åï¼Œè™šæ‹Ÿæœºä¼šåœæ­¢ã€‚æ³¨æ„ï¼Œåœ¨å…³é—­åºåˆ—æ‰§è¡ŒæœŸé—´å®ˆæŠ¤çº¿ç¨‹ä¼šç»§ç»­è¿è¡Œï¼Œå¦‚æœé€šè¿‡è°ƒç”¨ exit æ–¹æ³•å¯åŠ¨å…³é—­éå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šç»§ç»­è¿è¡Œã€‚</p><p>ä¸€æ—¦å…³é—­åºåˆ—å¼€å§‹æ‰§è¡Œï¼Œåªèƒ½é€šè¿‡è°ƒç”¨ halt æ–¹æ³•åœæ­¢å®ƒï¼Œè¯¥æ–¹æ³•å¯å¼ºåˆ¶ç»ˆæ­¢è™šæ‹Ÿæœºã€‚</p><p>ä¸€æ—¦å…³é—­åºåˆ—å¼€å§‹æ‰§è¡Œå°±ä¸èƒ½æ³¨å†Œä¸€ä¸ªæ–°çš„å…³é—­é’©å­æˆ–è€…å–æ¶ˆæ³¨å†Œå·²ç»æ³¨å†Œçš„é’©å­ã€‚å°è¯•è¿™äº›æ“ä½œä¼šå¯¼è‡´æŠ›å‡º IllegalStateException ã€‚</p><p>å…³é—­é’©å­è¿è¡Œåœ¨è™šæ‹Ÿæœºç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€ä¸ªå¾®å¦™çš„æ—¶é—´ï¼Œå› æ­¤åº”ä¿æŠ¤æ€§åœ°å¯¹å…¶è¿›è¡Œç¼–ç ã€‚ç‰¹åˆ«æ˜¯å…³é—­é’©å­åº”è¯¥ç¼–å†™ä¸ºçº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”å°½å¯èƒ½é¿å…æ­»é”ã€‚å…³é—­é’©å­è¿˜åº”è¯¥ä¸ç›²ç›®åœ°ä¾é æŸäº›æœåŠ¡ï¼Œè¿™äº›æœåŠ¡å¯èƒ½å·²æ³¨å†Œäº†è‡ªå·±çš„å…³é—­é’©å­ï¼Œæ‰€ä»¥å…¶æœ¬èº«å¯èƒ½æ­£å¤„äºå…³é—­è¿›ç¨‹ä¸­ã€‚ä¾‹å¦‚ï¼Œè¯•å›¾ä½¿ç”¨å…¶ä»–åŸºäºçº¿ç¨‹çš„æœåŠ¡ï¼ˆå¦‚ AWT äº‹ä»¶æŒ‡æ´¾çº¿ç¨‹ï¼‰å¯èƒ½å¯¼è‡´æ­»é”ã€‚</p><p>å…³é—­é’©å­åº”è¯¥å¿«é€Ÿåœ°å®Œæˆå®ƒä»¬çš„å·¥ä½œã€‚å½“ç¨‹åºè°ƒç”¨ exit çš„æ—¶å€™ï¼ŒæœŸæœ›çš„ç»“æœæ˜¯è™šæ‹ŸæœºåŠæ—¶å…³é—­å¹¶ä¸”é€€å‡ºã€‚å½“ç”±äºç”¨æˆ·æ³¨é”€æˆ–è€…ç³»ç»Ÿå…³é—­å¼•èµ·è™šæ‹Ÿæœºç»ˆæ­¢æ—¶ï¼Œåº•å±‚æ“ä½œç³»ç»Ÿå¯èƒ½åªå…è®¸åœ¨å›ºå®šçš„æ—¶é—´å†…å…³é—­å¹¶é€€å‡ºã€‚å› æ­¤ï¼Œåœ¨å…³é—­é’©å­ä¸­å°è¯•ä»»ä½•ç”¨æˆ·äº¤äº’æˆ–æ‰§è¡Œé•¿æ—¶é—´çš„è®¡ç®—æ˜¯ä¸å¯å–çš„ã€‚å°±åƒåœ¨å…¶ä»–çº¿ç¨‹ä¸­ä¸€æ ·ï¼Œé€šè¿‡è°ƒç”¨çº¿ç¨‹çš„ ThreadGroup å¯¹è±¡çš„ uncaughtException æ–¹æ³•ï¼Œæœªè¢«æ•è·çš„å¼‚å¸¸å¯åœ¨å…³é—­é’©å­ä¸­å¤„ç†ã€‚æ­¤æ–¹æ³•çš„é»˜è®¤å®ç°æ˜¯å°†è¯¥å¼‚å¸¸çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯æ‰“å°è‡³ System.err å¹¶ç»ˆæ­¢çº¿ç¨‹ï¼›å®ƒä¸ä¼šå¯¼è‡´è™šæ‹Ÿæœºé€€å‡ºæˆ–åœæ­¢ã€‚</p><p>ä»…åœ¨å¾ˆå°‘çš„æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿæœºå¯èƒ½ä¼šä¸­æ­¢ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å®Œå…¨å…³é—­å°±åœæ­¢è¿è¡Œã€‚è¿™ç§æƒ…å†µä¼šå‘ç”Ÿåœ¨è™šæ‹Ÿæœºè¢«ä»å¤–éƒ¨ç»ˆæ­¢æ—¶ï¼Œæ¯”å¦‚åœ¨ Unix ä¸Šä½¿ç”¨ SIGKILL ä¿¡å·æˆ–åœ¨ Microsoft Windows ä¸Šè°ƒç”¨ TerminateProcessã€‚å¦‚æœç”±äºä¾‹å¦‚å†…éƒ¨æ•°æ®ç»“æ„æŸåæˆ–è¯•å›¾è®¿é—®ä¸å­˜åœ¨çš„å†…å­˜è€Œå¯¼è‡´æœ¬åœ°æ–¹æ³•æ‰§è¡Œé”™è¯¯ï¼Œè™šæ‹Ÿæœºä¹Ÿå¯èƒ½ä¼šä¸­æ­¢ã€‚å¦‚æœè™šæ‹Ÿæœºä¸­æ­¢ï¼Œåˆ™ä¸èƒ½ä¿è¯æ‰€æœ‰çš„å…³é—­é’©å­éƒ½è¢«è¿è¡Œã€‚</p><h1 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h1><p>hook - å·²åˆå§‹åŒ–ä½†å°šæœªå¯åŠ¨çš„çº¿ç¨‹å¯¹è±¡</p><h1 id="æŠ›å‡ºå¼‚å¸¸"><a href="#æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="æŠ›å‡ºå¼‚å¸¸"></a>æŠ›å‡ºå¼‚å¸¸</h1><p>IllegalArgumentException - å¦‚æœæŒ‡å®šçš„é’©å­å·²æ³¨å†Œï¼Œæˆ–è€…å¯ä»¥ç¡®å®šé’©å­æ­£åœ¨è¿è¡Œæˆ–è€…å·²è¿è¡Œå®Œæ¯•</p><p>IllegalStateException - å¦‚æœè™šæ‹Ÿæœºå·²ç»å¤„äºå…³é—­è¿‡ç¨‹ä¸­</p><p>SecurityException - å¦‚æœå®‰å…¨ç®¡ç†å™¨å­˜åœ¨å¹¶ä¸”æ‹’ç» RuntimePermission(â€shutdownHooksâ€œ)</p><h1 id="Sinceï¼š"><a href="#Sinceï¼š" class="headerlink" title="Sinceï¼š"></a>Sinceï¼š</h1><p>1.3</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ Jetty</title>
      <link href="/2025/10/27/%E5%B5%8C%E5%85%A5%E5%BC%8F-Jetty/"/>
      <url>/2025/10/27/%E5%B5%8C%E5%85%A5%E5%BC%8F-Jetty/</url>
      
        <content type="html"><![CDATA[<p>Jetty æœ‰ä¸€ä¸ªå£å·ï¼Œâ€œä¸è¦åœ¨ Jetty ä¸­éƒ¨ç½²ä½ çš„åº”ç”¨ï¼Œéƒ¨ç½² Jetty åœ¨ä½ çš„åº”ç”¨ä¸­ï¼â€è¿™ä¸ªå£å·æ„å‘³ç€æ„å»ºåº”ç”¨ä¸ºä¸ºæ ‡å‡†çš„ WAR å¹¶ä¸”éƒ¨ç½²åˆ° Jetty çš„å¦å¤–ä¸€ä¸ªé€‰æ‹©æ˜¯ï¼ŒJetty è¢«è®¾è®¡ä¸ºä¸€ä¸ªè½¯ä»¶ç»„ä»¶ï¼Œå¯ä»¥åœ¨ Java ç¨‹åºä¸­åƒå…¶ä»– POJO ä¸€æ ·è¢«å®ä¾‹åŒ–å’Œä½¿ç”¨ã€‚æ¢ä¸€ç§æ–¹å¼ï¼Œä»¥åµŒå…¥å¼æ¨¡å¼è¿è¡Œ Jetty æ„å‘³ç€æ”¾ç½®ä¸€ä¸ª HTTP æ¨¡å—åˆ°ä½ çš„åº”ç”¨ä¸­ï¼Œè€Œä¸æ˜¯æ”¾ç½®ä½ çš„åº”ç”¨åˆ° HTTP æœåŠ¡å™¨ã€‚</p><p>æœ¬æ•™ç¨‹å°†å¸¦é¢†ä½ ä¸€æ­¥æ­¥ä»æœ€ç®€å•çš„ Jetty æœåŠ¡å™¨å®ä¾‹åŒ–åˆ°ç”¨æ ‡å‡†åŒ–éƒ¨ç½²æè¿°å™¨è¿è¡Œå¤š Web åº”ç”¨ç¨‹åºã€‚å¤§éƒ¨åˆ†è¿™äº›å®ä¾‹çš„ä»£ç æ˜¯æ ‡å‡† Jetty é¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚</p><h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>åµŒå…¥ Jetty æœåŠ¡å™¨ï¼Œä¸‹é¢æ˜¯é€šå¸¸çš„æ­¥éª¤ï¼Œä¹Ÿæ˜¯æœ¬æ•™ç¨‹å®ä¾‹ä¸­å±•ç¤ºæ­¥éª¤ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ª Server å®ä¾‹ã€‚</li><li>æ·»åŠ &#x2F;é…ç½® Connectorsã€‚</li><li>æ·»åŠ &#x2F;é…ç½® Handlersã€Contextsã€Servletsã€‚</li><li>å¯åŠ¨ Serverã€‚</li><li>æœåŠ¡å™¨ç­‰å¾…æˆ–è€…ç”¨è‡ªå·±çš„çº¿ç¨‹åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ã€‚</li></ul><h1 id="åˆ›å»º-Server"><a href="#åˆ›å»º-Server" class="headerlink" title="åˆ›å»º Server"></a>åˆ›å»º Server</h1><p>ä¸‹é¢æ˜¯ SimplestServer.java æ–‡ä»¶çš„ä»£ç ï¼Œå®ä¾‹åŒ–å¹¶ä¸”è¿è¡Œä¸€ä¸ªå¯èƒ½æœ€ç®€å•çš„ Jetty serverã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The simplest possible Jetty server.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimplestServer</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line">        server.start();</span><br><span class="line">        server.dumpStdErr();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°†è¿è¡Œä¸€ä¸ªç›‘å¬ 8080 ç«¯å£çš„ HTTP Serverã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ serverï¼Œå› ä¸ºå®ƒæ²¡æœ‰å¤„ç†å™¨ï¼Œå› æ­¤å¯¹æ‰€æœ‰çš„è¯·æ±‚éƒ½å°†è¿”å› 404ã€‚</p><h1 id="ä½¿ç”¨å¤„ç†å™¨"><a href="#ä½¿ç”¨å¤„ç†å™¨" class="headerlink" title="ä½¿ç”¨å¤„ç†å™¨"></a>ä½¿ç”¨å¤„ç†å™¨</h1><p>ä¸ºäº†é’ˆå¯¹è¯·æ±‚ç”Ÿæˆå“åº”ï¼ŒJetty è¦æ±‚åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®å¤„ç†å™¨ã€‚ä¸€ä¸ªå¤„ç†å™¨å¯èƒ½ï¼š</p><ul><li>æ£€æŸ¥&#x2F;ä¿®æ”¹ HTTP è¯·æ±‚ã€‚</li><li>ç”Ÿæˆå®Œæ•´çš„ HTTP å“åº”ã€‚</li><li>è°ƒç”¨å…¶ä»–å¤„ç†å™¨ï¼ˆè§ HandlerWrapperï¼‰ã€‚</li><li>é€‰æ‹©ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¤„ç†å™¨è°ƒç”¨ï¼ˆè§ HandlerCollectionï¼‰ã€‚</li></ul><h1 id="HelloWorld-Handler"><a href="#HelloWorld-Handler" class="headerlink" title="HelloWorld Handler"></a>HelloWorld Handler</h1><p>ä¸‹é¢ HelloHandler.java çš„ä»£ç å±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„ hello world å¤„ç†å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Request;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.AbstractHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloHandler</span> <span class="keyword">extends</span> <span class="title class_">AbstractHandler</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">final</span> String greeting;</span><br><span class="line">    <span class="keyword">final</span> String body;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HelloHandler</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HelloHandler</span><span class="params">( String greeting )</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>(greeting, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HelloHandler</span><span class="params">( String greeting, String body )</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.greeting = greeting;</span><br><span class="line">        <span class="built_in">this</span>.body = body;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">( String target,</span></span><br><span class="line"><span class="params">                        Request baseRequest,</span></span><br><span class="line"><span class="params">                        HttpServletRequest request,</span></span><br><span class="line"><span class="params">                        HttpServletResponse response )</span> <span class="keyword">throws</span> IOException,</span><br><span class="line">                                                      ServletException</span><br><span class="line">    &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html; charset=utf-8&quot;</span>);</span><br><span class="line">        response.setStatus(HttpServletResponse.SC_OK);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line"></span><br><span class="line">        out.println(<span class="string">&quot;&lt;h1&gt;&quot;</span> + greeting + <span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (body != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            out.println(body);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        baseRequest.setHandled(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼ ç»™å¤„ç†æ–¹æ³•çš„å‚æ•°æ˜¯ï¼š</p><ul><li>target - è¯·æ±‚çš„ç›®æ ‡ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ª URI æˆ–è€…è¢«å‘½åè°ƒåº¦å™¨çš„åç§°ã€‚</li><li>baseRequest - å¯å˜çš„ Jetty è¯·æ±‚å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ€»æ˜¯æœªåŒ…è£…çš„ã€‚</li><li>request - ä¸å˜çš„è¯·æ±‚å¯¹è±¡ï¼Œå¯èƒ½è¢«ä¸€ä¸ªè¿‡æ»¤å™¨æˆ– servlet åŒ…è£…è¿‡ã€‚</li><li>response - å“åº”ï¼Œå¯èƒ½è¢«è¿‡æ»¤å™¨æˆ– servlet åŒ…è£…è¿‡ã€‚</li></ul><p>å¤„ç†å™¨è®¾ç½®å“åº”çš„çŠ¶æ€ã€å†…å®¹ç±»å‹ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨å†™å…¥å™¨ç”Ÿæˆå“åº”ä½“ä¹‹å‰æ ‡è®°è¯·æ±‚å·²ç»è¢«å¤„ç†ã€‚</p><h1 id="è¿è¡Œ-HelloWorldHandler"><a href="#è¿è¡Œ-HelloWorldHandler" class="headerlink" title="è¿è¡Œ HelloWorldHandler"></a>è¿è¡Œ HelloWorldHandler</h1><p>ä¸ºäº†å…è®¸ä¸€ä¸ªå¤„ç†å™¨å¤„ç† HTTP è¯·æ±‚ï¼Œå¿…é¡»æ·»åŠ å¤„ç†å™¨åˆ°ä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ä¸­ã€‚ä¸‹é¢ OneHandler.java ä»£ç å±•ç¤ºäº† Jetty æœåŠ¡å™¨å¦‚ä½•ä½¿ç”¨ HelloWrold å¤„ç†å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneHandler</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line">        server.setHandler(<span class="keyword">new</span> <span class="title class_">HelloHandler</span>());</span><br><span class="line"></span><br><span class="line">        server.start();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ Jetty ä¸­ä¸€ä¸ªæˆ–è€…æ›´å¤šå¤„ç†å™¨å¤„ç†æ‰€æœ‰è¯·æ±‚ã€‚ä¸€äº›å¤„ç†å™¨é€‰æ‹©å…¶ä»–ç‰¹å®šçš„å¤„ç†å™¨ï¼ˆä¾‹å¦‚ï¼ŒContextHandlerCollection ä½¿ç”¨ä¸Šä¸‹æ–‡è·¯å¾„é€‰æ‹© ContextHandlerï¼‰ï¼›å…¶ä»–å¤„ç†å™¨ä½¿ç”¨åº”ç”¨é€»è¾‘ç”Ÿæˆå“åº”ï¼ˆä¾‹å¦‚ï¼ŒServletHandler ä¼ é€è¯·æ±‚ç»™åº”ç”¨ Servletï¼‰ï¼ŒåŒæ—¶å…¶ä»–å¤„ç†å™¨åšè·Ÿç”Ÿæˆå“åº”æ— å…³çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼ŒRequestLogHandler æˆ–è€… StatisticsHandlerï¼‰ã€‚</p><p>åé¢çš„ç« èŠ‚æè¿°å¦‚ä½•ç»“åˆå¤„ç†å™¨æ–¹é¢çš„é—®é¢˜ã€‚ä½ å¯ä»¥çœ‹åˆ°åœ¨ Jetty çš„ org.eclipse.jetty.server.handler åŒ…ä¸­æœ‰ä¸€äº›å¤„ç†å™¨ã€‚</p><h1 id="Handler-Collections-and-Wrappers"><a href="#Handler-Collections-and-Wrappers" class="headerlink" title="Handler Collections and Wrappers"></a>Handler Collections and Wrappers</h1><p>å¤æ‚çš„è¯·æ±‚å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ç»„åˆå¤šä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚Jetty æœ‰å¤šä¸ª HandlerContainer æ¥å£çš„å®ç°ã€‚</p><h2 id="HandlerCollection"><a href="#HandlerCollection" class="headerlink" title="HandlerCollection"></a>HandlerCollection</h2><p>ç®¡ç†å…¶ä»–å¤„ç†å™¨çš„ä¸€ä¸ªé›†åˆï¼Œå¹¶ä¸”æŒ‰ç…§é¡ºåºè°ƒç”¨æ¯ä¸ªå¤„ç†å™¨ã€‚è¿™å¯¹ç»„åˆé‚£äº›ç”Ÿæˆå“åº”çš„å¤„ç†å™¨å’Œç»Ÿè®¡æ•°æ®ã€è®°å½•æ—¥å¿—çš„å¤„ç†å™¨æ˜¯æœ‰ç”¨çš„ã€‚</p><h2 id="HandlerList"><a href="#HandlerList" class="headerlink" title="HandlerList"></a>HandlerList</h2><p>è½®æµè°ƒç”¨æ¯ä¸ªå¤„ç†å™¨çš„å¤„ç†å™¨é›†åˆï¼Œç›´åˆ°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€æäº¤äº†å“åº”æˆ–è€… request.isHandled() è¿”å› trueã€‚ä½ å¯ä»¥ç”¨å®ƒç»„åˆæ ¹æ®æ¡ä»¶å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„å¤„ç†å™¨ï¼Œä¾‹å¦‚è°ƒç”¨å¤šä¸ªä¸Šä¸‹æ–‡ç›´åˆ°åŒ¹é…ä¸€ä¸ªè™šæ‹Ÿä¸»æœºã€‚</p><h2 id="HandlerWrapper"><a href="#HandlerWrapper" class="headerlink" title="HandlerWrapper"></a>HandlerWrapper</h2><p>å¤„ç†å™¨çš„åŸºç¡€ç±»ï¼Œä½ å¯ä»¥åœ¨é¢å‘æ–¹é¢ç¼–ç¨‹é£æ ¼ä¸­ä¸€èµ·ä½¿ç”¨èŠèŠ±é“¾å¤„ç†å™¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ ‡å‡†çš„ web åº”ç”¨æ˜¯é€šè¿‡ä¸€ä¸ª contextã€sessionã€securityå’Œservletå¤„ç†å™¨é“¾å®ç°çš„ã€‚</p><h2 id="ContextHandlerCollection"><a href="#ContextHandlerCollection" class="headerlink" title="ContextHandlerCollection"></a>ContextHandlerCollection</h2><p>ä¸€ä¸ªç‰¹å®šçš„ HandlerCollectionï¼Œä½¿ç”¨è¯·æ±‚ URI æœ€é•¿çš„å‰ç¼€ï¼ˆcontextPathï¼‰é€‰æ‹©åŒ…å«çš„ ContextHandler æ¥å¤„ç†è¯·æ±‚ã€‚</p><h1 id="å¤„ç†å™¨çš„ä½œç”¨åŸŸ"><a href="#å¤„ç†å™¨çš„ä½œç”¨åŸŸ" class="headerlink" title="å¤„ç†å™¨çš„ä½œç”¨åŸŸ"></a>å¤„ç†å™¨çš„ä½œç”¨åŸŸ</h1><p>å¾ˆå¤š Jetty ä¸­çš„æ ‡å‡† Servlet å®¹å™¨æ˜¯ç”¨ HandlerWrappers å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªèŠèŠ±å¼å¤„ç†å™¨é“¾ï¼šContextHandler åˆ° SessionHandler åˆ° SecurityHandler åˆ° ServletHandlerã€‚ç„¶è€Œï¼Œå› ä¸º servlet è§„èŒƒçš„ç‰¹æ€§ï¼Œè¿™ä¸ªé“¾ä¸æ˜¯ä¸€ä¸ªå¤„ç†å™¨çš„çº¯ç²¹åµŒå¥—ï¼Œå› ä¸ºå¤–éƒ¨å¤„ç†å™¨æœ‰æ—¶éœ€è¦å†…éƒ¨å¤„ç†å™¨çš„è¿‡ç¨‹ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå½“ ContextHandler è°ƒç”¨åº”ç”¨ç›‘å¬å™¨æ¥é€šçŸ¥å®ƒä»¬ä¸€ä¸ªè¯·æ±‚è¿›å…¥äº†ä¸Šä¸‹æ–‡ï¼Œå®ƒå¿…é¡»å·²ç»çŸ¥é“ ServletHandler åˆ†å‘è¯·æ±‚ç»™å“ªä¸ª servletï¼Œå› æ­¤ servletPath æ–¹æ³•è¿”å›æ­£ç¡®çš„å€¼ã€‚</p><p>HandlerWrapper è¢«å®šåˆ¶ä¸º ScopedHandler æŠ½è±¡ç±»ï¼Œå®ƒæ”¯æŒä½œç”¨åŸŸçš„èŠèŠ±é“¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ª ServletHandler åµŒå¥—åœ¨ä¸€ä¸ª ContextHandler ä¸­ï¼Œæ–¹æ³•çš„æ‰§è¡Œé¡ºåºå’ŒåµŒå¥—æ˜¯ï¼š</p><p>Server.handle(â€¦)<br>ContextHandler.doScope(â€¦)<br>ServletHandler.doScope(â€¦)<br>ContextHandler.doHandle(â€¦)<br>ServletHandler.doHandle(â€¦)<br>SomeServlet.service(â€¦)</p><p>å› æ­¤ï¼Œå½“ ContextHandler å¤„ç†è¯·æ±‚çš„æ—¶å€™ï¼Œå®ƒå°†åœ¨ ServletHandler å»ºç«‹çš„ä½œç”¨åŸŸå†…è¿›è¡Œã€‚</p><h1 id="Resource-Handler"><a href="#Resource-Handler" class="headerlink" title="Resource Handler"></a>Resource Handler</h1><p>FileServer ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ ResourceHandler åœ¨å½“å‰çš„å·¥ä½œç›®å½•æä¾›é™æ€å†…å®¹æœåŠ¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Handler;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.DefaultHandler;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.HandlerList;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.ResourceHandler;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.gzip.GzipHandler;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Simple Jetty FileServer.</span></span><br><span class="line"><span class="comment"> * This is a simple example of Jetty configured as a FileServer.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileServer</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Create a basic Jetty server object that will listen on port 8080.  Note that if you set this to port 0</span></span><br><span class="line">        <span class="comment">// then a randomly available port will be assigned that you can either look in the logs for the port,</span></span><br><span class="line">        <span class="comment">// or programmatically obtain it for use in test cases.</span></span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create the ResourceHandler. It is the object that will actually handle the request for a given file. It is</span></span><br><span class="line">        <span class="comment">// a Jetty Handler object so it is suitable for chaining with other handlers as you will see in other examples.</span></span><br><span class="line">        <span class="type">ResourceHandler</span> <span class="variable">resource_handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHandler</span>();</span><br><span class="line">        <span class="comment">// Configure the ResourceHandler. Setting the resource base indicates where the files should be served out of.</span></span><br><span class="line">        <span class="comment">// In this example it is the current directory but it can be configured to anything that the jvm has access to.</span></span><br><span class="line">        resource_handler.setDirectoriesListed(<span class="literal">true</span>);</span><br><span class="line">        resource_handler.setWelcomeFiles(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123; <span class="string">&quot;index.html&quot;</span> &#125;);</span><br><span class="line">        resource_handler.setResourceBase(<span class="string">&quot;.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add the ResourceHandler to the server.</span></span><br><span class="line">        <span class="type">GzipHandler</span> <span class="variable">gzip</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GzipHandler</span>();</span><br><span class="line">        server.setHandler(gzip);</span><br><span class="line">        <span class="type">HandlerList</span> <span class="variable">handlers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HandlerList</span>();</span><br><span class="line">        handlers.setHandlers(<span class="keyword">new</span> <span class="title class_">Handler</span>[] &#123; resource_handler, <span class="keyword">new</span> <span class="title class_">DefaultHandler</span>() &#125;);</span><br><span class="line">        gzip.setHandler(handlers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Start things up! By using the server.join() the server thread will join with the current thread.</span></span><br><span class="line">        <span class="comment">// See &quot;http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join()&quot; for more details.</span></span><br><span class="line">        server.start();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒResourceHandler å’Œ DefaultHandler ä½¿ç”¨äº†ä¸€ä¸ª HandlerListï¼Œå› æ­¤ DefaultHandler ä¸ºæ‰€æœ‰æ‰¾ä¸åˆ°é™æ€èµ„æºçš„è¯·æ±‚ç”Ÿæˆè‰¯å¥½çš„ 404 å“åº”ã€‚</p><h1 id="åµŒå…¥å¼-Connectors"><a href="#åµŒå…¥å¼-Connectors" class="headerlink" title="åµŒå…¥å¼ Connectors"></a>åµŒå…¥å¼ Connectors</h1><p>åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼ŒServer å®ä¾‹ä¼ å…¥äº†ä¸€ä¸ªç«¯å£å·ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªåœ¨è¿™ä¸ªç«¯å£ç›‘å¬è¯·æ±‚çš„ Connector é»˜è®¤å®ä¾‹ã€‚ç„¶è€Œï¼Œé€šå¸¸å½“åµŒå…¥ Jetty çš„æ—¶å€™ï¼Œéœ€è¦æ˜ç¡®å®ä¾‹åŒ–ï¼Œå¹¶ä¸”ç»™ Server å®ä¾‹é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ª Connectorsã€‚</p><h1 id="ä¸€ä¸ª-Connector"><a href="#ä¸€ä¸ª-Connector" class="headerlink" title="ä¸€ä¸ª Connector"></a>ä¸€ä¸ª Connector</h1><p>ä¸‹é¢çš„ç¤ºä¾‹ï¼ŒOneConnector.javaï¼Œå®ä¾‹åŒ–ã€é…ç½®å¹¶æ·»åŠ ä¸€ä¸ª HTTP è¿æ¥å™¨å®ä¾‹åˆ°æœåŠ¡å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.ServerConnector;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A Jetty server with one connectors.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneConnector</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// The Server</span></span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// HTTP connector</span></span><br><span class="line">        <span class="type">ServerConnector</span> <span class="variable">http</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerConnector</span>(server);</span><br><span class="line">        http.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">        http.setPort(<span class="number">8080</span>);</span><br><span class="line">        http.setIdleTimeout(<span class="number">30000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the connector</span></span><br><span class="line">        server.addConnector(http);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set a handler</span></span><br><span class="line">        server.setHandler(<span class="keyword">new</span> <span class="title class_">HelloHandler</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Start the server</span></span><br><span class="line">        server.start();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè¿æ¥å™¨å¤„ç† HTTP åè®®ï¼Œè¿™æ˜¯ ServerConnector ç±»é»˜è®¤çš„ã€‚</p><h1 id="å¤šä¸ª-Connectors"><a href="#å¤šä¸ª-Connectors" class="headerlink" title="å¤šä¸ª Connectors"></a>å¤šä¸ª Connectors</h1><p>å½“é…ç½®å¤šä¸ªè¿æ¥å™¨ï¼ˆä¾‹å¦‚ï¼ŒHTTP å’Œ HTTPSï¼‰æ—¶ï¼Œå…±äº« HTTP é€šç”¨å‚æ•°çš„é…ç½®æ˜¯å¯å–çš„ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ éœ€è¦æ˜ç¡®é…ç½® ConnectionFactory å®ä¾‹å’Œ ServerConnector ç±»ï¼Œå¹¶ä¸”è·Ÿ HTTP é€šç”¨é…ç½®ä¸€èµ·æä¾›ã€‚</p><p>ManyConnectors ç¤ºä¾‹ é…ç½®äº†æœ‰ä¸¤ä¸ª ServerConnector å®ä¾‹çš„æœåŠ¡å™¨ï¼šHTTP è¿æ¥å™¨æœ‰ä¸€ä¸ª HTTPConnectionFactory å®ä¾‹ï¼›HTTPS è¿æ¥å™¨æœ‰ä¸€ä¸ªé“¾æ¥åˆ° HttpConnectionFactory çš„ SslConnectionFactoryã€‚ä¸¤ä¸ª HttpConnectionFactories åœ¨åŒä¸€ä¸ª HttpConfiguration ä¸Šé…ç½®ï¼Œç„¶è€Œ HTTPS å·¥å‚ç”¨ä¸€ä¸ªåŒ…è£…çš„é…ç½®ï¼Œæ‰€ä»¥å¯ä»¥æ·»åŠ  SecureRequestCustomizerã€‚</p><h1 id="åµŒå…¥-Servlets"><a href="#åµŒå…¥-Servlets" class="headerlink" title="åµŒå…¥ Servlets"></a>åµŒå…¥ Servlets</h1><p>Servlets æ˜¯æä¾›å¤„ç† HTTP è¯·æ±‚åº”ç”¨é€»è¾‘çš„ä¸€èˆ¬æ–¹å¼ã€‚Servlets è·Ÿ Jetty çš„å¤„ç†å™¨æ˜¯ç›¸åŒçš„ï¼Œé™¤éè¯·æ±‚å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ä¸èƒ½è¢«ä¿®æ”¹ã€‚åœ¨ Jetty ä¸­ Servlets é€šè¿‡ä¸€ä¸ª ServletHandler æ¥å¤„ç†ã€‚å®ƒä½¿ç”¨æ ‡å‡†çš„è·¯å¾„æ˜ å°„è®© Servlet å’Œè¯·æ±‚åŒ¹é…ï¼›è®¾ç½®è¯·æ±‚çš„ servletPath å’Œè·¯å¾„ä¿¡æ¯ï¼›ä¼ é€è¯·æ±‚åˆ° servletï¼Œå¯èƒ½é€šè¿‡ Filters ç”Ÿæˆå“åº”ã€‚</p><p>MinimalServlets ç¤ºä¾‹ åˆ›å»ºäº†ä¸€ä¸ª ServletHandler å®ä¾‹å¹¶ä¸”é…ç½®äº†ä¸€ä¸ª HelloServlet:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.servlet.ServletHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinimalServlets</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Create a basic jetty server object that will listen on port 8080.</span></span><br><span class="line">        <span class="comment">// Note that if you set this to port 0 then a randomly available port</span></span><br><span class="line">        <span class="comment">// will be assigned that you can either look in the logs for the port,</span></span><br><span class="line">        <span class="comment">// or programmatically obtain it for use in test cases.</span></span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The ServletHandler is a dead simple way to create a context handler</span></span><br><span class="line">        <span class="comment">// that is backed by an instance of a Servlet.</span></span><br><span class="line">        <span class="comment">// This handler then needs to be registered with the Server object.</span></span><br><span class="line">        <span class="type">ServletHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletHandler</span>();</span><br><span class="line">        server.setHandler(handler);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Passing in the class for the Servlet allows jetty to instantiate an</span></span><br><span class="line">        <span class="comment">// instance of that Servlet and mount it on a given context path.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// IMPORTANT:</span></span><br><span class="line">        <span class="comment">// This is a raw Servlet, not a Servlet that has been configured</span></span><br><span class="line">        <span class="comment">// through a web.xml @WebServlet annotation, or anything similar.</span></span><br><span class="line">        handler.addServletWithMapping(HelloServlet.class, <span class="string">&quot;/*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Start things up!</span></span><br><span class="line">        server.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The use of server.join() the will make the current thread join and</span></span><br><span class="line">        <span class="comment">// wait until the server is done executing.</span></span><br><span class="line">        <span class="comment">// See</span></span><br><span class="line">        <span class="comment">// http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join()</span></span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;serial&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">( HttpServletRequest request,</span></span><br><span class="line"><span class="params">                              HttpServletResponse response )</span> <span class="keyword">throws</span> ServletException,</span><br><span class="line">                                                            IOException</span><br><span class="line">        &#123;</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">            response.setStatus(HttpServletResponse.SC_OK);</span><br><span class="line">            response.getWriter().println(<span class="string">&quot;&lt;h1&gt;Hello from HelloServlet&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åµŒå…¥-Contexts"><a href="#åµŒå…¥-Contexts" class="headerlink" title="åµŒå…¥ Contexts"></a>åµŒå…¥ Contexts</h1><p>ContextHandler æ˜¯ä¸€ä¸ª ScopedHandler åªæ¥å“åº”é‚£äº› URI å‰ç¼€åŒ¹é…å·²é…ç½®çš„ä¸Šä¸‹æ–‡è·¯å¾„çš„è¯·æ±‚ã€‚åŒ¹é…ä¸Šä¸‹æ–‡è·¯å¾„çš„è¯·æ±‚ä¼šå“åº”çš„è°ƒæ•´å®ƒä»¬çš„è·¯å¾„æ–¹æ³•ï¼Œå¹¶ä¸”ä¸Šä¸‹æ–‡ç”Ÿå‘½å‘¨æœŸå†…æ˜¯å¯è·å–çš„ï¼Œå¯èƒ½åŒ…å«ï¼š</p><ul><li>å½“è¯·æ±‚åœ¨ä½œç”¨åŸŸå†…å¤„ç†æ—¶ï¼ŒClassloader è®¾ç½®ä¸ºçº¿ç¨‹ä¸Šä¸‹æ–‡çš„ç±»åŠ è½½å™¨ã€‚</li><li>é€šè¿‡è¿‡ ServletContext API å¯ä»¥è·å–å±æ€§çš„é›†åˆã€‚</li><li>é€šè¿‡è¿‡ ServletContext API å¯ä»¥è·å–å‚æ•°çš„é›†åˆã€‚</li><li>é€šè¿‡è¿‡ ServletContext API ä¸ºé™æ€èµ„æºçš„è¯·æ±‚æä¾›ä¸€ä¸ªåŸºæœ¬çš„ Resource ä½œä¸ºæ–‡æ¡£æ ¹ã€‚</li><li>è™šæ‹Ÿä¸»æœºåç§°é›†åˆã€‚</li></ul><p>ä¸‹é¢çš„ OneContext ç¤ºä¾‹ å»ºç«‹äº†ä¸€ä¸ªåŒ…è£…äº† HelloHandler çš„ä¸Šä¸‹æ–‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.ContextHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneContext</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>( <span class="number">8080</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add a single handler on context &quot;/hello&quot;</span></span><br><span class="line">        <span class="type">ContextHandler</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContextHandler</span>();</span><br><span class="line">        context.setContextPath( <span class="string">&quot;/hello&quot;</span> );</span><br><span class="line">        context.setHandler( <span class="keyword">new</span> <span class="title class_">HelloHandler</span>() );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Can be accessed using http://localhost:8080/hello</span></span><br><span class="line"></span><br><span class="line">        server.setHandler( context );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Start the server</span></span><br><span class="line">        server.start();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æœ‰å¾ˆå¤šä¸Šä¸‹æ–‡å‡ºç°æ—¶ï¼Œä½ å¯ä»¥åµŒå…¥ä¸€ä¸ª ContextHandlerCollection æ¥æœ‰æ•ˆçš„æµ‹è¯•ä¸€ä¸ªè¯·æ±‚çš„ URIï¼Œç„¶åé€‰æ‹©åŒ¹é…åˆ°çš„ ContextHandlerã€‚ManyContexts ç¤ºä¾‹ å±•ç¤ºäº†å¯ä»¥é…ç½®å¤šä¸ªä¸Šä¸‹æ–‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Handler;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.ContextHandler;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.ContextHandlerCollection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManyContexts</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ContextHandler</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContextHandler</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        context.setContextPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        context.setHandler(<span class="keyword">new</span> <span class="title class_">HelloHandler</span>(<span class="string">&quot;Root Hello&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">ContextHandler</span> <span class="variable">contextFR</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContextHandler</span>(<span class="string">&quot;/fr&quot;</span>);</span><br><span class="line">        contextFR.setHandler(<span class="keyword">new</span> <span class="title class_">HelloHandler</span>(<span class="string">&quot;Bonjoir&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">ContextHandler</span> <span class="variable">contextIT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContextHandler</span>(<span class="string">&quot;/it&quot;</span>);</span><br><span class="line">        contextIT.setHandler(<span class="keyword">new</span> <span class="title class_">HelloHandler</span>(<span class="string">&quot;Bongiorno&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">ContextHandler</span> <span class="variable">contextV</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContextHandler</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        contextV.setVirtualHosts(<span class="keyword">new</span> <span class="title class_">String</span>[] &#123; <span class="string">&quot;127.0.0.2&quot;</span> &#125;);</span><br><span class="line">        contextV.setHandler(<span class="keyword">new</span> <span class="title class_">HelloHandler</span>(<span class="string">&quot;Virtual Hello&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">ContextHandlerCollection</span> <span class="variable">contexts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContextHandlerCollection</span>();</span><br><span class="line">        contexts.setHandlers(<span class="keyword">new</span> <span class="title class_">Handler</span>[] &#123; context, contextFR, contextIT,</span><br><span class="line">                contextV &#125;);</span><br><span class="line"></span><br><span class="line">        server.setHandler(contexts);</span><br><span class="line"></span><br><span class="line">        server.start();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åµŒå…¥-ServletContexts"><a href="#åµŒå…¥-ServletContexts" class="headerlink" title="åµŒå…¥ ServletContexts"></a>åµŒå…¥ ServletContexts</h1><p>ServletContextHandler æ˜¯ä¸€ä¸ªæ”¯æŒæ™®é€š session å’Œ Servlet çš„ç‰¹å®šçš„ ContextHandlerã€‚ä¸‹é¢çš„ OneServletContext ç¤ºä¾‹ å®ä¾‹åŒ–äº†ä¸€ä¸ª DefaultServlet ä» &#x2F;tmp&#x2F; æä¾›é™æ€å†…å®¹ï¼Œå¹¶ä¸”å®ä¾‹åŒ–ä¸€ä¸ª DumpServlet åˆ›å»º session å¹¶å­˜å‚¨è¯·æ±‚çš„åŸºæœ¬è¯¦ç»†ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.servlet.DefaultServlet;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.servlet.ServletContextHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneServletContext</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ServletContextHandler</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextHandler</span>(</span><br><span class="line">                ServletContextHandler.SESSIONS);</span><br><span class="line">        context.setContextPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        context.setResourceBase(System.getProperty(<span class="string">&quot;java.io.tmpdir&quot;</span>));</span><br><span class="line">        server.setHandler(context);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add dump servlet</span></span><br><span class="line">        context.addServlet(DumpServlet.class, <span class="string">&quot;/dump/*&quot;</span>);</span><br><span class="line">        <span class="comment">// Add default servlet</span></span><br><span class="line">        context.addServlet(DefaultServlet.class, <span class="string">&quot;/&quot;</span>);</span><br><span class="line"></span><br><span class="line">        server.start();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åµŒå…¥-Web-Applications"><a href="#åµŒå…¥-Web-Applications" class="headerlink" title="åµŒå…¥ Web Applications"></a>åµŒå…¥ Web Applications</h1><p>WebAppContext æ˜¯ä¸€ä¸ª ServletContextHandler çš„æ‰©å±•ï¼Œå®ƒä½¿ç”¨æ ‡å‡†è®¾è®¡å’Œ web.xml é…ç½® servletã€filter å’Œ web.xml æˆ–æ³¨è§£çš„å…¶ä»–ç‰¹æ€§ã€‚ä¸‹é¢çš„ OneWebApp ç¤ºä¾‹ é…ç½®äº† Jetty çš„æµ‹è¯• web åº”ç”¨ã€‚Web åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨å®¹å™¨æä¾›çš„çš„èµ„æºï¼Œåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­éœ€è¦å¹¶é…ç½®ä¸€ä¸ª LoginServiceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//  Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line"><span class="comment">//  ------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//  All rights reserved. This program and the accompanying materials</span></span><br><span class="line"><span class="comment">//  are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line"><span class="comment">//  and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Eclipse Public License is available at</span></span><br><span class="line"><span class="comment">//      http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      The Apache License v2.0 is available at</span></span><br><span class="line"><span class="comment">//      http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line"><span class="comment">//  ========================================================================</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.lang.management.ManagementFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.jmx.MBeanContainer;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.security.HashLoginService;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.AllowSymLinkAliasChecker;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.webapp.WebAppContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneWebApp</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Create a basic jetty server object that will listen on port 8080.</span></span><br><span class="line">        <span class="comment">// Note that if you set this to port 0 then a randomly available port</span></span><br><span class="line">        <span class="comment">// will be assigned that you can either look in the logs for the port,</span></span><br><span class="line">        <span class="comment">// or programmatically obtain it for use in test cases.</span></span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Setup JMX</span></span><br><span class="line">        <span class="type">MBeanContainer</span> <span class="variable">mbContainer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MBeanContainer</span>(</span><br><span class="line">                ManagementFactory.getPlatformMBeanServer());</span><br><span class="line">        server.addBean(mbContainer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The WebAppContext is the entity that controls the environment in</span></span><br><span class="line">        <span class="comment">// which a web application lives and breathes. In this example the</span></span><br><span class="line">        <span class="comment">// context path is being set to &quot;/&quot; so it is suitable for serving root</span></span><br><span class="line">        <span class="comment">// context requests and then we see it setting the location of the war.</span></span><br><span class="line">        <span class="comment">// A whole host of other configurations are available, ranging from</span></span><br><span class="line">        <span class="comment">// configuring to support annotation scanning in the webapp (through</span></span><br><span class="line">        <span class="comment">// PlusConfiguration) to choosing where the webapp will unpack itself.</span></span><br><span class="line">        <span class="type">WebAppContext</span> <span class="variable">webapp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebAppContext</span>();</span><br><span class="line">        webapp.setContextPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">warFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(</span><br><span class="line">                <span class="string">&quot;../../tests/test-jmx/jmx-webapp/target/jmx-webapp&quot;</span>);</span><br><span class="line">        webapp.setWar(warFile.getAbsolutePath());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// A WebAppContext is a ContextHandler as well so it needs to be set to</span></span><br><span class="line">        <span class="comment">// the server so it is aware of where to send the appropriate requests.</span></span><br><span class="line">        server.setHandler(webapp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Start things up!</span></span><br><span class="line">        server.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The use of server.join() the will make the current thread join and</span></span><br><span class="line">        <span class="comment">// wait until the server is done executing.</span></span><br><span class="line">        <span class="comment">// See http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join()</span></span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å–œæ¬¢-Jetty-XML"><a href="#å–œæ¬¢-Jetty-XML" class="headerlink" title="å–œæ¬¢ Jetty XML"></a>å–œæ¬¢ Jetty XML</h1><p>é…ç½® Jetty æœåŠ¡å™¨å®ä¾‹çš„å…¸å‹æ–¹å¼æ˜¯é€šè¿‡ jetty.xml å…³è”é…ç½®æ–‡ä»¶ã€‚ç„¶è€Œ Jetty XML é…ç½®æ ¼å¼åªæ˜¯åœ¨ä»£ç ä¸­å¯ä»¥åšçš„ç®€å•çš„è¡¨è¾¾ï¼›ä¹Ÿå¯ä»¥å¾ˆç®€å•çš„å†™åµŒå…¥ä»£ç å‡†ç¡®å®ç° jetty.xml é…ç½®ã€‚ä¸‹é¢çš„ LikeJettyXml ç¤ºä¾‹ åœ¨ä»£ç ä¸­å‘ˆç°äº†ä»é…ç½®æ–‡ä»¶è·å–çš„è¡Œä¸ºï¼š</p><ul><li>jetty.xml</li><li>jetty-jmx.xml</li><li>jetty-http.xml</li><li>jetty-https.xml</li><li>jetty-deploy.xml</li><li>jetty-stats.xml</li><li>jetty-requestlog.xml</li><li>jetty-lowresources.xml</li><li>test-realm.xml</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// ========================================================================</span></span><br><span class="line">    <span class="comment">// Copyright (c) 1995-2016 Mort Bay Consulting Pty. Ltd.</span></span><br><span class="line">    <span class="comment">// â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span></span><br><span class="line">    <span class="comment">// All rights reserved. This program and the accompanying materials</span></span><br><span class="line">    <span class="comment">// are made available under the terms of the Eclipse Public License v1.0</span></span><br><span class="line">    <span class="comment">// and Apache License v2.0 which accompanies this distribution.</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// The Eclipse Public License is available at</span></span><br><span class="line">    <span class="comment">// http://www.eclipse.org/legal/epl-v10.html</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// The Apache License v2.0 is available at</span></span><br><span class="line">    <span class="comment">// http://www.opensource.org/licenses/apache2.0.php</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// You may elect to redistribute this code under either of these licenses.</span></span><br><span class="line">    <span class="comment">// ========================================================================</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line">    <span class="keyword">import</span> java.io.File;</span><br><span class="line">    <span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line">    <span class="keyword">import</span> java.lang.management.ManagementFactory;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.deploy.DeploymentManager;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.deploy.PropertiesConfigurationManager;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.deploy.bindings.DebugListenerBinding;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.deploy.providers.WebAppProvider;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.http.HttpVersion;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.jmx.MBeanContainer;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.security.HashLoginService;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.DebugListener;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.Handler;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.HttpConfiguration;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.HttpConnectionFactory;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.LowResourceMonitor;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.NCSARequestLog;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.SecureRequestCustomizer;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.ServerConnector;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.SslConnectionFactory;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.handler.ContextHandlerCollection;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.handler.DefaultHandler;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.handler.HandlerCollection;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.handler.RequestLogHandler;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.server.handler.StatisticsHandler;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.util.ssl.SslContextFactory;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.util.thread.QueuedThreadPool;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.util.thread.ScheduledExecutorScheduler;</span><br><span class="line">    <span class="keyword">import</span> org.eclipse.jetty.webapp.Configuration;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        Starts the Jetty Distributionâ€™s demo-base directory using entirely</span></span><br><span class="line"><span class="comment">        embedded jetty techniques.</span></span><br><span class="line"><span class="comment">        /</span></span><br><span class="line"><span class="comment">        public class LikeJettyXml</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">        public static void main( String[] args ) throws Exception</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">        // Path to as-built jetty-distribution directory</span></span><br><span class="line"><span class="comment">        String jettyHomeBuild = â€œ../../jetty-distribution/target/distributionâ€;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // Find jetty home and base directories</span></span><br><span class="line"><span class="comment">        String homePath = System.getProperty(â€œjetty.homeâ€, jettyHomeBuild);</span></span><br><span class="line"><span class="comment">        File homeDir = new File(homePath);</span></span><br><span class="line"><span class="comment">        if (!homeDir.exists())</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">        throw new FileNotFoundException(homeDir.getAbsolutePath());</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        String basePath = System.getProperty(â€œjetty.baseâ€, homeDir + â€œ/demo-baseâ€);</span></span><br><span class="line"><span class="comment">        File baseDir = new File(basePath);</span></span><br><span class="line"><span class="comment">        if(!baseDir.exists())</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">        throw new FileNotFoundException(baseDir.getAbsolutePath());</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // Configure jetty.home and jetty.base system properties</span></span><br><span class="line"><span class="comment">        String jetty_home = homeDir.getAbsolutePath();</span></span><br><span class="line"><span class="comment">        String jetty_base = baseDir.getAbsolutePath();</span></span><br><span class="line"><span class="comment">        System.setProperty(â€œjetty.homeâ€, jetty_home);</span></span><br><span class="line"><span class="comment">        System.setProperty(â€œjetty.baseâ€, jetty_base);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty.xml ===</span></span><br><span class="line"><span class="comment">        // Setup Threadpool</span></span><br><span class="line"><span class="comment">        QueuedThreadPool threadPool = new QueuedThreadPool();</span></span><br><span class="line"><span class="comment">        threadPool.setMaxThreads(500);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // Server</span></span><br><span class="line"><span class="comment">        Server server = new Server(threadPool);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // Scheduler</span></span><br><span class="line"><span class="comment">        server.addBean(new ScheduledExecutorScheduler());</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // HTTP Configuration</span></span><br><span class="line"><span class="comment">        HttpConfiguration http_config = new HttpConfiguration();</span></span><br><span class="line"><span class="comment">        http_config.setSecureScheme(â€œhttpsâ€);</span></span><br><span class="line"><span class="comment">        http_config.setSecurePort(8443);</span></span><br><span class="line"><span class="comment">        http_config.setOutputBufferSize(32768);</span></span><br><span class="line"><span class="comment">        http_config.setRequestHeaderSize(8192);</span></span><br><span class="line"><span class="comment">        http_config.setResponseHeaderSize(8192);</span></span><br><span class="line"><span class="comment">        http_config.setSendServerVersion(true);</span></span><br><span class="line"><span class="comment">        http_config.setSendDateHeader(false);</span></span><br><span class="line"><span class="comment">        // httpConfig.addCustomizer(new ForwardedRequestCustomizer());</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // Handler Structure</span></span><br><span class="line"><span class="comment">        HandlerCollection handlers = new HandlerCollection();</span></span><br><span class="line"><span class="comment">        ContextHandlerCollection contexts = new ContextHandlerCollection();</span></span><br><span class="line"><span class="comment">        handlers.setHandlers(new Handler[] &#123; contexts, new DefaultHandler() &#125;);</span></span><br><span class="line"><span class="comment">        server.setHandler(handlers);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // Extra options</span></span><br><span class="line"><span class="comment">        server.setDumpAfterStart(false);</span></span><br><span class="line"><span class="comment">        server.setDumpBeforeStop(false);</span></span><br><span class="line"><span class="comment">        server.setStopAtShutdown(true);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty-jmx.xml ===</span></span><br><span class="line"><span class="comment">        MBeanContainer mbContainer = new MBeanContainer(</span></span><br><span class="line"><span class="comment">        ManagementFactory.getPlatformMBeanServer());</span></span><br><span class="line"><span class="comment">        server.addBean(mbContainer);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty-http.xml ===</span></span><br><span class="line"><span class="comment">        ServerConnector http = new ServerConnector(server,</span></span><br><span class="line"><span class="comment">        new HttpConnectionFactory(http_config));</span></span><br><span class="line"><span class="comment">        http.setPort(8080);</span></span><br><span class="line"><span class="comment">        http.setIdleTimeout(30000);</span></span><br><span class="line"><span class="comment">        server.addConnector(http);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty-https.xml ===</span></span><br><span class="line"><span class="comment">        // SSL Context Factory</span></span><br><span class="line"><span class="comment">        SslContextFactory sslContextFactory = new SslContextFactory();</span></span><br><span class="line"><span class="comment">        sslContextFactory.setKeyStorePath(jetty_home + â€œ/../../../jetty-server/src/test/config/etc/keystoreâ€);</span></span><br><span class="line"><span class="comment">        sslContextFactory.setKeyStorePassword(â€œOBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4â€);</span></span><br><span class="line"><span class="comment">        sslContextFactory.setKeyManagerPassword(â€œOBF:1u2u1wml1z7s1z7a1wnl1u2gâ€);</span></span><br><span class="line"><span class="comment">        sslContextFactory.setTrustStorePath(jetty_home + â€œ/../../../jetty-server/src/test/config/etc/keystoreâ€);</span></span><br><span class="line"><span class="comment">        sslContextFactory.setTrustStorePassword(â€œOBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4â€);</span></span><br><span class="line"><span class="comment">        sslContextFactory.setExcludeCipherSuites(â€œSSL_RSA_WITH_DES_CBC_SHAâ€,</span></span><br><span class="line"><span class="comment">        â€œSSL_DHE_RSA_WITH_DES_CBC_SHAâ€, â€œSSL_DHE_DSS_WITH_DES_CBC_SHAâ€,</span></span><br><span class="line"><span class="comment">        â€œSSL_RSA_EXPORT_WITH_RC4_40_MD5â€,</span></span><br><span class="line"><span class="comment">        â€œSSL_RSA_EXPORT_WITH_DES40_CBC_SHAâ€,</span></span><br><span class="line"><span class="comment">        â€œSSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHAâ€,</span></span><br><span class="line"><span class="comment">        â€œSSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHAâ€);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // SSL HTTP Configuration</span></span><br><span class="line"><span class="comment">        HttpConfiguration https_config = new HttpConfiguration(http_config);</span></span><br><span class="line"><span class="comment">        https_config.addCustomizer(new SecureRequestCustomizer());</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // SSL Connector</span></span><br><span class="line"><span class="comment">        ServerConnector sslConnector = new ServerConnector(server,</span></span><br><span class="line"><span class="comment">        new SslConnectionFactory(sslContextFactory,HttpVersion.HTTP_1_1.asString()),</span></span><br><span class="line"><span class="comment">        new HttpConnectionFactory(https_config));</span></span><br><span class="line"><span class="comment">        sslConnector.setPort(8443);</span></span><br><span class="line"><span class="comment">        server.addConnector(sslConnector);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty-deploy.xml ===</span></span><br><span class="line"><span class="comment">        DeploymentManager deployer = new DeploymentManager();</span></span><br><span class="line"><span class="comment">        DebugListener debug = new DebugListener(System.out,true,true,true);</span></span><br><span class="line"><span class="comment">        server.addBean(debug);</span></span><br><span class="line"><span class="comment">        deployer.addLifeCycleBinding(new DebugListenerBinding(debug));</span></span><br><span class="line"><span class="comment">        deployer.setContexts(contexts);</span></span><br><span class="line"><span class="comment">        deployer.setContextAttribute(</span></span><br><span class="line"><span class="comment">        â€œorg.eclipse.jetty.server.webapp.ContainerIncludeJarPatternâ€,</span></span><br><span class="line"><span class="comment">        â€œ./servlet-api-[^/]*\.jar$â€);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        WebAppProvider webapp_provider = new WebAppProvider();</span></span><br><span class="line"><span class="comment">        webapp_provider.setMonitoredDirName(jetty_base + â€œ/webappsâ€);</span></span><br><span class="line"><span class="comment">        webapp_provider.setDefaultsDescriptor(jetty_home + â€œ/etc/webdefault.xmlâ€);</span></span><br><span class="line"><span class="comment">        webapp_provider.setScanInterval(1);</span></span><br><span class="line"><span class="comment">        webapp_provider.setExtractWars(true);</span></span><br><span class="line"><span class="comment">        webapp_provider.setConfigurationManager(new PropertiesConfigurationManager());</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        deployer.addAppProvider(webapp_provider);</span></span><br><span class="line"><span class="comment">        server.addBean(deployer);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === setup jetty plus ==</span></span><br><span class="line"><span class="comment">        Configuration.ClassList.setServerDefault(server).addAfter(</span></span><br><span class="line"><span class="comment">        â€œorg.eclipse.jetty.webapp.FragmentConfigurationâ€,</span></span><br><span class="line"><span class="comment">        â€œorg.eclipse.jetty.plus.webapp.EnvConfigurationâ€,</span></span><br><span class="line"><span class="comment">        â€œorg.eclipse.jetty.plus.webapp.PlusConfigurationâ€);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty-stats.xml ===</span></span><br><span class="line"><span class="comment">        StatisticsHandler stats = new StatisticsHandler();</span></span><br><span class="line"><span class="comment">        stats.setHandler(server.getHandler());</span></span><br><span class="line"><span class="comment">        server.setHandler(stats);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty-requestlog.xml ===</span></span><br><span class="line"><span class="comment">        NCSARequestLog requestLog = new NCSARequestLog();</span></span><br><span class="line"><span class="comment">        requestLog.setFilename(jetty_home + â€œ/logs/yyyy_mm_dd.request.logâ€);</span></span><br><span class="line"><span class="comment">        requestLog.setFilenameDateFormat(â€œyyyy_MM_ddâ€);</span></span><br><span class="line"><span class="comment">        requestLog.setRetainDays(90);</span></span><br><span class="line"><span class="comment">        requestLog.setAppend(true);</span></span><br><span class="line"><span class="comment">        requestLog.setExtended(true);</span></span><br><span class="line"><span class="comment">        requestLog.setLogCookies(false);</span></span><br><span class="line"><span class="comment">        requestLog.setLogTimeZone(â€œGMTâ€);</span></span><br><span class="line"><span class="comment">        RequestLogHandler requestLogHandler = new RequestLogHandler();</span></span><br><span class="line"><span class="comment">        requestLogHandler.setRequestLog(requestLog);</span></span><br><span class="line"><span class="comment">        handlers.addHandler(requestLogHandler);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === jetty-lowresources.xml ===</span></span><br><span class="line"><span class="comment">        LowResourceMonitor lowResourcesMonitor=new LowResourceMonitor(server);</span></span><br><span class="line"><span class="comment">        lowResourcesMonitor.setPeriod(1000);</span></span><br><span class="line"><span class="comment">        lowResourcesMonitor.setLowResourcesIdleTimeout(200);</span></span><br><span class="line"><span class="comment">        lowResourcesMonitor.setMonitorThreads(true);</span></span><br><span class="line"><span class="comment">        lowResourcesMonitor.setMaxConnections(0);</span></span><br><span class="line"><span class="comment">        lowResourcesMonitor.setMaxMemory(0);</span></span><br><span class="line"><span class="comment">        lowResourcesMonitor.setMaxLowResourcesTime(5000);</span></span><br><span class="line"><span class="comment">        server.addBean(lowResourcesMonitor);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // === test-realm.xml ===</span></span><br><span class="line"><span class="comment">        HashLoginService login = new HashLoginService();</span></span><br><span class="line"><span class="comment">        login.setName(â€œTest Realmâ€);</span></span><br><span class="line"><span class="comment">        login.setConfig(jetty_base + â€œ/etc/realm.propertiesâ€);</span></span><br><span class="line"><span class="comment">        login.setHotReload(false);</span></span><br><span class="line"><span class="comment">        server.addBean(login);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // Start the server</span></span><br><span class="line"><span class="comment">        server.start();</span></span><br><span class="line"><span class="comment">        server.join();</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Jetty </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> Jetty </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jetty åµŒå…¥å¼ HelloWorld</title>
      <link href="/2025/10/27/Jetty-%E5%B5%8C%E5%85%A5%E5%BC%8F-HelloWorld/"/>
      <url>/2025/10/27/Jetty-%E5%B5%8C%E5%85%A5%E5%BC%8F-HelloWorld/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Jetty æ˜¯ä¸€ä¸ªå¼€æºçš„é¡¹ç›®ï¼Œæä¾› HTTP æœåŠ¡ç«¯ã€HTTP å®¢æˆ·ç«¯å’Œ javax.servlet å®¹å™¨ã€‚ä¸‹é¢çœ‹å¦‚ä½•åˆ©ç”¨ Jetty çš„ API å¿«é€Ÿå¼€å‘åµŒå…¥å¼ä»£ç ã€‚</p><h1 id="ä¸‹è½½-Jar-åŒ…"><a href="#ä¸‹è½½-Jar-åŒ…" class="headerlink" title="ä¸‹è½½ Jar åŒ…"></a>ä¸‹è½½ Jar åŒ…</h1><p>Jetty è¢«åˆ†è§£å¾ˆå¤š jar åŒ…å’Œä¾èµ–åŒ…ï¼Œé€šè¿‡é€‰æ‹© jar åŒ…çš„æœ€å°é›†åˆè¾¾åˆ°å ç”¨æœ€å°ç©ºé—´çš„ç›®çš„ã€‚é€šå¸¸ï¼Œæœ€å¥½ä½¿ç”¨åƒ Maven ä¸€æ ·çš„å·¥å…·ç®¡ç† jar åŒ…ï¼Œä½†æœ¬ä¾‹ä¸­ä½¿ç”¨åŒ…å« Jetty æ‰€æœ‰ç±»çš„èšåˆ jar åŒ…ã€‚å¯ä»¥ç”¨ curl å‘½ä»¤æˆ–è€…æµè§ˆå™¨æ‰‹åŠ¨ä¸‹è½½ <a href="https://link.zhihu.com/?target=http://central.maven.org/maven2/org/eclipse/jetty/aggregate/jetty-all/9.3.7.v20160115/jetty-all-9.3.7.v20160115-uber.jar">jetty-all.jar</a>ã€‚</p><p>åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ curl å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> Demo</span><br><span class="line"><span class="built_in">cd</span> Demo</span><br><span class="line">curl -o jetty-all-uber.jar http://central.maven.org/maven2/org/eclipse/jetty/aggregate/jetty-all/9.3.7.v20160115/jetty-all-9.3.7.v20160115-uber.jar</span><br></pre></td></tr></table></figure><h1 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h1><p>Jetty å®˜æ–¹æ–‡æ¡£ä¸­çš„ åµŒå…¥ Jettyä¸€ç« æœ‰å¾ˆå¤šé€šè¿‡ Jetty API ç¼–å†™çš„å®ä¾‹ã€‚æœ¬æ•™ç¨‹ç”¨åªåŒ…å«ä¸€ä¸ª Main æ–¹æ³•çš„ç®€å• HelloWorld å¤„ç†å™¨è¿è¡ŒæœåŠ¡å™¨ã€‚HelloWorld.java æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.eclipse.jetty.embedded;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Request;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.Server;</span><br><span class="line"><span class="keyword">import</span> org.eclipse.jetty.server.handler.AbstractHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> <span class="keyword">extends</span> <span class="title class_">AbstractHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html; charset=utf-8&quot;</span>);</span><br><span class="line">        response.setStatus(HttpServletResponse.SC_OK);</span><br><span class="line">        response.getWriter().println(<span class="string">&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        baseRequest.setHandled(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>(<span class="number">8080</span>);</span><br><span class="line">        server.setHandler(<span class="keyword">new</span> <span class="title class_">HelloWorld</span>());</span><br><span class="line">        server.start();</span><br><span class="line">        server.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¼–è¯‘-HelloWorld"><a href="#ç¼–è¯‘-HelloWorld" class="headerlink" title="ç¼–è¯‘ HelloWorld"></a>ç¼–è¯‘ HelloWorld</h1><p>ä¸‹é¢çš„å‘½ä»¤ç¼–è¯‘ HelloWorld ç±»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> classes</span><br><span class="line">javac -d classes -<span class="built_in">cp</span> jetty-all-uber.jar HelloWorld.java</span><br></pre></td></tr></table></figure><h1 id="è¿è¡Œå¤„ç†å™¨å’ŒæœåŠ¡å™¨"><a href="#è¿è¡Œå¤„ç†å™¨å’ŒæœåŠ¡å™¨" class="headerlink" title="è¿è¡Œå¤„ç†å™¨å’ŒæœåŠ¡å™¨"></a>è¿è¡Œå¤„ç†å™¨å’ŒæœåŠ¡å™¨</h1><p>ä¸‹é¢çš„å‘½ä»¤è¿è¡Œ HelloWorld å®ä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -<span class="built_in">cp</span> classes:jetty-all-uber.jar org.eclipse.jetty.embedded.HelloWorld</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š<a href="http://localhost:8080/">http://localhost:8080</a> æŸ¥çœ‹ HelloWorld é¡µé¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Jetty </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> Jetty </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx ngx_http_core_module locationæŒ‡ä»¤</title>
      <link href="/2025/10/27/nginx-ngx-http-core-module-location%E6%8C%87%E4%BB%A4/"/>
      <url>/2025/10/27/nginx-ngx-http-core-module-location%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ï¼šlocation [ = | ~ | ~* | ^~ ] uri &#123; ... &#125;</span><br><span class="line">     location @name &#123; ... &#125;</span><br><span class="line">é»˜è®¤ï¼šâ€”</span><br><span class="line">ä¸Šä¸‹æ–‡ï¼šserver, location</span><br></pre></td></tr></table></figure><p>ä¸ºè¯·æ±‚ URIï¼ˆè·¯å¾„ï¼‰è®¾ç½®é…ç½®ã€‚</p><p>è·¯å¾„åŒ¹é…åœ¨ URI è§„èŒƒåŒ–ä»¥åè¿›è¡Œã€‚è§„èŒƒåŒ–ï¼Œå°±æ˜¯å…ˆå°† URI ä¸­å½¢å¦‚ â€œ%XXâ€ çš„ç¼–ç å­—ç¬¦è¿›è¡Œè§£ç ï¼Œå†è§£æ URI ä¸­çš„ç›¸å¯¹è·¯å¾„ â€œ.â€ å’Œ â€œ..â€ éƒ¨åˆ†ï¼Œå¦å¤–è¿˜å¯èƒ½ä¼šå‹ç¼©ç›¸é‚»çš„ä¸¤ä¸ªæˆ–å¤šä¸ªæ–œçº¿æˆä¸ºä¸€ä¸ªæ–œçº¿ã€‚</p><p>å¯ä»¥ä½¿ç”¨å‰ç¼€å­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰è·¯å¾„ã€‚ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼éœ€è¦åœ¨è·¯å¾„å¼€å§‹æ·»åŠ  â€œ*â€ å‰ç¼€ä¿®é¥°è¯­ ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼Œæˆ–è€… â€œâ€ ä¿®é¥°è¯­ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚ä¸ºäº†åŒ¹é…è¯·æ±‚çš„ URI è·¯å¾„ï¼Œnginx å…ˆæ£€æŸ¥å‰ç¼€å­—ç¬¦ä¸²å®šä¹‰çš„è·¯å¾„ (å‰ç¼€è·¯å¾„)ã€‚åœ¨è¿™äº›è·¯å¾„ä¸­ï¼Œæœ€é•¿åŒ¹é…å‰ç¼€çš„è·¯å¾„ä¼šè¢«é€‰ä¸­å¹¶è®°ä½ã€‚ç„¶å nginx æŒ‰åœ¨é…ç½®æ–‡ä»¶ä¸­çš„å‡ºç°é¡ºåºæ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼è·¯å¾„ã€‚ç¬¬ä¸€ä¸ªåŒ¹é…çš„è·¯å¾„æ‰¾åˆ°åæ£€æŸ¥ä¼šåœæ­¢ï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„é…ç½®ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼è·¯å¾„ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å‰é¢è¢«è®°ä½çš„å‰ç¼€è·¯å¾„çš„é…ç½®ã€‚</p><p>è·¯å¾„é…ç½®å—å¯ä»¥åµŒå¥—ï¼Œä¸‹é¢ä¼šæåˆ°ä¸€äº›ä¾‹å¤–ã€‚</p><p>åƒ Mac OS X å’Œ Cygwin è¿™ç§ä¸åŒºåˆ†å¤§å°å†™çš„æ“ä½œç³»ç»Ÿï¼ŒåŒ¹é…å‰ç¼€å­—ç¬¦ä¸²å¿½ç•¥å¤§å°å†™(0.7.7)ã€‚ä½†æ˜¯ï¼Œæ¯”è¾ƒä»…é™äºå•å­—èŠ‚çš„ç¼–ç åŒºåŸŸ(one-byte locale)ã€‚</p><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥åŒ…å«åŒ¹é…ç»„(0.7.40)ï¼Œç»“æœå¯ä»¥è¢«åé¢çš„å…¶ä»–æŒ‡ä»¤ä½¿ç”¨ã€‚</p><p>å¦‚æœæœ€å¤§å‰ç¼€åŒ¹é…çš„è·¯å¾„ä»¥â€œ^~â€å¼€å§‹ï¼Œé‚£ä¹ˆnginxä¸å†æ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><p>ä½¿ç”¨â€œ&#x3D;â€å‰ç¼€å¯ä»¥å®šä¹‰URIå’Œè·¯å¾„çš„ç²¾ç¡®åŒ¹é…ã€‚å¦‚æœæ‰¾åˆ°ç²¾ç¡®åŒ¹é…ï¼Œåˆ™ç»ˆæ­¢æŸ¥æ‰¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ â€œ&#x2F;â€ è¯·æ±‚é¢‘ç¹ï¼Œå®šä¹‰ â€œlocation &#x3D; &#x2F;â€ å°†æé«˜è¿™äº›è¯·æ±‚çš„å¤„ç†é€Ÿåº¦ï¼Œå› ä¸ºæŸ¥æ‰¾è¿‡ç¨‹åœ¨ç¬¬ä¸€æ¬¡æ¯”è¾ƒä»¥åå³ç»“æŸã€‚è¿™æ ·çš„è·¯å¾„æ˜æ˜¾ä¸å¯èƒ½åŒ…å«åµŒå¥—è·¯å¾„ã€‚</p><blockquote><p>åœ¨ 0.7.1 åˆ° 0.8.41 çš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚åŒ¹é…æ²¡æœ‰â€œ&#x3D;â€ å’Œâ€œ^~â€ä¿®é¥°ç¬¦å‰ç¼€çš„è·¯å¾„ï¼ŒæŸ¥æ‰¾ä¹Ÿä¼šç»ˆæ­¢ï¼Œä¸”æ­£åˆ™è¡¨è¾¾å¼ä¹Ÿä¸ä¼šæ£€æŸ¥ã€‚</p></blockquote><p>è®©æˆ‘ä»¬ä»¥å®åŠ›è¯´æ˜ä¸Šé¢çš„æƒ…å†µï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">location = / <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> configuration A <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">location / <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> configuration B <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">location /documents/ <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> configuration C <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">location ^~ /images/ <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> configuration D <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">location ~* \.(gif|jpg|jpeg)$ <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> configuration E <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>â€œ&#x2F;â€ è¯·æ±‚å°†åŒ¹é…é…ç½® Aï¼Œâ€œ&#x2F;index.htmlâ€ è¯·æ±‚å°†åŒ¹é…é…ç½®Bï¼Œâ€œ&#x2F;documents&#x2F;document.htmlâ€ è¯·æ±‚å°†åŒ¹é…é…ç½®Cï¼Œâ€œ&#x2F;images&#x2F;1.gifâ€ è¯·æ±‚å°†åŒ¹é…é…ç½®Dï¼Œâ€œ&#x2F;documents&#x2F;1.jpgâ€ è¯·æ±‚å°†åŒ¹é…é…ç½®Eã€‚</p><p>â€œ@â€ å‰ç¼€å®šä¹‰ä¸€ä¸ªå‘½åçš„è·¯å¾„ã€‚è¿™ç§è·¯å¾„ä¸ä¼šç”¨ä½œå¸¸è§„è¯·æ±‚çš„å¤„ç†ï¼Œä»…ç”¨ä½œè¯·æ±‚è½¬å‘ã€‚å®ƒä»¬ä¸èƒ½åµŒå¥—ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å«åµŒå¥—è·¯å¾„ã€‚</p><p>å¦‚æœä¸€ä¸ªè·¯å¾„ç”¨å¸¦æœ‰æ–œæ ç»“å°¾çš„å‰ç¼€å­—ç¬¦ä¸²å®šä¹‰çš„ï¼Œå¹¶ä¸”è¯·æ±‚è¢« proxy_passã€fastcgi_passã€uwsgi_passã€scgi_pass æˆ–è€… memcached_passä¸­çš„ä¸€ä¸ªå¤„ç†ï¼Œé‚£ä¹ˆç‰¹å®šçš„å¤„ç†ä¼šæ‰§è¡Œã€‚åœ¨å“åº” URI ä¸è¯¥å­—ç¬¦ä¸²ç›¸ç­‰çš„è¯·æ±‚ï¼Œä½†æ²¡æœ‰ç»“å°¾çš„æ–œæ ï¼Œä¸€ä¸ªå¸¦æœ‰ 301 ä»£ç çš„å›ºå®šè½¬å‘å°†è¿”å›ç»™è¿½åŠ æ–œæ çš„è¢«è¯·æ±‚ URIã€‚å¦‚æœä¸å–œæ¬¢è¿™æ ·ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å®šä¹‰ç²¾ç¡®åŒ¹é… URI çš„è·¯å¾„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location /user/ <span class="punctuation">&#123;</span></span><br><span class="line">  proxy_pass http<span class="punctuation">:</span><span class="comment">//user.example.com;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">location = /user <span class="punctuation">&#123;</span></span><br><span class="line">  proxy_pass http<span class="punctuation">:</span><span class="comment">//login.example.com;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu å¸¸è§å®‰è£…æºæ›´æ–°é—®é¢˜</title>
      <link href="/2025/10/27/Ubuntu-%E5%B8%B8%E8%A7%81%E5%AE%89%E8%A3%85%E6%BA%90%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98/"/>
      <url>/2025/10/27/Ubuntu-%E5%B8%B8%E8%A7%81%E5%AE%89%E8%A3%85%E6%BA%90%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ä¸‹ä¸¤ç§æƒ…å†µéƒ½æ˜¯å› ä¸ºæ— æ•ˆå®‰è£…æºå¯¼è‡´çš„ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤æ— æ•ˆå®‰è£…æºè§£å†³ã€‚</p><p>æœ‰ä¸¤ä¸ªä½ç½®å¯ä»¥æ·»åŠ ä»“åº“ã€‚&#x2F;etc&#x2F;apt&#x2F;sources.list æ–‡ä»¶å’Œæ‰€æœ‰åœ¨ &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F; ç›®å½•ä¸‹ä»¥ .list ç»“å°¾çš„æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œåªéœ€è¦æ£€æŸ¥è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶ç§»é™¤ä¸éœ€è¦çš„å³å¯ã€‚</p><h1 id="1ã€Duplicate-sources-list-entry"><a href="#1ã€Duplicate-sources-list-entry" class="headerlink" title="1ã€Duplicate sources.list entry"></a>1ã€Duplicate sources.list entry</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">W: Duplicate sources.list entry http://archive.ubuntukylin.com:10006/ubuntukylin/ trusty/main amd64 Packages (/var/lib/apt/lists/archive.ubuntukylin.com:10006_ubuntukylin_dists_trusty_main_binary-amd64_Packages)</span><br><span class="line">W: Duplicate sources.list entry http://archive.ubuntukylin.com:10006/ubuntukylin/ trusty/main i386 Packages (/var/lib/apt/lists/archive.ubuntukylin.com:10006_ubuntukylin_dists_trusty_main_binary-i386_Packages)</span><br><span class="line">W: æ‚¨å¯èƒ½éœ€è¦è¿è¡Œ apt-get update æ¥è§£å†³è¿™äº›é—®é¢˜</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥æ‰¾ç›®æ ‡æ–‡ä»¶ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#cd /etc/apt/sources.list.d &amp;&amp; find . -name &#x27;*.list*&#x27;|xargs grep &quot;archive.ubuntukylin.com:10006&quot;</span><br><span class="line">./wps-office.list.save:deb http://archive.ubuntukylin.com:10006/ubuntukylin trusty main</span><br><span class="line">./sogoupinyin.list:deb http://archive.ubuntukylin.com:10006/ubuntukylin trusty main</span><br><span class="line">./sogoupinyin.list.save:deb http://archive.ubuntukylin.com:10006/ubuntukylin trusty main</span><br><span class="line">./wps-office.list:deb http://archive.ubuntukylin.com:10006/ubuntukylin trusty main</span><br></pre></td></tr></table></figure><p>åˆ é™¤å¯¹åº”çš„æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sudo rm -f wps-office.list*</span></span><br><span class="line"><span class="comment">#sudo rm -f sogoupinyin.list*</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œå®‰è£…æºæ›´æ–°å‘½ä»¤ï¼Œé—®é¢˜è§£å†³ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br></pre></td></tr></table></figure><h1 id="2ã€404-Not-Found"><a href="#2ã€404-Not-Found" class="headerlink" title="2ã€404 Not Found"></a>2ã€404 Not Found</h1><p>è¿˜æœ‰ä¸€ç§å¸¸è§é—®é¢˜æ˜¯æ‰¾ä¸åˆ°çš„é”™è¯¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯ http://ppa.launchpad.net wily/main amd64 Packages</span><br><span class="line">  404  Not Found</span><br><span class="line">é”™è¯¯ http://ppa.launchpad.net wily/main i386 Packages</span><br><span class="line">  404  Not Found</span><br><span class="line">å¿½ç•¥ http://ppa.launchpad.net wily/main Translation-en_US</span><br><span class="line">å¿½ç•¥ http://ppa.launchpad.net wily/main Translation-zh_CN</span><br><span class="line">å¿½ç•¥ http://ppa.launchpad.net wily/main Translation-en</span><br><span class="line">å¿½ç•¥ http://ppa.launchpad.net wily/main Translation-zh</span><br><span class="line">ä¸‹è½½ 1,525 kBï¼Œè€—æ—¶ 43ç§’ (35.3 kB/s)</span><br><span class="line">W: æ— æ³•ä¸‹è½½ http://ppa.launchpad.net/tldm217/tahutek.net/ubuntu/dists/wily/main/binary-amd64/Packages  404  Not Found</span><br><span class="line">W: æ— æ³•ä¸‹è½½ http://ppa.launchpad.net/tldm217/tahutek.net/ubuntu/dists/wily/main/binary-i386/Packages  404  Not Found</span><br><span class="line">E: éƒ¨åˆ†ç´¢å¼•æ–‡ä»¶ä¸‹è½½å¤±è´¥ã€‚å¦‚æœå¿½ç•¥å®ƒä»¬ï¼Œé‚£å°†è½¬è€Œä½¿ç”¨æ—§çš„ç´¢å¼•æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ¥æºè‡ª <a href="http://ppa.launchpad.net/">http://ppa.launchpad.net</a> çš„å®‰è£…æºåˆ—è¡¨ï¼Œé‡æ–°æ›´æ–°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ls -l /etc/apt/sources.list.d/tldm217-ubuntu-tahutek_net-wily.list*</span></span><br><span class="line">-rw-r--r-- 1 root root 138  4æœˆ 16 02:03 /etc/apt/sources.list.d/tldm217-ubuntu-tahutek_net-wily.list</span><br><span class="line">-rw-r--r-- 1 root root 138  4æœˆ 16 02:03 /etc/apt/sources.list.d/tldm217-ubuntu-tahutek_net-wily.list.save</span><br><span class="line"></span><br><span class="line"><span class="comment">#sudo rm -f /etc/apt/sources.list.d/tldm217-ubuntu-tahutek_net-wily.list*</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œæ›´æ–°ï¼Œé—®é¢˜è§£å†³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 15.10 å®‰è£… MongoDB</title>
      <link href="/2025/10/27/Ubuntu-15-10-%E5%AE%89%E8%A3%85-MongoDB/"/>
      <url>/2025/10/27/Ubuntu-15-10-%E5%AE%89%E8%A3%85-MongoDB/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦å‚è€ƒå®˜æ–¹å®‰è£…æ–‡æ¡£ï¼Œåœ¨ Ubuntu 15.10 ä¸Šå®‰è£…å¹¶å¯åŠ¨ã€‚ä¸­é—´é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå·²ç»æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚</p><h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>ä» 3.2 ç‰ˆæœ¬å¼€å§‹ï¼ŒMongoDB ä¸å†æ”¯æŒ 32 ä½çš„å¹³å°ã€‚</p><p>ä½¿ç”¨æœ¬æ•™ç¨‹ä» .deb åŒ…åœ¨ LTS Ubuntu Linux ç³»ç»Ÿä¸Šå®‰è£… MongoDB ç¤¾åŒºç‰ˆã€‚è™½ç„¶ Ubuntu åŒ…å«è‡ªå·±çš„ MongoDB åŒ…ï¼Œå®˜æ–¹ MongoDB ç¤¾åŒºç‰ˆåŒ…é€šå¸¸æ˜¯æ›´æ–°çš„ã€‚</p><h1 id="å®‰è£…åŒ…"><a href="#å®‰è£…åŒ…" class="headerlink" title="å®‰è£…åŒ…"></a>å®‰è£…åŒ…</h1><p>MongoDB åœ¨è‡ªå·±çš„ä»“åº“ä¸­æä¾›äº†å®˜æ–¹æ”¯æŒçš„å®‰è£…åŒ…ã€‚è¿™ä¸ªä»“åº“åŒ…å«ä¸€ä¸‹åŒ…ï¼š</p><ul><li>mongodb-orgï¼šä¸€ä¸ªå…ƒå®‰è£…åŒ…ï¼Œå¯ä»¥è‡ªåŠ¨å®‰è£…ä¸‹é¢çš„å››ä¸ªç»„ä»¶å®‰è£…åŒ…ã€‚</li><li>mongodb-org-serverï¼šåŒ…å« mongod å®ˆæŠ¤è¿›ç¨‹å’Œç›¸å…³çš„é…ç½®åŠåˆå§‹è„šæœ¬ã€‚</li><li>mongodb-org-mongosï¼šåŒ…å« mongos å®ˆæŠ¤è¿›ç¨‹ã€‚</li><li>mongodb-org-shellï¼šåŒ…å« mongo shellã€‚</li><li>mongodb-org-toolsï¼šåŒ…å«ä»¥ä¸‹ MongoDB å·¥å…·ï¼šmongoimportã€bsondumpã€mongodumpã€mongoexportã€mongofilesã€mongooplogã€mongoperfã€mongorestoreã€mongostat å’Œ mongotopã€‚</li></ul><p>è¿™äº›åŒ…ä¸ Ubuntu æä¾›çš„ mongodbã€mongodb-server å’Œ mongodb-clients åŒ…å†²çªã€‚</p><p>å®‰è£…åŒ…æä¾›çš„é»˜è®¤çš„ &#x2F;etc&#x2F;mongod.conf é…ç½®æ–‡ä»¶é»˜è®¤è®¾ç½® bind_ip ä¸º 127.0.0.1ã€‚åœ¨åˆå§‹åŒ–ä¸€ä¸ª replica set ä¹‹å‰æ ¹æ®ç¯å¢ƒçš„éœ€è¦ä¿®æ”¹è¿™ä¸ªè®¾ç½®ã€‚</p><h1 id="åˆå§‹åŒ–è„šæœ¬"><a href="#åˆå§‹åŒ–è„šæœ¬" class="headerlink" title="åˆå§‹åŒ–è„šæœ¬"></a>åˆå§‹åŒ–è„šæœ¬</h1><p>mongodb-org å®‰è£…åŒ…åŒ…å«è®¸å¤šåˆå§‹åŒ–è„šæœ¬ï¼ŒåŒ…å«åˆå§‹åŒ–è„šæœ¬ &#x2F;etc&#x2F;init.d&#x2F;mongodã€‚ä½ å¯ä»¥ç”¨è¿™äº›è„šæœ¬åœæ­¢ã€å¯åŠ¨å’Œé‡å¯å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>å®‰è£…åŒ…ä½¿ç”¨ &#x2F;etc&#x2F;mongod.conf æ–‡ä»¶ç»“åˆåˆå§‹åŒ–è„šæœ¬é…ç½® MongoDBã€‚æŸ¥çœ‹<a href="https://link.zhihu.com/?target=https://docs.mongodb.org/manual/reference/configuration-options/">é…ç½®æ–‡ä»¶</a>å‚è€ƒè·å–é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®å‚æ•°ã€‚</p><p>ä» 3.2.5 ç‰ˆæœ¬å¼€å§‹ï¼Œä¸å†æœ‰ mongos åˆå§‹è„šæœ¬ã€‚mongos è¿›ç¨‹åªåœ¨ sharding æ—¶ç”¨ã€‚ä½ å¯ä»¥ç”¨ mongod åˆå§‹è„šæœ¬ç”Ÿæˆè‡ªå·±çš„ mongos åˆå§‹åŒ–è„šæœ¬åœ¨è¿™æ ·çš„ç¯å¢ƒä½¿ç”¨ã€‚æŸ¥çœ‹ <a href="https://link.zhihu.com/?target=https://docs.mongodb.org/manual/reference/program/mongos/%23bin.mongos">mongos</a> å‚è€ƒè·å–è¯¦ç»†é…ç½®ã€‚</p><h1 id="å®‰è£…-MongoDB-ç¤¾åŒºç‰ˆ"><a href="#å®‰è£…-MongoDB-ç¤¾åŒºç‰ˆ" class="headerlink" title="å®‰è£… MongoDB ç¤¾åŒºç‰ˆ"></a>å®‰è£… MongoDB ç¤¾åŒºç‰ˆ</h1><p>MongoDB åªä¸º 64 ä½é•¿æœŸæ”¯æŒçš„ Ubuntu å‘è¡Œç‰ˆæä¾›å®‰è£…åŒ…ã€‚å½“å‰ï¼Œè¿™æ„å‘³ç€ 12.04 LTS (Precise Pangolin) å’Œ 14.04 LTS (Trusty Tahr) ä¸¤ä¸ªç‰ˆæœ¬ã€‚åŒæ—¶bå®‰è£…åŒ…åœ¨å…¶ä»– Ubuntu å‘è¡Œç‰ˆæœ¬ä¹Ÿå¯ä»¥è¿è¡Œï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªç»´æŒçš„é…ç½®ã€‚</p><h2 id="1ã€å¯¼å…¥å®‰è£…åŒ…ç®¡ç†ç³»ç»Ÿä½¿ç”¨çš„å…¬é’¥"><a href="#1ã€å¯¼å…¥å®‰è£…åŒ…ç®¡ç†ç³»ç»Ÿä½¿ç”¨çš„å…¬é’¥" class="headerlink" title="1ã€å¯¼å…¥å®‰è£…åŒ…ç®¡ç†ç³»ç»Ÿä½¿ç”¨çš„å…¬é’¥"></a>1ã€å¯¼å…¥å®‰è£…åŒ…ç®¡ç†ç³»ç»Ÿä½¿ç”¨çš„å…¬é’¥</h2><p>Ubuntu åŒ…ç®¡ç†å·¥å…·ï¼ˆä¾‹å¦‚ dpkg å’Œ apt) é€šè¿‡è¦æ±‚å‘å¸ƒè€…ç­¾åçš„ GPG å¯†é’¥ç¡®ä¿å®‰è£…åŒ…çš„ä¸€è‡´å’ŒçœŸå®ã€‚è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å¯¼å…¥ MongoDB GPG å…¬é’¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927</span><br></pre></td></tr></table></figure><h2 id="2ã€ä¸º-MongoDB-åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨"><a href="#2ã€ä¸º-MongoDB-åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨" class="headerlink" title="2ã€ä¸º MongoDB åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨"></a>2ã€ä¸º MongoDB åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨</h2><p>ä½¿ç”¨é€‚ç”¨ä½ çš„ Ubuntu ç‰ˆæœ¬çš„å‘½ä»¤åˆ›å»º &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;mongodb-org-3.2.list åˆ—è¡¨æ–‡ä»¶ï¼š</p><p>Ubuntu 12.04ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://repo.mongodb.org/apt/ubuntu precise/mongodb-org/3.2 multiverse&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/mongodb-org-3.2.list</span><br></pre></td></tr></table></figure><p>Ubuntu 14.04ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://repo.mongodb.org/apt/ubuntu trusty/mongodb-org/3.2 multiverse&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/mongodb-org-3.2.list</span><br></pre></td></tr></table></figure><h2 id="3ã€é‡æ–°åŠ è½½æœ¬åœ°å®‰è£…åŒ…æ•°æ®åº“"><a href="#3ã€é‡æ–°åŠ è½½æœ¬åœ°å®‰è£…åŒ…æ•°æ®åº“" class="headerlink" title="3ã€é‡æ–°åŠ è½½æœ¬åœ°å®‰è£…åŒ…æ•°æ®åº“"></a>3ã€é‡æ–°åŠ è½½æœ¬åœ°å®‰è£…åŒ…æ•°æ®åº“</h2><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤é‡æ–°åŠ è½½æœ¬åœ°å®‰è£…åŒ…æ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼Œå¤šè¯•ä¸¤æ¬¡å³å¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯ http://repo.mongodb.org trusty/mongodb-org/3.2/multiverse Translation-zh_CN                                                              </span><br><span class="line">  ä¸èƒ½è¿æ¥åˆ° repo.mongodb.orgï¼šhttpï¼š</span><br><span class="line">é”™è¯¯ http://repo.mongodb.org trusty/mongodb-org/3.2/multiverse Translation-zh</span><br><span class="line">  ä¸èƒ½è¿æ¥åˆ° repo.mongodb.orgï¼šhttpï¼š</span><br><span class="line">é”™è¯¯ http://repo.mongodb.org trusty/mongodb-org/3.2/multiverse Translation-en_US</span><br><span class="line">  ä¸èƒ½è¿æ¥åˆ° repo.mongodb.orgï¼šhttpï¼š</span><br><span class="line">é”™è¯¯ http://repo.mongodb.org trusty/mongodb-org/3.2/multiverse Translation-en</span><br><span class="line">  ä¸èƒ½è¿æ¥åˆ° repo.mongodb.orgï¼šhttpï¼š</span><br></pre></td></tr></table></figure><p>å¦‚æœæŠ¥ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥å°†æ·»åŠ åˆ°æ–‡ä»¶åˆ—è¡¨ä¸­çš„ä¿¡æ¯ç”± HTTP æ”¹ä¸º HTTPSï¼š</p><p>é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">W: æ— æ³•ä¸‹è½½ http://repo.mongodb.org/apt/ubuntu/dists/trusty/mongodb-org/3.2/multiverse/binary-amd64/Packages  Hash æ ¡éªŒå’Œä¸ç¬¦</span><br></pre></td></tr></table></figure><p>ç¬¬ 2 æ­¥åˆ›å»ºæ–‡ä»¶åˆ—è¡¨å‘½ä»¤æ”¹ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://repo.mongodb.org/apt/ubuntu trusty/mongodb-org/3.2 multiverse&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/mongodb-org-3.2.list</span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œæ›´æ–°å‘½ä»¤æˆåŠŸã€‚</p><h2 id="4ã€å®‰è£…-MongoDB"><a href="#4ã€å®‰è£…-MongoDB" class="headerlink" title="4ã€å®‰è£… MongoDB"></a>4ã€å®‰è£… MongoDB</h2><p>å¯ä»¥å®‰è£… MongoDB æœ€æ–°ç¨³å®šç‰ˆæœ¬æˆ–è€…æŒ‡å®šçš„ç‰ˆæœ¬ã€‚</p><h2 id="5ã€å®‰è£…-MongoDB-æœ€æ–°ç¨³å®šç‰ˆæœ¬"><a href="#5ã€å®‰è£…-MongoDB-æœ€æ–°ç¨³å®šç‰ˆæœ¬" class="headerlink" title="5ã€å®‰è£… MongoDB æœ€æ–°ç¨³å®šç‰ˆæœ¬"></a>5ã€å®‰è£… MongoDB æœ€æ–°ç¨³å®šç‰ˆæœ¬</h2><p>è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install -y mongodb-org</span><br></pre></td></tr></table></figure><h2 id="6ã€å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„-MongoDB"><a href="#6ã€å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„-MongoDB" class="headerlink" title="6ã€å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ MongoDB"></a>6ã€å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ MongoDB</h2><p>å®‰è£…ç‰¹å®šå‘è¡Œç‰ˆï¼Œä½ å¿…é¡»åˆ†åˆ«å•ç‹¬ç”¨ç‰ˆæœ¬å·æŒ‡å®šæ¯ä¸ªç»„ä»¶ï¼Œåƒä¸‹é¢ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install -y mongodb-org=3.2.5 mongodb-org-server=3.2.5 mongodb-org-shell=3.2.5 mongodb-org-mongos=3.2.5 mongodb-org-tools=3.2.5</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åªå®‰è£… mongodb-org&#x3D;3.2.5ï¼Œå¹¶ä¸”æ²¡æœ‰åŒ…å«ç»„ä»¶å®‰è£…åŒ…ï¼ŒMongoDB æ¯ä¸ªæœ€æ–°çš„ç‰ˆæœ¬å°†è¢«å®‰è£…ï¼Œä¸ç®¡ä½ æŒ‡æ˜äº†å“ªä¸ªç‰ˆæœ¬ã€‚</p><h2 id="7ã€å›ºå®šä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„-MongoDB"><a href="#7ã€å›ºå®šä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„-MongoDB" class="headerlink" title="7ã€å›ºå®šä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„ MongoDB"></a>7ã€å›ºå®šä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„ MongoDB</h2><p>è™½ç„¶ä½ å¯ä»¥æŒ‡å®šä»»ä½•å¯ä»¥è·å–çš„ MongoDB ç‰ˆæœ¬ï¼Œå½“æ–°ç‰ˆæœ¬å¯ä»¥è·å–æ—¶ apt-get å°†æ›´æ–°å®‰è£…åŒ…ã€‚ä¸ºäº†é˜²æ­¢æ— æ„çš„æ›´æ–°ï¼Œå›ºå®šå®‰è£…åŒ…ã€‚ä¸ºäº†å›ºå®šå½“å‰å®‰è£…çš„ MongoDB ç‰ˆæœ¬ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤åºåˆ—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;mongodb-org hold&quot;</span> | <span class="built_in">sudo</span> dpkg --set-selections</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;mongodb-org-server hold&quot;</span> | <span class="built_in">sudo</span> dpkg --set-selections</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;mongodb-org-shell hold&quot;</span> | <span class="built_in">sudo</span> dpkg --set-selections</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;mongodb-org-mongos hold&quot;</span> | <span class="built_in">sudo</span> dpkg --set-selections</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;mongodb-org-tools hold&quot;</span> | <span class="built_in">sudo</span> dpkg --set-selections</span><br></pre></td></tr></table></figure><h1 id="è¿è¡Œ-MongoDB-ç¤¾åŒºç‰ˆ"><a href="#è¿è¡Œ-MongoDB-ç¤¾åŒºç‰ˆ" class="headerlink" title="è¿è¡Œ MongoDB ç¤¾åŒºç‰ˆ"></a>è¿è¡Œ MongoDB ç¤¾åŒºç‰ˆ</h1><p>é»˜è®¤çš„ MongoDB å®ä¾‹åœ¨ &#x2F;var&#x2F;lib&#x2F;mongodb å­˜å‚¨æ•°æ®æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ &#x2F;var&#x2F;log&#x2F;mongodb å­˜å‚¨æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä¸”ç”¨ mongodb ç”¨æˆ·ç”¨æˆ·å¸å·è¿è¡Œã€‚ä½ å¯ä»¥åœ¨ &#x2F;etc&#x2F;mongod.conf ä¸­æŒ‡å®šæ›¿æ¢çš„æ—¥å¿—å’Œæ•°æ®æ–‡ä»¶ç›®å½•ã€‚æŸ¥çœ‹ systemLog.path å’Œ storage.dbPath è·å–é¢å¤–çš„ä¿¡æ¯ã€‚</p><p>å¦‚æœæ”¹å˜è¿è¡Œ MongoDB è¿›ç¨‹çš„ç”¨æˆ·ï¼Œä½ å¿…é¡»ä¿®æ”¹ &#x2F;var&#x2F;lib&#x2F;mongodb å’Œ &#x2F;var&#x2F;log&#x2F;mongodb ç›®å½•çš„è®¿é—®æ§åˆ¶æƒé™ç»™è¿™ä¸ªç”¨æˆ·å¯¹è¿™äº›ç›®å½•çš„è®¿é—®æƒé™ã€‚</p><h2 id="1ã€å¯åŠ¨-MongoDB"><a href="#1ã€å¯åŠ¨-MongoDB" class="headerlink" title="1ã€å¯åŠ¨ MongoDB"></a>1ã€å¯åŠ¨ MongoDB</h2><p>è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ mongodï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service mongod start</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Failed to start mongod.service: Unit mongod.service failed to load: No such file or directory.</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯ç¼ºå°‘ systemd çš„ service æ–‡ä»¶ã€‚ä¸éœ€è¦é‡æ–°å¼€å§‹å®‰è£…æˆ–è€…æ¢ç”¨å…¶ä»–ä»“åº“ã€‚åˆ›å»ºæ–‡ä»¶ &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mongod.serviceï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=High-performance, schema-free document-oriented database</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">User</span>=mongodb</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/bin/mongod --quiet --config /etc/mongod.conf</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mongod.service å’Œé…ç½®å†…å®¹ä¸­çš„æ–‡ä»¶åå¯èƒ½éœ€è¦å¯¹åº”çš„åšä¿®æ”¹ï¼Œå¯èƒ½æ˜¯ mongodb.service å’Œ mongodb.confã€‚å‚è€ƒç½‘ä¸Šçš„èµ„æ–™æ˜¯ mongodbï¼Œè€Œæˆ‘çš„ç³»ç»Ÿå®‰è£…åéƒ½æ˜¯ mongodã€‚</p></blockquote><p>é‡æ–°æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼Œæç¤ºä»¥ä¸‹ä¿¡æ¯ï¼Œæ£€æŸ¥ mongo è¿›ç¨‹ä¸å­˜åœ¨ï¼Œè¯´æ˜æœªå¯åŠ¨æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: mongod.service changed on disk. Run <span class="string">&#x27;systemctl daemon-reload&#x27;</span> to reload units.</span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¹¶è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œå†æ¬¡æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼Œè¿™æ¬¡å¯åŠ¨æˆåŠŸ :)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h2 id="2ã€ç¡®è®¤-MongoDB-å·²ç»æˆåŠŸå¯åŠ¨"><a href="#2ã€ç¡®è®¤-MongoDB-å·²ç»æˆåŠŸå¯åŠ¨" class="headerlink" title="2ã€ç¡®è®¤ MongoDB å·²ç»æˆåŠŸå¯åŠ¨"></a>2ã€ç¡®è®¤ MongoDB å·²ç»æˆåŠŸå¯åŠ¨</h2><p>é€šè¿‡è¯»å–æ£€æŸ¥ &#x2F;var&#x2F;log&#x2F;mongodb&#x2F;mongod.log æ—¥å¿—æ–‡ä»¶ä¸­çš„ä¸‹é¢ä¸€è¡Œè®°å½•ç¡®è®¤ mongod è¿›ç¨‹å·²ç»æˆåŠŸå¯åŠ¨ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[initandlisten] waiting for connections on port &lt;port&gt;</span><br></pre></td></tr></table></figure><p>æ˜¯åœ¨ &#x2F;etc&#x2F;mongod.conf æ–‡ä»¶ä¸­é…ç½®çš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯ 27017ã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘çš„å®‰è£…è¿‡ç¨‹çš„å¯åŠ¨æ—¥å¿—ä¿¡æ¯ï¼š<br><img src="/images/202510/30.jpg"></p><h2 id="3ã€åœæ­¢-MongoDB"><a href="#3ã€åœæ­¢-MongoDB" class="headerlink" title="3ã€åœæ­¢ MongoDB"></a>3ã€åœæ­¢ MongoDB</h2><p>å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤åœæ­¢ mongod è¿›ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service mongod stop</span><br></pre></td></tr></table></figure><h2 id="4ã€é‡å¯-MongoDB"><a href="#4ã€é‡å¯-MongoDB" class="headerlink" title="4ã€é‡å¯ MongoDB"></a>4ã€é‡å¯ MongoDB</h2><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤é‡å¯ mongod è¿›ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service mongod restart</span><br></pre></td></tr></table></figure><h1 id="å¸è½½-MongoDB-ç¤¾åŒºç‰ˆ"><a href="#å¸è½½-MongoDB-ç¤¾åŒºç‰ˆ" class="headerlink" title="å¸è½½ MongoDB ç¤¾åŒºç‰ˆ"></a>å¸è½½ MongoDB ç¤¾åŒºç‰ˆ</h1><p>è¦ä»ç³»ç»Ÿä¸­å®Œå…¨ç§»é™¤ MongoDBï¼Œä½ å¿…é¡»ç§»é™¤ MongoDB åº”ç”¨ç¨‹åºã€é…ç½®æ–‡ä»¶å’Œæ‰€æœ‰åŒ…å«æ•°æ®å’Œæ—¥å¿—çš„ç›®å½•ã€‚ä¸‹é¢çš„ç« èŠ‚æŒ‡å¯¼ä½ é€šè¿‡å¿…è¦çš„æ­¥éª¤å®Œæˆå¸è½½ã€‚</p><blockquote><p>è­¦å‘Šï¼š<br>è¿™ä¸ªè¿‡ç¨‹å°†å®Œå…¨ç§»é™¤ MongoDBã€é…ç½®å’Œæ‰€æœ‰æ•°æ®åº“ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸èƒ½æ¢å¤çš„ï¼Œå› æ­¤ç¡®è®¤æ‰§è¡Œè¯¥è¿‡ç¨‹å‰ç¡®ä¿ä½ çš„é…ç½®å’Œæ•°æ®åº”ç»å¤‡ä»½ã€‚</p></blockquote><h2 id="1ã€åœæ­¢-MongoDB"><a href="#1ã€åœæ­¢-MongoDB" class="headerlink" title="1ã€åœæ­¢ MongoDB"></a>1ã€åœæ­¢ MongoDB</h2><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤åœæ­¢ mongod è¿›ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service mongod stop</span><br></pre></td></tr></table></figure><h2 id="2ã€ç§»é™¤å®‰è£…åŒ…"><a href="#2ã€ç§»é™¤å®‰è£…åŒ…" class="headerlink" title="2ã€ç§»é™¤å®‰è£…åŒ…"></a>2ã€ç§»é™¤å®‰è£…åŒ…</h2><p>ç§»é™¤æ‰€æœ‰ä»¥å‰å®‰è£…çš„ MongoDB å®‰è£…åŒ…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get purge mongodb-org*</span><br></pre></td></tr></table></figure><h2 id="3ã€ç§»é™¤æ•°æ®ç›®å½•"><a href="#3ã€ç§»é™¤æ•°æ®ç›®å½•" class="headerlink" title="3ã€ç§»é™¤æ•°æ®ç›®å½•"></a>3ã€ç§»é™¤æ•°æ®ç›®å½•</h2><p>ç§»é™¤ MongoDB æ•°æ®åº“å’Œæ—¥å¿—æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -r /var/log/mongodb</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -r /var/lib/mongodb</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB å¸¸ç”¨æŸ¥è¯¢</title>
      <link href="/2025/10/27/MongoDB-%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2/"/>
      <url>/2025/10/27/MongoDB-%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<ul><li>å½“å‰ MongoDB ç‰ˆæœ¬ï¼š<code>db.version();</code></li><li>Webæ§åˆ¶å°<br>Mongodb è‡ªå¸¦äº† Web æ§åˆ¶å°ï¼Œé»˜è®¤å’Œæ•°æ®æœåŠ¡ä¸€åŒå¼€å¯ã€‚ä»–çš„ç«¯å£åœ¨ Mongodb æ•°æ®åº“æœåŠ¡å™¨ç«¯å£çš„åŸºç¡€ä¸ŠåŠ  1000 ï¼Œå¦‚æœæ˜¯é»˜è®¤çš„Mongodbæ•°æ®æœåŠ¡ç«¯å£ 27017 ï¼Œåˆ™ç›¸åº”çš„Webç«¯å£ä¸º 28017ã€‚è¿™ä¸ªé¡µé¢å¯ä»¥çœ‹åˆ°ï¼š<ul><li>å½“å‰Mongodbçš„æ‰€æœ‰è¿æ¥ã€‚</li><li>å„ä¸ªæ•°æ®åº“å’ŒCollectionçš„è®¿é—®ç»Ÿè®¡ï¼ŒåŒ…æ‹¬ï¼šReads, Writes, Queries, GetMores ,Inserts, Updates, Removesã€‚</li><li>å†™é”çš„çŠ¶æ€ã€‚</li><li>ä»¥åŠæ—¥å¿—æ–‡ä»¶çš„æœ€åå‡ ç™¾è¡Œã€‚<br>å‚è€ƒæˆªå›¾ï¼š<br><img src="/images/202510/29.jpg"></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JMeter æµ‹è¯• MongoDB</title>
      <link href="/2025/10/27/JMeter-%E6%B5%8B%E8%AF%95-MongoDB/"/>
      <url>/2025/10/27/JMeter-%E6%B5%8B%E8%AF%95-MongoDB/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Apache JMeter æ˜¯ä¸€ä¸ª 100% çº¯ Java åº”ç”¨ç¨‹åºï¼Œè®¾è®¡æ¥åšâ€œå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨â€è½¯ä»¶ï¼ˆä¾‹å¦‚ Web åº”ç”¨ç¨‹åºï¼‰ã€‚å®ƒå¯ä»¥ç”¨æ¥æµ‹è¯•é™æ€å’ŒåŠ¨æ€èµ„æºçš„æ€§èƒ½ï¼Œä¾‹å¦‚é™æ€æ–‡ä»¶ã€Java Servletsã€ASP.NETã€PHPã€CGI è„šæœ¬ã€Java å¯¹è±¡ã€æ•°æ®åº“ã€FTP æœåŠ¡å™¨ï¼Œè¿˜æœ‰æ›´å¤šã€‚JMeter å¯ä»¥ç»™æœåŠ¡å™¨ã€ç½‘ç»œæˆ–å¯¹è±¡æ¨¡æ‹Ÿé‡è´Ÿè½½æ¥æµ‹è¯•å®ƒçš„å¼ºåº¦æˆ–è€…åˆ†æä¸åŒè´Ÿè½½ç±»å‹ä¸‹çš„ç»¼åˆæ€§èƒ½ã€‚</p><p>æ­¤å¤–ï¼Œé€šè¿‡åˆ›å»ºæ–­è¨€è„šæœ¬éªŒè¯åº”ç”¨ç¨‹åºæ˜¯å¦è¿”å›æœŸæœ›çš„ç»“æœï¼ŒJMeterå¯ä»¥å¸®åŠ©å›å½’æµ‹è¯•ä½ çš„åº”ç”¨ç¨‹åºã€‚ä¸ºäº†æœ€å¤§çš„çµæ´»æ€§ï¼ŒJMeter å…è®¸ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ›å»ºæ–­è¨€ã€‚</p><p>ä½†æ˜¯è¯·æ³¨æ„ï¼ŒJMeter ä¸æ˜¯ä¸€ä¸ªæµè§ˆå™¨ï¼Œå®ƒåœ¨åè®®å±‚è¿è¡Œã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>ä¸‹è½½ç½‘å€ï¼š<a href="http://jmeter.apache.org/download_jmeter.cgi">http://jmeter.apache.org/download_jmeter.cgi</a>ã€‚é¦–å…ˆæ­£ç¡®å®‰è£… JRE&#x2F;JDKï¼Œå¹¶ä¸”è®¾ç½®äº† JAVA_HOME å˜é‡ã€‚è§£å‹ä¸‹è½½çš„æ–‡ä»¶åŒ…åˆ°å®‰è£…ç›®å½•ã€‚</p><h1 id="è¿è¡Œ-JMeter"><a href="#è¿è¡Œ-JMeter" class="headerlink" title="è¿è¡Œ JMeter"></a>è¿è¡Œ JMeter</h1><p>è¿è¡Œ bin ç›®å½•ä¸‹çš„ jmeter å¯åŠ¨ JMeterï¼Œå¾ˆå¿« JMeter çš„å›¾å½¢ç•Œé¢å°±ä¼šå‡ºç°ã€‚</p><h1 id="åˆ›å»ºæ•°æ®åº“æµ‹è¯•è®¡åˆ’"><a href="#åˆ›å»ºæ•°æ®åº“æµ‹è¯•è®¡åˆ’" class="headerlink" title="åˆ›å»ºæ•°æ®åº“æµ‹è¯•è®¡åˆ’"></a>åˆ›å»ºæ•°æ®åº“æµ‹è¯•è®¡åˆ’</h1><p>æœ¬æ–‡åˆ›å»º 50 ä¸ªç”¨æˆ·å‘ MongoDB æœåŠ¡å™¨å‘é€åŒä¸€ä¸ª Collection çš„ Insert Document è¯·æ±‚å„ 1000 æ¬¡ã€‚å› æ­¤ï¼Œæ€»å…±ä¼šåƒ MongoDB å‘é€ 50 Ã— 1000 &#x3D; 50000 æ¬¡ Insert è¯·æ±‚ã€‚æ„å»ºæœ¬æ¬¡æµ‹è¯•ï¼Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹ç»„ä»¶ï¼šThread Groupã€JDBC Requestã€Summary Reportã€‚</p><h1 id="æ·»åŠ ç”¨æˆ·"><a href="#æ·»åŠ ç”¨æˆ·" class="headerlink" title="æ·»åŠ ç”¨æˆ·"></a>æ·»åŠ ç”¨æˆ·</h1><p>ç”¨ JMeter åšçš„æ‰€æœ‰æµ‹è¯•è®¡åˆ’çš„ç¬¬ä¸€æ­¥å°±æ˜¯æ·»åŠ  Thread Group ç»„ä»¶ã€‚Thread Group ç»„ä»¶å‘Šè¯‰ JMeter æ¨¡æ‹Ÿå¤šå°‘ä¸ªç”¨æˆ·ã€å¤šä¹…å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œä»¥åŠå‘é€å¤šå°‘æ¬¡è¯·æ±‚ã€‚</p><p>é€‰ä¸­å·¦ä¾§çª—æ ¼ä¸­çš„æµ‹è¯•è®¡åˆ’ï¼Œç‚¹å‡»é¼ æ ‡å³é”®ã€‚åœ¨å¼¹å‡ºçš„èœå•é€‰æ‹©èœå•é¡¹ï¼šæ·»åŠ  -&gt; Threads(Users) -&gt; çº¿ç¨‹ç»„ã€‚æ·»åŠ ä¹‹åï¼Œåœ¨å³è¾¹çš„çª—æ ¼å°±å¯ä»¥çœ‹åˆ° Thread Group çš„æ§åˆ¶é¢æ¿ã€‚é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</p><ul><li>åç§°ï¼šMongoDB Thread Group</li><li>çº¿ç¨‹æ•°ï¼š50</li><li>Ramp-Up Period(in seconds)ï¼š10ã€‚è¯¥å‚æ•°å‘Šè¯‰ JMeter å»¶è¿Ÿå¤šé•¿æ—¶é—´å¯åŠ¨æ‰€æœ‰ç”¨æˆ·ï¼Œæ­¤å¤„è®¾ä¸º 10ï¼ŒJMeter åœ¨ 10 ç§’å†…å®Œæˆæ‰€æœ‰ç”¨æˆ·çš„å¯åŠ¨ï¼Œä¹Ÿå°±æ˜¯æ¯éš” 200 æ¯«ç§’å¯åŠ¨ä¸€ä¸ªç”¨æˆ·ï¼ˆ10s &#x2F; 50 &#x3D; 0.2ï¼‰ã€‚å¦‚æœè®¾ä¸º 0ï¼Œåˆ™ JMeter ä¼šç«‹å³å¯åŠ¨æ‰€æœ‰ç”¨æˆ·ã€‚</li><li>å¾ªç¯æ¬¡æ•°ï¼š1000ã€‚è¿™ä¸ªå‚æ•°å‘Šè¯‰ JMeter é‡å¤å¤šå°‘æ¬¡æµ‹è¯•ã€‚è¦æ°¸ä¹…é‡å¤åˆ™é€‰ä¸­â€œæ°¸è¿œâ€é€‰æ‹©æ¡†ã€‚</li></ul><p>é…ç½®åçš„å‚æ•°å¦‚å›¾ï¼š<br><img src="/images/202510/25.jpg"></p><h1 id="æ·»åŠ -MongoDB-Source-Config"><a href="#æ·»åŠ -MongoDB-Source-Config" class="headerlink" title="æ·»åŠ  MongoDB Source Config"></a>æ·»åŠ  MongoDB Source Config</h1><p>é€‰ä¸­åˆšæ‰æ·»åŠ çš„ MongoDB Thread Groupï¼Œç‚¹å³é”®ï¼Œåœ¨å³é”®èœå•é€‰æ‹©èœå•é¡¹ï¼šæ·»åŠ  -&gt; é…ç½®å…ƒä»¶ -&gt; MongoDB Source Configã€‚é…ç½®é¢æ¿åŒæ ·åœ¨å³ä¾§çª—æ ¼å±•ç¤ºã€‚å‚æ•°é…ç½®å¦‚ä¸‹ï¼š</p><ul><li>åç§°ï¼šMongoDB Source Config</li><li>Server Address Listï¼š127.0.0.1</li><li>MongoDB Sourceï¼šjmeterMongoDBSource</li></ul><p>å…¶ä»–å‚æ•°ä¿æŒé»˜è®¤ï¼Œå¦‚å›¾ï¼š<br><img src="/images/202510/26.jpg"></p><h1 id="æ·»åŠ -MongoDB-Script"><a href="#æ·»åŠ -MongoDB-Script" class="headerlink" title="æ·»åŠ  MongoDB Script"></a>æ·»åŠ  MongoDB Script</h1><p>åŒæ ·é€‰ä¸­ MongoDB Thread Groupï¼Œç‚¹å³é”®ï¼Œåœ¨å³é”®èœå•é€‰æ‹©èœå•é¡¹ï¼šæ·»åŠ  -&gt; Sampler -&gt; MongoDB Scriptã€‚å³ä¾§çª—æ ¼å±•ç¤ºé…ç½®é¢æ¿ï¼Œå‚æ•°é…ç½®å¦‚ä¸‹ï¼š</p><ul><li>MongoDB Sourceï¼šjmeterMongoDBSourceï¼Œä¸ã€€MongoDB Source Configã€€ä¸­é…ç½®çš„ä¸€è‡´ã€‚</li><li>Database Nameï¼štest</li><li>Scriptï¼šdb.jmeter.insert({ â€œp1â€ : â€œ0â€, â€œp2â€ : â€œ00â€, â€œbdâ€ : â€œHUAWEIâ€, â€œp3â€ : â€œ001â€, â€œloâ€ : â€œ110.802298â€, â€œpcodeâ€ : â€œ010110468â€, â€œntâ€ : â€œwifiâ€, â€œimsiâ€ : â€œ-â€œ, â€œuuidâ€ : â€œ49d66ae4a91b679a78d08ea4d61b7861_1460615318980â€ })</li></ul><p>å…¶ä»–å‚æ•°ä¿æŒé»˜è®¤ï¼Œå¦‚å›¾ï¼š<br><img src="/images/202510/27.jpg"></p><h1 id="æ·»åŠ å¯Ÿçœ‹ç»“æœæ ‘å’ŒèšåˆæŠ¥å‘Š"><a href="#æ·»åŠ å¯Ÿçœ‹ç»“æœæ ‘å’ŒèšåˆæŠ¥å‘Š" class="headerlink" title="æ·»åŠ å¯Ÿçœ‹ç»“æœæ ‘å’ŒèšåˆæŠ¥å‘Š"></a>æ·»åŠ å¯Ÿçœ‹ç»“æœæ ‘å’ŒèšåˆæŠ¥å‘Š</h1><p>è¿˜æ˜¯é€‰ä¸­ MongoDB Thread Groupï¼Œç‚¹å³é”®ï¼Œåœ¨å³é”®èœå•é€‰æ‹©èœå•é¡¹ï¼šæ·»åŠ  -&gt; ç›‘å¬å™¨ -&gt; å¯Ÿçœ‹ç»“æœæ ‘ å’Œ èšåˆæŠ¥å‘Šã€‚</p><p>ç‚¹å‡»â€œå¯åŠ¨â€æŒ‰é’®å¼€å§‹æµ‹è¯•ã€‚ç»“æœå¦‚å›¾ï¼š<br><img src="/images/202510/28.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶æµ‹è¯• </category>
          
          <category> å‹åŠ›æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JMeter </tag>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> è½¯ä»¶æµ‹è¯• </tag>
            
            <tag> å‹åŠ›æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive å†…ç½®å­—ç¬¦ä¸²ï¼ˆStringï¼‰å‡½æ•°</title>
      <link href="/2025/10/26/hive-%E5%86%85%E7%BD%AE%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88String%EF%BC%89%E5%87%BD%E6%95%B0/"/>
      <url>/2025/10/26/hive-%E5%86%85%E7%BD%AE%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88String%EF%BC%89%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>Hive æ”¯æŒä»¥ä¸‹å†…ç½®å­—ç¬¦ä¸²å‡½æ•°ï¼š</p><ol><li>int ascii(string str)ï¼šè¿”å›å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç å€¼ã€‚</li><li>string base64(binary bin)ï¼šå°†äºŒè¿›åˆ¶å‚æ•°è½¬æ¢ä¸º base 64 ç¼–ç çš„å­—ç¬¦ä¸²ã€‚</li><li>string concat(string|binary A, string|binary Bâ€¦)ï¼šå°†ä½œä¸ºå‚æ•°çš„å­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶æ•°æ®ä¾æ¬¡æ‹¼æ¥ï¼Œå¹¶è¿”å›æ‹¼æ¥åçš„ç»“æœã€‚ä¾‹å¦‚ï¼šconcat(â€˜fooâ€™, â€˜barâ€™)ï¼Œè¿”å›ç»“æœä¸ºâ€˜foobarâ€™ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å­—ç¬¦ä¸²å‚æ•°ã€‚</li><li>array&lt;struct&lt;string,double&gt;&gt; context_ngrams(array&lt;array<string>&gt;, array<string>, int K, int pf)ï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ä½œâ€œè¯­å¢ƒâ€ï¼Œè¿”å›ä¸€ç»„æ ‡è®°å¥å­çš„Top-kè¯­å¢ƒn-gramsã€‚æ›´å¤šä¿¡æ¯å‚è§ <a href="https://link.zhihu.com/?target=https://cwiki.apache.org/confluence/display/Hive/StatisticsAndDataMining">StatisticsAndDataMining</a>ã€‚</li><li>string concat_ws(string SEP, string A, string Bâ€¦)ï¼šåƒä¸Šé¢çš„ concat() å‡½æ•°ä¸€æ ·ï¼Œä¸è¿‡å¯ä»¥è‡ªå®šä¹‰åˆ†éš”ç¬¦ SEPã€‚</li><li>string concat_ws(string SEP, array)ï¼šåƒä¸Šé¢çš„ concat_ws() å‡½æ•°ä¸€æ ·ï¼Œä¸è¿‡ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®ä½œä¸ºå‚æ•°ã€‚</li><li>string decode(binary bin, string charset)ï¼šç”¨æä¾›çš„å­—ç¬¦é›†ï¼ˆâ€™US-ASCIIâ€™, â€˜ISO-8859-1â€™, â€˜UTF-8â€™, â€˜UTF-16BEâ€™, â€˜UTF-16LEâ€™, â€˜UTF-16â€™ ä¸­çš„ä¸€ä¸ªï¼‰è§£ç ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœä»»ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œåˆ™ç»“æœä¹Ÿä¸º nullã€‚</li><li>binary encode(string src, string charset)ï¼šç”¨æä¾›çš„å­—ç¬¦é›†ï¼ˆâ€™US-ASCIIâ€™, â€˜ISO-8859-1â€™, â€˜UTF-8â€™, â€˜UTF-16BEâ€™, â€˜UTF-16LEâ€™, â€˜UTF-16â€™ ä¸­çš„ä¸€ä¸ªï¼‰ç¼–ç ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäºŒè¿›åˆ¶ã€‚</li><li>int find_in_set(string str, string strList)ï¼šè¿”å› str åœ¨ strList ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„åºå·ï¼›strList æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œåˆ™è¿”å› nullã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«é€—å·åˆ™è¿”å› 0ã€‚ä¾‹å¦‚ï¼Œfind_in_set(â€˜abâ€™, â€˜abc,b,ab,c,defâ€™) è¿”å› 3ã€‚</li><li>string format_number(number x, int d)ï¼šæ ¼å¼åŒ–æ•°å­— X ä¸ºåƒ â€˜#,###,###.##â€™ çš„æ ¼å¼ï¼Œå››èˆäº”å…¥åˆ° D çš„å°æ•°ç‚¹ä½ç½®ï¼Œå¹¶è¿”å›ç»“æœä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœ D æ˜¯ 0ï¼Œç»“æœæ²¡æœ‰å°æ•°ç‚¹æˆ–åˆ†æ•°éƒ¨åˆ†ã€‚</li><li>string get_json_object(string json_string, string path)ï¼šåŸºäºç»™å®šçš„ json è·¯å¾„ä» json å­—ç¬¦ä¸²ä¸­æå– json å¯¹è±¡ï¼Œè¿”å›æå– json å¯¹è±¡çš„ json å­—ç¬¦ä¸²ã€‚å¦‚æœè¾“å…¥çš„ json å­—ç¬¦ä¸²éæ³•åˆ™è¿”å› nullã€‚å¤‡æ³¨ï¼šjson è·¯å¾„åªèƒ½åŒ…å« [0-9a-z_] å­—ç¬¦ï¼Œå³ï¼Œæ²¡æœ‰å¤§å†™æˆ–ç‰¹æ®Šå­—ç¬¦ã€‚å¹¶ä¸”é”®ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚è¿™æ˜¯ç”±äº Hive åˆ—åç§°çš„é™åˆ¶ã€‚</li><li>boolean n_file(string str, string filename)ï¼šå¦‚æœå­—ç¬¦ä¸² str åœ¨ filename ä¸­æ•´è¡Œå‡ºç°åˆ™è¿”å› trueã€‚</li><li>int instr(string str, string substr)ï¼šè¿”å› substr åœ¨ str ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚å¦‚æœä»»ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œåˆ™è¿”å› nullï¼›å¦‚æœåœ¨ str ä¸­æ‰¾ä¸åˆ° substrï¼Œåˆ™è¿”å› 0ã€‚æ³¨æ„è¿™ä¸ªå‡½æ•°ä¸æ˜¯ä»¥ 0 ä¸ºåŸºç¡€çš„ã€‚str ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•æ˜¯ 1ã€‚</li><li>int length(string A)ï¼šè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</li><li>int locate(string substr, string str[, int pos])ï¼šè¿”å› pos ä½ç½®ä¹‹å substr åœ¨ str ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</li><li>string lower(string A) lcase(string A)ï¼š è¿”å›å…¨éƒ¨å­—ç¬¦è½¬ä¸ºå°å†™ä¹‹åçš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œlower(â€˜fOoBaRâ€™) ç»“æœä¸º â€˜foobarâ€™ã€‚</li><li>string lpad(string str, int len, string pad)ï¼šå·¦è¾¹æ·»åŠ  pad å‚æ•°è¾“å…¥çš„å­—ç¬¦ä½¿å­—ç¬¦ä¸²é•¿åº¦ä¸º lenï¼Œç„¶åè¿”å›è¯¥å­—ç¬¦ä¸²ã€‚</li><li>string ltrim(string A)ï¼šè¿”å›ä» A çš„å¼€å¤´ï¼ˆå·¦æ‰‹è¾¹ï¼‰åˆ é™¤ç©ºç™½å­—ç¬¦åçš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œltrim(â€˜ foobar â€˜) ç»“æœä¸º â€˜foobarâ€™ã€‚</li><li>array&lt;struct&lt;string,double&gt;&gt; ngrams(array&lt;array<string>&gt;, int N, int K, int pf)ï¼šè¿”å›ä¸€ç»„æ ‡è®°å¥å­çš„Top-kè¯­å¢ƒn-gramsï¼Œå°±åƒ sentences() UDAF è¿”å›çš„ç»“æœã€‚å‚è§ <a href="https://link.zhihu.com/?target=https://cwiki.apache.org/confluence/display/Hive/StatisticsAndDataMining">StatisticsAndDataMining</a> è·å–æ›´å¤šä¿¡æ¯ã€‚</li><li>string parse_url(string urlString, string partToExtract [, string keyToExtract])ï¼šè¿”å›æŒ‡å®šçš„ URL ä¸­çš„éƒ¨åˆ†ã€‚partToExtract åˆæ³•çš„å–å€¼æœ‰ HOSTã€PATHã€QUERYã€REFã€PROTOCOLã€AUTHORITYã€FILE å’Œ USERINFOã€‚ä¾‹å¦‚ï¼Œparse_url(â€˜<a href="http://facebook.com/path1/p.php?k1=v1&k2=v2#Ref1%E2%80%98">http://facebook.com/path1/p.php?k1=v1&amp;k2=v2#Ref1â€˜</a>, â€˜HOSTâ€™) è¿”å› â€˜facebook.comâ€™ã€‚å¹¶ä¸”é€šè¿‡æä¾›ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå¯ä»¥æå– QUERY ä¸­æ™®é€šçš„é”®å€¼ï¼Œä¾‹å¦‚ï¼Œparse_url(â€˜<a href="http://facebook.com/path1/p.php?k1=v1&k2=v2#Ref1%E2%80%98">http://facebook.com/path1/p.php?k1=v1&amp;k2=v2#Ref1â€˜</a>, â€˜QUERYâ€™, â€˜k1â€™) è¿”å› â€˜v1â€™ã€‚</li><li>string printf(String format, Objâ€¦ args)ï¼šè¿”å›æŒ‰ç…§è¾“å…¥çš„æ ¼å¼è¾“å‡ºæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ã€‚</li><li>string regexp_extract(string subject, string pattern, int index)ï¼šè¿”å›ä½¿ç”¨æ¨¡å¼æå–çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œregexp_extract(â€˜foothebarâ€™, â€˜foo(.*?)(bar)â€™, 2) è¿”å› â€˜barâ€™ã€‚æ³¨æ„ï¼Œä½¿ç”¨é¢„å®šä¹‰å­—ç¬¦ç±»å‹æœ‰ä¸€äº›å¿…è¦çš„å…³æ³¨ï¼šä½¿ç”¨ â€˜\sâ€™ ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°å°†åŒ¹é…å­—æ¯ sï¼›åŒ¹é…ç©ºç™½å­—ç¬¦ â€˜\sâ€™ æ˜¯å¿…é¡»çš„ï¼Œç­‰ã€‚â€˜indexâ€™ å‚æ•°æ˜¯ Java æ­£åˆ™ Matcher group() æ–¹æ³•ç´¢å¼•ã€‚æŸ¥é˜… docs&#x2F;api&#x2F;java&#x2F;util&#x2F;regex&#x2F;Matcher.html è·å–â€˜indexâ€™æˆ– Java æ­£åˆ™ group() æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ã€‚</li><li>string regexp_replace(string INITIAL_STRING, string PATTERN, string REPLACEMENT)ï¼šè¿”å›ç”¨ REPLACEMENT çš„å®ä¾‹æ›¿æ¢ INITIAL_STRING ä¸­æ‰€æœ‰ PATTERN ä¸­å®šä¹‰çš„åŒ¹é… java æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²çš„ç»“æœå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œregexp_replace(â€œfoobarâ€, â€œoo|arâ€, â€œâ€) è¿”å›â€˜fbâ€™ã€‚æ³¨æ„ï¼Œä½¿ç”¨é¢„å®šä¹‰å­—ç¬¦ç±»å‹æœ‰ä¸€äº›å¿…è¦çš„å…³æ³¨ï¼šä½¿ç”¨ â€˜\sâ€™ ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°å°†åŒ¹é…å­—æ¯ sï¼›åŒ¹é…ç©ºç™½å­—ç¬¦ â€˜\sâ€™ æ˜¯å¿…é¡»çš„ï¼Œç­‰ã€‚</li><li>string repeat(string str, int n)ï¼šé‡å¤ str n æ¬¡ã€‚</li><li>string reverse(string A)ï¼šè¿”å›åè½¬åçš„å­—ç¬¦ä¸²ã€‚</li><li>string rpad(string str, int len, string pad)ï¼šå³è¾¹æ·»åŠ  pad å‚æ•°è¾“å…¥çš„å­—ç¬¦ä½¿å­—ç¬¦ä¸²é•¿åº¦ä¸º lenï¼Œç„¶åè¿”å›è¯¥å­—ç¬¦ä¸²ã€‚</li><li>string rtrim(string A)ï¼šè¿”å›ä» A çš„æœ«å°¾ï¼ˆå³æ‰‹è¾¹ï¼‰åˆ é™¤ç©ºç™½å­—ç¬¦åçš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œrtrim(â€˜ foobar â€˜) ç»“æœä¸º â€˜foobarâ€™ã€‚</li><li>array&lt;array<string>&gt; sentences(string str, string lang, string locale)ï¼šæ ‡è®°ä¸€ä¸ªè‡ªç„¶è¯­è¨€æ–‡æœ¬å­—ç¬¦ä¸²ä¸ºå•è¯å’Œå¥å­ï¼Œæ¯ä¸ªå¥å­åœ¨é€‚å½“çš„å¥å­è¾¹ç•Œè¢«æ‹†åˆ†å¹¶ä¸”ä½œä¸ºä¸€ä¸ªå•è¯æ•°ç»„è¿”å›ã€‚â€˜langâ€™å’Œâ€˜localeâ€™æ˜¯å¯é€‰å‚æ•°ã€‚ä¾‹å¦‚ï¼Œsentences(â€˜Hello there! How are you?â€™) è¿”å› ( (â€œHelloâ€, â€œthereâ€), (â€œHowâ€, â€œareâ€, â€œyouâ€))ã€‚</li><li>string space(int n)ï¼šè¿”å› n ç©ºç™½çš„å­—ç¬¦ä¸²ã€‚</li><li>array split(string str, string pat)ï¼šä» pat å·¦å³åˆ†è§£ strï¼ˆ pat æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚</li><li>map&lt;string,string&gt; str_to_map(text[, delimiter1, delimiter2])ï¼šä½¿ç”¨ä¸¤ä¸ªåˆ†éš”ç¬¦å°†æ–‡æœ¬åˆ†å‰²ä¸ºé”®å€¼å¯¹ã€‚delimiter1 åˆ†å‰²æ–‡æœ¬ä¸ºé”®å€¼å¯¹ï¼Œdelimiter2 æ‹†åˆ†æ¯ä¸ªé”®å€¼å¯¹ã€‚é»˜è®¤çš„ç¬¬ä¸€åˆ†éš”ç¬¦æ˜¯â€˜,â€™ï¼Œç¬¬äºŒä¸ªåˆ†éš”ç¬¦æ˜¯â€˜ï¼â€™ã€‚</li><li>string substr(string|binary A, int start) substring(string|binary A, int start)ï¼šè¿”å›ä» start ä½ç½®åˆ°æœ«å°¾çš„å­—ç¬¦ä¸² A çš„å­å­—ç¬¦ä¸²æˆ–å­—èŠ‚æ•°ç»„çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œsubstr(â€˜foobarâ€™, 4) ç»“æœä¸º â€˜barâ€™ã€‚</li><li>string substr(string|binary A, int start, int len) substring(string|binary A, int start, int len)ï¼šè¿”å›ä» start ä½ç½®å¼€å§‹é•¿åº¦ä¸º len çš„ A çš„å­—ç¬¦ä¸²æˆ–å­—èŠ‚æ•°ç»„çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œsubstr(â€˜foobarâ€™, 4, 1) è¿”å›â€˜bâ€™ã€‚</li><li>string substring_index(string A, string delim, int count)ï¼šè¿”å›å­—ç¬¦ä¸² A ä¸­ delim åˆ†éš”ç¬¦ç¬¬ count æ¬¡åŒ¹é…å‰çš„å­å­—ç¬¦ä¸²ã€‚å¦‚æœ count æ˜¯æ­£æ•°ï¼Œæ‰€æœ‰åˆ°å·¦è¾¹æœ€ååˆ†éš”ç¬¦ï¼ˆä»å·¦è¾¹è®¡ç®—ï¼‰éƒ½ä¼šè¿”å›ã€‚å¦‚æœ count æ˜¯è´Ÿæ•°ï¼Œæ‰€æœ‰åˆ°å³è¾¹æœ€ååˆ†éš”ç¬¦ï¼ˆä»å³è¾¹è®¡ç®—ï¼‰éƒ½ä¼šè¿”å›ã€‚å½“æœç´¢ delim æ—¶ï¼ŒSubstring_index æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚ç¤ºä¾‹ï¼šsubstring_index(â€˜<a href="http://www.apache.orgâ€˜/">www.apache.orgâ€˜</a>, â€˜.â€™, 2) &#x3D; â€˜<a href="http://www.apache'./">www.apache&#39;ã€‚</a></li><li>string translate(string|char|varchar input, string|char|varchar from, string|char|varchar to)ï¼šé€šè¿‡ç”¨ to ä¸­å¯¹åº”çš„å­—ç¬¦æ›¿æ¢ from ä¸­å±•ç¤ºçš„å­—ç¬¦è½¬åŒ– input å­—ç¬¦ä¸²ã€‚è¿™è·Ÿ <a href="https://link.zhihu.com/?target=http://www.postgresql.org/docs/9.1/interactive/functions-string.html">PostgreSQL</a> ä¸­çš„ translate å‡½æ•°ç›¸ä¼¼ã€‚è¿™ä¸ª UDF çš„ä»»ä¸€ä¸ªå‚æ•°ä¸º NULLï¼Œç»“æœä¹Ÿä¸º NULLã€‚</li><li>string trim(string A)ï¼šè¿”å›ä» A ä¸¤ç«¯å»é™¤ç©ºç™½å­—ç¬¦åçš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œtrim(â€˜ foobar â€˜) ç»“æœä¸º â€˜foobarâ€™ã€‚</li><li>binary unbase64(string str)ï¼šè½¬æ¢å‚æ•°ä»ä¸€ä¸ª base 64 å­—ç¬¦ä¸²ä¸º BINARYã€‚</li><li>string upper(string A) ucase(string A)ï¼šè¿”å›è½¬æ¢å­—ç¬¦ä¸² A ä¸­æ‰€æœ‰å­—ç¬¦ä¸ºå¤§å†™åçš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œupper(â€˜fOoBaRâ€™) ç»“æœä¸ºâ€˜FOOBARâ€™ã€‚</li><li>string initcap(string A)ï¼šè¿”å›å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸ºå¤§å†™ï¼Œæ‰€æœ‰å…¶ä»–å­—æ¯ä¸ºå°å†™ã€‚å•è¯ä»¥ç©ºç™½å­—ç¬¦åˆ†å‰²ã€‚</li><li>int levenshtein(string A, string B)ï¼šè¿”å›ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„ Levenshtein è·ç¦»ã€‚ä¾‹å¦‚ï¼Œlevenshtein(â€˜kittenâ€™, â€˜sittingâ€™) ç»“æœä¸º 3ã€‚</li><li>string soundex(string A)ï¼šè¿”å›å­—ç¬¦ä¸²çš„ soundex ç ã€‚ä¾‹å¦‚ï¼Œsoundex(â€˜Millerâ€™) ç»“æœä¸º M460ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®ä»“åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java å•ä¾‹æ¨¡å¼</title>
      <link href="/2025/10/26/Java-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2025/10/26/Java-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>å•ä¾‹æ¨¡å¼æ˜¯ Java ç¨‹åºè®¾è®¡æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚åœ¨ Java è¯­è¨€ä¸­ï¼Œå•ä¾‹æ¨¡å¼æœ‰å‡ ç§ä¸åŒçš„å®ç°æ–¹å¼ã€‚ä»å®ä¾‹åˆ›å»ºæ—¶æœºåˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li>æ‡’æ±‰å¼ï¼šåœ¨éœ€è¦æ—¶æ‰åˆ›å»ºç±»å”¯ä¸€çš„å®ä¾‹ã€‚</li><li>é¥¿æ±‰å¼ï¼šåœ¨ç±»æ–‡ä»¶åŠ è½½æ—¶åˆ›å»ºç±»å”¯ä¸€çš„å®ä¾‹ã€‚</li></ul><p>ä¸€ã€æ‡’æ±‰å¼</p><p>æ ¹æ®æœ‰é”ã€æ— é”åŠé”çº§åˆ«çš„ä¸åŒå¯ä»¥æœ‰ä¸‰ç§å®ç°æ–¹å¼ã€‚</p><p>1ã€æœ€ç®€å•çš„å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton single=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (single == <span class="literal">null</span>) &#123;</span><br><span class="line">      single = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> single;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•é€šè¿‡ç§æœ‰åŒ–æ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”æä¾›ç”Ÿæˆç±»å¯¹è±¡çš„é™æ€ getInstance æ–¹æ³•æ¥ä¿è¯è¯¥ç±»åªç”Ÿæˆä¸€ä¸ªå®ä¾‹ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼åªèƒ½ç”¨åœ¨éå¤šçº¿ç¨‹å¹¶å‘çš„åœºæ™¯ã€‚</p><p>2ã€æ–¹æ³•é”çš„å®ç°</p><p>ä¸ºäº†è§£å†³å®ç° 1 ä¸èƒ½åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä½¿ç”¨çš„é—®é¢˜ï¼Œç»™ getInstance æ–¹æ³•åšçº¿ç¨‹åŒæ­¥æ˜¯ä¸€ç§ç®€å•çš„å®ç°æ–¹å¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton single=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (single == <span class="literal">null</span>) &#123;</span><br><span class="line">      single = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> single;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•è§£å†³äº†å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œä¿è¯åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä¹Ÿåªç”Ÿæˆä¸€ä¸ªå®ä¾‹ã€‚ä½†æ¯æ¬¡è°ƒç”¨ getInstance æ–¹æ³•éƒ½éœ€è¦åšçº¿ç¨‹é—´åŒæ­¥ä¼šéå¸¸æµªè´¹èµ„æºã€‚åªéœ€è¦åœ¨å®ä¾‹è¿˜æœªç”Ÿæˆæ—¶æ‰éœ€è¦åšçº¿ç¨‹åŒæ­¥ï¼Œå®ä¾‹ç”Ÿæˆä»¥åç›´æ¥ä½¿ç”¨å³å¯ï¼Œæ‰€ä»¥å°±æœ‰äº†æ–¹æ³• 3 ã€‚</p><p>3ã€åŒé‡æ£€æŸ¥é”å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton single=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="literal">null</span>) &#123;</span><br><span class="line">          singleton = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> singleton;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥å®ç°æ–¹å¼é¿å…äº†å¤šçº¿ç¨‹åœºæ™¯ä¸‹æ¯æ¬¡éƒ½åšçº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼Œä½†åœ¨å®ä¾‹ç”Ÿæˆä¹‹å‰çº¿ç¨‹é—´ä»ç„¶æ˜¯éœ€è¦åšçº¿ç¨‹åŒæ­¥çš„ã€‚ä½†è¯¥æ–¹æ³•è¿˜æ˜¯éœ€è¦çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ï¼Œå¦‚æœå®ä¾‹åˆå§‹åŒ–æ¯”è¾ƒå¤æ‚æˆ–è€…éœ€è¦çš„æ—¶é—´æ¯”è¾ƒé•¿ä¼šé˜»å¡å¾ˆå¤šçº¿ç¨‹ç­‰å¾…ã€‚æ–¹æ³• 4 å®Œå…¨ä¸éœ€è¦çº¿ç¨‹é—´åŒæ­¥ã€‚</p><p>4ã€é™æ€å†…éƒ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">LazyHolder</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span> <span class="params">()</span>&#123;&#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> LazyHolder.INSTANCE;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•é€šè¿‡ç±»åŠ è½½å™¨åœ¨åŠ è½½ LazyHolder ç±»å¹¶åˆå§‹åŒ–æ—¶ç”Ÿæˆ Singleton ç±»çš„å®ä¾‹æ¥ä¿éšœå•ä¾‹ã€‚</p><blockquote><p>çŒœæƒ³ï¼šè¯¥æ–¹æ³•å¹¶éå®Œå…¨ä¸åšçº¿ç¨‹åŒæ­¥ã€‚åªä¸è¿‡åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œå¤šçº¿ç¨‹åŒæ­¥æ˜¯ç”±ç±»åŠ è½½å™¨æˆ–è€… JVM æ¥å®Œæˆçš„ã€‚åªæ˜¯ä¸éœ€è¦ä¸šåŠ¡ç¨‹åºä»£ç åšçº¿ç¨‹åŒæ­¥çš„å·¥ä½œã€‚çŒœæƒ³æ˜¯å¦æ­£ç¡®è¿˜éœ€è¦åšæ›´æ·±çš„ç ”ç©¶ã€‚</p></blockquote><p>äºŒã€é¥¿æ±‰å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">single</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton1 <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> single;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•è·Ÿæ‡’æ±‰å¼æ–¹æ³• 4 å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯ç±»å®ä¾‹ç”Ÿæˆæ—¶é—´ä¸åŒã€‚æ‡’æ±‰å¼æ–¹æ³• 4 ç±»çš„å”¯ä¸€å®ä¾‹æ˜¯åœ¨è°ƒç”¨ getInstance æ–¹æ³•æ—¶æ‰ä¼šç”Ÿæˆï¼›è€Œè¯¥æ–¹æ³•æ˜¯åœ¨ç±»åŠ è½½æ—¶å°±ä¼šç”Ÿæˆç±»çš„å”¯ä¸€å®ä¾‹ã€‚ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡ç±»åŠ è½½å™¨ä¿éšœä¿è¯å•ä¾‹ã€‚</p><p><strong>æ€»ç»“ï¼š</strong></p><p>ä¸åŒçš„åº”ç”¨åœºæ™¯å¯ä»¥çµæ´»é€‰æ‹©å®ç°æ–¹æ³•ï¼š</p><ul><li>éå¤šçº¿ç¨‹åœºæ™¯å¯ä»¥é‡‡ç”¨æ‡’æ±‰å¼æ–¹æ³• 1 å°±å¤Ÿäº†ï¼Œç®€å•ã€‚</li><li>å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œå¦‚æœå®ä¾‹åˆå§‹åŒ–ä¸éœ€è¦å…¶ä»–å‚æ•°çš„æ—¶å€™ï¼ˆç”Ÿæˆå®ä¾‹æ—¶è°ƒç”¨æ— å‚æ„é€ æ–¹æ³•ï¼‰ï¼Œä½¿ç”¨æ‡’æ±‰å¼æ–¹æ³• 4ã€‚</li><li>å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œå¦‚æœå®ä¾‹åˆå§‹åŒ–æ—¶éœ€è¦å…¶ä»–å‚æ•°ï¼ˆç”Ÿæˆå®ä¾‹æ—¶è°ƒç”¨å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ï¼‰ï¼Œä½¿ç”¨æ‡’æ±‰å¼æ–¹æ³• 3ã€‚</li><li>é¥¿æ±‰å¼çš„ä¼˜åŠ¿æ˜¯ç±»åŠ è½½æ—¶å”¯ä¸€å®ä¾‹å°±ç”Ÿæˆäº†ï¼Œå¤šçº¿ç¨‹ä½¿ç”¨æ—¶å¯ä»¥å‡å°‘å»¶è¿Ÿã€‚ä½†å³ä½¿ä¸ä½¿ç”¨è¯¥å®ä¾‹ï¼Œç±»åŠ è½½æ—¶ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªå®ä¾‹åœ¨å†…å­˜ä¸­ã€‚åŸºæœ¬å±äºç©ºé—´æ¢æ—¶é—´çš„æƒ…å†µã€‚å†…å­˜ä¸æ•æ„Ÿçš„åœºæ™¯æ¯”è¾ƒé€‚åˆä½¿ç”¨ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
          <category> å•ä¾‹æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown è½¬ä¹‰</title>
      <link href="/2025/10/24/Markdown-%E8%BD%AC%E4%B9%89/"/>
      <url>/2025/10/24/Markdown-%E8%BD%AC%E4%B9%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ—¶å€™éœ€è¦è½¬ä¹‰"><a href="#ä»€ä¹ˆæ—¶å€™éœ€è¦è½¬ä¹‰" class="headerlink" title="ä»€ä¹ˆæ—¶å€™éœ€è¦è½¬ä¹‰"></a>ä»€ä¹ˆæ—¶å€™éœ€è¦è½¬ä¹‰</h1><p>å¹¶ä¸æ˜¯æ‰€æœ‰é‡åˆ° Markdown è¯­æ³•å­—ç¬¦çš„æ—¶å€™éƒ½éœ€è¦è½¬ä¹‰ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><p>åœ¨ Markdown ä¸­æƒ³è¦è¡¨ç¤ºå­—ç¬¦ä¸²â€˜\sâ€™ï¼Œé‚£ä¹ˆä»£ç è¦æ€ä¹ˆå†™å‘¢ï¼Ÿæ˜¯â€˜\sâ€™è¿˜æ˜¯â€˜\\sâ€™ï¼Ÿåä¸€ç§å†™æ³•æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œä½†æ˜¯å‰ä¸€ç§å†™æ³•ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚åŸå› æ˜¯ï¼ŒMarkdown ä¼šæ ¹æ®è½¬ä¹‰å­—ç¬¦â€˜\â€™ä¹‹åçš„å­—ç¬¦åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œè½¬ä¹‰ã€‚\s ä¸æ˜¯ä¸€ä¸ªéœ€è¦æ‰§è¡Œè½¬ä¹‰çš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥è½¬ä¹‰å­—ç¬¦â€˜\â€™æŒ‰ç…§åŸå­—ç¬¦è¡¨è¾¾æ˜¾ç¤ºã€‚è¿™ç§ç‰¹æ€§å¯ä»¥è®©æˆ‘ä»¬åœ¨ç±»ä¼¼çš„æƒ…å†µä¸‹å°‘è¾“å…¥ä¸€äº›å­—ç¬¦ã€‚</p><h1 id="è½¬ä¹‰"><a href="#è½¬ä¹‰" class="headerlink" title="è½¬ä¹‰ &gt;"></a>è½¬ä¹‰ &gt;</h1><p>é‡åˆ°ä»¥ä¸‹æƒ…å†µæ—¶å¦‚ä½•è½¬ä¹‰ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">String</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ˜¯ <code>&lt;String\&gt;</code> å—ï¼Ÿè¯•ä¸€ä¸‹å°±çŸ¥é“è¿™æ ·æ˜¯ä¸è¡Œçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹é€šè¿‡ä¸‹é¢çš„æ–¹å¼å¤„ç†ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;String<span class="symbol">&amp;gt;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive åŠ è½½æ–‡ä»¶æ•°æ®åˆ°è¡¨</title>
      <link href="/2025/10/24/Hive-%E5%8A%A0%E8%BD%BD%E6%96%87%E4%BB%B6%E6%95%B0%E6%8D%AE%E5%88%B0%E8%A1%A8/"/>
      <url>/2025/10/24/Hive-%E5%8A%A0%E8%BD%BD%E6%96%87%E4%BB%B6%E6%95%B0%E6%8D%AE%E5%88%B0%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Loading-files-into-tables"><a href="#Loading-files-into-tables" class="headerlink" title="Loading files into tables"></a>Loading files into tables</h1><p>Hive åœ¨åŠ è½½æ•°æ®è¿›è¡¨çš„æ—¶å€™ä¸ä¼šåšä»»ä½•è½¬æ¢ã€‚Load æ“ä½œåªæ˜¯çº¯ç²¹å°†æ•°æ®æ–‡ä»¶å¤åˆ¶&#x2F;ç§»åŠ¨åˆ° Hive è¡¨å…³è”çš„ä½ç½®ã€‚</p><blockquote><p>æ³¨æ„ï¼šHive è¡¨å­—æ®µåˆ†éš”ç¬¦å¿…é¡»ä¸æ–‡ä»¶ä¸­æ•°æ®å­—æ®µåˆ†éš”ç¬¦ä¸€è‡´ã€‚</p></blockquote><h1 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA [<span class="keyword">LOCAL</span>] INPATH <span class="string">&#x27;filepath&#x27;</span> [OVERWRITE] <span class="keyword">INTO</span> <span class="keyword">TABLE</span> tablename [<span class="keyword">PARTITION</span> (partcol1<span class="operator">=</span>val1, partcol2<span class="operator">=</span>val2 ...)]</span><br></pre></td></tr></table></figure><h1 id="ç®€è¦è¯´æ˜"><a href="#ç®€è¦è¯´æ˜" class="headerlink" title="ç®€è¦è¯´æ˜"></a>ç®€è¦è¯´æ˜</h1><ul><li>filepath å¯ä»¥æ˜¯ï¼š<ul><li>ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œå¦‚ï¼šproject&#x2F;data1</li><li>ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œå¦‚ï¼š&#x2F;user&#x2F;hive&#x2F;project&#x2F;data1</li><li>å¸¦æœ‰æ–¹æ¡ˆå’Œæˆæƒï¼ˆå¯é€‰ï¼‰çš„å®Œæ•´ URIï¼Œå¦‚ï¼šhdfs:&#x2F;&#x2F;namenode:9000&#x2F;user&#x2F;hive&#x2F;project&#x2F;data1</li></ul></li><li>åŠ è½½çš„ç›®æ ‡å¯ä»¥æ˜¯è¡¨æˆ–è€…åˆ†åŒºã€‚å¦‚æœè¡¨æ˜¯åˆ†åŒºçš„ï¼Œåˆ™å¿…é¡»æŒ‡å®šå·¦å³åˆ†åŒºåˆ—çš„å€¼æ¥æŒ‡å®šè¿™ä¸ªè¡¨ç‰¹å®šçš„åˆ†åŒºã€‚</li><li>filepath å¯ä»¥æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶ï¼ˆåœ¨è¿™ç§åœºæ™¯ä¸‹ Hive ç§»åŠ¨è¿™ä¸ªæ–‡ä»¶åˆ°è¡¨ä¸­ï¼‰ï¼›æˆ–è€…å®ƒæ˜¯ä¸€ä¸ªç›®å½•ï¼ˆåœ¨è¿™ç§åœºæ™¯ä¸‹ Hive ç§»åŠ¨ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶åˆ°è¡¨ä¸­ï¼‰ã€‚åœ¨ä¸¤ç§åœºæ™¯ä¸‹ï¼Œfilepath æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶é›†åˆã€‚</li><li>å¦‚æœæŒ‡å®šäº† LOCAL å…³é”®å­—ï¼š<ul><li>load å‘½ä»¤å°†åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»ŸæŸ¥æ‰¾ filepathã€‚å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªç›¸å¯¹åœ°å€ï¼Œå°†è§£é‡Šä¸ºç”¨æˆ·å½“å‰å·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥ä¸ºæœ¬åœ°æ–‡ä»¶åˆ¶å®šå…¨ URIï¼å¦‚ï¼šfile:&#x2F;&#x2F;&#x2F;user&#x2F;hive&#x2F;project&#x2F;data1</li><li>load å‘½ä»¤ä¼šå°è¯•æ‹·è´æŒ‡å®šåˆ° filepath ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿã€‚é€šè¿‡æŸ¥çœ‹è¡¨çš„ä½ç½®å±æ€§æ¥æ¨æ–­ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿã€‚å¤åˆ¶çš„æ•°æ®æ–‡ä»¶å°†ç§»åŠ¨åˆ°è¿™ä¸ªè¡¨ä¸­ã€‚</li></ul></li><li>å¦‚æœä¸æŒ‡å®š LOCAL å…³é”®å­—ï¼ŒHive å°†ä½¿ç”¨ filepath çš„å…¨ URIï¼ˆå¦‚æœæŒ‡å®šäº†ä¸€ä¸ªï¼‰ï¼Œæˆ–è€…åº”ç”¨ä»¥ä¸‹è§„åˆ™ï¼š<ul><li>å¦‚æœæ–¹æ¡ˆå’Œæˆæƒæ²¡æœ‰æŒ‡å®šï¼ŒHive å°†ä½¿ç”¨æŒ‡å®š Namenode URI çš„ hadoop é…ç½®å‚æ•° fs.default.name ä¸­çš„æ–¹æ¡ˆå’Œæˆæƒã€‚</li><li>å¦‚æœä¸æ˜¯ç»å¯¹è·¯å¾„ï¼ŒHive å°†ç›¸å¯¹äº &#x2F;user&#x2F;<username> æ¨æ–­è·¯å¾„ã€‚</li><li>Hive å°†ç§»åŠ¨ filepath æŒ‡å‘çš„æ–‡ä»¶åˆ°è¡¨ï¼ˆæˆ–åˆ†åŒºï¼‰ä¸­ã€‚</li></ul></li><li>å¦‚æœä½¿ç”¨äº† OVERWRITE å…³é”®å­—ï¼Œåˆ™ç›®æ ‡è¡¨ï¼ˆæˆ–åˆ†åŒºï¼‰ä¸­çš„å†…å®¹å°†è¢« filepath æŒ‡å‘çš„æ–‡ä»¶åˆ é™¤å’Œæ›¿æ¢ï¼›å¦åˆ™ filepath æŒ‡å‘çš„æ–‡ä»¶å°†è¿½åŠ åˆ°è¡¨ä¸­ã€‚<ul><li>æ³¨æ„ï¼Œå¦‚æœç›®æ ‡è¡¨ï¼ˆåˆ†åŒºï¼‰å·²ç»æœ‰ä¸€ä¸ªä¸ filepath ä¸‹åŒ…å«çš„åå­—å†²çªçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå·²ç»å­˜åœ¨çš„æ–‡ä»¶å°†è¢«æ–°æ–‡ä»¶æ›¿æ¢ã€‚</li></ul></li></ul><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><ul><li>filepath ä¸èƒ½åŒ…å«å­ç›®å½•ã€‚</li><li>å¦‚æœä¸æä¾› LOCAL å…³é”®å­—ï¼Œfilepath å¿…é¡»è·ŸæŒ‡å‘è¡¨ï¼ˆæˆ–åˆ†åŒºï¼‰ä½ç½®ç›¸åŒçš„æ–‡ä»¶ç³»ç»Ÿã€‚</li><li>Hive åªåšç®€å•çš„æ£€æŸ¥æ¥ç¡®ä¿åŠ è½½çš„æ–‡ä»¶è·Ÿè¡¨åŒ¹é…ã€‚ä¸€èˆ¬æ£€æŸ¥å¦‚æœè¡¨æ˜¯ä»¥ sequencefile æ ¼å¼å­˜å‚¨çš„ï¼ŒåŠ è½½çš„æ–‡ä»¶ä¹Ÿè¦æ˜¯ sequencefile æ–‡ä»¶ï¼Œåè¿‡æ¥äº¦ç„¶ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®ä»“åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB æŸ¥è¯¢å’ŒæŠ•å½±æ“ä½œç¬¦</title>
      <link href="/2025/10/22/MongoDB-%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%8A%95%E5%BD%B1%E6%93%8D%E4%BD%9C%E7%AC%A6/"/>
      <url>/2025/10/22/MongoDB-%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%8A%95%E5%BD%B1%E6%93%8D%E4%BD%9C%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="æŸ¥è¯¢é€‰æ‹©å™¨"><a href="#æŸ¥è¯¢é€‰æ‹©å™¨" class="headerlink" title="æŸ¥è¯¢é€‰æ‹©å™¨"></a>æŸ¥è¯¢é€‰æ‹©å™¨</h1><h2 id="æ¯”è¾ƒæ“ä½œç¬¦"><a href="#æ¯”è¾ƒæ“ä½œç¬¦" class="headerlink" title="æ¯”è¾ƒæ“ä½œç¬¦"></a>æ¯”è¾ƒæ“ä½œç¬¦</h2><p>æƒ³äº†è§£ä¸åŒ BSON ç±»å‹å€¼çš„æ¯”è¾ƒï¼Œå‚è§ <a href="https://link.zhihu.com/?target=https://docs.mongodb.org/manual/reference/bson-types/%23bson-types-comparison-order">BSONæ¯”è¾ƒé¡ºåºè¯¦ç»†è¯´æ˜</a>ã€‚</p><ul><li>$eq åŒ¹é…è·ŸæŒ‡å®šå€¼ç›¸ç­‰çš„å€¼</li><li>$gt åŒ¹é…æ¯”æŒ‡å®šå€¼å¤§çš„å€¼</li><li>$gte åŒ¹é…æ¯”æŒ‡å®šå€¼å¤§æˆ–è€…ç›¸ç­‰çš„å€¼</li><li>$lt åŒ¹é…æ¯”æŒ‡å®šå€¼å°çš„å€¼</li><li>$lte åŒ¹é…æ¯”æŒ‡å®šå€¼å°æˆ–è€…ç›¸ç­‰çš„å€¼</li><li>$ne åŒ¹é…è·ŸæŒ‡å®šå€¼ä¸ç›¸ç­‰çš„å€¼</li><li>$in åŒ¹é…åœ¨æŒ‡å®šæ•°ç»„ä¸­çš„ä»»æ„å€¼</li><li>$nin åŒ¹é…ä¸åœ¨æŒ‡å®šæ•°ç»„ä¸­çš„å€¼</li></ul><h2 id="é€»è¾‘æ“ä½œç¬¦"><a href="#é€»è¾‘æ“ä½œç¬¦" class="headerlink" title="é€»è¾‘æ“ä½œç¬¦"></a>é€»è¾‘æ“ä½œç¬¦</h2><ul><li>$or ç”¨é€»è¾‘ OR æ“ä½œç¬¦è¿æ¥æŸ¥è¯¢å­å¥ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…ä»»ä¸€ä¸ªæ¡ä»¶å­å¥çš„æ–‡æ¡£ã€‚</li><li>$and ç”¨é€»è¾‘ AND æ“ä½œç¬¦è¿æ¥æŸ¥è¯¢å­å¥ï¼Œè¿”å›æ‰€æœ‰åŒæ—¶åŒ¹é…ä¸¤ä¸ªæ¡ä»¶å­å¥çš„æ–‡æ¡£ã€‚</li><li>$not åè½¬æŸ¥è¯¢æ¡ä»¶çš„æ•ˆæœï¼Œè¿”å›ä¸åŒ¹é…æŸ¥è¯¢æ¡ä»¶çš„æ–‡æ¡£ã€‚</li><li>$nor ç”¨é€»è¾‘ NOR æ“ä½œç¬¦è¿æ¥æŸ¥è¯¢å­å¥ï¼Œè¿”å›ä¸¤ä¸ªæ¡ä»¶éƒ½åŒ¹é…å¤±è´¥çš„æ‰€æœ‰æ–‡æ¡£ã€‚</li></ul><h2 id="å…ƒç´ æ“ä½œç¬¦"><a href="#å…ƒç´ æ“ä½œç¬¦" class="headerlink" title="å…ƒç´ æ“ä½œç¬¦"></a>å…ƒç´ æ“ä½œç¬¦</h2><ul><li>$exists åŒ¹é…æœ‰æŒ‡å®šå±æ€§çš„æ–‡æ¡£ã€‚</li><li>$type é€‰æ‹©å±æ€§æ˜¯æŒ‡å®šç±»å‹çš„æ–‡æ¡£ã€‚</li></ul><h2 id="è¯„ä¼°æ“ä½œç¬¦"><a href="#è¯„ä¼°æ“ä½œç¬¦" class="headerlink" title="è¯„ä¼°æ“ä½œç¬¦"></a>è¯„ä¼°æ“ä½œç¬¦</h2><ul><li>$mod å¯¹ä¸€ä¸ªå±æ€§çš„å€¼æ‰§è¡Œæ¨¡æ•°è¿ç®—ï¼Œé€‰æ‹©æœ‰æŒ‡å®šç»“æœçš„æ–‡æ¡£ã€‚</li><li>$regex é€‰æ‹©å€¼åŒ¹é…æŒ‡å®šè§„åˆ™è¡¨è¾¾å¼çš„æ–‡æ¡£ã€‚</li><li>$text æ‰§è¡Œæ–‡æœ¬æœç´¢ã€‚</li><li>$where åŒ¹é…æ»¡è¶³ä¸€ä¸ª JavaScript è¡¨è¾¾å¼çš„æ–‡æ¡£ã€‚</li></ul><h2 id="ç©ºé—´æ“ä½œç¬¦"><a href="#ç©ºé—´æ“ä½œç¬¦" class="headerlink" title="ç©ºé—´æ“ä½œç¬¦"></a>ç©ºé—´æ“ä½œç¬¦</h2><ul><li>$geoWithin é€‰æ‹©åŒ…å›´ GeoJSON å‡ ä½•å›¾å½¢ çš„å‡ ä½•å›¾å½¢ã€‚äºŒç»´çƒå½¢å’ŒäºŒç»´ç´¢å¼•æ”¯æŒ $geoWithinã€‚</li><li>$geoIntersects é€‰æ‹©ä¸ä¸€ä¸ª GeoJSON å‡ ä½•å›¾å½¢ ç›¸äº¤çš„å‡ ä½•å›¾å½¢ã€‚äºŒç»´çƒå½¢æ”¯æŒ $geoIntersectsã€‚</li><li>$near è¿”å›è·Ÿä¸€ä¸ªç‚¹é‚»è¿‘çš„ç©ºé—´å¯¹è±¡ã€‚éœ€è¦ä¸€ä¸ªç©ºé—´ç´¢å¼•ã€‚äºŒç»´çƒå½¢å’ŒäºŒç»´ç´¢å¼•æ”¯æŒ $nearã€‚</li><li>$nearSphere è¿”å›çƒå½¢ä¸Šè·Ÿä¸€ä¸ªç‚¹é‚»è¿‘çš„ç©ºé—´å¯¹è±¡ã€‚äºŒç»´çƒå½¢å’ŒäºŒç»´ç´¢å¼•æ”¯æŒ $nearSphereã€‚</li></ul><h2 id="æ•°ç»„æ“ä½œç¬¦"><a href="#æ•°ç»„æ“ä½œç¬¦" class="headerlink" title="æ•°ç»„æ“ä½œç¬¦"></a>æ•°ç»„æ“ä½œç¬¦</h2><ul><li>$all åŒ¹é…æŸ¥è¯¢ä¸­æŒ‡å®šçš„æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚</li><li>$elemMatch é€‰æ‹©é‚£äº›å±æ€§åŒ¹é…æ‰€æœ‰ $elemMatch æ¡ä»¶æŒ‡å®šçš„å…¨éƒ¨å±æ€§çš„æ•°ç»„ã€‚</li><li>$size é€‰æ‹©ç¬¦åˆæŒ‡å®šå±æ€§ä¸ªæ•°çš„æ•°ç»„ã€‚</li></ul><h2 id="ä½è¿ç®—æ“ä½œç¬¦"><a href="#ä½è¿ç®—æ“ä½œç¬¦" class="headerlink" title="ä½è¿ç®—æ“ä½œç¬¦"></a>ä½è¿ç®—æ“ä½œç¬¦</h2><ul><li>$bitsAllSet åŒ¹é…çš„æ•°å­—æˆ–äºŒè¿›åˆ¶å€¼ï¼Œå…¶ä¸­è¿™ç»„ä½çš„ä½ç½®éƒ½æœ‰ä¸€ä¸ªå€¼ä¸º1ã€‚</li><li>$bitsAnySet åŒ¹é…çš„æ•°å­—æˆ–äºŒè¿›åˆ¶å€¼ï¼Œå…¶ä¸­è¿™ç»„ä½çš„ä»»æ„ä¸€ä¸ªä½ç½®æœ‰ä¸€ä¸ªå€¼ä¸º1ã€‚</li><li>$bitsAllClear åŒ¹é…çš„æ•°å­—æˆ–äºŒè¿›åˆ¶å€¼ï¼Œå…¶ä¸­è¿™ç»„ä½çš„ä½ç½®éƒ½æœ‰ä¸€ä¸ªå€¼ä¸º0ã€‚</li><li>$bitsAnyClear åŒ¹é…çš„æ•°å­—æˆ–äºŒè¿›åˆ¶å€¼ï¼Œå…¶ä¸­è¿™ç»„ä½çš„ä»»æ„ä¸€ä¸ªä½ç½®æœ‰ä¸€ä¸ªå€¼ä¸º0ã€‚</li></ul><h2 id="æ³¨é‡Šæ“ä½œç¬¦"><a href="#æ³¨é‡Šæ“ä½œç¬¦" class="headerlink" title="æ³¨é‡Šæ“ä½œç¬¦"></a>æ³¨é‡Šæ“ä½œç¬¦</h2><p>$comment ç»™æŸ¥è¯¢æ–­è¨€æ·»åŠ æ³¨é‡Šã€‚</p><h1 id="æŠ•å½±æ“ä½œç¬¦"><a href="#æŠ•å½±æ“ä½œç¬¦" class="headerlink" title="æŠ•å½±æ“ä½œç¬¦"></a>æŠ•å½±æ“ä½œç¬¦</h1><ul><li>$ å±•ç°ç¬¬ä¸€ä¸ªå…ƒç´ åŒ¹é…æŸ¥è¯¢æ¡ä»¶çš„æ•°ç»„ã€‚</li><li>$elemMatch å±•ç°ç¬¬ä¸€ä¸ªå…ƒç´ åŒ¹é…æŒ‡å®šçš„ $elemMatch æ¡ä»¶çš„æ•°ç»„ã€‚</li><li>$meta å±•ç° $text æ“ä½œä¸­èµ‹å€¼ç»™æ–‡æ¡£çš„åˆ†æ•°ã€‚</li><li>$slice é™åˆ¶ä»ä¸€ä¸ªæ•°ç»„å±•ç¤ºçš„å…ƒç´ çš„ä¸ªæ•°ã€‚æ”¯æŒ skip å’Œ limitã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL è¡¨åˆ†åŒºä¿®æ”¹æ“ä½œä¸æ”¯æŒ IF [NOT] EXISTS</title>
      <link href="/2025/10/22/MySQL-%E8%A1%A8%E5%88%86%E5%8C%BA%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C%E4%B8%8D%E6%94%AF%E6%8C%81-IF-NOT-EXISTS/"/>
      <url>/2025/10/22/MySQL-%E8%A1%A8%E5%88%86%E5%8C%BA%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C%E4%B8%8D%E6%94%AF%E6%8C%81-IF-NOT-EXISTS/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘çš„å·¥ä½œä¸­éœ€è¦ç”¨åˆ° MySQL çš„åˆ†åŒºè¡¨ã€‚è¡¨æ ¹æ®æ¯å¤©çš„æ—¥æœŸåˆ†åŒºï¼Œå¦‚ï¼š20160518ã€20160519 ç­‰ã€‚éœ€è¦æ”¯æŒæ•°æ®é‡æ–°å†™å…¥åˆ†åŒºï¼Œå³å¦‚æœå¯¹åº”çš„åˆ†åŒºä¸‹å·²ç»å­˜åœ¨æ•°æ®ï¼Œåˆ™å…ˆæ¸…ç†å†å†™å…¥ã€‚IF [NOT] EXISTS æ˜¯ä¸€ç§åˆ¤å®šè¡¨æ˜¯å¦å­˜åœ¨ç®€ä¾¿æ–¹å¼ï¼Œéå¸¸é€‚åˆè¿™ç§åœºæ™¯ã€‚ä½†æŸ¥çœ‹äº† MySQL çš„å®˜æ–¹æ–‡æ¡£ï¼ŒPARTITION çš„æ·»åŠ ã€åˆ é™¤æ“ä½œä¸æ”¯æŒè¯¥æ“ä½œã€‚<a href="https://link.zhihu.com/?target=http://dev.mysql.com/doc/refman/5.7/en/alter-table-partition-operations.html">ALTER TABLE Partition Operations</a><br><img src="/images/202510/23.jpg"></p><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>é€šè¿‡ MySQL çš„ INFORMATION_SCHEMA åº“ä¸‹çš„ PARTITIONS è¡¨æŸ¥è¯¢è¡¨åˆ†åŒºä¿¡æ¯ç¡®å®šåˆ†åŒºæ˜¯å¦å­˜åœ¨ã€‚è¯¥è¡¨çš„ä½¿ç”¨è§ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE th (</span><br><span class="line">    -&gt;     c1 INT,</span><br><span class="line">    -&gt;     c2 VARCHAR(20)</span><br><span class="line">    -&gt; )</span><br><span class="line">    -&gt; PARTITION BY HASH(c1)</span><br><span class="line">    -&gt; PARTITIONS 2;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ä¸‹é¢çš„æŸ¥è¯¢è¡¨ th çš„åˆ†åŒºæƒ…å†µï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT TABLE_NAME,PARTITION_NAME,TABLE_ROWS,AVG_ROW_LENGTH,DATA_LENGTH</span><br><span class="line">     &gt;   FROM INFORMATION_SCHEMA.PARTITIONS</span><br><span class="line">     &gt;   WHERE TABLE_SCHEMA = <span class="string">&#x27;p&#x27;</span> AND TABLE_NAME =<span class="string">&#x27;th&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š<br><img src="/images/202510/24.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº hexo + github çš„ä¸ªäººåšå®¢ç³»ç»Ÿæ­å»º</title>
      <link href="/2025/10/21/%E5%9F%BA%E4%BA%8E-hexo-github-%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/"/>
      <url>/2025/10/21/%E5%9F%BA%E4%BA%8E-hexo-github-%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="å·¥å…·ä»‹ç»"><a href="#å·¥å…·ä»‹ç»" class="headerlink" title="å·¥å…·ä»‹ç»"></a>å·¥å…·ä»‹ç»</h1><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€å•ï¼Œå¹¶ä¸”å¼ºå¤§çš„åšå®¢æ¡†æ¶ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ol><li>Node.js å¸¦æ¥ä¸å¯æ€è®®çš„ç”Ÿæˆé€Ÿåº¦ã€‚å»ºç«‹æ•°ç™¾ä¸ªæ–‡ä»¶åªéœ€è¦å‡ ç§’é’Ÿã€‚</li><li>æ”¯æŒ GitHub æ‰€æœ‰æ¨èçš„ Markdown ç‰¹æ€§ã€‚ä½ ç”šè‡³å¯ä»¥åœ¨ Hexo ä¸­ä½¿ç”¨å¤§éƒ¨åˆ† Octopress çš„æ’ä»¶ã€‚</li><li>åªéœ€è¦ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥éƒ¨ç½²ä¸ªäººåšå®¢åˆ° GitHubã€Heroku æˆ–è€…å…¶ä»–ç«™ç‚¹ã€‚</li><li>Hexo æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿã€‚å¯ä»¥å®‰è£…å¾ˆå¤š Jade æ’ä»¶å’Œ CoffeeScript æ’ä»¶ã€‚</li></ol><h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><p>GitHub æä¾›ä¸€ä¸ªå¿«é€Ÿçš„ã€çµæ´»çš„ã€åä½œçš„å¼€å‘è¿‡ç¨‹ï¼Œè®©ä½ å¯ä»¥è‡ªå·±å·¥ä½œæˆ–è€…è·Ÿå…¶ä»–äººä¸€èµ·å·¥ä½œã€‚</p><p>æ­¤å¤„ä¸»è¦åˆ©ç”¨ GitHub æä¾›çš„ GitHub pages ç‰¹æ€§ã€‚è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹<a href="https://link.zhihu.com/?target=https://pages.github.com/">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="Oray"><a href="#Oray" class="headerlink" title="Oray"></a>Oray</h2><p>Oray æ˜¯ä¸€å®¶åŸŸåæœåŠ¡æä¾›å•†ã€‚å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©å…¶ä»–åŸŸåæœåŠ¡å•†ï¼Œå¦‚ä¸‡ç½‘ã€‚åŸŸåæœåŠ¡ä¸€èˆ¬éƒ½ä¼šæä¾› URL è·³è½¬çš„åŠŸèƒ½ï¼šè®¿é—®åŸŸåå¯è·³è½¬åˆ°ä¸€ä¸ªç½‘å€ä¸Šï¼Œå®ç°ä¸åŠ ç«¯å£å·å³å¯è®¿é—®æœåŠ¡å™¨ï¼ˆæ˜¾æ€§URLï¼Œä¼šæ”¹å˜åœ°å€æ ä¸­çš„ç½‘å€ï¼Œéšæ€§URLåˆ™åä¹‹ï¼‰ã€‚æ­¤å¤„æ­£å¼åˆ©ç”¨è¿™ç§åŠŸèƒ½ã€‚</p><h1 id="æ•´ä½“æ¶æ„"><a href="#æ•´ä½“æ¶æ„" class="headerlink" title="æ•´ä½“æ¶æ„"></a>æ•´ä½“æ¶æ„</h1><p><img src="/images/202510/22.jpg"></p><ul><li>source repositoryï¼ˆlocalï¼‰ï¼šæœ¬åœ°ä»£ç ä»“åº“ã€‚åœ¨æœ¬åœ°æ­å»º node.js ç¯å¢ƒï¼Œå¹¶è¿è¡Œä¸ªäººåšå®¢ç³»ç»Ÿä½œä¸ºå¼€å‘è°ƒè¯•ç¯å¢ƒã€‚</li><li>source repositoryï¼ˆgithubï¼‰ï¼šgithub ä¸Šåˆ›å»ºçš„ä»£ç ä»“åº“ã€‚é€šè¿‡ git push å°†ä¸ªäººä»£ç æäº¤åˆ° github ä»£ç ä»“åº“ã€‚</li><li>static repositoryï¼ˆlocalï¼‰ï¼šä¸ªäººåšå®¢åœ¨æœ¬åœ°ç”Ÿæˆçš„é™æ€å†…å®¹ä»“åº“ã€‚ä½¿ç”¨ hexo generate å‘½ä»¤å®Œæˆã€‚</li><li>ä½¿ç”¨ Oray åŸŸåæœåŠ¡çš„åŸå› æ˜¯å¯ä»¥ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„ä¸ªæ€§åŒ–çš„åŸŸåã€‚</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é‡‡ç”¨è¿™ç§æ–¹å¼ä½œä¸ºä¸ªäººåšå®¢çš„å¥½å¤„æ˜¯ï¼š</p><ul><li>è¿‡ç¨‹ç®€å•ï¼Œåªè¦æœ‰åŸºç¡€è‹±æ–‡æ–‡æ¡£é˜…è¯»èƒ½åŠ›ã€‚æŒ‰ç…§å®˜ç½‘ä»‹ç»æ“ä½œå°±å¥½ã€‚ä¸ç”¨å¼€å‘ä¹Ÿå¯ä»¥å®Œæˆã€‚</li><li>åŸºäº GitHub æœåŠ¡ç¨³å®šï¼›</li><li>Hexo åŠŸèƒ½å¼ºå¤§ï¼Œæ’ä»¶ä¸°å¯Œï¼Œè€Œä¸”æœ‰ä¸°å¯Œçš„ä¸»é¢˜å¯ä»¥é€‰æ‹©ã€‚</li><li>æ–‡ç« ç¼–å†™ä½¿ç”¨ Markdownï¼Œèƒ½è®©ä½ æ›´ä¸“æ³¨äºæ–‡ç« å†…å®¹ï¼Œä¸ç”¨å…³å¿ƒå±•ç¤ºã€‚</li><li>æˆæœ¬æä½ã€‚åªéœ€è¦åŸŸåæœåŠ¡ä»˜è´¹ï¼Œæ¯å¹´ä¸åˆ°ä¸€ç™¾å…ƒã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Hexo </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac OS å®‰è£… VirtualBox</title>
      <link href="/2025/10/21/Mac-OS-%E5%AE%89%E8%A3%85-VirtualBox/"/>
      <url>/2025/10/21/Mac-OS-%E5%AE%89%E8%A3%85-VirtualBox/</url>
      
        <content type="html"><![CDATA[<p>ä» Orale å®˜ç½‘ä¸‹è½½ dmg æ–‡ä»¶ã€‚ä¸‹è½½ç½‘å€ï¼š<a href="http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html?ssSourceSiteId=ocomen">http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html?ssSourceSiteId=ocomen</a></p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>åŒå‡»ä¸‹è½½çš„ dmg æ–‡ä»¶ï¼ŒæŒ‰ç…§è¯´æ˜è¿›è¡Œå®‰è£…ï¼Œé€‰é¡¹æŒ‰ç…§é»˜è®¤å®Œæˆå®‰è£…ã€‚<br><img src="/images/202510/19.jpg"></p><h1 id="æ‰“å¼€"><a href="#æ‰“å¼€" class="headerlink" title="æ‰“å¼€"></a>æ‰“å¼€</h1><p>å¯ä»¥ä» Applications ä¸­åŒå‡»å›¾æ ‡æ‰“å¼€ï¼Œæˆ–è€…ä½¿ç”¨â€œSpotlight æœç´¢â€ï¼ˆctrl ï¼‹ space å¿«æ·é”®ï¼‰æœç´¢æ‰“å¼€ã€‚</p><ol><li><p>Applications å›¾æ ‡ï¼š<br><img src="/images/202510/20.jpg"></p></li><li><p>Spotlight å¿«æ·æ‰“å¼€ï¼š<br><img src="/images/202510/21.jpg"></p></li></ol><h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p>å®‰è£… Ubuntu Server åï¼Œåœ¨ VirtualBox ç•Œé¢ä¸èƒ½å…¨å±æ˜¾ç¤ºï¼Œå°è¯•è§£å†³æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„æ–¹æ³•ï¼ˆæœ‰å®ç°æ–¹æ³•çš„åŒå­¦å¯ä»¥æŒ‡æ•™ ^_^ï¼‰ã€‚å…¶å®å¯ä»¥ä¸ç”¨éåœ¨ VirtualBox ä¸­å…¨å±ï¼Œå› ä¸º Server å°±æ˜¯ä½œä¸ºæœåŠ¡å™¨æ¥ç”¨çš„ï¼Œå®Œå…¨å¯ä»¥åœ¨å®¢æˆ·ç«¯é€šè¿‡ ssh ç™»é™†æ¥ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> è™šæ‹ŸåŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> MacOS </tag>
            
            <tag> VirtualBox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡ MongoDB æ—¥å¿—ä¿¡æ¯å®šä½æ“ä½œæ¥æº</title>
      <link href="/2025/10/20/%E9%80%9A%E8%BF%87-MongoDB-%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF%E5%AE%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E6%9D%A5%E6%BA%90/"/>
      <url>/2025/10/20/%E9%80%9A%E8%BF%87-MongoDB-%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF%E5%AE%9A%E4%BD%8D%E6%93%8D%E4%BD%9C%E6%9D%A5%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<h1 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h1><p>ä¸€å¤©ä¸­åˆçªç„¶å‘ç°ç”Ÿäº§ç³»ç»Ÿä½¿ç”¨çš„ MongoDB åº“è¢«åˆ æ‰äº†ã€‚å¹¸äºæœ‰å¤‡ä»½ï¼Œå¾ˆå¿«æ¢å¤ï¼Œç”Ÿäº§ç³»ç»Ÿå¹¶æœªå—å¾ˆå¤§å½±å“ã€‚é—®äº†å›¢é˜Ÿæˆå‘˜ï¼Œéƒ½æœªè¿›è¡Œè¿‡åˆ é™¤æ“ä½œï¼Œè¯´æ˜å¯èƒ½æ˜¯ä¸¤ç§æƒ…å†µï¼šä¸€ã€è¯¯åˆ ï¼Œè¿æ“ä½œè€…è‡ªå·±ä¹Ÿæ²¡æ„è¯†åˆ°åšäº†ä¸€ä¸ªåˆ é™¤æ“ä½œï¼›äºŒã€bugï¼Œåœ¨æŸä¸ªç¨‹åºä¸­å­˜åœ¨ä¸€ä¸ª bugã€‚</p><h1 id="local-oplog-rs"><a href="#local-oplog-rs" class="headerlink" title="local.oplog.rs"></a>local.oplog.rs</h1><p>MongoDB çš„å¤åˆ¶é›†æ˜¯é€šè¿‡ oplog æ¥å®ç°çš„ï¼Œä¸»åº“çš„æ›´æ”¹æ“ä½œä¼šè¢«è®°å½•åˆ°ä¸»åº“çš„ oplog æ—¥å¿—ä¸­ï¼Œç„¶åä»åº“é€šè¿‡å¼‚æ­¥æ–¹å¼å¤åˆ¶ä¸»åº“çš„ oplog æ–‡ä»¶å¹¶ä¸”å°† oplog æ—¥å¿—åº”ç”¨åˆ°ä»åº“ï¼Œä»è€Œå®ç°äº†ä¸ä¸»åº“çš„åŒæ­¥ã€‚</p><p>å…ˆæŸ¥çœ‹ oplog çœ‹æ˜¯å¦æœ‰åˆ é™¤æ“ä½œã€‚æŸ¥è¿‡ä¹‹åï¼Œå¹¶æœªå‘ç°æœ‰ remove çš„æ“ä½œã€‚</p><p>oplog è¯´æ˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.<span class="property">oplog</span>.<span class="property">rs</span>.<span class="title function_">findOne</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;ts&quot;</span> : <span class="title class_">Timestamp</span>(<span class="number">1419392438</span>, <span class="number">1</span>),</span><br><span class="line">  <span class="string">&quot;h&quot;</span> : <span class="title class_">NumberLong</span>(<span class="string">&quot;3445526183368758260&quot;</span>),</span><br><span class="line">  <span class="string">&quot;v&quot;</span> : <span class="number">2</span>,</span><br><span class="line">  <span class="string">&quot;op&quot;</span> : <span class="string">&quot;n&quot;</span>,</span><br><span class="line">  <span class="string">&quot;ns&quot;</span> : <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;o&quot;</span> : &#123;</span><br><span class="line">    <span class="string">&quot;msg&quot;</span> : <span class="string">&quot;Reconfig set&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span> : <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>tsï¼š8å­—èŠ‚çš„æ—¶é—´æˆ³ï¼Œç”±4å­—èŠ‚unix timestamp + 4å­—èŠ‚è‡ªå¢è®¡æ•°è¡¨ç¤ºã€‚è¿™ä¸ªå€¼å¾ˆé‡è¦ï¼Œåœ¨é€‰ä¸¾(å¦‚masterå®•æœºæ—¶)æ–°primaryæ—¶ï¼Œä¼šé€‰æ‹©tsæœ€å¤§çš„é‚£ä¸ªsecondaryä½œä¸ºæ–°primaryã€‚</li><li>opï¼š1å­—èŠ‚çš„æ“ä½œç±»å‹ï¼Œä¾‹å¦‚ï¼š<ul><li>â€œiâ€ï¼š insert</li><li>â€œuâ€ï¼š update</li><li>â€œdâ€ï¼š delete</li><li>â€œcâ€ï¼š db cmd</li><li>â€œdbâ€ï¼šå£°æ˜å½“å‰æ•°æ®åº“ (å…¶ä¸­ns è¢«è®¾ç½®æˆä¸º&#x3D;&gt;æ•°æ®åº“åç§°+ â€˜.â€™)</li><li>â€œnâ€: no op,å³ç©ºæ“ä½œï¼Œå…¶ä¼šå®šæœŸæ‰§è¡Œä»¥ç¡®ä¿æ—¶æ•ˆæ€§</li></ul></li><li>nsï¼šæ“ä½œæ‰€åœ¨çš„namespaceã€‚</li><li>oï¼šæ“ä½œæ‰€å¯¹åº”çš„documentï¼Œå³å½“å‰æ“ä½œçš„å†…å®¹ï¼ˆæ¯”å¦‚æ›´æ–°æ“ä½œæ—¶è¦æ›´æ–°çš„çš„å­—æ®µå’Œå€¼ï¼‰</li><li>o2: åœ¨æ‰§è¡Œæ›´æ–°æ“ä½œæ—¶çš„whereæ¡ä»¶ï¼Œä»…é™äºupdateæ—¶æ‰æœ‰è¯¥å±æ€§ã€‚</li></ul><h1 id="MongoDB-ç³»ç»Ÿæ—¥å¿—"><a href="#MongoDB-ç³»ç»Ÿæ—¥å¿—" class="headerlink" title="MongoDB ç³»ç»Ÿæ—¥å¿—"></a>MongoDB ç³»ç»Ÿæ—¥å¿—</h1><p>MongoDB ç³»ç»Ÿæ—¥å¿—è·¯å¾„ä»é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æŸ¥çœ‹ã€‚MongoDB è¿›ç¨‹ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@10-180-86-57 ~]# ps -ef|grep mongo</span><br><span class="line">root      1564     1  1  2015 ?        2-21:32:34 /usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf</span><br></pre></td></tr></table></figure><p>æ—¥å¿—æ–‡ä»¶è·¯å¾„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@10-180-86-57 ~]# more /usr/local/mongodb/mongodb.conf</span><br><span class="line">systemLog</span><br><span class="line"></span><br><span class="line">:</span><br><span class="line">  destination: file</span><br><span class="line">  path: <span class="string">&quot;/data/mongodb/log/mongodb.log&quot;</span></span><br><span class="line">  logAppend: <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯å‘ç°æœ‰ dropDatabase çš„æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@10-180-86-57 <span class="built_in">log</span>]# <span class="built_in">cat</span> mongodb.log |grep dropDatabase</span><br><span class="line">2016-05-24T11:24:37.994+0800 [repl writer worker 1] dropDatabase md starting</span><br><span class="line">2016-05-24T11:24:38.357+0800 [repl writer worker 1] dropDatabase md finished</span><br></pre></td></tr></table></figure><p>md æ­£æ˜¯è¢«åˆ é™¤çš„åº“ã€‚æ—¶é—´èŒƒå›´å·²ç»æ˜ç¡®ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ‰¾åˆ°åˆ é™¤æ“ä½œçš„æ¥æºï¼Œé€šè¿‡æ—¶é—´æŸ¥çœ‹è¯¥æ—¶é—´å‰æœ‰å“ªäº› IP è¿æ¥äº†æ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@10-180-86-57 <span class="built_in">log</span>]# <span class="built_in">cat</span> mongodb.log |grep <span class="string">&quot;2016-05-24T11:24&quot;</span></span><br><span class="line">2016-05-24T11:24:34.960+0800 [initandlisten] connection accepted from 10.57.172.146:58082 <span class="comment">#5171827 (55 connections now open)</span></span><br><span class="line">2016-05-24T11:24:35.011+0800 [conn5171827]  authenticate db: admin &#123; authenticate: 1, user: <span class="string">&quot;bigdata&quot;</span>, nonce: <span class="string">&quot;xxx&quot;</span>, key: <span class="string">&quot;xxx&quot;</span> &#125;</span><br><span class="line">2016-05-24T11:24:36.483+0800 [conn5171600] end connection 10.149.13.17:4202 (54 connections now open)</span><br><span class="line">2016-05-24T11:24:37.994+0800 [repl writer worker 1] dropDatabase md starting</span><br><span class="line">2016-05-24T11:24:38.137+0800 [conn5171338] end connection 10.149.13.6:32360 (53 connections now open)</span><br><span class="line">2016-05-24T11:24:38.252+0800 [repl writer worker 1] removeJournalFiles</span><br><span class="line">2016-05-24T11:24:38.357+0800 [repl writer worker 1] dropDatabase md finished</span><br></pre></td></tr></table></figure><p>å‘ç°åœ¨è¿™ä¸ªæ—¶é—´æœ‰ä¸€ä¸ªå†…å®¹ IPï¼ˆ10.57.172.146ï¼‰ æœ‰è¿æ¥æ•°æ®åº“çš„æ“ä½œã€‚è™½ç„¶é—®é¢˜æ²¡æœ‰é‡æ–°ï¼Œä½†åŸºæœ¬å¯èƒ½å®šä½ä¸ºè¯¯åˆ æ“ä½œã€‚review åŒäº‹ä»£ç ç¡®å®šæ²¡æœ‰é—®é¢˜åï¼Œé—®é¢˜æ²¡æœ‰å†ç°ã€‚</p><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><h2 id="è¯»å†™æƒé™åˆ†ç¦»"><a href="#è¯»å†™æƒé™åˆ†ç¦»" class="headerlink" title="è¯»å†™æƒé™åˆ†ç¦»"></a>è¯»å†™æƒé™åˆ†ç¦»</h2><p>è¿™ä¸ªåº“ä¸‹å­˜æ”¾çš„éƒ½æ˜¯é…ç½®ä¿¡æ¯ï¼Œå˜åŠ¨å¾ˆå°‘ï¼Œä½†è¯»å–å¾ˆé¢‘ç¹ï¼Œè€Œä¸”å¤šä¸ªåœ°æ–¹éƒ½ä¼šè¯»å–ã€‚ä¸ºäº†æ§åˆ¶æƒé™ï¼Œåˆ›å»ºè¿™ä¸ªåº“çš„åªè¯»è´¦å·ï¼Œå¯¹å¤–åªå¼€æ”¾åªè¯»è´¦å·ï¼Œåªæœ‰ç®¡ç†åŠŸèƒ½ä½¿ç”¨å¯å†™è´¦å·ã€‚</p><h2 id="å¤‡ä»½"><a href="#å¤‡ä»½" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h2><p>è¿™æ¬¡äº‹æ•…å°±æ˜¯å› ä¸ºæœ‰å¤‡ä»½æ‰å¯ä»¥å¿«é€Ÿæ¢å¤çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis åˆæ¢</title>
      <link href="/2025/10/19/Redis-%E5%88%9D%E6%8E%A2/"/>
      <url>/2025/10/19/Redis-%E5%88%9D%E6%8E%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>Redis ä¸‹è½½åœ°å€åŠå®‰è£…è¯´æ˜å®˜æ–¹åœ°å€ï¼š<a href="http://redis.io/download">http://redis.io/download</a>ã€‚Redis ç›®å‰æ²¡æœ‰å®˜æ–¹æ”¯æŒçš„ Windows å¹³å°ç‰ˆæœ¬ã€‚</p><p>ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½ã€è§£å‹ã€ç¼–è¯‘ Redisï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://download.redis.io/releases/redis-3.2.0.tar.gz</span><br><span class="line">$ tar xzf redis-3.2.0.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> redis-3.2.0</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ä¹‹åçš„äºŒè¿›åˆ¶æ–‡ä»¶åœ¨ src ç›®å½•ä¸‹ã€‚ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Redisï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-server</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ Redis å†…ç½®çš„å®¢æˆ·ç«¯ä¸ Redis äº¤äº’ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-cli</span><br><span class="line">redis&gt; <span class="built_in">set</span> foo bar</span><br><span class="line">OK</span><br><span class="line">redis&gt; get foo</span><br><span class="line"><span class="string">&quot;bar&quot;</span></span><br></pre></td></tr></table></figure><h1 id="Java-å®¢æˆ·ç«¯"><a href="#Java-å®¢æˆ·ç«¯" class="headerlink" title="Java å®¢æˆ·ç«¯"></a>Java å®¢æˆ·ç«¯</h1><p>Redis åˆ†è¯­è¨€çš„å®¢æˆ·ç«¯åˆ—è¡¨å¯ä»¥ä»å®˜ç½‘é“¾æ¥æŸ¥çœ‹ï¼š<a href="http://redis.io/clients">http://redis.io/clients</a>ã€‚Jedis æ˜¯æ¨èçš„ Java å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”è¿‘ 6 ä¸ªæœˆæœ‰æ›´æ–°ï¼Œæ‰€ä»¥é€‰ç”¨è¯¥å®¢æˆ·ç«¯ã€‚Jedis çš„ github é¡¹ç›®é“¾æ¥ï¼š<a href="https://github.com/xetorthio/jedis">https://github.com/xetorthio/jedis</a></p><p>Mave ä¾èµ–é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">jedis.set(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;foo&quot;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java Socket å¤šçº¿ç¨‹å®ä¾‹</title>
      <link href="/2025/10/19/Java-Socket-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E4%BE%8B/"/>
      <url>/2025/10/19/Java-Socket-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>Java ç½‘ç»œç¼–ç¨‹çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç¼–å†™éƒ½éå¸¸ç®€å•ã€‚å®¢æˆ·ç«¯ä½¿ç”¨ Socket å¯¹è±¡ä¸æœåŠ¡ç«¯äº¤äº’ï¼›æœåŠ¡ç«¯åˆ›å»º ServerSocket å¯¹è±¡ï¼Œç„¶åä½¿ç”¨accept()æ–¹æ³•è¿›è¡Œç›‘å¬ï¼Œå¹¶è¿”å›ä¸€ä¸ªSocketçš„å¯¹è±¡ã€‚accept æ–¹æ³•æ˜¯é˜»å¡è°ƒç”¨ï¼Œå¹¶å°†ä¸€ç›´é˜»å¡ï¼Œç›´åˆ°æ¥æ”¶åˆ°ä¸‹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ä¸ºæ­¢ã€‚éå¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åŒæ—¶åªèƒ½æœåŠ¡ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚è¿™é€šå¸¸æ˜¯ä¸èƒ½æ»¡è¶³ç°å®éœ€æ±‚çš„ã€‚</p><p>å¯¹äºç°å®åœºæ™¯æ˜¯é€šè¿‡åœ¨æœåŠ¡ç«¯åˆ›å»ºå¤šä¸ªçº¿ç¨‹æ¥æœåŠ¡å¤šä¸ªå®¢æˆ·ç«¯ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202510/18.jpg"></p><h1 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService</span><br><span class="line"></span><br><span class="line">;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EchoMultiServer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ServerSocket</span> <span class="variable">server</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ExecutorService threadPool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        threadPool = Executors.newCachedThreadPool();</span><br><span class="line">        threadPool.submit(<span class="keyword">new</span> <span class="title class_">Monitor</span></span><br><span class="line"></span><br><span class="line">());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            server = <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;Server listening on port 10000 ....&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Hit Enter to stop the server&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> server.accept();</span><br><span class="line">                System.out.println(<span class="string">&quot;Thread created&quot;</span>);</span><br><span class="line">                threadPool.submit(<span class="keyword">new</span> <span class="title class_">EchoThread</span></span><br><span class="line"></span><br><span class="line">(socket));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Server is down&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shutdownServer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            server.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        threadPool.shutdown();</span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Monitor</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (System.in.read() != <span class="string">&#x27;\n&#x27;</span>) &#123;&#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            shutdownServer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EchoThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">512</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">EchoThread</span><span class="params">(Socket socket)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">            is.read(buffer);</span><br><span class="line">            <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">            os.write(buffer);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress</span><br><span class="line"></span><br><span class="line">;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EchoMultiClient</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> counter;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            counter++;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Client</span>(counter)).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Client</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> counter;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Client</span><span class="params">(<span class="type">int</span> counter)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.counter = counter;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>();</span><br><span class="line">                socket.connect(<span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">10000</span>), <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;Hello from Client &quot;</span> + counter;</span><br><span class="line">                    os.write(str.getBytes());</span><br><span class="line">                    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">                    <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(is);</span><br><span class="line">                    <span class="keyword">while</span> (scanner.hasNextLine()) &#123;</span><br><span class="line">                        System.out.println(scanner.nextLine());</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                    scanner.close();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LRU ç®—æ³•</title>
      <link href="/2025/10/19/LRU-%E7%AE%97%E6%B3%95/"/>
      <url>/2025/10/19/LRU-%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h1><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>LRU æ˜¯ Least Recently Used çš„ç¼©å†™ï¼Œå³æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜â€ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>æœ€å¸¸è§çš„å®ç°æ˜¯ä½¿ç”¨ä¸€ä¸ªé“¾è¡¨ä¿å­˜ç¼“å­˜æ•°æ®ï¼Œè¯¦ç»†ç®—æ³•å®ç°å¦‚ä¸‹ï¼š<br><img src="/images/202510/14.jpg"></p><ul><li>æ–°æ•°æ®æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨ï¼›</li><li>æ¯å½“ç¼“å­˜å‘½ä¸­ï¼ˆå³ç¼“å­˜æ•°æ®è¢«è®¿é—®ï¼‰ï¼Œåˆ™å°†æ•°æ®ç§»åˆ°é“¾è¡¨å¤´éƒ¨ï¼›</li><li>å½“é“¾è¡¨æ»¡çš„æ—¶å€™ï¼Œå°†é“¾è¡¨å°¾éƒ¨çš„æ•°æ®ä¸¢å¼ƒã€‚</li></ul><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å½“å­˜åœ¨çƒ­ç‚¹æ•°æ®æ—¶ï¼ŒLRUçš„æ•ˆç‡å¾ˆå¥½ï¼Œä½†å¶å‘æ€§çš„ã€å‘¨æœŸæ€§çš„æ‰¹é‡æ“ä½œä¼šå¯¼è‡´ LRU å‘½ä¸­ç‡æ€¥å‰§ä¸‹é™ï¼Œç¼“å­˜æ±¡æŸ“æƒ…å†µæ¯”è¾ƒä¸¥é‡ã€‚è¯¥ç®—æ³•å®ç°ç®€å•ã€‚å‘½ä¸­æ—¶éœ€è¦éå†é“¾è¡¨ï¼Œæ‰¾åˆ°å‘½ä¸­çš„æ•°æ®å—ç´¢å¼•ï¼Œç„¶åéœ€è¦å°†æ•°æ®ç§»åˆ°å¤´éƒ¨ã€‚</p><h1 id="LRU-K"><a href="#LRU-K" class="headerlink" title="LRU-K"></a>LRU-K</h1><h2 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>LRU-K ä¸­çš„ K ä»£è¡¨æœ€è¿‘ä½¿ç”¨çš„æ¬¡æ•°ï¼Œå› æ­¤ LRU å¯ä»¥è®¤ä¸ºæ˜¯ LRU-1ã€‚LRU-K çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è§£å†³ LRU ç®—æ³•â€œç¼“å­˜æ±¡æŸ“â€çš„é—®é¢˜ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†â€œæœ€è¿‘ä½¿ç”¨è¿‡ 1 æ¬¡â€çš„åˆ¤æ–­æ ‡å‡†æ‰©å±•ä¸ºâ€œæœ€è¿‘ä½¿ç”¨è¿‡ K æ¬¡â€ã€‚</p><h2 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç›¸æ¯” LRUï¼ŒLRU-K éœ€è¦å¤šç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç”¨äºè®°å½•æ‰€æœ‰ç¼“å­˜æ•°æ®è¢«è®¿é—®çš„å†å²ã€‚åªæœ‰å½“æ•°æ®çš„è®¿é—®æ¬¡æ•°è¾¾åˆ° K æ¬¡çš„æ—¶å€™ï¼Œæ‰å°†æ•°æ®æ”¾å…¥ç¼“å­˜ã€‚å½“éœ€è¦æ·˜æ±°æ•°æ®æ—¶ï¼ŒLRU-K ä¼šæ·˜æ±°ç¬¬ K æ¬¡è®¿é—®æ—¶é—´è·å½“å‰æ—¶é—´æœ€å¤§çš„æ•°æ®ã€‚è¯¦ç»†å®ç°å¦‚ä¸‹ï¼š<br><img src="/images/202510/15.jpg"></p><ul><li>æ•°æ®ç¬¬ä¸€æ¬¡è¢«è®¿é—®ï¼ŒåŠ å…¥åˆ°è®¿é—®å†å²åˆ—è¡¨ï¼›</li><li>å¦‚æœæ•°æ®åœ¨è®¿é—®å†å²åˆ—è¡¨é‡Œåæ²¡æœ‰è¾¾åˆ° K æ¬¡è®¿é—®ï¼Œåˆ™æŒ‰ç…§ä¸€å®šè§„åˆ™ï¼ˆFIFOï¼ŒLRUï¼‰æ·˜æ±°ï¼›</li><li>å½“è®¿é—®å†å²é˜Ÿåˆ—ä¸­çš„æ•°æ®è®¿é—®æ¬¡æ•°è¾¾åˆ° K æ¬¡åï¼Œå°†æ•°æ®ç´¢å¼•ä»å†å²é˜Ÿåˆ—åˆ é™¤ï¼Œå°†æ•°æ®ç§»åˆ°ç¼“å­˜é˜Ÿåˆ—ä¸­ï¼Œå¹¶ç¼“å­˜æ­¤æ•°æ®ï¼Œç¼“å­˜é˜Ÿåˆ—é‡æ–°æŒ‰ç…§æ—¶é—´æ’åºï¼›</li><li>ç¼“å­˜æ•°æ®é˜Ÿåˆ—ä¸­è¢«å†æ¬¡è®¿é—®åï¼Œé‡æ–°æ’åºï¼›</li><li>éœ€è¦æ·˜æ±°æ•°æ®æ—¶ï¼Œæ·˜æ±°ç¼“å­˜é˜Ÿåˆ—ä¸­æ’åœ¨æœ«å°¾çš„æ•°æ®ï¼Œå³ï¼šæ·˜æ±°â€œå€’æ•°ç¬¬ K æ¬¡è®¿é—®ç¦»ç°åœ¨æœ€ä¹…â€çš„æ•°æ®ã€‚</li></ul><p>LRU-K å…·æœ‰ LRU çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶èƒ½å¤Ÿé¿å… LRU çš„ç¼ºç‚¹ï¼Œå®é™…åº”ç”¨ä¸­ LRU-2 æ˜¯ç»¼åˆå„ç§å› ç´ åæœ€ä¼˜çš„é€‰æ‹©ï¼ŒLRU-3 æˆ–è€…æ›´å¤§çš„ K å€¼å‘½ä¸­ç‡ä¼šé«˜ï¼Œä½†é€‚åº”æ€§å·®ï¼Œéœ€è¦å¤§é‡çš„æ•°æ®è®¿é—®æ‰èƒ½å°†å†å²è®¿é—®è®°å½•æ¸…é™¤æ‰ã€‚</p><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>LRU-K é™ä½äº†â€œç¼“å­˜æ±¡æŸ“â€å¸¦æ¥çš„é—®é¢˜ï¼Œå‘½ä¸­ç‡æ¯” LRU è¦é«˜ã€‚LRU-K ç®—æ³•å¤æ‚åº¦å’Œä»£ä»·æ¯”è¾ƒé«˜ã€‚ç”±äº LRU-K è¿˜éœ€è¦è®°å½•é‚£äº›è¢«è®¿é—®è¿‡ã€ä½†è¿˜æ²¡æœ‰æ”¾å…¥ç¼“å­˜çš„å¯¹è±¡ï¼Œå› æ­¤å†…å­˜æ¶ˆè€—ä¼šæ¯”LRUè¦å¤šï¼›å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œå†…å­˜æ¶ˆè€—ä¼šæ¯”è¾ƒå¯è§‚ã€‚LRU-K éœ€è¦åŸºäºæ—¶é—´è¿›è¡Œæ’åºï¼ˆå¯ä»¥éœ€è¦æ·˜æ±°æ—¶å†æ’åºï¼Œä¹Ÿå¯ä»¥å³æ—¶æ’åºï¼‰ï¼ŒCPUæ¶ˆè€—æ¯” LRU è¦é«˜ã€‚</p><h1 id="Two-queuesï¼ˆ2Qï¼‰"><a href="#Two-queuesï¼ˆ2Qï¼‰" class="headerlink" title="Two queuesï¼ˆ2Qï¼‰"></a>Two queuesï¼ˆ2Qï¼‰</h1><h2 id="åŸç†-2"><a href="#åŸç†-2" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>Two queuesï¼ˆä»¥ä¸‹ä½¿ç”¨ 2Q ä»£æ›¿ï¼‰ç®—æ³•ç±»ä¼¼äº LRU-2ï¼Œä¸åŒç‚¹åœ¨äº 2Q å°† LRU-2 ç®—æ³•ä¸­çš„è®¿é—®å†å²é˜Ÿåˆ—ï¼ˆæ³¨æ„è¿™ä¸æ˜¯ç¼“å­˜æ•°æ®çš„ï¼‰æ”¹ä¸ºä¸€ä¸ª FIFO ç¼“å­˜é˜Ÿåˆ—ï¼Œå³ï¼š2Q ç®—æ³•æœ‰ä¸¤ä¸ªç¼“å­˜é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ FIFO é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ LRU é˜Ÿåˆ—ã€‚</p><h2 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>å½“æ•°æ®ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ï¼Œ2Q ç®—æ³•å°†æ•°æ®ç¼“å­˜åœ¨ FIFO é˜Ÿåˆ—é‡Œé¢ï¼Œå½“æ•°æ®ç¬¬äºŒæ¬¡è¢«è®¿é—®æ—¶ï¼Œåˆ™å°†æ•°æ®ä» FIFO é˜Ÿåˆ—ç§»åˆ° LRU é˜Ÿåˆ—é‡Œé¢ï¼Œä¸¤ä¸ªé˜Ÿåˆ—å„è‡ªæŒ‰ç…§è‡ªå·±çš„æ–¹æ³•æ·˜æ±°æ•°æ®ã€‚è¯¦ç»†å®ç°å¦‚ä¸‹ï¼š<br><img src="/images/202510/16.jpg"></p><ul><li>æ–°è®¿é—®çš„æ•°æ®æ’å…¥åˆ° FIFO é˜Ÿåˆ—ï¼›</li><li>å¦‚æœæ•°æ®åœ¨FIFOé˜Ÿåˆ—ä¸­ä¸€ç›´æ²¡æœ‰è¢«å†æ¬¡è®¿é—®ï¼Œåˆ™æœ€ç»ˆæŒ‰ç…§ FIFO è§„åˆ™æ·˜æ±°ï¼›</li><li>å¦‚æœæ•°æ®åœ¨ FIFO é˜Ÿåˆ—ä¸­è¢«å†æ¬¡è®¿é—®ï¼Œåˆ™å°†æ•°æ®ç§»åˆ° LRU é˜Ÿåˆ—å¤´éƒ¨ï¼›</li><li>å¦‚æœæ•°æ®åœ¨ LRU é˜Ÿåˆ—å†æ¬¡è¢«è®¿é—®ï¼Œåˆ™å°†æ•°æ®ç§»åˆ° LRU é˜Ÿåˆ—å¤´éƒ¨ï¼›</li><li>LRU é˜Ÿåˆ—æ·˜æ±°æœ«å°¾çš„æ•°æ®ã€‚</li></ul><blockquote><p>æ³¨ï¼šä¸Šå›¾ä¸­ FIFO é˜Ÿåˆ—æ¯” LRU é˜Ÿåˆ—çŸ­ï¼Œä½†å¹¶ä¸ä»£è¡¨è¿™æ˜¯ç®—æ³•è¦æ±‚ï¼Œå®é™…åº”ç”¨ä¸­ä¸¤è€…æ¯”ä¾‹æ²¡æœ‰ç¡¬æ€§è§„å®šã€‚</p></blockquote><h2 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>2Q ç®—æ³•çš„å‘½ä¸­ç‡è¦é«˜äº LRUã€‚2Q ç®—æ³•éœ€è¦ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä½†ä¸¤ä¸ªé˜Ÿåˆ—æœ¬èº«éƒ½æ¯”è¾ƒç®€å•ã€‚2Q ç®—æ³•çš„ä»£ä»·æ˜¯ FIFO å’Œ LRU çš„ä»£ä»·ä¹‹å’Œã€‚2Q ç®—æ³•å’Œ LRU-2 ç®—æ³•å‘½ä¸­ç‡ç±»ä¼¼ï¼Œå†…å­˜æ¶ˆè€—ä¹Ÿæ¯”è¾ƒæ¥è¿‘ï¼Œä½†å¯¹äºæœ€åç¼“å­˜çš„æ•°æ®æ¥è¯´ï¼Œ2Q ä¼šå‡å°‘ä¸€æ¬¡ä»åŸå§‹å­˜å‚¨è¯»å–æ•°æ®æˆ–è€…è®¡ç®—æ•°æ®çš„æ“ä½œã€‚</p><h1 id="Multi-Queueï¼ˆMQï¼‰"><a href="#Multi-Queueï¼ˆMQï¼‰" class="headerlink" title="Multi Queueï¼ˆMQï¼‰"></a>Multi Queueï¼ˆMQï¼‰</h1><h2 id="åŸç†-3"><a href="#åŸç†-3" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>MQ ç®—æ³•æ ¹æ®è®¿é—®é¢‘ç‡å°†æ•°æ®åˆ’åˆ†ä¸ºå¤šä¸ªé˜Ÿåˆ—ï¼Œä¸åŒçš„é˜Ÿåˆ—å…·æœ‰ä¸åŒçš„è®¿é—®ä¼˜å…ˆçº§ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä¼˜å…ˆç¼“å­˜è®¿é—®æ¬¡æ•°å¤šçš„æ•°æ®ã€‚</p><h2 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>MQ ç®—æ³•å°†ç¼“å­˜åˆ’åˆ†ä¸ºå¤šä¸ª LRU é˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—å¯¹åº”ä¸åŒçš„è®¿é—®ä¼˜å…ˆçº§ã€‚è®¿é—®ä¼˜å…ˆçº§æ˜¯æ ¹æ®è®¿é—®æ¬¡æ•°è®¡ç®—å‡ºæ¥çš„ï¼Œä¾‹å¦‚ï¼šè¯¦ç»†çš„ç®—æ³•ç»“æ„å›¾å¦‚ä¸‹ï¼ŒQ0ï¼ŒQ1â€¦.Qk ä»£è¡¨ä¸åŒçš„ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ŒQ-history ä»£è¡¨ä»ç¼“å­˜ä¸­æ·˜æ±°æ•°æ®ï¼Œä½†è®°å½•äº†æ•°æ®çš„ç´¢å¼•å’Œå¼•ç”¨æ¬¡æ•°çš„é˜Ÿåˆ—ï¼š<br><img src="/images/202510/17.jpg"></p><p>å¦‚ä¸Šå›¾ï¼Œç®—æ³•è¯¦ç»†æè¿°å¦‚ä¸‹ï¼š</p><ul><li>æ–°æ’å…¥çš„æ•°æ®æ”¾å…¥ Q0ï¼›</li><li>æ¯ä¸ªé˜Ÿåˆ—æŒ‰ç…§ LRU ç®¡ç†æ•°æ®ï¼›</li><li>å½“æ•°æ®çš„è®¿é—®æ¬¡æ•°è¾¾åˆ°ä¸€å®šæ¬¡æ•°ï¼Œéœ€è¦æå‡ä¼˜å…ˆçº§æ—¶ï¼Œå°†æ•°æ®ä»å½“å‰é˜Ÿåˆ—åˆ é™¤ï¼ŒåŠ å…¥åˆ°é«˜ä¸€çº§é˜Ÿåˆ—çš„å¤´éƒ¨ï¼›</li><li>ä¸ºäº†é˜²æ­¢é«˜ä¼˜å…ˆçº§æ•°æ®æ°¸è¿œä¸è¢«æ·˜æ±°ï¼Œå½“æ•°æ®åœ¨æŒ‡å®šçš„æ—¶é—´é‡Œè®¿é—®æ²¡æœ‰è¢«è®¿é—®æ—¶ï¼Œéœ€è¦é™ä½ä¼˜å…ˆçº§ï¼Œå°†æ•°æ®ä»å½“å‰é˜Ÿåˆ—åˆ é™¤ï¼ŒåŠ å…¥åˆ°ä½ä¸€çº§çš„é˜Ÿåˆ—å¤´éƒ¨ï¼›</li><li>éœ€è¦æ·˜æ±°æ•°æ®æ—¶ï¼Œä»æœ€ä½ä¸€çº§é˜Ÿåˆ—å¼€å§‹æŒ‰ç…§ LRU æ·˜æ±°ï¼›æ¯ä¸ªé˜Ÿåˆ—æ·˜æ±°æ•°æ®æ—¶ï¼Œå°†æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤ï¼Œå°†æ•°æ®ç´¢å¼•åŠ å…¥ Q-history å¤´éƒ¨ï¼›</li><li>å¦‚æœæ•°æ®åœ¨ Q-history ä¸­è¢«é‡æ–°è®¿é—®ï¼Œåˆ™é‡æ–°è®¡ç®—å…¶ä¼˜å…ˆçº§ï¼Œç§»åˆ°ç›®æ ‡é˜Ÿåˆ—çš„å¤´éƒ¨ï¼›</li><li>Q-history æŒ‰ç…§ LRU æ·˜æ±°æ•°æ®çš„ç´¢å¼•ã€‚</li></ul><h2 id="åˆ†æ-3"><a href="#åˆ†æ-3" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>MQ é™ä½äº†â€œç¼“å­˜æ±¡æŸ“â€å¸¦æ¥çš„é—®é¢˜ï¼Œå‘½ä¸­ç‡æ¯” LRU è¦é«˜ã€‚MQ éœ€è¦ç»´æŠ¤å¤šä¸ªé˜Ÿåˆ—ï¼Œä¸”éœ€è¦ç»´æŠ¤æ¯ä¸ªæ•°æ®çš„è®¿é—®æ—¶é—´ï¼Œå¤æ‚åº¦æ¯” LRU é«˜ã€‚MQ éœ€è¦è®°å½•æ¯ä¸ªæ•°æ®çš„è®¿é—®æ—¶é—´ï¼Œéœ€è¦å®šæ—¶æ‰«ææ‰€æœ‰é˜Ÿåˆ—ï¼Œä»£ä»·æ¯” LRU è¦é«˜ã€‚</p><p>æ³¨ï¼šè™½ç„¶ MQ çš„é˜Ÿåˆ—çœ‹èµ·æ¥æ•°é‡æ¯”è¾ƒå¤šï¼Œä½†ç”±äºæ‰€æœ‰é˜Ÿåˆ—ä¹‹å’Œå—é™äºç¼“å­˜å®¹é‡çš„å¤§å°ï¼Œå› æ­¤è¿™é‡Œå¤šä¸ªé˜Ÿåˆ—é•¿åº¦ä¹‹å’Œè·Ÿä¸€ä¸ª LRU é˜Ÿåˆ—æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤é˜Ÿåˆ—æ‰«ææ€§èƒ½ä¹Ÿç›¸è¿‘ã€‚</p><h2 id="LRUç±»ç®—æ³•å¯¹æ¯”"><a href="#LRUç±»ç®—æ³•å¯¹æ¯”" class="headerlink" title="LRUç±»ç®—æ³•å¯¹æ¯”"></a>LRUç±»ç®—æ³•å¯¹æ¯”</h2><p>ç”±äºä¸åŒçš„è®¿é—®æ¨¡å‹å¯¼è‡´å‘½ä¸­ç‡å˜åŒ–è¾ƒå¤§ï¼Œæ­¤å¤„å¯¹æ¯”ä»…åŸºäºç†è®ºå®šæ€§åˆ†æï¼Œä¸åšå®šé‡åˆ†æã€‚</p><ul><li>å‘½ä¸­ç‡ï¼šLRU-2 &gt; MQ(2) &gt; 2Q &gt; LRU</li><li>å¤æ‚åº¦ï¼šLRU-2 &gt; MQ(2) &gt; 2Q &gt; LRU</li><li>ä»£ä»·ï¼šLRU-2 &gt; MQ(2) &gt; 2Q &gt; LRU</li></ul><p>å®é™…åº”ç”¨ä¸­éœ€è¦æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚å’Œå¯¹æ•°æ®çš„è®¿é—®æƒ…å†µè¿›è¡Œé€‰æ‹©ï¼Œå¹¶ä¸æ˜¯å‘½ä¸­ç‡è¶Šé«˜è¶Šå¥½ã€‚ä¾‹å¦‚ï¼šè™½ç„¶LRUçœ‹èµ·æ¥å‘½ä¸­ç‡ä¼šä½ä¸€äº›ï¼Œä¸”å­˜åœ¨â€ç¼“å­˜æ±¡æŸ“â€œçš„é—®é¢˜ï¼Œä½†ç”±äºå…¶ç®€å•å’Œä»£ä»·å°ï¼Œå®é™…åº”ç”¨ä¸­åè€Œåº”ç”¨æ›´å¤šã€‚</p><h1 id="Java-LinkedHashMap-å®ç°"><a href="#Java-LinkedHashMap-å®ç°" class="headerlink" title="Java LinkedHashMap å®ç°"></a>Java LinkedHashMap å®ç°</h1><p>Java ä¸­æœ€ç®€å•çš„ LRU ç®—æ³•å®ç°ï¼Œå°±æ˜¯åˆ©ç”¨ jdk çš„ LinkedHashMapï¼Œè¦†å†™å…¶ä¸­çš„ removeEldestEntry(Map.Entry) æ–¹æ³•å³å¯ã€‚å¦‚æœä½ å»çœ‹ LinkedHashMap çš„æºç å¯çŸ¥ï¼ŒLRU ç®—æ³•æ˜¯é€šè¿‡åŒå‘é“¾è¡¨æ¥å®ç°ï¼Œå½“æŸä¸ªä½ç½®è¢«å‘½ä¸­ï¼Œé€šè¿‡è°ƒæ•´é“¾è¡¨çš„æŒ‡å‘å°†è¯¥ä½ç½®è°ƒæ•´åˆ°å¤´ä½ç½®ï¼Œæ–°åŠ å…¥çš„å†…å®¹ç›´æ¥æ”¾åœ¨é“¾è¡¨å¤´ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œæœ€è¿‘è¢«å‘½ä¸­çš„å†…å®¹å°±å‘é“¾è¡¨å¤´ç§»åŠ¨ï¼Œéœ€è¦æ›¿æ¢æ—¶ï¼Œé“¾è¡¨æœ€åçš„ä½ç½®å°±æ˜¯æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ä½ç½®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;  </span><br><span class="line"><span class="keyword">import</span> java.util.Collection;  </span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;  </span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;  </span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;  </span><br><span class="line"><span class="keyword">import</span> java.util.Map;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç±»è¯´æ˜ï¼šåˆ©ç”¨ LinkedHashMap å®ç°ç®€å•çš„ç¼“å­˜ï¼Œ å¿…é¡»å®ç° removeEldestEntry æ–¹æ³•ï¼Œå…·ä½“å‚è§ JDK æ–‡æ¡£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;K&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;V&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LRULinkedHashMap</span>&lt;K, V&gt; <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;K, V&gt; &#123;  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> maxCapacity;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">LRULinkedHashMap</span><span class="params">(<span class="type">int</span> maxCapacity)</span> &#123;  </span><br><span class="line">    <span class="built_in">super</span>(maxCapacity, DEFAULT_LOAD_FACTOR, <span class="literal">true</span>);  </span><br><span class="line">    <span class="built_in">this</span>.maxCapacity = maxCapacity;  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">removeEldestEntry</span><span class="params">(java.util.Map.Entry&lt;K, V&gt; eldest)</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> size() &gt; maxCapacity;  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(Object key)</span> &#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">      lock.lock();  </span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">super</span>.containsKey(key);  </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">      lock.unlock();  </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(Object key)</span> &#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">      lock.lock();  </span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">super</span>.get(key);  </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">      lock.unlock();  </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">      lock.lock();  </span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">super</span>.put(key, value);  </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">      lock.unlock();  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">      lock.lock();  </span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">super</span>.size();  </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">      lock.unlock();  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">      lock.lock();  </span><br><span class="line">      <span class="built_in">super</span>.clear();  </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">      lock.unlock();  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Collection&lt;Map.Entry&lt;K, V&gt;&gt; getAll() &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">      lock.lock();  </span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Map.Entry&lt;K, V&gt;&gt;(<span class="built_in">super</span>.entrySet());  </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">      lock.unlock();  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åŸºäºåŒé“¾è¡¨çš„-LRU-å®ç°"><a href="#åŸºäºåŒé“¾è¡¨çš„-LRU-å®ç°" class="headerlink" title="åŸºäºåŒé“¾è¡¨çš„ LRU å®ç°"></a>åŸºäºåŒé“¾è¡¨çš„ LRU å®ç°</h1><p>ä¼ ç»Ÿæ„ä¹‰çš„ LRU ç®—æ³•æ˜¯ä¸ºæ¯ä¸€ä¸ª Cache å¯¹è±¡è®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯æ¬¡ Cache å‘½ä¸­åˆ™ç»™è®¡æ•°å™¨ +1ï¼Œè€Œ Cache ç”¨å®Œï¼Œéœ€è¦æ·˜æ±°æ—§å†…å®¹ï¼Œæ”¾ç½®æ–°å†…å®¹æ—¶ï¼Œå°±æŸ¥çœ‹æ‰€æœ‰çš„è®¡æ•°å™¨ï¼Œå¹¶å°†æœ€å°‘ä½¿ç”¨çš„å†…å®¹æ›¿æ¢æ‰ã€‚</p><p>å®ƒçš„å¼Šç«¯å¾ˆæ˜æ˜¾ï¼Œå¦‚æœ Cache çš„æ•°é‡å°‘ï¼Œé—®é¢˜ä¸ä¼šå¾ˆå¤§ï¼Œä½†æ˜¯å¦‚æœ Cache çš„ç©ºé—´è¿‡å¤§ï¼Œè¾¾åˆ° 10W æˆ–è€… 100W ä»¥ä¸Šï¼Œä¸€æ—¦éœ€è¦æ·˜æ±°ï¼Œåˆ™éœ€è¦éå†æ‰€æœ‰è®¡ç®—å™¨ï¼Œå…¶æ€§èƒ½ä¸èµ„æºæ¶ˆè€—æ˜¯å·¨å¤§çš„ã€‚æ•ˆç‡ä¹Ÿå°±éå¸¸çš„æ…¢äº†ã€‚</p><p>å®ƒçš„åŸç†ï¼šå°† Cache çš„æ‰€æœ‰ä½ç½®éƒ½ç”¨åŒè¿è¡¨è¿æ¥èµ·æ¥ï¼Œå½“ä¸€ä¸ªä½ç½®è¢«å‘½ä¸­ä¹‹åï¼Œå°±å°†é€šè¿‡è°ƒæ•´é“¾è¡¨çš„æŒ‡å‘ï¼Œå°†è¯¥ä½ç½®è°ƒæ•´åˆ°é“¾è¡¨å¤´çš„ä½ç½®ï¼Œæ–°åŠ å…¥çš„ Cache ç›´æ¥åŠ åˆ°é“¾è¡¨å¤´ä¸­ã€‚</p><p>è¿™æ ·ï¼Œåœ¨å¤šæ¬¡è¿›è¡Œ Cache æ“ä½œåï¼Œæœ€è¿‘è¢«å‘½ä¸­çš„ï¼Œå°±ä¼šè¢«å‘é“¾è¡¨å¤´æ–¹å‘ç§»åŠ¨ï¼Œè€Œæ²¡æœ‰å‘½ä¸­çš„ï¼Œè€Œæƒ³é“¾è¡¨åé¢ç§»åŠ¨ï¼Œé“¾è¡¨å°¾åˆ™è¡¨ç¤ºæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Cacheã€‚</p><p>å½“éœ€è¦æ›¿æ¢å†…å®¹æ—¶å€™ï¼Œé“¾è¡¨çš„æœ€åä½ç½®å°±æ˜¯æœ€å°‘è¢«å‘½ä¸­çš„ä½ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦æ·˜æ±°é“¾è¡¨æœ€åçš„éƒ¨åˆ†å³å¯ã€‚</p><p>ä¸Šé¢è¯´äº†è¿™ä¹ˆå¤šçš„ç†è®ºï¼Œ ä¸‹é¢ç”¨ä»£ç æ¥å®ç°ä¸€ä¸ª LRU ç­–ç•¥çš„ç¼“å­˜ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡æ¥è¡¨ç¤º Cacheï¼Œå¹¶å®ç°åŒé“¾è¡¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">CacheNode</span> &#123;</span><br><span class="line">    <span class="comment">// add your code here</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> cacheSize;<span class="comment">// ç¼“å­˜å¤§å°</span></span><br><span class="line">    <span class="keyword">private</span> Hashtable nodes;<span class="comment">// ç¼“å­˜å®¹å™¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentSize;<span class="comment">// å½“å‰ç¼“å­˜å¯¹è±¡æ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> CacheNode first;<span class="comment">// (å®ç°åŒé“¾è¡¨)é“¾è¡¨å¤´</span></span><br><span class="line">    <span class="keyword">private</span> CacheNode last;<span class="comment">// (å®ç°åŒé“¾è¡¨)é“¾è¡¨å°¾</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ç»™å‡ºå®Œæ•´çš„å®ç°ï¼Œè¿™ä¸ªç±»ä¹Ÿè¢« Tomcat æ‰€ä½¿ç”¨ï¼ˆ org.apache.tomcat.util.collections.LRUCacheï¼‰ï¼Œä½†æ˜¯åœ¨ tomcat6.x ç‰ˆæœ¬ä¸­ï¼Œå·²ç»è¢«å¼ƒç”¨ï¼Œä½¿ç”¨å¦å¤–å…¶ä»–çš„ç¼“å­˜ç±»æ¥æ›¿ä»£å®ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">CacheNode</span> &#123;</span><br><span class="line">        CacheNode prev;<span class="comment">// å‰ä¸€èŠ‚ç‚¹</span></span><br><span class="line">        CacheNode next;<span class="comment">// åä¸€èŠ‚ç‚¹</span></span><br><span class="line">        Object value;<span class="comment">// å€¼</span></span><br><span class="line">        Object key;<span class="comment">// é”®</span></span><br><span class="line"></span><br><span class="line">        CacheNode() &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        currentSize = <span class="number">0</span>;</span><br><span class="line">        cacheSize = i;</span><br><span class="line">        nodes = <span class="keyword">new</span> <span class="title class_">Hashtable</span>(i);<span class="comment">// ç¼“å­˜å®¹å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç¼“å­˜ä¸­å¯¹è±¡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">        <span class="type">CacheNode</span> <span class="variable">node</span> <span class="operator">=</span> (CacheNode) nodes.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            moveToHead(node);</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(Object key, Object value)</span> &#123;</span><br><span class="line">        <span class="type">CacheNode</span> <span class="variable">node</span> <span class="operator">=</span> (CacheNode) nodes.get(key);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// ç¼“å­˜å®¹å™¨æ˜¯å¦å·²ç»è¶…è¿‡å¤§å°.</span></span><br><span class="line">            <span class="keyword">if</span> (currentSize &gt;= cacheSize) &#123;</span><br><span class="line">                <span class="keyword">if</span> (last != <span class="literal">null</span>)<span class="comment">// å°†æœ€å°‘ä½¿ç”¨çš„åˆ é™¤</span></span><br><span class="line">                    nodes.remove(last.key);</span><br><span class="line">                removeLast();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                currentSize++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            node = <span class="keyword">new</span> <span class="title class_">CacheNode</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        node.value = value;</span><br><span class="line">        node.key = key;</span><br><span class="line">        <span class="comment">// å°†æœ€æ–°ä½¿ç”¨çš„èŠ‚ç‚¹æ”¾åˆ°é“¾è¡¨å¤´ï¼Œè¡¨ç¤ºæœ€æ–°ä½¿ç”¨çš„.</span></span><br><span class="line">        moveToHead(node);</span><br><span class="line">        nodes.put(key, node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†ç¼“å­˜åˆ é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">remove</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">        <span class="type">CacheNode</span> <span class="variable">node</span> <span class="operator">=</span> (CacheNode) nodes.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.prev != <span class="literal">null</span>) &#123;</span><br><span class="line">                node.prev.next = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.next != <span class="literal">null</span>) &#123;</span><br><span class="line">                node.next.prev = node.prev;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (last == node)</span><br><span class="line">                last = node.prev;</span><br><span class="line">            <span class="keyword">if</span> (first == node)</span><br><span class="line">                first = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        first = <span class="literal">null</span>;</span><br><span class="line">     last = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤é“¾è¡¨å°¾éƒ¨èŠ‚ç‚¹ è¡¨ç¤º åˆ é™¤æœ€å°‘ä½¿ç”¨çš„ç¼“å­˜å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// é“¾è¡¨å°¾ä¸ä¸ºç©º,åˆ™å°†é“¾è¡¨å°¾æŒ‡å‘null. åˆ é™¤è¿è¡¨å°¾ï¼ˆåˆ é™¤æœ€å°‘ä½¿ç”¨çš„ç¼“å­˜å¯¹è±¡ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (last != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (last.prev != <span class="literal">null</span>)</span><br><span class="line">                last.prev.next = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                first = <span class="literal">null</span>;</span><br><span class="line">            last = last.prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»åŠ¨åˆ°é“¾è¡¨å¤´ï¼Œè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹æ˜¯æœ€æ–°ä½¿ç”¨è¿‡çš„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">moveToHead</span><span class="params">(CacheNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == first)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (node.prev != <span class="literal">null</span>)</span><br><span class="line">            node.prev.next = node.next;</span><br><span class="line">        <span class="keyword">if</span> (node.next != <span class="literal">null</span>)</span><br><span class="line">            node.next.prev = node.prev;</span><br><span class="line">        <span class="keyword">if</span> (last == node)</span><br><span class="line">            last = node.prev;</span><br><span class="line">        <span class="keyword">if</span> (first != <span class="literal">null</span>) &#123;</span><br><span class="line">            node.next = first;</span><br><span class="line">            first.prev = node;</span><br><span class="line">        &#125;</span><br><span class="line">        first = node;</span><br><span class="line">        node.prev = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (last == <span class="literal">null</span>)</span><br><span class="line">            last = first;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> cacheSize;</span><br><span class="line">    <span class="keyword">private</span> Hashtable nodes;<span class="comment">// ç¼“å­˜å®¹å™¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentSize;</span><br><span class="line">    <span class="keyword">private</span> CacheNode first;<span class="comment">// é“¾è¡¨å¤´</span></span><br><span class="line">    <span class="keyword">private</span> CacheNode last;<span class="comment">// é“¾è¡¨å°¾</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å¼€å‘ </category>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Socket.IO èŠå¤©åº”ç”¨å®ä¾‹</title>
      <link href="/2025/10/17/Socket-IO-%E8%81%8A%E5%A4%A9%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B/"/>
      <url>/2025/10/17/Socket-IO-%E8%81%8A%E5%A4%A9%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ç¿»è¯‘è‡ª <a href="http://socket.io/">http://Socket.IO</a> å®˜ç½‘çš„å…¥é—¨å®ä¾‹ï¼š<a href="http://socket.io/get-started/chat/">http://socket.io/get-started/chat/</a>ã€‚</p><p>åœ¨æœ¬ç¯‡æŒ‡å¯¼ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„èŠå¤©åº”ç”¨ã€‚è¿™ä¸ªåº”ç”¨å‡ ä¹ä¸è¦æ±‚äº‹å…ˆå…·æœ‰ Node.JS æˆ– <a href="http://socket.io/">http://Socket.IO</a> çš„åŸºç¡€çŸ¥è¯†ï¼Œå› æ­¤å¯¹ä»»æ„çŸ¥è¯†æ°´å¹³çš„ç”¨æˆ·å®ƒéƒ½æ˜¯é€‚åˆçš„ã€‚</p><h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>ä½¿ç”¨æµè¡Œçš„ Web åº”ç”¨å·¥å…·æ ˆï¼ˆå¦‚ LAMPï¼ˆPHPï¼‰ï¼‰å†™ä¸€ä¸ªèŠå¤©åº”ç”¨é€šå¸¸æ˜¯éå¸¸å›°éš¾çš„ã€‚è¿™æ¶‰åŠåˆ°ä»æœåŠ¡å™¨æ‹‰å–å˜åŒ–çš„ä¿¡æ¯ï¼Œä¿æŒæ—¶é—´æˆ³çš„è·Ÿè¸ªï¼Œå¹¶ä¸”è¿™æ¯”åº”è¯¥éœ€è¦çš„é€Ÿåº¦æ…¢å¾ˆå¤šã€‚</p><p>é€šå¸¸æ˜¯å¤§å¤šæ•°å®æ—¶èŠå¤©ç³»ç»Ÿéƒ½æ˜¯å›´ç»• Sockets è®¾è®¡è§£å†³æ–¹æ¡ˆï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æä¾›ä¸€ä¸ªåŒå‘é€šä¿¡é€šé“ã€‚</p><p>è¿™æ„å‘³ç€æœåŠ¡ç«¯å¯ä»¥æ¨é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ã€‚å…¶æ€æƒ³æ˜¯ï¼Œæ¯å½“ä½ å†™äº†ä¸€ä¸ªèŠå¤©æ¶ˆæ¯ï¼ŒæœåŠ¡ç«¯å°†è·å–å®ƒï¼Œå¹¶æŠŠå®ƒæ¨é€ç»™æ‰€æœ‰å…¶ä»–è¿æ¥çš„å®¢æˆ·ç«¯ã€‚</p><h1 id="Web-æ¡†æ¶"><a href="#Web-æ¡†æ¶" class="headerlink" title="Web æ¡†æ¶"></a>Web æ¡†æ¶</h1><p>ç¬¬ä¸€ä¸ªç›®æ ‡æ˜¯ï¼Œè®¾ç½®ä¸€ä¸ªæä¾›è¡¨å•å’Œæ¶ˆæ¯åˆ—è¡¨çš„ç®€å• HTML ç½‘é¡µã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Node.JS Web æ¡†æ¶ express æ¥è¾¾åˆ°ç›®çš„ã€‚ç¡®ä¿å·²ç»å®‰è£…äº† Node.JSã€‚</p><p>é¦–å…ˆï¼Œåˆ›å»ºæ¸…å•æ–‡ä»¶ package.json æ¥æè¿°æˆ‘ä»¬çš„é¡¹ç›®ã€‚å»ºè®®ä½ å°†è¿™ä¸ªæ–‡ä»¶æ”¾åœ¨ä¸“é—¨çš„ä¸€ä¸ªç©ºç›®å½•ä¸‹ï¼ˆå¦‚ï¼Œchat-exampleï¼‰ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;socket-chat-example&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my first socket.io app&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œä¸ºäº†æ–¹ä¾¿è¿ç§»éœ€è¦çš„ä¾èµ–ï¼Œæˆ‘ä»¬ä½¿ç”¨ npm install â€“save:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save express@4.10.2</span><br></pre></td></tr></table></figure><p>è¿™æ · Express å°±å®‰è£…å¥½äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åˆ›å»ºåº”ç”¨çš„ index.js æ–‡ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)();</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).<span class="title class_">Server</span>(app);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;&lt;h1&gt;Hello world&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;listening on *:3000&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li>Express åˆå§‹åŒ– app ä½œä¸ºåŠŸèƒ½å¤„ç†å™¨ï¼Œä½ å¯ä»¥å°†å®ƒä¼ ç»™ HTTP æœåŠ¡å™¨ï¼ˆå¦‚ç¬¬ 2 è¡Œçœ‹åˆ°çš„ï¼‰ã€‚</li><li>å®šä¹‰ä¸€ä¸ªè·¯ç”±å¤„ç†å™¨ &#x2F; ï¼Œå½“æˆ‘ä»¬è®¿é—®ç½‘ç«™ä¸»é¡µæ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªå¤„ç†å™¨ã€‚</li><li>HTTP æœåŠ¡å™¨ç›‘å¬ç«¯å£ 3000ã€‚</li></ul><p>æ‰§è¡Œå‘½ä»¤ node index.js å°†çœ‹åˆ°ä¸‹é¢çš„ä¿¡æ¯ï¼š<br><img src="/images/202510/06.jpg"></p><p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <a href="http://localhost:3000/">http://localhost:3000</a> è®¿é—®æˆ‘ä»¬çš„ Web åº”ç”¨ï¼š<br><img src="/images/202510/07.jpg"></p><h1 id="HTML-æœåŠ¡"><a href="#HTML-æœåŠ¡" class="headerlink" title="HTML æœåŠ¡"></a>HTML æœåŠ¡</h1><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åœ¨ index.js ä¸­è°ƒç”¨ res.sendï¼Œå¹¶ä¸”ä¼ ç»™å®ƒä¸€ä¸ª HTML å­—ç¬¦ä¸²ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ•´ä¸ªåº”ç”¨çš„ HTML éƒ½æ”¾åˆ°è¿™é‡Œï¼Œä»£ç ä¼šéå¸¸æ··ä¹±ã€‚åº”è¯¥æ˜¯ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª index.html æ–‡ä»¶å¹¶ç”¨å®ƒæä¾›æœåŠ¡ã€‚</p><p>è®©æˆ‘ä»¬ä½¿ç”¨ sendFile æ–¹æ³•é‡æ„è·¯ç”±å¤„ç†å™¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">  res.<span class="title function_">sendFile</span>(__dirname + <span class="string">&#x27;/index.html&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åˆ›å»º index.html æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Socket.IO chat<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      * &#123; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; <span class="attribute">box-sizing</span>: border-box; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">body</span> &#123; <span class="attribute">font</span>: <span class="number">13px</span> Helvetica, Arial; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">form</span> &#123; <span class="attribute">background</span>: <span class="number">#000</span>; <span class="attribute">padding</span>: <span class="number">3px</span>; <span class="attribute">position</span>: fixed; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">width</span>: <span class="number">100%</span>; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">form</span> <span class="selector-tag">input</span> &#123; <span class="attribute">border</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">10px</span>; <span class="attribute">width</span>: <span class="number">90%</span>; <span class="attribute">margin-right</span>: .<span class="number">5%</span>; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">form</span> <span class="selector-tag">button</span> &#123; <span class="attribute">width</span>: <span class="number">9%</span>; <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">130</span>, <span class="number">224</span>, <span class="number">255</span>); <span class="attribute">border</span>: none; <span class="attribute">padding</span>: <span class="number">10px</span>; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#messages</span> &#123; <span class="attribute">list-style-type</span>: none; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#messages</span> <span class="selector-tag">li</span> &#123; <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#messages</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(odd) &#123; <span class="attribute">background</span>: <span class="number">#eee</span>; &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;messages&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;m&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>Send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‡å¯è¿›ç¨‹ï¼ˆè¾“å…¥ Control+C å¹¶å†æ¬¡è¿è¡Œ node indexï¼‰ï¼Œå¹¶åˆ·æ–°ï¼Œé¡µé¢å±•ç¤ºå¦‚ä¸‹ï¼š<br><img src="/images/202510/09.jpg"></p><h1 id="æ•´åˆ-Socket-IO"><a href="#æ•´åˆ-Socket-IO" class="headerlink" title="æ•´åˆ Socket.IO"></a>æ•´åˆ <a href="http://socket.io/">Socket.IO</a></h1><p><a href="http://socket.io/">Socket.IO</a> ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>æ•´åˆï¼ˆæˆ–æŒ‚è½½ï¼‰äº† Node.JS HTTP æœåŠ¡å™¨çš„æœåŠ¡å™¨ï¼š<a href="http://socket.io/">Socket.IO</a></li><li>åœ¨æµè§ˆå™¨ç«¯åŠ è½½çš„å®¢æˆ·ç«¯åº“ï¼šsocket.io-client</li></ul><p>å¼€å‘æ—¶ï¼Œ<a href="http://socket.io/">Socket.IO</a> è‡ªåŠ¨ä¸ºæˆ‘ä»¬æä¾›è¿™ä¸ªå®¢æˆ·ç«¯ï¼Œåƒæˆ‘ä»¬å°†çœ‹åˆ°çš„ï¼Œå› æ­¤ç°åœ¨æˆ‘ä»¬ä»…éœ€è¦å®‰è£…ä¸€ä¸ªæ¨¡å—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save socket.io</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†å®‰è£…è¿™ä¸ªæ¨¡å—å¹¶æ·»åŠ ä¾èµ–åˆ° package.jsonã€‚ç°åœ¨ä¿®æ”¹ index.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)();</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).<span class="title class_">Server</span>(app);</span><br><span class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>)(http);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">  res.<span class="title function_">sendfile</span>(<span class="string">&#x27;index.html&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">io.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="keyword">function</span>(<span class="params">socket</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a user connected&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;listening on *:3000&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œé€šè¿‡ä¼ é€’ httpï¼ˆHTTP æœåŠ¡å™¨ï¼‰å¯¹è±¡åˆå§‹åŒ–äº†ä¸€ä¸ª <a href="http://socket.io/">Socket.IO</a> çš„æ–°å®ä¾‹ã€‚ç„¶åä¸ºåˆ°æ¥çš„ socket ç›‘å¬ connection äº‹ä»¶ï¼Œå¹¶ä¸”è¾“å…¥æ—¥å¿—åˆ°æ§åˆ¶å°ã€‚</p><p>ç°åœ¨ï¼Œåœ¨ index.html ä¸­ å‰æ·»åŠ ä¸‹é¢çš„ç‰‡æ®µï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/socket.io/socket.io.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> socket = <span class="title function_">io</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™å°†åŠ è½½ socket.io-clientï¼Œåˆ›å»ºå…¨å±€å˜é‡ ioï¼Œå¹¶ä¸”è¿æ¥ã€‚</p><p>æ³¨æ„ï¼Œå½“è°ƒç”¨ io() çš„æ—¶å€™æ²¡æœ‰åˆ¶å®šä»»ä½• URLï¼Œå› ä¸ºå®ƒé»˜è®¤å°è¯•è¿æ¥æä¾›é¡µé¢æœåŠ¡çš„ä¸»æœºã€‚</p><p>ç°åœ¨é‡æ–°åŠ è½½æœåŠ¡å™¨å’Œç½‘ç«™å°†ä¼šçœ‹åˆ°æ§åˆ¶å°æ‰“å°â€œa user connectedâ€ã€‚å°è¯•æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µï¼Œå°†çœ‹åˆ°å¤šæ¡æ¶ˆæ¯ï¼š<br><img src="/images/202510/10.jpg"></p><p>æ¯ä¸ª socket ä¹Ÿç›‘å¬ä¸€ä¸ªç‰¹æ®Šçš„ disconnect äº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">io.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="keyword">function</span>(<span class="params">socket</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a user connected&#x27;</span>);</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&#x27;disconnect&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;user disconnected&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦‚æœå¤šæ¬¡åˆ·æ–°ä¸€ä¸ªæ ‡ç­¾é¡µå°†çœ‹åˆ°ä¸‹é¢çš„åŠ¨ä½œï¼š<br><img src="/images/202510/11.jpg"></p><h1 id="å‘é€äº‹ä»¶"><a href="#å‘é€äº‹ä»¶" class="headerlink" title="å‘é€äº‹ä»¶"></a>å‘é€äº‹ä»¶</h1><p>Socket.IO èƒŒåä¸»è¦çš„æ€æƒ³æ˜¯ä½ å¯ä»¥å‘é€å’Œæ¥æ”¶æƒ³è¦çš„ä»»ä½•äº‹ä»¶ï¼Œæºå¸¦ä½ æƒ³è¦çš„ä»»ä½•æ•°æ®ã€‚ä»»ä½•å¯ä»¥ç¼–ç ä¸º JSON çš„å¯¹è±¡éƒ½å¯ä»¥åšåˆ°ï¼Œå¹¶ä¸”ä¹Ÿæ”¯æŒäºŒè¿›åˆ¶æ•°æ®ã€‚</p><p>è®©æˆ‘ä»¬æ¥å®ç°å½“ä¸€ä¸ªç”¨æˆ·è¾“å…¥ä¸€æ¡æ¶ˆæ¯æ—¶ï¼ŒæœåŠ¡å™¨ä½œä¸ºä¸€ä¸ª chat message äº‹ä»¶è·å–å®ƒã€‚åœ¨ index.html ä¸­çš„è„šæœ¬ç°åœ¨çœ‹èµ·æ¥å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/socket.io/socket.io.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://code.jquery.com/jquery-1.11.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> socket = <span class="title function_">io</span>();</span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&#x27;form&#x27;</span>).<span class="title function_">submit</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    socket.<span class="title function_">emit</span>(<span class="string">&#x27;chat message&#x27;</span>, $(<span class="string">&#x27;#m&#x27;</span>).<span class="title function_">val</span>());</span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;#m&#x27;</span>).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ index.js ä¸­æˆ‘ä»¬æ‰“å°å‡º chat message äº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">io.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="keyword">function</span>(<span class="params">socket</span>)&#123;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&#x27;chat message&#x27;</span>, <span class="keyword">function</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;message: &#x27;</span> + msg);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç»“æœåƒä¸‹é¢çš„è§†é¢‘å±•ç¤ºçš„ï¼š</p><video src="/images/202510/12.mp4" preload="metadata" controlslist="nodownload" controls playsinline poster=""></video><h1 id="å¹¿æ’­"><a href="#å¹¿æ’­" class="headerlink" title="å¹¿æ’­"></a>å¹¿æ’­</h1><p>ä¸‹ä¸€ä¸ªç›®æ ‡æ˜¯æˆ‘ä»¬ä»æœåŠ¡å™¨å‘é€äº‹ä»¶ç»™å…¶ä»–ç”¨æˆ·ã€‚</p><p>ä¸ºäº†å‘é€äº‹ä»¶ç»™æ‰€æœ‰äººï¼Œ<a href="http://socket.io/">Socket.IO</a> ç»™æˆ‘ä»¬æä¾›äº† io.emitï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">io.<span class="title function_">emit</span>(<span class="string">&#x27;some event&#x27;</span>, &#123; <span class="attr">for</span>: <span class="string">&#x27;everyone&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³å‘é€ä¸€ä¸ªç¡®å®š socket çš„æ¶ˆæ¯ç»™æ‰€æœ‰äººï¼Œæˆ‘ä»¬æœ‰ broadcast æ ‡è¯†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">io.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="keyword">function</span>(<span class="params">socket</span>)&#123;</span><br><span class="line">  socket.<span class="property">broadcast</span>.<span class="title function_">emit</span>(<span class="string">&#x27;hi&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†ç®€å•ï¼Œä¸ºäº†ç®€å•æˆ‘ä»¬å‘é€æ¶ˆæ¯ç»™æ‰€æœ‰äººï¼ŒåŒ…æ‹¬å‘é€è€…ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">io.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="keyword">function</span>(<span class="params">socket</span>)&#123;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&#x27;chat message&#x27;</span>, <span class="keyword">function</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">    io.<span class="title function_">emit</span>(<span class="string">&#x27;chat message&#x27;</span>, msg);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨å®¢æˆ·ç«¯ï¼Œå½“æˆ‘ä»¬æ•è·åˆ°ä¸€ä¸ª chat message äº‹ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒåŒ…å«åˆ°é¡µé¢ä¸­ã€‚å®¢æˆ·ç«¯å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">var</span> socket = <span class="title function_">io</span>();</span><br><span class="line">  $(<span class="string">&#x27;form&#x27;</span>).<span class="title function_">submit</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    socket.<span class="title function_">emit</span>(<span class="string">&#x27;chat message&#x27;</span>, $(<span class="string">&#x27;#m&#x27;</span>).<span class="title function_">val</span>());</span><br><span class="line">    $(<span class="string">&#x27;#m&#x27;</span>).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&#x27;chat message&#x27;</span>, <span class="keyword">function</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">    $(<span class="string">&#x27;#messages&#x27;</span>).<span class="title function_">append</span>($(<span class="string">&#x27;&lt;li&gt;&#x27;</span>).<span class="title function_">text</span>(msg));</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„èŠå¤©åº”ç”¨å°±å®Œæˆäº†ï¼Œç”¨äº†å¤§æ¦‚ 20 è¡Œä»£ç ï¼çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><video src="/images/202510/13.mp4" preload="metadata" controlslist="nodownload" controls playsinline poster=""></video>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Socket.IO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> Socket.IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac OS å¸¸ç”¨å¿«æ·é”®</title>
      <link href="/2025/10/17/Mac-OS-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>/2025/10/17/Mac-OS-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<ul><li>æ˜¾ç¤ºæ¡Œé¢ï¼šcommand + F3</li><li>å‰ªåˆ‡ã€ç²˜è´´ï¼šå…ˆ command + Cï¼Œå† command + option + V</li><li>ç»ˆç«¯ Shell æ–°å»ºæ ‡ç­¾ï¼šcommand + T</li><li>å±å¹•å¿«ç…§ï¼šcommand + shift + 3</li><li>åŒºåŸŸæˆªå±ï¼šcommand + shift + 4</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> MacOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Socket.IO Java å®¢æˆ·ç«¯</title>
      <link href="/2025/10/16/Socket-IO-Java-%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
      <url>/2025/10/16/Socket-IO-Java-%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<p><a href="https://link.zhihu.com/?target=http://Socket.IO">Socket.IO</a> æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é¡¹ç›®ï¼›Java æ˜¯ç›®å‰åº”ç”¨éå¸¸å¹¿çš„å¼€å‘è¯­è¨€ã€‚ä¸¤è€…çš„ç»“åˆä¹Ÿæ˜¯å¿…ç„¶çš„ã€‚æœ¬ç¯‡ç¿»è¯‘è‡ª Socket.IO-client Java é¡¹ç›®çš„ github ä¸»é¡µã€‚</p><p><a href="https://link.zhihu.com/?target=https://github.com/socketio/socket.io-client-java">Socket.IO-client Java</a> æ˜¯ Socket.IO v1.x çš„ Java å®¢æˆ·ç«¯ç±»åº“ï¼Œè¿™ä¸ªç±»åº“æ˜¯ä» <a href="https://link.zhihu.com/?target=https://github.com/socketio/socket.io-client">JavaScript client</a> ç§»æ¤è¿‡æ¥çš„ã€‚</p><p>å‚è§ï¼š</p><ul><li><a href="https://link.zhihu.com/?target=https://github.com/nkzawa/socket.io-android-chat">Android chat demo</a></li><li><a href="https://link.zhihu.com/?target=https://github.com/socketio/engine.io-client-java">engine.io-client-java</a></li></ul><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>æœ€æ–°çš„åŒ…å¯ä»¥ä» Maven çš„ä¸­å¿ƒä»“åº“è·å–ã€‚ä½ å°†éœ€è¦å®‰è£…ä¾èµ–ã€‚</p><blockquote><p>æ³¨æ„ï¼šv0.6.1 ä¹‹åï¼ŒåŒ…åæ”¹ä¸ºäº† io.socket ã€‚è¯·ç¡®è®¤æ›´æ–°äº†ä¾èµ–é…ç½®ã€‚</p></blockquote><h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><p>åœ¨ pom.xml ä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.socket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>socket.io-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><p>åœ¨ build.gradle ä¸­ï¼Œç»™ Android Studio æ·»åŠ  gradle ä¾èµ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">compile (<span class="string">&#x27;io.socket:socket.io-client:0.7.0&#x27;</span>) &#123;</span><br><span class="line">  <span class="comment">// excluding org.json which is provided by Android</span></span><br><span class="line">  exclude group: <span class="string">&#x27;org.json&#x27;</span>, <span class="keyword">module</span>: <span class="string">&#x27;json&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>Socket.IO-client Java å‡ ä¹æ‹¥æœ‰è·ŸåŸç”Ÿ JS å®¢æˆ·ç«¯ç›¸åŒçš„ api å’Œç‰¹æ€§ã€‚ä½¿ç”¨ IO.socket åˆå§‹åŒ– Socket ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">socket = IO.socket(<span class="string">&quot;http://localhost&quot;</span>);</span><br><span class="line">socket.on(Socket.EVENT_CONNECT, <span class="keyword">new</span> <span class="title class_">Emitter</span>.Listener() &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;</span><br><span class="line">    socket.emit(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;hi&quot;</span>);</span><br><span class="line">    socket.disconnect();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;).on(<span class="string">&quot;event&quot;</span>, <span class="keyword">new</span> <span class="title class_">Emitter</span>.Listener() &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;).on(Socket.EVENT_DISCONNECT, <span class="keyword">new</span>  <span class="title class_">Emitter</span>.Listener() &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">socket.connect();</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç±»åº“ä½¿ç”¨ <a href="https://link.zhihu.com/?target=http://www.json.org/">org.json</a> è§£æå’Œæ„é€  JSON å­—ç¬¦ä¸²ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sending an object</span></span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">obj.put(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;server&quot;</span>);</span><br><span class="line">obj.put(<span class="string">&quot;binary&quot;</span>, <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">42</span>]);</span><br><span class="line">socket.emit(<span class="string">&quot;foo&quot;</span>, obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Receiving an object</span></span><br><span class="line">socket.on(<span class="string">&quot;foo&quot;</span>, <span class="keyword">new</span> <span class="title class_">Emitter</span>.Listener() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">obj</span> <span class="operator">=</span> (JSONObject)args[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åƒä¸‹é¢è¿™æ ·è®¾ç½®é€‰é¡¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IO.<span class="type">Options</span> <span class="variable">opts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IO</span>.Options();</span><br><span class="line">opts.forceNew = <span class="literal">true</span>;</span><br><span class="line">opts.reconnection = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">socket = IO.socket(<span class="string">&quot;http://localhost&quot;</span>, opts);</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ query é€‰é¡¹è®¾ç½®æŸ¥è¯¢å‚æ•°ã€‚è¯·æ³¨æ„ï¼šå¦‚æœå½“æŸ¥è¯¢å‚æ•°æ”¹å˜æ—¶ä¸æƒ³å¤ç”¨ä¸€ä¸ªç¼“å­˜çš„ socket å®ä¾‹ï¼Œåº”è¯¥ä½¿ç”¨ forceNew é€‰é¡¹ï¼Œå¯èƒ½çš„ä½¿ç”¨åœºæ™¯æ˜¯å¦‚æœä½ çš„åº”ç”¨å…è®¸ç”¨æˆ·é€€å‡ºï¼Œå¹¶ä¸”ä¸€ä¸ªæ–°çš„ç”¨æˆ·å†æ¬¡ç™»å½•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IO.<span class="type">Options</span> <span class="variable">opts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IO</span>.Options();</span><br><span class="line">opts.forceNew = <span class="literal">true</span>;</span><br><span class="line">opts.query = <span class="string">&quot;auth_token=&quot;</span> + authToken;</span><br><span class="line"><span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> IO.socket(<span class="string">&quot;http://localhost&quot;</span>, opts);</span><br></pre></td></tr></table></figure><p>å½“æœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œå¯ä»¥ç”¨ Ack è·å–ä¸€ä¸ªå›è°ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">socket.emit(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;woot&quot;</span>, <span class="keyword">new</span> <span class="title class_">Ack</span>() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åä¹‹äº¦ç„¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ack from client to server</span></span><br><span class="line">socket.on(<span class="string">&quot;foo&quot;</span>, <span class="keyword">new</span> <span class="title class_">Emitter</span>.Listener() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;</span><br><span class="line">    <span class="type">Ack</span> <span class="variable">ack</span> <span class="operator">=</span> (Ack) args[args.length - <span class="number">1</span>];</span><br><span class="line">    ack.call();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>SSL (HTTPS, WSS) è®¾ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// default settings for all sockets</span></span><br><span class="line">IO.setDefaultSSLContext(mySSLContext);</span><br><span class="line">IO.setDefaultHostnameVerifier(myHostnameVerifier);</span><br><span class="line"></span><br><span class="line"><span class="comment">// set as an option</span></span><br><span class="line">opts = <span class="keyword">new</span> <span class="title class_">IO</span>.Options();</span><br><span class="line">opts.sslContext = mySSLContext;</span><br><span class="line">opts.hostnameVerifier = myHostnameVerifier;</span><br><span class="line">socket = IO.socket(<span class="string">&quot;https://localhost&quot;</span>, opts);</span><br></pre></td></tr></table></figure><p>æŸ¥é˜… Javadoc è·å–æ›´å¤šè¯¦æƒ…ï¼š<a href="http://socketio.github.io/socket.io-client-java/apidocs/">http://socketio.github.io/socket.io-client-java/apidocs/</a></p><h1 id="Transports-å’Œ-HTTP-å¤´"><a href="#Transports-å’Œ-HTTP-å¤´" class="headerlink" title="Transports å’Œ HTTP å¤´"></a>Transports å’Œ HTTP å¤´</h1><p>å¯ä»¥åƒä¸‹é¢è¿™æ ·è®¿é—® transports å’Œå®ƒä»¬çš„ HTTP å¤´ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Called upon transport creation.</span></span><br><span class="line">socket.io().on(Manager.EVENT_TRANSPORT, <span class="keyword">new</span> <span class="title class_">Emitter</span>.listener() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;</span><br><span class="line">    <span class="type">Transport</span> <span class="variable">transport</span> <span class="operator">=</span> (Transport)args[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    transport.on(Transport.EVENT_REQUEST_HEADERS, <span class="keyword">new</span> <span class="title class_">Emitter</span>.Listener() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; headers = (Map&lt;String, List&lt;String&gt;&gt;)args[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// modify request headers</span></span><br><span class="line">        headers.put(<span class="string">&quot;Cookie&quot;</span>, Arrays.asList(<span class="string">&quot;foo=1;&quot;</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    transport.on(Transport.EVENT_RESPONSE_HEADERS, <span class="keyword">new</span> <span class="title class_">Emitter</span>.Listener() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(Object... args)</span> &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; headers = (Map&lt;String, List&lt;String&gt;&gt;)args[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// access response headers</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cookie</span> <span class="operator">=</span> headers.get(<span class="string">&quot;Set-Cookie&quot;</span>).get(<span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h1><p>è¿™ä¸ªç±»åº“æ”¯æŒ JS å®¢æˆ·ç«¯æ”¯æŒçš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒ…æ‹¬ eventsã€optionsã€upgrading transportã€‚å®Œå…¨æ”¯æŒ Androidã€‚</p><h1 id="License"><a href="#License" class="headerlink" title="License"></a>License</h1><p>MIT</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Socket.IO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Socket.IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Linux å¹³å°ä¸Šå®‰è£… 64 ä½ JDK</title>
      <link href="/2025/10/16/%E5%9C%A8-Linux-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85-64-%E4%BD%8D-JDK/"/>
      <url>/2025/10/16/%E5%9C%A8-Linux-%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%AE%89%E8%A3%85-64-%E4%BD%8D-JDK/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªè¿‡ç¨‹ä½¿ç”¨äºŒè¿›åˆ¶æ‰“åŒ…æ–‡ä»¶ï¼ˆ.tar.gzï¼‰ä¸º 64 ä½ Linux å®‰è£… Java å¼€å‘åŒ…ï¼ˆJDKï¼‰ã€‚</p><p>æœ¬æ•™ç¨‹ä½¿ç”¨æ–‡ä»¶ï¼šjdk-8uversion-linux-x64.tar.gz</p><ol><li>ä¸‹è½½æ–‡ä»¶</li></ol><p>ä¸‹è½½åœ°å€ï¼š<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p><p>ä¸‹è½½å‰å¿…é¡»å…ˆåŒæ„è®¸å¯åè®®ã€‚è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥è¢«æ‰€æœ‰ç”¨æˆ·å®‰è£…ï¼ˆä¸åªæ˜¯ root ç”¨æˆ·ï¼‰åœ¨ä»»ä½•æœ‰å†™å…¥æƒé™çš„ä½ç½®ã€‚ä½†æ˜¯ï¼Œåªæœ‰ root ç”¨æˆ·å¯ä»¥å®‰è£… JDK åˆ°ç³»ç»Ÿä½ç½®ã€‚</p><ol start="2"><li><p>åˆ‡æ¢ç›®å½•åˆ°è¦å®‰è£… JDK çš„ä½ç½®ï¼Œç„¶åç§»åŠ¨äºŒè¿›åˆ¶ .tar.gz æ–‡ä»¶åˆ°å½“å‰ç›®å½•ã€‚</p></li><li><p>æ‰“å¼€ tar åŒ…å¹¶å®‰è£… JDK</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf jdk-8uversion-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><ol start="4"><li><p>å¦‚æœæƒ³èŠ‚çœç£ç›˜ç©ºé—´åˆ™åˆ é™¤ .tar.gz æ–‡ä»¶ã€‚</p></li><li><p>é…ç½® Path</p></li></ol><p>ä½¿ç”¨ vi ç¼–è¾‘ profile æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vi /etc/profile</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/local/lib/jdk1.8.0_91</span><br><span class="line">export JAVA_HOME</span><br><span class="line"></span><br><span class="line">PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure><p>é‡æ–°ç™»é™†æˆ–è€…ä½¿ç”¨ source å‘½ä»¤ç”Ÿæ•ˆæœ€æ–°é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><ol start="6"><li>æ£€æŸ¥å®‰è£…ç»“æœ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ java -version</span><br><span class="line">java version â€œ1.8.0_91â€</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_91-b14)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.91-b14, mixed mode)</span><br></pre></td></tr></table></figure><p>å¦‚æœçœ‹åˆ°ç±»ä¼¼ä¸Šé¢çš„ä¿¡æ¯åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹JenkinsæœåŠ¡æœªè‡ªåŠ¨é‡å¯é—®é¢˜è§£å†³</title>
      <link href="/2025/10/15/Windows%E4%B8%8BJenkins%E6%9C%8D%E5%8A%A1%E6%9C%AA%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2025/10/15/Windows%E4%B8%8BJenkins%E6%9C%8D%E5%8A%A1%E6%9C%AA%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>æˆåŠŸå®‰è£… Jenkins æœåŠ¡åï¼Œæœ‰æ—¶å¼€æœºå Jenkins æœåŠ¡æœªè‡ªåŠ¨å¯åŠ¨ã€‚æŸ¥çœ‹ Jenkins æœåŠ¡å®‰è£…ç›®å½•ä¸‹çš„æ—¥å¿—å‘ç°æ²¡æœ‰æœåŠ¡å¯åŠ¨çš„æ—¥å¿—ï¼Œæ‰€ä»¥çŒœæµ‹æ˜¯ç³»ç»Ÿå¯åŠ¨å Jenkins æœåŠ¡æœªè°ƒèµ·ã€‚</p><p>é€šè¿‡æŒ‰ Win + Rï¼Œç„¶åè¾“å…¥ services.msc å¹¶æŒ‰å›è½¦æ¥æ‰“å¼€æœåŠ¡ç®¡ç†å·¥å…·ã€‚æ‰¾åˆ° Jenkins æœåŠ¡ï¼Œç‚¹å‡»å³é”®ï¼ŒæŸ¥çœ‹â€œå±æ€§â€ï¼ŒJenkins é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š<br><img src="/images/202510/03.jpg"></p><p>ä¸ºäº†æ¯æ¬¡å¼€æœºèƒ½è‡ªåŠ¨å¯åŠ¨ Jenkins æœåŠ¡ï¼Œæ›´æ”¹é…ç½®å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆï¼Œå°†å¯åŠ¨ç±»å‹ä¿®æ”¹ä¸ºâ€œè‡ªåŠ¨ï¼ˆå»¶è¿Ÿå¯åŠ¨ï¼‰â€ï¼š<br><img src="/images/202510/04.jpg"></p><p>å…¶æ¬¡ï¼Œè®¾ç½®å¤±è´¥é‡è¯•æœºåˆ¶ï¼š<br><img src="/images/202510/05.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows11 + Deepin åŒç³»ç»Ÿï¼Œå¸è½½ Deepin</title>
      <link href="/2025/10/15/Windows11-Deepin-%E5%8F%8C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%8D%B8%E8%BD%BD-Deepin/"/>
      <url>/2025/10/15/Windows11-Deepin-%E5%8F%8C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%8D%B8%E8%BD%BD-Deepin/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ Windows 11 å’Œ Deepin åŒç³»ç»Ÿç¯å¢ƒä¸‹å¸è½½ Deepinï¼Œéœ€è¦å®Œæˆä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼š</p><ol><li>åœ¨ Windows ä¸­ä¿®å¤å¼•å¯¼ï¼Œæ¢å¤å•ä¸€çš„ Windows å¯åŠ¨ç®¡ç†å™¨ï¼›</li><li>åˆ é™¤ Deepin æ‰€å ç”¨çš„ç£ç›˜ç©ºé—´ã€‚</li></ol><h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><ul><li><strong>å¤‡ä»½æ•°æ®</strong>ï¼šéå¸¸é‡è¦ï¼Œç¡®ä¿ Windows å’Œ Deepin ç³»ç»Ÿä¸‹çš„é‡è¦æ•°æ®åšå¥½å¤‡ä»½ï¼Œä»¥é˜²ä¸‡ä¸€ã€‚</li><li>ä¸‹è½½å¹¶å®‰è£… EasyUEFIã€‚EasyUEFI æ˜¯ç³»ç»Ÿå¼•å¯¼ä¿®å¤çš„ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œç›¸æ¯”ä½¿ç”¨å¯åŠ¨ U ç›˜è¿›è¡Œå¼•å¯¼ä¿®å¤ï¼Œéå¸¸ç®€å•å¿«æ·ã€‚</li></ul><h1 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h1><h2 id="ä½¿ç”¨-EasyUEFI-ä¿®å¤å¼•å¯¼"><a href="#ä½¿ç”¨-EasyUEFI-ä¿®å¤å¼•å¯¼" class="headerlink" title="ä½¿ç”¨ EasyUEFI ä¿®å¤å¼•å¯¼"></a>ä½¿ç”¨ EasyUEFI ä¿®å¤å¼•å¯¼</h2><ul><li>åœ¨ Windows 11 ä¸­ï¼Œä¸‹è½½å¹¶å®‰è£… EasyUEFIï¼ˆå…è´¹è¯•ç”¨ç‰ˆï¼‰ã€‚</li><li>æ‰“å¼€ EasyUEFIï¼Œåœ¨ç®¡ç† EFI å¯åŠ¨é¡¹ä¸­ï¼Œä¼šçœ‹åˆ° Windows Boot Manager å’Œ Deepin æˆ– grub ç­‰å¯åŠ¨é¡¹ã€‚</li><li>é€‰æ‹© Deepin æˆ– grub çš„æ¡ç›®ï¼Œç‚¹å‡»â€œåˆ é™¤â€ã€‚</li><li>ç„¶åå°† Windows Boot Manager æ¡ç›®ä¸Šç§»åˆ°ç¬¬ä¸€ä½ã€‚</li><li>é‡å¯ç”µè„‘ï¼Œå°±å¯ä»¥ç›´æ¥è¿›å…¥ Windows äº†ã€‚</li></ul><h2 id="åˆ é™¤-Deepin-åˆ†åŒºå¹¶åˆå¹¶ç©ºé—´"><a href="#åˆ é™¤-Deepin-åˆ†åŒºå¹¶åˆå¹¶ç©ºé—´" class="headerlink" title="åˆ é™¤ Deepin åˆ†åŒºå¹¶åˆå¹¶ç©ºé—´"></a>åˆ é™¤ Deepin åˆ†åŒºå¹¶åˆå¹¶ç©ºé—´</h2><ol><li>æ‰“å¼€ç£ç›˜ç®¡ç†ï¼š</li></ol><p>åœ¨ Windows 11 ä¸­ï¼ŒæŒ‰<code>Win + X</code>å¿«æ·é”®ï¼Œé€‰æ‹©â€œç£ç›˜ç®¡ç†â€ã€‚</p><ol start="2"><li>åœ¨ç£ç›˜ç®¡ç†çª—å£ä¸­ï¼Œæ‰¾åˆ°å¹¶è¯†åˆ«å‡º Deepin æ‰€ä½¿ç”¨çš„åˆ†åŒºã€‚é€šå¸¸å®ƒä»¬æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</li></ol><ul><li>æ–‡ä»¶ç³»ç»Ÿä¸æ˜¯ NTFS æˆ– FAT32ï¼ˆä¾‹å¦‚ï¼Œå¯èƒ½æ˜¯ EXT4ã€Swap ç­‰ï¼Œåœ¨ Windows ä¸‹ä¼šæ˜¾ç¤ºä¸ºâ€œæœªçŸ¥åˆ†åŒºâ€æˆ–â€œRAWâ€ï¼‰ã€‚</li><li>æ²¡æœ‰é©±åŠ¨å™¨å·ï¼ˆå³ C:ï¼Œ D: è¿™æ ·çš„ç›˜ç¬¦ï¼‰ã€‚</li><li>ä½ è®°å¾—å½“åˆç»™ Deepin åˆ†é…çš„å¤§å°ï¼Œå¯ä»¥æ ¹æ®åˆ†åŒºå¤§å°æ¥è¾…åŠ©åˆ¤æ–­ã€‚</li><li>å¸¸è§æƒ…å†µï¼šDeepin é€šå¸¸ä¼šæœ‰ä¸€ä¸ª æ ¹åˆ†åŒº &#x2F; (ä¸»åˆ†åŒºï¼Œå®¹é‡å¤§) å’Œä¸€ä¸ª äº¤æ¢åˆ†åŒº swap (å®¹é‡å°ï¼Œé€šå¸¸ä¸å†…å­˜å¤§å°ç›¸ä»¿)ã€‚</li></ul><ol start="3"><li>é€ä¸ªå³é”®ç‚¹å‡»è¿™äº›å±äº Deepin çš„åˆ†åŒºï¼Œé€‰æ‹©â€œåˆ é™¤å·â€¦â€ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šåŠ¡å¿…ç¡®è®¤åˆ é™¤çš„æ˜¯æ­£ç¡®çš„åˆ†åŒºï¼å¦‚æœä½ ä¸ç¡®å®šæŸä¸ªåˆ†åŒºæ˜¯åšä»€ä¹ˆçš„ï¼Œä¸è¦åˆ é™¤ã€‚åˆ é™¤æ“ä½œä¼šç«‹å³æ°¸ä¹…æ¸…é™¤è¯¥åˆ†åŒºä¸Šçš„æ‰€æœ‰æ•°æ®ã€‚</p></blockquote><ol start="4"><li>åˆ é™¤æˆåŠŸåï¼Œè¿™äº›åˆ†åŒºä¼šå˜æˆâ€œæœªåˆ†é…â€ç©ºé—´ï¼Œå¯ä»¥ä¾›ç›¸é‚»çš„ç£ç›˜åˆ†åŒºæ‰©å±•ä½¿ç”¨ï¼Œæˆ–è€…æ–°å»ºåˆ†åŒºã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Windows </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu å®‰è£… SSHï¼Œå¹¶å¼€å¯ root è¿œç¨‹ç™»å½•</title>
      <link href="/2025/10/14/Ubuntu-%E5%AE%89%E8%A3%85-SSH%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%90%AF-root-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/"/>
      <url>/2025/10/14/Ubuntu-%E5%AE%89%E8%A3%85-SSH%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%90%AF-root-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…-SSH"><a href="#å®‰è£…-SSH" class="headerlink" title="å®‰è£… SSH"></a>å®‰è£… SSH</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ssh</span><br></pre></td></tr></table></figure><p>å…¶ä¸­åŒ…å«äº† openssh-client å’Œ openssh-serverã€‚</p><h1 id="å¼€å¯-root-è¿œç¨‹ç™»å½•"><a href="#å¼€å¯-root-è¿œç¨‹ç™»å½•" class="headerlink" title="å¼€å¯ root è¿œç¨‹ç™»å½•"></a>å¼€å¯ root è¿œç¨‹ç™»å½•</h1><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;ssh&#x2F;sshd_config ä¸­çš„ PermitRootLogin å‚æ•°å€¼ä¸º yesï¼š<br><img src="/images/202510/01.jpg"></p><p>é‡å¯ SSH æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ssh restart</span><br></pre></td></tr></table></figure><p><strong>PermitRootLogin å‚æ•°</strong></p><p>æŒ‡å®š root æ˜¯å¦å¯ä»¥ç”¨ ssh ç™»å½•ã€‚å‚æ•°å€¼å¿…é¡»æ˜¯â€œyesâ€ã€â€œprohibit-passwordâ€ã€â€œwithout-passwordâ€ã€â€œorced-commands-onlyâ€æˆ–è€…â€œnoâ€ã€‚é»˜è®¤å€¼æ˜¯â€œprohibit-passwordâ€ã€‚</p><p>å¦‚æœè¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸ºâ€œprohibit-passwordâ€ã€â€œwithout-passwordâ€ï¼Œé€šè¿‡å¯†ç å’Œé”®ç›˜äº¤äº’çš„æˆæƒæ–¹å¼å¯¹ root ç”¨æˆ·ç¦ç”¨ã€‚</p><p>å¦‚æœè¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸ºâ€œorced-commands-onlyâ€ï¼Œroot ç”¨æˆ·åªå…è®¸é€šè¿‡å…¬é’¥æˆæƒç™»å½•ï¼Œä½†åªæ˜¯æŒ‡å®šäº† conmmand é€‰é¡¹çš„æ—¶å€™ï¼ˆè¿™å¯èƒ½å¯¹è¿œç¨‹å¤‡ä»½æ˜¯æœ‰å¥½å¤„çš„ï¼Œå³ä½¿ root ä¸å…è®¸ç™»å½•ï¼‰ã€‚å…¶ä»–æˆæƒæ–¹å¼å¯¹ root æ— æ•ˆã€‚</p><p>å¦‚æœè¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸ºâ€œnoâ€ï¼Œroot ä¸å…è®¸ç™»å½•ã€‚</p><p>å…¶ä»–å‚æ•°è¯´æ˜ï¼Œè¯·æŸ¥é˜…<a href="https://man.openbsd.org/sshd_config">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu SSH å…å¯†ç ç™»é™†</title>
      <link href="/2025/10/14/Ubuntu-SSH-%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E9%99%86/"/>
      <url>/2025/10/14/Ubuntu-SSH-%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E9%99%86/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ Ubuntu ç³»ç»Ÿè¿œç¨‹ç™»é™†æ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨ç”¨æˆ·ååŠ å¯†ç ç™»é™†ï¼Œä½†è¿™ç§æ–¹å¼æ¯æ¬¡éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæ¯”è¾ƒç¹çã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ›´å…·å®‰å…¨æ€§çš„ RSA å¯†é’¥è®¤è¯æ–¹å¼é¿å…é¢‘ç¹è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</p><h1 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h1><p>å¦‚æœæˆ‘ä»¬éœ€è¦ä»ä¸€å°æœºå™¨ä¸ŠåŒæ—¶æ“ä½œå¤šå° Ubuntu æœåŠ¡å™¨ï¼Œå…å¯†ç ç™»é™†æ“ä½œèµ·æ¥å°±æ–¹ä¾¿å¤šäº†ã€‚</p><h1 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h1><h2 id="å®‰è£…-SSH-æœåŠ¡"><a href="#å®‰è£…-SSH-æœåŠ¡" class="headerlink" title="å®‰è£… SSH æœåŠ¡"></a>å®‰è£… SSH æœåŠ¡</h2><p>åœ¨ Ubuntu æœåŠ¡å™¨ä¸Šå®‰è£… SSH æœåŠ¡ï¼Œæ–¹æ³•å‚è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ï¼š<a href="https://www.zhangjc.com/2025/10/14/Ubuntu-%E5%AE%89%E8%A3%85-SSH%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%90%AF-root-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/">Ubuntu å®‰è£… SSHï¼Œå¹¶å¼€å¯ root è¿œç¨‹ç™»å½•</a>ã€‚</p><h2 id="Client-ç«¯ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥"><a href="#Client-ç«¯ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥" class="headerlink" title="Client ç«¯ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥"></a>Client ç«¯ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå®¢æˆ·ç«¯å…¬é’¥å’Œå¯†é’¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„å¯†é’¥å¯¹åœ¨ç›®å½• ~&#x2F;.ssh&#x2F; ä¸‹ï¼Œid_rsa.pub æ˜¯å…¬é’¥ï¼Œid_rsa æ˜¯å¯†é’¥ã€‚</p><h2 id="å°†-Client-ç«¯çš„å…¬é’¥æ·»åŠ åˆ°-Server-ç«¯çš„å…¬é’¥æ–‡ä»¶ä¸­"><a href="#å°†-Client-ç«¯çš„å…¬é’¥æ·»åŠ åˆ°-Server-ç«¯çš„å…¬é’¥æ–‡ä»¶ä¸­" class="headerlink" title="å°† Client ç«¯çš„å…¬é’¥æ·»åŠ åˆ° Server ç«¯çš„å…¬é’¥æ–‡ä»¶ä¸­"></a>å°† Client ç«¯çš„å…¬é’¥æ·»åŠ åˆ° Server ç«¯çš„å…¬é’¥æ–‡ä»¶ä¸­</h2><p>é¦–å…ˆæ£€æŸ¥ Server ç«¯éœ€è¦è®¤è¯çš„ç”¨æˆ·ï¼ˆå¦‚ rootï¼‰çš„ Home ç›®å½•ä¸‹ï¼Œéšè—ç›®å½• .ssh ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªåä¸º authorized_keys çš„æ–‡ä»¶ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œä½¿ç”¨å‘½ä»¤ï¼štouch authorized_keys åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶åˆ›å»ºå®Œæˆåï¼Œåˆ™å¯ä»¥æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li>å¤åˆ¶ Clinet ç«¯å…¬é’¥çš„å†…å®¹ã€‚</li><li>å°†å¤åˆ¶çš„ Client ç«¯å…¬é’¥å†…å®¹ç²˜è´´è‡³ Server ç«¯çš„ authorized_keys æ–‡ä»¶ä¸­ï¼Œä¿å­˜æ–‡ä»¶ã€‚</li><li>æ›´æ”¹ authorized_keys æ–‡ä»¶çš„æƒé™ä¸º 600ï¼Œæ‰§è¡Œå‘½ä»¤ <code>chmod 600 authorized_keys</code>ã€‚</li><li>é‡å¯æœåŠ¡ç«¯ sshd æœåŠ¡ï¼š<code>service sshd restart</code>ã€‚</li></ol><h2 id="éªŒè¯æ— å¯†ç ç™»é™†"><a href="#éªŒè¯æ— å¯†ç ç™»é™†" class="headerlink" title="éªŒè¯æ— å¯†ç ç™»é™†"></a>éªŒè¯æ— å¯†ç ç™»é™†</h2><p>åœ¨å®¢æˆ·ç«¯è¾“å…¥å‘½ä»¤ï¼š<code>ssh root@192.168.1.133</code>ï¼ˆç”¨æˆ·åå’Œ IP è‡ªè¡Œæ›¿æ¢ï¼‰ï¼Œçœ‹åˆ°å¦‚ä¸‹ç»“æœåˆ™æ— å¯†ç ç™»é™†é…ç½®æˆåŠŸã€‚<br><img src="/images/202510/02.jpg"></p><blockquote><p>åœ¨å°†å®¢æˆ·ç«¯å…¬é’¥æ·»åŠ åˆ°æœåŠ¡ç«¯æ—¶ï¼Œå¦‚æœæ˜¯ä»ä¸€å°å®¢æˆ·ç«¯ç™»é™†å¤šå°æœåŠ¡å™¨ï¼Œåˆ™å¯ä»¥å…ˆå°†å…¬é’¥æ·»åŠ è‡³å®¢æˆ·ç«¯çš„ authorized_keys æ–‡ä»¶ï¼Œç›´æ¥å°†å®¢æˆ·ç«¯ authorized_keys æ–‡ä»¶ scp åˆ°æœåŠ¡å™¨å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œç„¶åé‡å¯æœåŠ¡å™¨ sshd æœåŠ¡ã€‚ä½†è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜æ˜¯éœ€è¦å…ˆè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»é™†æœåŠ¡å™¨é‡å¯ sshd æœåŠ¡ã€‚æ˜¯å¦æœ‰æ›´ä¾¿æ·çš„æ–¹å¼æœ‰å¾…å­¦ä¹ ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins é¡¹ç›®è¿ç§»</title>
      <link href="/2025/10/13/Jenkins-%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB/"/>
      <url>/2025/10/13/Jenkins-%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤‡ä»½"><a href="#å¤‡ä»½" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h1><ul><li>åœæ­¢ Jenkins æœåŠ¡ã€‚</li><li>å¤‡ä»½æ•´ä¸ª $JENKINS_HOME ç›®å½•ã€‚Linux ç¤ºä¾‹:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -czf jenkins_home_backup.tar.gz /var/lib/jenkins/</span><br></pre></td></tr></table></figure><h1 id="è¿ç§»"><a href="#è¿ç§»" class="headerlink" title="è¿ç§»"></a>è¿ç§»</h1><p>å› å‡çº§å¹¶æ­å»ºäº†æ–°çš„ Jenkins ç¯å¢ƒï¼Œæ‰€ä»¥åªè¿ç§»åŸæ¥çš„ Jobã€‚</p><ol><li>å¤åˆ¶ä»»åŠ¡æ–‡ä»¶å¤¹ï¼š</li></ol><p>åœ¨ $JENKINS_HOME&#x2F;jobs&#x2F; ç›®å½•ä¸‹ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ–‡ä»¶å¤¹ã€‚å°†éœ€è¦è¿ç§»ä»»åŠ¡çš„æ–‡ä»¶å¤¹å¤åˆ¶åˆ°æ–°æœåŠ¡å™¨çš„ç›¸åŒè·¯å¾„ä¸‹ã€‚</p><ol start="2"><li>é‡æ–°åŠ è½½</li></ol><p>å¤åˆ¶åï¼Œéœ€è¦åœ¨ Jenkins çš„ â€œç³»ç»Ÿç®¡ç†â€ -&gt; â€œè¯»å–é…ç½®â€ é¡µé¢ç‚¹å‡»ä¸€ä¸‹ï¼Œè®© Jenkins é‡æ–°åŠ è½½ç£ç›˜ä¸Šçš„é…ç½®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 24.04 å®‰è£… Jenkins</title>
      <link href="/2025/10/11/Ubuntu-24-04-%E5%AE%89%E8%A3%85-Jenkins/"/>
      <url>/2025/10/11/Ubuntu-24-04-%E5%AE%89%E8%A3%85-Jenkins/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ apt å®‰è£… Jenkins LTS ç‰ˆæœ¬ã€‚é¦–å…ˆï¼Œ éœ€è¦åœ¨ç³»ç»Ÿä¸­æ·»åŠ  keyï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> wget -O /etc/apt/keyrings/jenkins-keyring.asc \</span><br><span class="line">  https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæ·»åŠ  Jenkins çš„ apt å…¥å£ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/etc/apt/keyrings/jenkins-keyring.asc]&quot;</span> \</span><br><span class="line">  https://pkg.jenkins.io/debian-stable binary/ | <span class="built_in">sudo</span> <span class="built_in">tee</span> \</span><br><span class="line">  /etc/apt/sources.list.d/jenkins.list &gt; /dev/null</span><br></pre></td></tr></table></figure><p>æ›´æ–°æœ¬åœ°åŒ…ç´¢å¼•åå®‰è£… Jenkinsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install fontconfig openjdk-17-jre</span><br><span class="line"><span class="built_in">sudo</span> apt-get install jenkins</span><br></pre></td></tr></table></figure><p>é€šè¿‡åœ°å€ <a href="http://localhost:8080/">http://localhost:8080</a> è®¿é—® Jenkinsã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ systemd ç®¡ç† MySQL æœåŠ¡</title>
      <link href="/2025/10/11/%E4%BD%BF%E7%94%A8-systemd-%E7%AE%A1%E7%90%86-MySQL-%E6%9C%8D%E5%8A%A1/"/>
      <url>/2025/10/11/%E4%BD%BF%E7%94%A8-systemd-%E7%AE%A1%E7%90%86-MySQL-%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»º-systemd-æœåŠ¡æ–‡ä»¶"><a href="#åˆ›å»º-systemd-æœåŠ¡æ–‡ä»¶" class="headerlink" title="åˆ›å»º systemd æœåŠ¡æ–‡ä»¶"></a>åˆ›å»º systemd æœåŠ¡æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vi /etc/systemd/system/mysql.service</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ ¹æ®ä¸ªäººçš„å®é™…å®‰è£…è·¯å¾„è°ƒæ•´ï¼‰ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=MySQL Server</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">User</span>=mysql</span><br><span class="line"><span class="attr">Group</span>=mysql</span><br><span class="line"><span class="attr">Type</span>=notify</span><br><span class="line"><span class="attr">TimeoutSec</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">PermissionsStartOnly</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">ExecStartPre</span>=/usr/bin/mkdir -p /var/run/mysqld</span><br><span class="line"><span class="attr">ExecStartPre</span>=/usr/bin/chown mysql:mysql /var/run/mysqld</span><br><span class="line"><span class="attr">ExecStart</span>=/opt/mysql/bin/mysqld</span><br><span class="line"><span class="attr">ExecStop</span>=/opt/mysql/bin/mysqladmin -u root shutdown</span><br><span class="line"><span class="attr">LimitNOFILE</span>=<span class="number">5000</span></span><br><span class="line"><span class="attr">Restart</span>=<span class="literal">on</span>-failure</span><br><span class="line"><span class="attr">RestartSec</span>=<span class="number">10</span></span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºå¿…è¦çš„ç›®å½•å’Œæƒé™"><a href="#åˆ›å»ºå¿…è¦çš„ç›®å½•å’Œæƒé™" class="headerlink" title="åˆ›å»ºå¿…è¦çš„ç›®å½•å’Œæƒé™"></a>åˆ›å»ºå¿…è¦çš„ç›®å½•å’Œæƒé™</h1><p>åœ¨ MySQL é…ç½®æ–‡ä»¶ä¸­åšå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">socket</span> = /var/run/mysqld/mysqld.sock</span><br><span class="line"><span class="attr">pid-file</span> = /var/run/mysqld/mysqld.pid</span><br><span class="line"><span class="attr">basedir</span> = /opt/mysql</span><br><span class="line"><span class="attr">datadir</span>= /opt/mysql/data</span><br><span class="line"><span class="attr">log-error</span> = /var/log/mysql/error.log</span><br><span class="line"><span class="attr">plugin-dir</span> = /opt/mysql/lib/plugin</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºè¿è¡Œç›®å½•</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/run/mysqld</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> mysql:mysql /var/run/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ—¥å¿—ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/log/mysql</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> mysql:mysql /var/log/mysql</span><br></pre></td></tr></table></figure><h1 id="é‡æ–°åŠ è½½-systemd-é…ç½®"><a href="#é‡æ–°åŠ è½½-systemd-é…ç½®" class="headerlink" title="é‡æ–°åŠ è½½ systemd é…ç½®"></a>é‡æ–°åŠ è½½ systemd é…ç½®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br></pre></td></tr></table></figure><h1 id="å¯ç”¨-MySQL-å¼€æœºå¯åŠ¨"><a href="#å¯ç”¨-MySQL-å¼€æœºå¯åŠ¨" class="headerlink" title="å¯ç”¨ MySQL å¼€æœºå¯åŠ¨"></a>å¯ç”¨ MySQL å¼€æœºå¯åŠ¨</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> mysql</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/mysql.service â†’ /etc/systemd/system/mysql.service.</span><br></pre></td></tr></table></figure><h1 id="å¯åŠ¨-MySQL-æœåŠ¡"><a href="#å¯åŠ¨-MySQL-æœåŠ¡" class="headerlink" title="å¯åŠ¨ MySQL æœåŠ¡"></a>å¯åŠ¨ MySQL æœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start mysql</span><br></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹-MySQL-æœåŠ¡çŠ¶æ€"><a href="#æŸ¥çœ‹-MySQL-æœåŠ¡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ MySQL æœåŠ¡çŠ¶æ€"></a>æŸ¥çœ‹ MySQL æœåŠ¡çŠ¶æ€</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status mysql</span><br></pre></td></tr></table></figure><h1 id="åœæ­¢-MySQL-æœåŠ¡"><a href="#åœæ­¢-MySQL-æœåŠ¡" class="headerlink" title="åœæ­¢ MySQL æœåŠ¡"></a>åœæ­¢ MySQL æœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop mysql</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨é€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶åœ¨Ubuntuä¸Šå®‰è£…MySQL</title>
      <link href="/2025/09/29/%E4%BD%BF%E7%94%A8%E9%80%9A%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E5%9C%A8Ubuntu%E4%B8%8A%E5%AE%89%E8%A3%85MySQL/"/>
      <url>/2025/09/29/%E4%BD%BF%E7%94%A8%E9%80%9A%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E5%9C%A8Ubuntu%E4%B8%8A%E5%AE%89%E8%A3%85MySQL/</url>
      
        <content type="html"><![CDATA[<h1 id="ç‰ˆæœ¬"><a href="#ç‰ˆæœ¬" class="headerlink" title="ç‰ˆæœ¬"></a>ç‰ˆæœ¬</h1><ul><li>Ubuntu 24.04.3 LTS</li><li>MySQL Community Server 8.4.6 LTS</li></ul><h1 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h1><p>ä¸‹è½½åœ°å€ï¼š<a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a>ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>MySQL ä¾èµ– libaio åº“ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ apt-cache search libaio</span><br><span class="line">libaio-dev - Linux kernel AIO access library - development files</span><br><span class="line">libaio1t64 - Linux kernel AIO access library - shared library</span><br><span class="line">$ <span class="built_in">sudo</span> apt-get install libaio1t64 libaio-dev</span><br></pre></td></tr></table></figure><p>åœ¨å®‰è£…ä½ç½®è§£å‹ä¸‹è½½çš„äºŒè¿›åˆ¶åŒ…ï¼Œæˆ‘çš„å®‰è£…ä½ç½®åœ¨ &#x2F;optã€‚ä¸ºäº†åç»­è®¿é—®æ–¹ä¾¿ï¼ŒåŠ å‹ååˆ›å»ºç›®å½•è½¯è¿æ¥ã€‚éœ€ä½¿ç”¨ root æƒé™è¿›è¡Œå®‰è£…ï¼Œæ‰€ä»¥å…ˆåˆ‡æ¢è‡³ root åè¿›è¡Œåç»­çš„å®‰è£…æ“ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> -s</span><br><span class="line"><span class="comment"># xz -d mysql-8.4.6-linux-glibc2.28-x86_64.tar.xz</span></span><br><span class="line"><span class="comment"># tar xvf mysql-8.4.6-linux-glibc2.28-x86_64.tar</span></span><br><span class="line"><span class="comment"># ln -s mysql-8.4.6-linux-glibc2.28-x86_64 mysql</span></span><br><span class="line"><span class="comment"># ll</span></span><br><span class="line">æ€»è®¡ 16</span><br><span class="line">drwxr-xr-x  4 root root 4096  9æœˆ 29 17:08 ./</span><br><span class="line">drwxr-xr-x 23 root root 4096  9æœˆ  4 13:25 ../</span><br><span class="line">lrwxrwxrwx  1 root root   34  9æœˆ 29 17:08 mysql -&gt; mysql-8.4.6-linux-glibc2.28-x86_64/</span><br><span class="line">drwxrwxr-x  9 root root 4096  9æœˆ 29 17:03 mysql-8.4.6-linux-glibc2.28-x86_64/</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹ç±»ä¼¼çš„å‘½ä»¤ï¼Œå®‰è£…å’Œä½¿ç”¨ MySQLï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /opt/mysql</span></span><br><span class="line"><span class="comment"># groupadd mysql</span></span><br><span class="line"><span class="comment"># useradd -r -g mysql -s /bin/false mysql</span></span><br><span class="line"><span class="comment"># mkdir mysql-files</span></span><br><span class="line"><span class="comment"># chown mysql:mysql mysql-files</span></span><br><span class="line"><span class="comment"># chmod 750 mysql-files</span></span><br><span class="line"><span class="comment"># bin/mysqld --initialize --user=mysql</span></span><br><span class="line">bin/mysqld: error <span class="keyword">while</span> loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œåˆå§‹åŒ–æ—¶å‡ºç°ä¸Šé¢çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸º libaio åº“å®‰è£…ä½ç½®çš„é—®é¢˜ã€‚é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥æ‰¾ libaio åº“çš„ä½ç½®ï¼Œå¹¶åˆ›å»ºè½¯è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find / -name &quot;libaio.so*&quot; 2&gt;/dev/null</span></span><br><span class="line">/usr/lib/x86_64-linux-gnu/libaio.so.1t64.0.2</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libaio.so.1t64</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libaio.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># cd /usr/lib/</span></span><br><span class="line"><span class="comment"># ln -s x86_64-linux-gnu/libaio.so libaio.so.1</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œåˆå§‹åŒ–æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bin/mysqld --initialize --user=mysql</span></span><br><span class="line">2025-09-29T09:31:28.376933Z 0 [System] [MY-015017] [Server] MySQL Server Initialization - start.</span><br><span class="line">2025-09-29T09:31:28.378185Z 0 [System] [MY-013169] [Server] /opt/mysql-8.4.6-linux-glibc2.28-x86_64/bin/mysqld (mysqld 8.4.6) initializing of server <span class="keyword">in</span> progress as process 35181</span><br><span class="line">2025-09-29T09:31:28.386632Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.</span><br><span class="line">2025-09-29T09:31:28.651250Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.</span><br><span class="line">2025-09-29T09:31:30.673240Z 6 [Note] [MY-010454] [Server] A temporary password is generated <span class="keyword">for</span> root@localhost: fy-ktrkZp8aq</span><br><span class="line">2025-09-29T09:31:32.971427Z 0 [System] [MY-015018] [Server] MySQL Server Initialization - end.</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ä¿å­˜å¥½åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¼šç”Ÿæˆ root ç”¨æˆ·çš„éšæœºå¯†ç ã€‚ç™»é™† MySQL æœåŠ¡åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹åˆå§‹å¯†ç :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;root-password&#x27;</span>;</span><br></pre></td></tr></table></figure></blockquote><p>å¯åŠ¨ MySQLï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bin/mysqld_safe --user=mysql &amp;</span></span><br><span class="line">[1] 5419</span><br><span class="line">root@Ubuntu:/opt/mysql-8.4.6-linux-glibc2.28-x86_64# Logging to <span class="string">&#x27;/opt/mysql-8.4.6-linux-glibc2.28-x86_64/data/Ubuntu.err&#x27;</span>.</span><br><span class="line">2025-09-30T02:27:16.882553Z mysqld_safe Starting mysqld daemon with databases from /opt/mysql-8.4.6-linux-glibc2.28-x86_64/data</span><br><span class="line"><span class="comment"># ps -ef|grep mysql</span></span><br><span class="line">root        5419    5411  0 10:27 pts/2    00:00:00 /bin/sh bin/mysqld_safe --user=mysql</span><br><span class="line">mysql       5488    5419  4 10:27 pts/2    00:00:00 /opt/mysql-8.4.6-linux-glibc2.28-x86_64/bin/mysqld --basedir=/opt/mysql-8.4.6-linux-glibc2.28-x86_64 --datadir=/opt/mysql-8.4.6-linux-glibc2.28-x86_64/data --plugin-dir=/opt/mysql-8.4.6-linux-glibc2.28-x86_64/lib/plugin --user=mysql --log-error=Ubuntu.err --pid-file=Ubuntu.pid</span><br><span class="line">root        5539    5411  0 10:27 pts/2    00:00:00 grep --color=auto mysql</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…åè®¾ç½®"><a href="#å®‰è£…åè®¾ç½®" class="headerlink" title="å®‰è£…åè®¾ç½®"></a>å®‰è£…åè®¾ç½®</h1><h2 id="è®¾ç½®-Socket-æ–‡ä»¶"><a href="#è®¾ç½®-Socket-æ–‡ä»¶" class="headerlink" title="è®¾ç½® Socket æ–‡ä»¶"></a>è®¾ç½® Socket æ–‡ä»¶</h2><p>é»˜è®¤çš„ Socket æ–‡ä»¶åœ¨ &#x2F;tmp ç›®å½•ä¸‹ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨æ¸…ç†ã€‚å¦‚æœä¸ä¿®æ”¹åœ¨åç»­ä½¿ç”¨æ—¶ä¼šå‡ºç°é—®é¢˜ï¼Œè§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšæ–‡ï¼š<a href="https://www.zhangjc.com/2024/12/26/%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0MySQL/">æ— æ³•è¿æ¥æœ¬åœ°MySQL</a>ã€‚</p><p>åœ¨ &#x2F;etc&#x2F;mysql&#x2F;my.cnf é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">socket</span> = /var/run/mysqld/mysqld.sock</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å­—æ®µå†…å®¹å¤§å°å†™æ•æ„Ÿ"><a href="#è®¾ç½®å­—æ®µå†…å®¹å¤§å°å†™æ•æ„Ÿ" class="headerlink" title="è®¾ç½®å­—æ®µå†…å®¹å¤§å°å†™æ•æ„Ÿ"></a>è®¾ç½®å­—æ®µå†…å®¹å¤§å°å†™æ•æ„Ÿ</h2><p>å‚è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšæ–‡ï¼š<a href="https://www.zhangjc.com/2025/04/15/MySQL%E8%AE%BE%E7%BD%AE%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E5%A4%A7%E5%B0%8F%E5%86%99%E6%95%8F%E6%84%9F/">MySQLè®¾ç½®å­—æ®µå†…å®¹å¤§å°å†™æ•æ„Ÿ</a>ã€‚</p><h2 id="ä½¿ç”¨-systemd-ç®¡ç†-MySQL-æœåŠ¡"><a href="#ä½¿ç”¨-systemd-ç®¡ç†-MySQL-æœåŠ¡" class="headerlink" title="ä½¿ç”¨ systemd ç®¡ç† MySQL æœåŠ¡"></a>ä½¿ç”¨ systemd ç®¡ç† MySQL æœåŠ¡</h2><p>å‚è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšæ–‡: <a href="https://www.zhangjc.com/2025/10/11/%E4%BD%BF%E7%94%A8-systemd-%E7%AE%A1%E7%90%86-MySQL-%E6%9C%8D%E5%8A%A1/">ä½¿ç”¨ systemd ç®¡ç† MySQL æœåŠ¡</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[: ==: unary operator expected</title>
      <link href="/2025/09/29/unary-operator-expected/"/>
      <url>/2025/09/29/unary-operator-expected/</url>
      
        <content type="html"><![CDATA[<p>Shell è„šæœ¬æŠ¥é”™ï¼šâ€œline 10: [: &#x3D;: unary operator expectedâ€ã€‚æ ¹æ®æç¤ºä¿¡æ¯æ‰¾åˆ°æŠ¥é”™çš„ç¨‹åºæ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$OPERATION</span> == <span class="string">&quot;scp&quot;</span> ]; <span class="keyword">then</span></span><br></pre></td></tr></table></figure><p>æŠ¥é”™åŸå› æ˜¯å˜é‡ OPERATION çš„å€¼ä¸ºç©ºï¼Œé‚£ä¹ˆç¨‹åºå°±å˜æˆäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ == <span class="string">&quot;scp&quot;</span> ]; <span class="keyword">then</span></span><br></pre></td></tr></table></figure><p>æ˜¾ç„¶ [ å’Œ â€œscpâ€ ä¸ç›¸ç­‰å¹¶ä¸”ç¼ºå°‘äº† [ ç¬¦å·ï¼Œæ‰€ä»¥æŠ¥äº†è¿™æ ·çš„é”™è¯¯ã€‚æ£€æŸ¥ç¨‹åºå‘ç°æ˜¯ OPERATION åœ¨å£°æ˜çš„æ—¶å€™å†™é”™å¯¼è‡´çš„ã€‚è¿™æ ·çš„é”™è¯¯è¿˜æ˜¯å¾ˆéšè”½çš„ï¼Œæ‰€ä»¥ä¸ºäº†å¢å¼ºç¨‹åºçš„å¥å£®æ€§å¯ä»¥ç”¨ä¸‹é¢çš„å†™æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;OPERATION&#125;</span>x&quot;</span> == <span class="string">&quot;scpx&quot;</span> ]; <span class="keyword">then</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac OS Shell è¿œç¨‹æ‰§è¡Œ Shell å‘½ä»¤</title>
      <link href="/2025/09/29/Mac-OS-Shell-%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C-Shell-%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/09/29/Mac-OS-Shell-%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C-Shell-%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰å†™è¿‡ä¸€ä¸ª Linux ä¸‹è¿œç¨‹æ‰§è¡Œ Shell çš„è„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">SLAVES=(192.168.1.133 192.168.1.134)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> slave <span class="keyword">in</span> <span class="variable">$&#123;SLAVES[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;==================<span class="variable">$slave</span>======================&quot;</span></span><br><span class="line">  ssh root@<span class="variable">$slave</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">    ls -l /usr/</span></span><br><span class="line"><span class="string">  EOF</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæ‰€æœ‰çš„ slave éƒ½é…ç½®è¿‡å…å¯†ç ç™»é™†ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ä¸ªè„šæœ¬åœ¨ Mac OS ä¸‹æ‰§è¡Œçš„æ—¶å€™ä¸€ç›´æŠ¥é”™ï¼Œä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t.sh: line 12: syntax error: unexpected end of file</span><br></pre></td></tr></table></figure><p>ç»è¿‡å°è¯•å‘ç°åœ¨ Mac OS ä¸‹ï¼Œè¿œç¨‹æ‰§è¡Œå‘½ä»¤å‰ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¿®æ”¹åè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">SLAVES=(192.168.1.133 192.168.1.134)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> slave <span class="keyword">in</span> <span class="variable">$&#123;SLAVES[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> â€œ==================<span class="variable">$slave</span>======================â€</span><br><span class="line">ssh root@<span class="variable">$slave</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">ls -l /usr/</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡ŒæˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Shell </tag>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£… Nginx</title>
      <link href="/2025/09/29/%E5%AE%89%E8%A3%85-Nginx/"/>
      <url>/2025/09/29/%E5%AE%89%E8%A3%85-Nginx/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äº Linux å¹³å°ï¼ŒNginx å®‰è£…åŒ… å¯ä»¥ä» nginx.org ä¸‹è½½ã€‚</p><p>Ubuntu:</p><table><thead><tr><th>ç‰ˆæœ¬</th><th>Codename</th><th>æ”¯æŒå¹³å°</th></tr></thead><tbody><tr><td>12.04</td><td>precise</td><td>x86_64, i386</td></tr><tr><td>14.04</td><td>trusty</td><td>x86_64, i386, aarch64&#x2F;arm64</td></tr><tr><td>15.10</td><td>wily</td><td>x86_64, i386</td></tr></tbody></table><p>åœ¨ Debian&#x2F;Ubuntu ç³»ç»Ÿä¸Šï¼Œä¸ºäº†ç”Ÿæ•ˆ nginx ä»“åº“çš„ç­¾åï¼Œå¹¶ä¸”æ¶ˆé™¤ nginx å®‰è£…è¿‡ç¨‹ä¸­ä¸¢å¤± PGP å¯†é’¥çš„å‘Šè­¦ï¼Œå¿…é¡»å‘ apt ç¨‹åºå¯†é’¥ç¯æ·»åŠ ç”¨æ¥ç­¾å nginx å®‰è£…åŒ…å’Œä»“åº“çš„å¯†é’¥ã€‚è¯·ä» nginx ç½‘ç«™ä¸‹è½½å¯†é’¥ï¼Œå¹¶ä¸”ç”¨ä¸‹é¢çš„å‘½ä»¤æ·»åŠ åˆ° apt ç¨‹åºå¯†é’¥ç¯ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-key add nginx_signing.key</span><br></pre></td></tr></table></figure><p>ç”¨ä¸Šè¡¨ä¸­ Ubuntu å‘è¡Œç‰ˆæœ¬çš„ codename æ›¿æ¢ codename ï¼Œç„¶åæ·»åŠ ä¸‹é¢å†…å®¹åˆ° &#x2F;etc&#x2F;apt&#x2F;sources.list æ–‡ä»¶çš„æœ«å°¾ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://nginx.org/packages/ubuntu/ codename nginx</span><br><span class="line">deb-src http://nginx.org/packages/ubuntu/ codename nginx</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä¸€ä¸‹å‘½ä»¤å®Œæˆå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install nginx</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Nginx </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin å®‰è£… Nginx</title>
      <link href="/2025/09/28/Deepin-%E5%AE%89%E8%A3%85-Nginx/"/>
      <url>/2025/09/28/Deepin-%E5%AE%89%E8%A3%85-Nginx/</url>
      
        <content type="html"><![CDATA[<p>ç³»ç»Ÿç‰ˆæœ¬ï¼šDeepin 23.10ã€‚</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Nginxï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install nginx</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼ŒNginx é»˜è®¤ä¼šå¯åŠ¨ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Nginxï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start nginx.service</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® <a href="http://localhost/">http://localhost</a> çœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºçš„ Nginx æ¬¢è¿é¡µé¢åˆ™è¯´æ˜å®‰è£…å¹¶å¯åŠ¨æˆåŠŸã€‚<br><img src="/images/202509/45.png"></p><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°† Nginx è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> nginx.service</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Nginx </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Giteeé…ç½®SSHå…¬é’¥</title>
      <link href="/2025/09/28/Gitee%E9%85%8D%E7%BD%AESSH%E5%85%AC%E9%92%A5/"/>
      <url>/2025/09/28/Gitee%E9%85%8D%E7%BD%AESSH%E5%85%AC%E9%92%A5/</url>
      
        <content type="html"><![CDATA[<p>é‡‡ç”¨ SSH åè®®åŒæ­¥ Git ä»“åº“ä»£ç çš„å¥½å¤„å°±æ˜¯é«˜æ•ˆã€‚åœ¨é…ç½®å¥½ SSH å…¬é’¥åï¼Œä¸éœ€è¦æ¯æ¬¡æ“ä½œéƒ½è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼ˆä¸»è¦é’ˆå¯¹å‘½ä»¤è¡Œæ¥è¯´ï¼‰ã€‚</p><p>ä»¥æˆ‘ä¸ªäººé¡¹ç›®ä¸ºä¾‹ã€‚</p><h1 id="ç”Ÿæˆ-SSH-å…¬é’¥"><a href="#ç”Ÿæˆ-SSH-å…¬é’¥" class="headerlink" title="ç”Ÿæˆ SSH å…¬é’¥"></a>ç”Ÿæˆ SSH å…¬é’¥</h1><ol><li>é€šè¿‡å‘½ä»¤ ssh-keygen ç”Ÿæˆ SSH Keyï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;zhangjc&quot;</span></span><br></pre></td></tr></table></figure><ul><li>-t key ç±»å‹</li><li>-C æ³¨é‡Š</li><li>ä¸­é—´é€šè¿‡ä¸‰æ¬¡å›è½¦é”®ç¡®å®šï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t ed25519 -C <span class="string">&quot;zhangjc&quot;</span></span><br><span class="line">Generating public/private ed25519 key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/home/zhangjc/.ssh/id_ed25519): </span><br><span class="line">Created directory <span class="string">&#x27;/home/zhangjc/.ssh&#x27;</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /home/zhangjc/.ssh/id_ed25519</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /home/zhangjc/.ssh/id_ed25519.pub</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:C/YxTF2P+qAR/xI0wfOkw13qvTo9siQGr+/erkOyvFA zhangjc</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+--[ED25519 256]--+</span></span><br><span class="line"><span class="string">|         .. .    |</span></span><br><span class="line"><span class="string">|         .oo.o.  |</span></span><br><span class="line"><span class="string">|        o.+*.o.  |</span></span><br><span class="line"><span class="string">|       o ++o+    |</span></span><br><span class="line"><span class="string">|      o E =o .   |</span></span><br><span class="line"><span class="string">|     . +.O.=. .  |</span></span><br><span class="line"><span class="string">|      ..++= +. . |</span></span><br><span class="line"><span class="string">|       .oo.=o +  |</span></span><br><span class="line"><span class="string">|        o==+== . |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure><ol start="2"><li>æŸ¥çœ‹ç”Ÿæˆçš„ SSH å…¬é’¥å’Œç§é’¥ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> ~/.ssh/</span><br><span class="line">id_ed25519  id_ed25519.pub</span><br></pre></td></tr></table></figure><ul><li>ç§é’¥æ–‡ä»¶ id_ed25519</li><li>å…¬é’¥æ–‡ä»¶ id_ed25519.pub</li></ul><ol start="3"><li>æŸ¥çœ‹å…¬é’¥ï¼Œæ˜¾ç¤ºå†…å®¹å¦‚ä¸‹ï¼ˆå…¬é’¥ä¸­é—´éƒ¨åˆ†ä»¥*å·åšäº†æ›¿æ¢ï¼‰ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> ~/.ssh/id_ed25519.pub</span><br><span class="line">ssh-ed25519 AAAAC***nW zhangjc</span><br></pre></td></tr></table></figure><h1 id="è®¾ç½®è´¦æˆ·-SSH-å…¬é’¥"><a href="#è®¾ç½®è´¦æˆ·-SSH-å…¬é’¥" class="headerlink" title="è®¾ç½®è´¦æˆ· SSH å…¬é’¥"></a>è®¾ç½®è´¦æˆ· SSH å…¬é’¥</h1><p>é€šè¿‡ä¸»é¡µå³ä¸Šè§’ ã€Œä¸ªäººè®¾ç½®ã€-&gt;ã€Œå®‰å…¨è®¾ç½®ã€-&gt;ã€ŒSSH å…¬é’¥ã€-&gt;ã€Œæ·»åŠ å…¬é’¥ã€ ï¼Œæ·»åŠ ç”Ÿæˆçš„ public key æ·»åŠ åˆ°å½“å‰è´¦æˆ·ä¸­ã€‚</p><p>è¾“å…¥æ ‡é¢˜å’Œåˆšæ‰å…¬é’¥çš„å†…å®¹ï¼Œä¿å­˜å³å¯ã€‚<br><img src="/images/202509/44.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Gitee </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®±çº¿å›¾ç®€ä»‹</title>
      <link href="/2025/09/28/%E7%AE%B1%E7%BA%BF%E5%9B%BE%E7%AE%80%E4%BB%8B/"/>
      <url>/2025/09/28/%E7%AE%B1%E7%BA%BF%E5%9B%BE%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><p>ç®±çº¿å›¾ï¼ˆBoxplotï¼‰åˆç§°ä¸ºç®±å½¢å›¾ã€ç›’é¡»å›¾æˆ–ç›’å¼å›¾ï¼Œä¸€ç§ç”¨äºå±•ç¤ºä¸€ç»„æˆ–å¤šç»„æ•°æ®åˆ†æ•£æƒ…å†µçš„ç»Ÿè®¡å›¾ã€‚</p><h1 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h1><ul><li>å±•ç¤ºæ•°æ®çš„é›†ä¸­è¶‹åŠ¿ï¼šç®±çº¿å›¾çš„ä¸­ä½æ•°åæ˜ æ•°æ®é›†ä¸­è¶‹åŠ¿ã€‚è‹¥ä¸­ä½æ•°åœ¨ç®±ä½“ä¸­å¿ƒï¼Œæ•°æ®åˆ†å¸ƒå¯¹ç§°ï¼›è‹¥ä¸åœ¨ä¸­å¿ƒï¼Œåˆ™æ•°æ®åæ–œã€‚</li><li>å±•ç¤ºæ•°æ®çš„åˆ†æ•£ç¨‹åº¦ï¼šç®±ä½“çš„é•¿åº¦ï¼ˆå³Q3ä¸Q1çš„é—´è·ï¼‰å±•ç¤ºäº†æ•°æ®çš„åˆ†æ•£ç¨‹åº¦ï¼Œç®±ä½“é•¿åº¦è¶Šé•¿ï¼Œè¯´æ˜æ•°æ®è¶Šåˆ†æ•£ã€‚</li><li>æ˜¾ç¤ºå¼‚å¸¸å€¼ï¼šç®±çº¿å›¾å»¶ä¼¸å‡ºå»çš„é¡»è¡¨ç¤ºæ­£å¸¸èŒƒå›´å†…çš„æœ€å¤§å€¼ä¸æœ€å°å€¼ï¼Œè¶…å‡ºæ­£å¸¸èŒƒå›´çš„æ•°æ®ç‚¹åˆ™æ˜¯å¼‚å¸¸å€¼ï¼ˆç”¨æ˜Ÿå·æˆ–åœ†ç‚¹è¡¨ç¤ºï¼‰ã€‚</li><li>æ˜¾ç¤ºæ•°æ®çš„å¯¹ç§°æ€§ä¸åæ€ï¼šè‹¥ç®±ä½“ä¸é¡»çº¿é•¿åº¦å‡åŒ€ï¼Œæ•°æ®åˆ†å¸ƒå¯¹ç§°ï¼›è‹¥é¡»çº¿é•¿çŸ­ä¸ä¸€æˆ–ç®±ä½“åæ–œï¼Œåˆ™æ•°æ®åˆ†å¸ƒå‘ˆç°åæ€ã€‚</li></ul><h1 id="å¦‚ä½•çœ‹ç®±çº¿å›¾"><a href="#å¦‚ä½•çœ‹ç®±çº¿å›¾" class="headerlink" title="å¦‚ä½•çœ‹ç®±çº¿å›¾"></a>å¦‚ä½•çœ‹ç®±çº¿å›¾</h1><p><img src="/images/202509/43.png"></p><ol><li>æ¨ªåæ ‡ï¼šæ ·æœ¬ç»„</li><li>çºµåæ ‡ï¼šå¯¹åº”ä¸šåŠ¡çš„æ•°æ®</li><li>IQRï¼ˆå››åˆ†ä½è·ï¼‰ï¼šæ˜¯ç»Ÿè®¡ç¦»æ•£åº¦çš„åº¦é‡ï¼ŒIQR&#x3D;Q3-Q1</li><li>Maxå€¼ï¼ˆQ3+1.5IQRï¼‰ï¼šæ­£å¸¸èŒƒå›´å†…ï¼Œæ•°æ®çš„æœ€å¤§å€¼</li><li>Q3ï¼ˆç¬¬ä¸‰å››åˆ†ä½æ•°ï¼‰ï¼šä½äº75%çš„æ•°æ®ç‚¹ï¼ˆæœ‰75%çš„æ•°æ®å°äºè¯¥å€¼ï¼‰</li><li>Q2ï¼ˆä¸­ä½æ•°ï¼‰ï¼šä½äº50%çš„æ•°æ®ç‚¹ï¼Œå³å°†æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†çš„ä¸­å¿ƒå€¼</li><li>Q1ï¼ˆç¬¬ä¸€å››åˆ†ä½æ•°ï¼‰ï¼šä½äº25%çš„æ•°æ®ç‚¹ï¼ˆæœ‰25%çš„æ•°æ®å°äºè¯¥å€¼ï¼‰</li><li>Minå€¼ï¼ˆQ1-1.5IQRï¼‰ï¼šæ­£å¸¸èŒƒå›´å†…ï¼Œæ•°æ®çš„æœ€å°å€¼</li><li>å¼‚å¸¸å€¼ï¼šè¶…å‡ºæ­£å¸¸èŒƒå›´çš„æ•°æ®ç‚¹ï¼ˆMaxå€¼~Minå€¼ä¹‹é—´ç†è®ºä¸Šä¸ºæ­£æ€åˆ†å¸ƒçš„99.3%ç½®ä¿¡åŒºé—´ï¼‰</li></ol><h2 id="é€‚åˆç®±çº¿å›¾å±•ç¤ºçš„æ•°æ®"><a href="#é€‚åˆç®±çº¿å›¾å±•ç¤ºçš„æ•°æ®" class="headerlink" title="é€‚åˆç®±çº¿å›¾å±•ç¤ºçš„æ•°æ®"></a>é€‚åˆç®±çº¿å›¾å±•ç¤ºçš„æ•°æ®</h2><ul><li>ç®±çº¿å›¾é€‚ç”¨äºè¿ç»­å‹å˜é‡ï¼Œä¸é€‚ç”¨äºç¦»æ•£å‹å˜é‡ï¼ˆä½†åªæœ‰ä¸€ä¸ªè¿ç»­å‹å˜é‡æ—¶ï¼Œæ›´é€‚åˆä½¿ç”¨ç›´æ–¹å›¾ï¼‰ã€‚</li><li>å½“æ•°æ®ä¸­å­˜åœ¨è¶…å¤§æˆ–è¶…å°å¼‚å¸¸å€¼æ—¶ï¼Œç®±çº¿å›¾å¯èƒ½å‘ˆç°æ‰å¹³å½¢æ€æˆ–åªå‰©ä¸€çº¿ï¼Œæ­¤æ—¶ä¸é€‚åˆä½¿ç”¨ç®±çº¿å›¾ã€‚</li><li>æ•°æ®ä¸­å­˜åœ¨å¤§é‡å¼‚å¸¸å€¼æ—¶ï¼Œç®±çº¿å›¾å½¢çŠ¶å¯èƒ½å¾ˆå¥‡æ€ªï¼Œä¸é€‚åˆä½¿ç”¨ã€‚</li><li>ç®±çº¿å›¾æœ€é€‚åˆç”¨äºæ¯”è¾ƒï¼Œç»“åˆå®šæ€§æ•°æ®ï¼Œç»˜åˆ¶åˆ†ç»„ç®±çº¿å›¾ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®åˆ†æ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å››åˆ†ä½æ•°ç®€ä»‹</title>
      <link href="/2025/09/28/%E5%9B%9B%E5%88%86%E4%BD%8D%E6%95%B0%E7%AE%80%E4%BB%8B/"/>
      <url>/2025/09/28/%E5%9B%9B%E5%88%86%E4%BD%8D%E6%95%B0%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><p>å››åˆ†ä½æ•°ä¹Ÿç§°å››åˆ†ä½ç‚¹ï¼Œæ˜¯æŒ‡åœ¨ç»Ÿè®¡å­¦ä¸­æŠŠæ‰€æœ‰æ•°å€¼ç”±å°åˆ°å¤§æ’åˆ—å¹¶åˆ†æˆå››ç­‰ä»½ï¼Œå¤„äºä¸‰ä¸ªåˆ†å‰²ç‚¹ä½ç½®çš„æ•°å€¼ã€‚å¤šåº”ç”¨äºç»Ÿè®¡å­¦ä¸­çš„ç®±çº¿å›¾ç»˜åˆ¶ã€‚å®ƒæ˜¯ä¸€ç»„æ•°æ®æ’åºåå¤„äº25%å’Œ75%ä½ç½®ä¸Šçš„å€¼ã€‚å››åˆ†ä½æ•°æ˜¯é€šè¿‡3ä¸ªç‚¹å°†å…¨éƒ¨æ•°æ®ç­‰åˆ†ä¸º4éƒ¨åˆ†ï¼Œå…¶ä¸­æ¯éƒ¨åˆ†åŒ…å«25%çš„æ•°æ®ã€‚å¾ˆæ˜¾ç„¶ï¼Œä¸­é—´çš„å››åˆ†ä½æ•°å°±æ˜¯ä¸­ä½æ•°ï¼Œå› æ­¤é€šå¸¸æ‰€è¯´çš„å››åˆ†ä½æ•°æ˜¯æŒ‡å¤„åœ¨25%ä½ç½®ä¸Šçš„æ•°å€¼ï¼ˆç§°ä¸ºä¸‹å››åˆ†ä½æ•°ï¼‰å’Œå¤„åœ¨75%ä½ç½®ä¸Šçš„æ•°å€¼ï¼ˆç§°ä¸ºä¸Šå››åˆ†ä½æ•°ï¼‰ã€‚ä¸ä¸­ä½æ•°çš„è®¡ç®—æ–¹æ³•ç±»ä¼¼ï¼Œæ ¹æ®æœªåˆ†ç»„æ•°æ®è®¡ç®—å››åˆ†ä½æ•°æ—¶ï¼Œé¦–å…ˆå¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œç„¶åç¡®å®šå››åˆ†ä½æ•°æ‰€åœ¨çš„ä½ç½®ï¼Œè¯¥ä½ç½®ä¸Šçš„æ•°å€¼å°±æ˜¯å››åˆ†ä½æ•°ã€‚ä¸ä¸­ä½æ•°ä¸åŒçš„æ˜¯ï¼Œå››åˆ†ä½æ•°ä½ç½®çš„ç¡®å®šæ–¹æ³•æœ‰å‡ ç§ï¼Œæ¯ç§æ–¹æ³•å¾—åˆ°çš„ç»“æœä¼šæœ‰ä¸€å®šå·®å¼‚ï¼Œä½†å·®å¼‚ä¸ä¼šå¾ˆå¤§ã€‚</p><p>ç¬¬ä¸€å››åˆ†ä½æ•° ï¼ˆQ1ï¼‰ï¼Œåˆç§°â€œè¾ƒå°å››åˆ†ä½æ•°â€ï¼Œç­‰äºè¯¥æ ·æœ¬ä¸­æ‰€æœ‰æ•°å€¼ç”±å°åˆ°å¤§æ’åˆ—åç¬¬25%çš„æ•°å­—ã€‚</p><p>ç¬¬äºŒå››åˆ†ä½æ•° ï¼ˆQ2ï¼‰ï¼Œåˆç§°â€œä¸­ä½æ•°â€ï¼Œç­‰äºè¯¥æ ·æœ¬ä¸­æ‰€æœ‰æ•°å€¼ç”±å°åˆ°å¤§æ’åˆ—åç¬¬50%çš„æ•°å­—ã€‚</p><p>ç¬¬ä¸‰å››åˆ†ä½æ•° ï¼ˆQ3ï¼‰ï¼Œåˆç§°â€œè¾ƒå¤§å››åˆ†ä½æ•°â€ï¼Œç­‰äºè¯¥æ ·æœ¬ä¸­æ‰€æœ‰æ•°å€¼ç”±å°åˆ°å¤§æ’åˆ—åç¬¬75%çš„æ•°å­—ã€‚</p><p>ç¬¬ä¸‰å››åˆ†ä½æ•°ä¸ç¬¬ä¸€å››åˆ†ä½æ•°çš„å·®è·åˆç§°å››åˆ†ä½è·ï¼ˆInterQuartile Rangeï¼ŒIQRï¼‰ã€‚</p><h1 id="è®¡ç®—"><a href="#è®¡ç®—" class="headerlink" title="è®¡ç®—"></a>è®¡ç®—</h1><p>é¦–å…ˆç¡®å®šå››åˆ†ä½æ•°çš„ä½ç½®ï¼š</p><p>Q1çš„ä½ç½®&#x3D; ï¼ˆn+1ï¼‰ Ã— 0.25</p><p>Q2çš„ä½ç½®&#x3D; ï¼ˆn+1ï¼‰ Ã— 0.5</p><p>Q3çš„ä½ç½®&#x3D; ï¼ˆn+1ï¼‰ Ã— 0.75</p><p>nè¡¨ç¤ºé¡¹æ•°ã€‚</p><p>åœ¨ä¸Šä¾‹ä¸­ï¼ˆn+1ï¼‰æ°å¥½æ˜¯4çš„æ•´æ•°å€ï¼Œä½†åœ¨å¾ˆå¤šå®é™…å·¥ä½œä¸­ä¸ä¸€å®šéƒ½æ˜¯æ•´æ•°å€ã€‚è¿™æ ·å››åˆ†ä½æ•°çš„ä½ç½®å°±å¸¦æœ‰å°æ•°ï¼Œéœ€è¦è¿›ä¸€æ­¥ç ”ç©¶ã€‚å¸¦æœ‰å°æ•°çš„ä½ç½®ä¸ä½ç½®å‰åæ ‡å¿—å€¼æœ‰ä¸€å®šçš„å…³ç³»ï¼šå››åˆ†ä½æ•°æ˜¯ä¸è¯¥å°æ•°ç›¸é‚»çš„ä¸¤ä¸ªæ•´æ•°ä½ç½®ä¸Šçš„æ ‡å¿—å€¼çš„å¹³å‡æ•°ï¼Œæƒæ•°çš„å¤§å°å–å†³äºä¸¤ä¸ªæ•´æ•°ä½ç½®çš„è¿œè¿‘ï¼Œè·ç¦»è¶Šè¿‘ï¼Œæƒæ•°è¶Šå¤§ï¼Œè·ç¦»è¶Šè¿œï¼Œæƒæ•°è¶Šå°ï¼Œæƒæ•°ä¹‹å’Œåº”ç­‰äº1ã€‚</p><p>å¯¹äºå››åˆ†ä½æ•°çš„ç¡®å®šï¼Œæœ‰ä¸åŒçš„æ–¹æ³•ï¼Œå¦å¤–ä¸€ç§æ–¹æ³•åŸºäºN-1 åŸºç¡€ã€‚å³</p><p>Q1çš„ä½ç½®&#x3D;1+ï¼ˆn-1ï¼‰x 0.25</p><p>Q2çš„ä½ç½®&#x3D;1+ï¼ˆn-1ï¼‰x 0.5</p><p>Q3çš„ä½ç½®&#x3D;1+ï¼ˆn-1ï¼‰x 0.75</p><h1 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h1><p>ä¸è®ºQ1ï¼ŒQ2ï¼ŒQ3çš„å˜å¼‚é‡æ•°æ•°å€¼ä¸ºä½•ï¼Œå‡è§†ä¸ºä¸€ä¸ªåˆ†ç•Œç‚¹ï¼Œä»¥æ­¤å°†æ€»æ•°åˆ†æˆå››ä¸ªç›¸ç­‰éƒ¨ä»½ï¼Œå¯ä»¥é€šè¿‡Q1ï¼ŒQ3æ¯”è¾ƒï¼Œåˆ†æå…¶æ•°æ®å˜é‡çš„è¶‹åŠ¿ã€‚</p><p>å››åˆ†ä½æ•°åœ¨ç»Ÿè®¡å­¦ä¸­çš„ç®±çº¿å›¾ç»˜åˆ¶æ–¹é¢åº”ç”¨ä¹Ÿå¾ˆå¹¿æ³›ã€‚æ‰€è°“ç®±çº¿å›¾å°±æ˜¯ ç”±ä¸€ç»„æ•°æ®5 ä¸ªç‰¹å¾ç»˜åˆ¶çš„ä¸€ä¸ªç®±å­å’Œä¸¤æ¡çº¿æ®µçš„å›¾å½¢ï¼Œè¿™ç§ç›´è§‚çš„ç®±çº¿å›¾ä¸ä»…èƒ½åæ˜ å‡ºä¸€ç»„æ•°æ®çš„åˆ†å¸ƒç‰¹å¾ï¼Œè€Œä¸”è¿˜å¯ä»¥è¿›è¡Œå¤šç»„æ•°æ®çš„åˆ†ææ¯”è¾ƒã€‚è¿™äº”ä¸ªç‰¹å¾å€¼ï¼Œå³æ•°æ®çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€ä¸­ä½æ•°å’Œä¸¤ä¸ªå››åˆ†ä½æ•°ã€‚å³ï¼š<br><img src="/images/202509/42.jpeg"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®åˆ†æ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠ“åŒ…å·¥å…·ï¼šMitmproxy</title>
      <link href="/2025/09/28/%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%9AMitmproxy/"/>
      <url>/2025/09/28/%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%EF%BC%9AMitmproxy/</url>
      
        <content type="html"><![CDATA[<p>Mitmproxy æ˜¯ä¸€ç»„å·¥å…·ï¼Œå®ƒä»¬ä¸º HTTP&#x2F;1ã€ HTTP&#x2F;2 å’Œ WebSocket æä¾›äº¤äº’å¼ã€æ”¯æŒ SSL&#x2F;TLS çš„æ‹¦æˆªä»£ç†ã€‚</p><h1 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h1><ul><li>æ‹¦æˆª HTTP å’Œ HTTPS è¯·æ±‚å’Œå“åº”å¹¶åŠ¨æ€ä¿®æ”¹å®ƒä»¬ã€‚</li><li>ä¿å­˜å®Œæ•´çš„ HTTP å¯¹è¯ï¼Œä»¥ä¾¿ä»¥åé‡æ”¾å’Œåˆ†æã€‚</li><li>é‡æ”¾ HTTP ä¼šè¯çš„å®¢æˆ·ç«¯ã€‚</li><li>é‡æ”¾ä»¥å‰è®°å½•çš„æœåŠ¡å™¨çš„ HTTP å“åº”ã€‚</li><li>åå‘ä»£ç†æ¨¡å¼å°†æµé‡è½¬å‘åˆ°æŒ‡å®šçš„æœåŠ¡å™¨ã€‚</li><li>MacOS å’Œ Linux ä¸Šçš„é€æ˜ä»£ç†æ¨¡å¼ã€‚</li><li>ä½¿ç”¨ Python è„šæœ¬å¯¹ HTTP æµé‡è¿›è¡Œæ›´æ”¹ã€‚</li><li>ç”¨äºæ‹¦æˆªåŠ¨æ€ç”Ÿæˆçš„ SSL&#x2F;TLS è¯ä¹¦ã€‚</li><li>æ›´å¤šç‰¹æ€§ï¼Œè¯·å‚è€ƒï¼š<a href="https://docs.mitmproxy.org/stable/overview-features/">Mitmproxy å®˜æ–¹æ–‡æ¡£</a>ã€‚</li></ul><h1 id="ä¸‰ä¸ªå¼ºå¤§çš„æ ¸å¿ƒå·¥å…·"><a href="#ä¸‰ä¸ªå¼ºå¤§çš„æ ¸å¿ƒå·¥å…·" class="headerlink" title="ä¸‰ä¸ªå¼ºå¤§çš„æ ¸å¿ƒå·¥å…·"></a>ä¸‰ä¸ªå¼ºå¤§çš„æ ¸å¿ƒå·¥å…·</h1><p>Mitmproxy é¡¹ç›®æ˜¯ä¸€ç»„å±•ç¤ºé€šç”¨çš„åº•å±‚åŠŸèƒ½çš„å‰ç«¯å·¥å…·ã€‚å½“è°ˆè®ºâ€œmitmproxyâ€æ—¶ï¼Œé€šå¸¸æŒ‡çš„æ˜¯è¿™ä¸‰ä¸ªå·¥å…·ä¸­çš„ä»»ä½•ä¸€ä¸ªâ€”â€”å®ƒä»¬åªæ˜¯åŒä¸€ä¸ªæ ¸å¿ƒä»£ç†çš„ä¸åŒå‰ç«¯ã€‚</p><ul><li>mitmproxy æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„ã€æ”¯æŒ SSL&#x2F;TLS çš„æ‹¦æˆªä»£ç†ï¼Œç”¨äº HTTP&#x2F;1ã€ HTTP&#x2F;2 å’Œ WebSocket çš„æ§åˆ¶å°æ¥å£ã€‚</li><li>mitmweb æ˜¯ mitmproxy çš„ä¸€ä¸ªåŸºäºWebçš„æ¥å£ã€‚</li><li>mitmdump æ˜¯ mitmproxy çš„å‘½ä»¤è¡Œç‰ˆæœ¬ã€‚ç”¨æˆ· HTTP çš„ tcpdumpã€‚</li></ul><p>åœ¨ Mitmproxy å®˜ç½‘ å¯ä»¥æ‰¾åˆ°å‘è¡Œçš„è½¯ä»¶åŒ…ã€‚å¼€å‘ä¿¡æ¯å’Œæºä»£ç å¯ä»¥åœ¨ GitHub å­˜å‚¨åº“ä¸­æ‰¾åˆ°ã€‚</p><h2 id="mitmproxy"><a href="#mitmproxy" class="headerlink" title="mitmproxy"></a>mitmproxy</h2><p><img src="/images/202509/40.png"></p><p>mitmproxy æ˜¯ä¸€ä¸ªæ§åˆ¶å°å·¥å…·ï¼Œå…è®¸äº¤äº’å¼æ£€æŸ¥å’Œä¿®æ”¹ HTTP æµé‡ã€‚å®ƒä¸ mitmdump çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œæ‰€æœ‰æµéƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒç”¨äºè·å–å’Œæ“ä½œå°å‹æ ·æœ¬ã€‚åœ¨ mitmproxy çª—å£ä¸­ä½¿ç”¨ ï¼Ÿ å¿«æ·é”®æŸ¥çœ‹ä¸Šä¸‹æ–‡æ–‡æ¡£ã€‚</p><h2 id="mitmweb"><a href="#mitmweb" class="headerlink" title="mitmweb"></a>mitmweb</h2><p><img src="/images/202509/41.png"></p><p>mitmweb æ˜¯ mitmproxy çš„åŸºäº web çš„ç”¨æˆ·ç•Œé¢ï¼Œå…è®¸äº¤äº’å¼æ£€æŸ¥å’Œä¿®æ”¹ HTTP æµé‡ã€‚ä¸ mitmproxy ä¸€æ ·ï¼Œå®ƒä¸ mitmdump çš„ä¸åŒä¹‹å¤„åœ¨äºæ‰€æœ‰æµéƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒç”¨äºè·å–å’Œæ“ä½œå°å‹æ ·æœ¬ã€‚</p><p>Mitmweb ç›®å‰å¤„äºæµ‹è¯•é˜¶æ®µã€‚å®ƒå¯¹äºå½“å‰æš´éœ²åœ¨ UI ä¸­çš„æ‰€æœ‰ç‰¹æ€§éƒ½æ˜¯ç¨³å®šçš„ï¼Œä½†æ˜¯å®ƒä»ç„¶é—æ¼äº†å¾ˆå¤š mitmproxy çš„ç‰¹æ€§ã€‚</p><h2 id="mitmdump"><a href="#mitmdump" class="headerlink" title="mitmdump"></a>mitmdump</h2><p>mitmdump æ˜¯ mitmproxy çš„å‘½ä»¤è¡Œä¼™ä¼´ã€‚å®ƒæä¾›äº†ç±»ä¼¼ tcpdump çš„åŠŸèƒ½ï¼Œå…è®¸æŸ¥çœ‹ã€è®°å½•å’Œä»¥ç¼–ç¨‹æ–¹å¼è½¬æ¢ HTTP æµé‡ã€‚å‘½ä»¤æ·»åŠ  â€“help æ ‡è¯†æŸ¥çœ‹è¾“å‡ºçš„å®Œæ•´æ–‡æ¡£ã€‚</p><h3 id="ç¤ºä¾‹ï¼šä¿å­˜æµé‡"><a href="#ç¤ºä¾‹ï¼šä¿å­˜æµé‡" class="headerlink" title="ç¤ºä¾‹ï¼šä¿å­˜æµé‡"></a>ç¤ºä¾‹ï¼šä¿å­˜æµé‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mitmdump -w outfile</span><br></pre></td></tr></table></figure><p>åœ¨ä»£ç†æ¨¡å¼ä¸‹å¯åŠ¨ mitmdumpï¼Œå¹¶å°†æ‰€æœ‰æµé‡å†™å…¥ outfileã€‚</p><h3 id="è¿‡æ»¤ä¿å­˜çš„æµé‡"><a href="#è¿‡æ»¤ä¿å­˜çš„æµé‡" class="headerlink" title="è¿‡æ»¤ä¿å­˜çš„æµé‡"></a>è¿‡æ»¤ä¿å­˜çš„æµé‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mitmdump -nr infile -w outfile <span class="string">&quot;~m post&quot;</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨ mitmdump è€Œä¸ç»‘å®šåˆ°ä»£ç†ç«¯å£ï¼ˆ-nï¼‰ï¼Œä» infile ä¸­è¯»å–æ‰€æœ‰æµï¼Œåº”ç”¨æŒ‡å®šçš„ç­›é€‰å™¨è¡¨è¾¾å¼ï¼ˆåªåŒ¹é… POSTï¼‰ï¼Œå¹¶å†™å…¥ outfileã€‚</p><h3 id="å®¢æˆ·ç«¯é‡æ”¾"><a href="#å®¢æˆ·ç«¯é‡æ”¾" class="headerlink" title="å®¢æˆ·ç«¯é‡æ”¾"></a>å®¢æˆ·ç«¯é‡æ”¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mitmdump -nC outfile</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ mitmdump è€Œä¸ç»‘å®šåˆ°ä»£ç†ç«¯å£ï¼ˆ-nï¼‰ï¼Œç„¶åé‡æ”¾æ¥è‡ª outfile ï¼ˆ-C filenameï¼‰çš„æ‰€æœ‰è¯·æ±‚ã€‚æ ‡è¯†ä»¥æ˜¾è€Œæ˜“è§çš„æ–¹å¼ç»„åˆåœ¨ä¸€èµ·ï¼Œå› æ­¤å¯ä»¥é‡æ”¾æ¥è‡ªä¸€ä¸ªæ–‡ä»¶çš„è¯·æ±‚ï¼Œå¹¶å°†ç»“æœæµå†™å…¥å¦ä¸€ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mitmdump -nC srcfile -w dstfile</span><br></pre></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯è¯·å‚è§ <a href="https://docs.mitmproxy.org/stable/overview-features/#client-side-replay">client-side replay</a>ã€‚</p><h3 id="è¿è¡Œè„šæœ¬"><a href="#è¿è¡Œè„šæœ¬" class="headerlink" title="è¿è¡Œè„šæœ¬"></a>è¿è¡Œè„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mitmdump -s examples/simple/add_header.py</span><br></pre></td></tr></table></figure><p>è¿™å°†è¿è¡Œ add_header.py ç¤ºä¾‹è„šæœ¬ï¼Œè¯¥è„šæœ¬åªæ˜¯å‘æ‰€æœ‰å“åº”æ·»åŠ ä¸€ä¸ªæ–°çš„å¤´ã€‚</p><h3 id="è„šæœ¬æ•°æ®è½¬æ¢"><a href="#è„šæœ¬æ•°æ®è½¬æ¢" class="headerlink" title="è„šæœ¬æ•°æ®è½¬æ¢"></a>è„šæœ¬æ•°æ®è½¬æ¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mitmdump -ns examples/simple/add_header.py -r srcfile -w dstfile</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä» srcfile åŠ è½½æµï¼Œæ ¹æ®æŒ‡å®šçš„è„šæœ¬å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œç„¶åå°†å…¶å†™å› dstfileã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
            <tag> ç½‘ç»œçˆ¬è™« </tag>
            
            <tag> Mitmproxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹Jenkinsæ§åˆ¶å°ä¸­æ–‡ä¹±ç </title>
      <link href="/2025/09/28/Windows%E4%B8%8BJenkins%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/"/>
      <url>/2025/09/28/Windows%E4%B8%8BJenkins%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>é—®é¢˜æƒ…å†µå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202509/38.png"></p><h1 id="ç¯å¢ƒä¿¡æ¯"><a href="#ç¯å¢ƒä¿¡æ¯" class="headerlink" title="ç¯å¢ƒä¿¡æ¯"></a>ç¯å¢ƒä¿¡æ¯</h1><ul><li>Windows 11 å®¶åº­ä¸­æ–‡ç‰ˆ</li><li>java 21.0.4 2024-07-16 LTS</li><li>Jenkins 2.452.3</li></ul><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>å¢åŠ ç³»ç»Ÿ JAVA_TOOL_OPTIONSï¼Œå¹¶è®¾ç½®å€¼ä¸º <code>-Dfile.encoding=GBK</code>ã€‚</p><p>æ‰“å¼€è®¾ç½®æ–¹æ³•ï¼šæ¡Œé¢ä¸Šå³é”®ç‚¹å‡»â€œæ­¤ç”µè„‘â€å›¾æ ‡ï¼Œé€‰æ‹©â€œå±æ€§â€ã€‚</p><p>ç¯å¢ƒå˜é‡æ·»åŠ å¦‚ä¸‹å›¾ï¼š<br><img src="/images/202509/39.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Windows </tag>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹Nodejsåº”ç”¨serviceé…ç½®</title>
      <link href="/2025/09/28/Linux%E4%B8%8BNodejs%E5%BA%94%E7%94%A8service%E9%85%8D%E7%BD%AE/"/>
      <url>/2025/09/28/Linux%E4%B8%8BNodejs%E5%BA%94%E7%94%A8service%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>Linux çš„ service å‘½ä»¤ç”¨äºå¯¹ç³»ç»ŸæœåŠ¡è¿›è¡Œç®¡ç†ï¼Œæ¯”å¦‚å¯åŠ¨ï¼ˆstartï¼‰ã€åœæ­¢ï¼ˆstopï¼‰ã€é‡å¯ï¼ˆrestartï¼‰ã€æŸ¥çœ‹çŠ¶æ€ï¼ˆstatusï¼‰ç­‰ã€‚service å‘½ä»¤æœ¬èº«æ˜¯ä¸€ä¸ª shell è„šæœ¬ï¼Œå®ƒåœ¨ &#x2F;etc&#x2F;init.d&#x2F; ç›®å½•æŸ¥æ‰¾æŒ‡å®šçš„æœåŠ¡è„šæœ¬ï¼Œç„¶åè°ƒç”¨è¯¥æœåŠ¡è„šæœ¬æ¥å®Œæˆä»»åŠ¡ã€‚</p><p>ä¸‹é¢ä»¥åŸºäº Nodejs å¼€å‘çš„åç§°ä¸º data-inspector çš„åº”ç”¨ä¸ºä¾‹ï¼Œè¯´æ˜ Linux service çš„é…ç½®ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šåœ¨ &#x2F;frin&#x2F;DataInspector ä¸‹åˆ›å»ºæŒ‡å‘ node å‘½ä»¤çš„è½¯é“¾æ¥1 data-inspectorï¼Œæ‰§è¡Œ ll å‘½ä»¤æŸ¥çœ‹è¯¥æ–‡ä»¶çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lrwxrwxrwx  1 root root     21 12æœˆ 30 15:42 data-inspector -&gt; /usr/bin/node</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºè‡ªå·±çš„åº”ç”¨è¿›ç¨‹èµ·ä¸€ä¸ªä¸åŒçš„åå­—ã€‚</p></blockquote><p>ç¬¬äºŒæ­¥ï¼šåœ¨ &#x2F;etc&#x2F;init.d&#x2F; ä¸‹åˆ›å»ºæ–‡ä»¶ data-inspectorï¼Œè®¾ç½®æƒé™ä¸º 755ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># data-inspector</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># description: data-inspector</span></span><br><span class="line"><span class="comment"># processname: data-inspector</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">  start)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Starting data-inspector&quot;</span></span><br><span class="line">    <span class="built_in">cd</span> /frin/DataInspector</span><br><span class="line">    <span class="built_in">rm</span> -f data-inspector.log</span><br><span class="line">    <span class="built_in">nohup</span> ./data-inspector ./bin/www &gt; data-inspector.log 2&gt;&amp;1 &amp;</span><br><span class="line">    <span class="built_in">sleep</span> 1s</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;started data-inspector&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">  stop)</span><br><span class="line">    PID=`pidof data-inspector`</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Stopping data-inspector&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -z <span class="string">&quot;<span class="variable">$PID</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">kill</span> -9 <span class="variable">$PID</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;stoped data-inspector&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">  restart)</span><br><span class="line">    <span class="variable">$0</span> stop</span><br><span class="line">    <span class="variable">$0</span> start</span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;Usage: service data-inspector &#123;start|stop|restart&#125;&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œå¦‚æœ node ï¼usr&#x2F;bin æˆ– &#x2F;usr&#x2F;sbin ä¸‹ï¼ŒæœåŠ¡ä¼šå› ä¸ºæ‰¾ä¸åˆ° node å‘½ä»¤å¤±è´¥ã€‚å¯ä»¥åœ¨ &#x2F;usr&#x2F;bin ä¸‹åˆ›å»º node çš„è½¯é“¾æ¥ã€‚</p></blockquote><p>å®Œæˆä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥å¯¹æœåŠ¡è¿›è¡Œå¯åŠ¨ã€åœæ­¢ã€é‡å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$service</span> data-inspector start</span><br><span class="line"><span class="variable">$service</span> data-inspector stop</span><br><span class="line"><span class="variable">$service</span> data-inspector restart</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node JS å®‰è£…</title>
      <link href="/2025/09/28/Node-JS-%E5%AE%89%E8%A3%85/"/>
      <url>/2025/09/28/Node-JS-%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="ç³»ç»Ÿç¯å¢ƒ"><a href="#ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ"></a>ç³»ç»Ÿç¯å¢ƒ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 ~]# <span class="built_in">cat</span> /etc/redhat-release</span><br><span class="line">CentOS release 6.6</span><br></pre></td></tr></table></figure><h1 id="ä¸‹è½½-nodejs"><a href="#ä¸‹è½½-nodejs" class="headerlink" title="ä¸‹è½½ nodejs"></a>ä¸‹è½½ nodejs</h1><p>ä¸‹è½½åœ°å€ï¼š<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></p><p>æˆ‘ä¸‹è½½çš„æ˜¯ Linux Binaries (.tar.gz) 64-bit</p><h1 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 letv]# tar xzvf node-v4.2.2-linux-x64.tar.gz</span><br><span class="line">[root@vm-10-176-30-167 letv]# <span class="built_in">mv</span> node-v4.2.2-linux-x64 nodejs</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ç¼©çŸ­ç›®å½•åå­—ï¼Œå°†è§£å‹åçš„ç›®å½•é‡å‘½åä¸º nodejsã€‚</p><h1 id="é…ç½®-path"><a href="#é…ç½®-path" class="headerlink" title="é…ç½® path"></a>é…ç½® path</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 letv]# vi /etc/profile</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œå¹¶ä¿å­˜é€€å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PATH=<span class="variable">$&#123;PATH&#125;</span>:/root/nodejs/bin</span><br><span class="line"><span class="built_in">export</span> PATH</span><br></pre></td></tr></table></figure><h1 id="æµ‹è¯•-nodejs"><a href="#æµ‹è¯•-nodejs" class="headerlink" title="æµ‹è¯• nodejs"></a>æµ‹è¯• nodejs</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 letv]# node -v</span><br><span class="line">v4.2.2</span><br><span class="line">[root@vm-10-176-30-167 letv]# npm -v</span><br><span class="line">2.14.7</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œnode å’Œ npm å®‰è£…å®Œæˆã€‚</p><h1 id="å®‰è£…-Express"><a href="#å®‰è£…-Express" class="headerlink" title="å®‰è£… Express"></a>å®‰è£… Express</h1><p>åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç„¶åè¿›å…¥æ­¤ç›®å½•å¹¶å°†å…¶ä½œä¸ºå½“å‰å·¥ä½œç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 letv]# <span class="built_in">mkdir</span> DataInspector</span><br><span class="line">[root@vm-10-176-30-167 letv]# <span class="built_in">cd</span> DataInspector/</span><br></pre></td></tr></table></figure><p>é€šè¿‡ npm init å‘½ä»¤ä¸ºåº”ç”¨åˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 DataInspector]# npm init</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†è¦æ±‚ä½ è¾“å…¥å‡ ä¸ªå‚æ•°ï¼Œä¾‹å¦‚æ­¤åº”ç”¨çš„åç§°å’Œç‰ˆæœ¬ã€‚ åº”ç”¨åç§°ä¸èƒ½åŒ…å«å¤§å†™å­—æ¯ï¼Œå¦‚æœé»˜è®¤åº”ç”¨åç§°åŒ…å«å¤§å†™å­—æ¯ä¼šæç¤ºé”™è¯¯ï¼Œå¹¶è¦æ±‚é‡æ–°å½•å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name: (DataInspector)</span><br><span class="line">Sorry, name can no longer contain capital letters.</span><br><span class="line">name: (DataInspector) data_inspector</span><br></pre></td></tr></table></figure><p>å‚æ•°å¯ä»¥ç›´æ¥æŒ‰â€œå›è½¦â€é”®æ¥å—é»˜è®¤è®¾ç½®å³å¯ï¼Œä¸‹é¢è¿™ä¸ªé™¤å¤–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry point: (index.js)</span><br></pre></td></tr></table></figure><p>é”®å…¥ app.js æˆ–è€…ä½ æ‰€å¸Œæœ›çš„åç§°ï¼Œè¿™æ˜¯å½“å‰åº”ç”¨çš„å…¥å£æ–‡ä»¶ã€‚å¦‚æœä½ å¸Œæœ›é‡‡ç”¨é»˜è®¤çš„ index.js æ–‡ä»¶åï¼Œåªéœ€æŒ‰â€œå›è½¦â€é”®å³å¯ã€‚æ­¤å¤„ï¼Œæˆ‘å°†åº”ç”¨å…¥åº“æ–‡ä»¶åæ”¹ä¸º app.jsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry point: (index.js) app.js</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å®‰è£… Express å¹¶å°†å…¶ä¿å­˜åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 DataInspector]# npm install express --save</span><br></pre></td></tr></table></figure><p>å¦‚æœåªæ˜¯ä¸´æ—¶å®‰è£… Expressï¼Œä¸æƒ³å°†å®ƒæ·»åŠ åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼Œåªéœ€ç•¥å» â€“save å‚æ•°å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 DataInspector]# npm install express</span><br></pre></td></tr></table></figure><blockquote><p>å®‰è£… Node æ¨¡å—æ—¶ï¼Œå¦‚æœæŒ‡å®šäº† â€“save å‚æ•°ï¼Œé‚£ä¹ˆæ­¤æ¨¡å—å°†è¢«æ·»åŠ åˆ° package.json æ–‡ä»¶ä¸­ dependencies ä¾èµ–åˆ—è¡¨ä¸­ã€‚ ç„¶åé€šè¿‡ npm install å‘½ä»¤å³å¯è‡ªåŠ¨å®‰è£…ä¾èµ–åˆ—è¡¨ä¸­æ‰€åˆ—å‡ºçš„æ‰€æœ‰æ¨¡å—ã€‚</p></blockquote><h1 id="Express-Hello-World"><a href="#Express-Hello-World" class="headerlink" title="Express Hello World"></a>Express Hello World</h1><p>åˆ›å»º app.js æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 DataInspector]# vi app.js</span><br></pre></td></tr></table></figure><p>å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° app.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"> </span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Hello World!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span>;</span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Example app listening at http://%s:%s&#x27;</span>, host, port);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å¯åŠ¨ä¸€ä¸ªæœåŠ¡å¹¶ç›‘å¬ä» 3000 ç«¯å£è¿›å…¥çš„æ‰€æœ‰è¿æ¥è¯·æ±‚ã€‚ä»–å°†å¯¹æ‰€æœ‰ (&#x2F;) URL æˆ–è·¯ç”±è¿”å› â€œHello World!â€ å­—ç¬¦ä¸²ã€‚å¯¹äºå…¶ä»–æ‰€æœ‰è·¯å¾„å…¨éƒ¨è¿”å›404 Not Foundã€‚</p><blockquote><p>req (è¯·æ±‚) å’Œ res (å“åº”) ä¸ Node æä¾›çš„å¯¹è±¡å®Œå…¨ä¸€è‡´ï¼Œå› æ­¤ï¼Œä½ å¯ä»¥è°ƒç”¨ req.pipe()ã€req.on(â€˜dataâ€™, callback) ä»¥åŠä»»ä½• Node æä¾›çš„æ–¹æ³•ã€‚</p></blockquote><p>é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯åŠ¨æ­¤åº”ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@vm-10-176-30-167 DataInspector]# node app.js</span><br><span class="line">Example app listening at http://:::3000</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://10.176.30.167:3000/">http://10.176.30.167:3000/</a> å¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚å¦‚æœæ˜¯åœ¨ä¸ªäººç”µè„‘ä¸Šï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://localhost:3000/">http://localhost:3000/</a> å¹¶æŸ¥çœ‹æ•°æ®ç»“æœã€‚å¦‚æœçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºç»“æœï¼Œåˆ™å®‰è£…æˆåŠŸï¼š<br><img src="/images/202509/37.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Node.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åä¸ºNova9å¼€å¯å¼€å‘äººå‘˜é€‰é¡¹</title>
      <link href="/2025/09/28/%E5%8D%8E%E4%B8%BANova9%E5%BC%80%E5%90%AF%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E9%80%89%E9%A1%B9/"/>
      <url>/2025/09/28/%E5%8D%8E%E4%B8%BANova9%E5%BC%80%E5%90%AF%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E9%80%89%E9%A1%B9/</url>
      
        <content type="html"><![CDATA[<p>é»˜è®¤çŠ¶æ€ä¸‹ï¼Œåä¸º Nova9 çš„å¼€å‘äººå‘˜é€‰é¡¹æ˜¯éšè—çš„ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202509/34.png"></p><p>è¦å¼€å¯å¼€å‘äººå‘˜é€‰é¡¹ï¼Œåœ¨â€œè®¾ç½®â†’å…³äºæ‰‹æœºâ€ä¸­æ‰¾åˆ°â€œHarmonyOSç‰ˆæœ¬â€æˆ–è€…â€œè½¯ä»¶ç‰ˆæœ¬â€ï¼Œåœ¨ç‰ˆæœ¬å·ä¸Šè¿ç»­ç‚¹å‡»ï¼Œæ¯æ¬¡ç‚¹å‡»â€œHarmonyOSç‰ˆæœ¬â€å’Œâ€œè½¯ä»¶ç‰ˆæœ¬â€ä¼šäº¤æ›¿å‡ºç°ï¼Œå¤§æ¦‚ç‚¹7æ¬¡ä¼šå‡ºç°è¾“å…¥å¯†ç ç•Œé¢ã€‚è¾“å…¥æ‰‹æœºè§£é”å¯†ç ï¼Œç„¶åå°±å¯ä»¥å¼€å¯å¼€å‘äººå‘˜é€‰é¡¹äº†ã€‚<br><img src="/images/202509/35.png"></p><p>æ­¤æ—¶å†è¿›å…¥â€œè®¾ç½®â†’ç³»ç»Ÿå’Œæ›´æ–°â€ä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°å¼€å‘äººå‘˜é€‰é¡¹äº†ã€‚<br><img src="/images/202509/36.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç§»åŠ¨ç«¯ </category>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ADB </tag>
            
            <tag> Android </tag>
            
            <tag> ç§»åŠ¨ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Superset æ•°æ®æ¢æŸ¥</title>
      <link href="/2025/09/28/Superset-%E6%95%B0%E6%8D%AE%E6%8E%A2%E6%9F%A5/"/>
      <url>/2025/09/28/Superset-%E6%95%B0%E6%8D%AE%E6%8E%A2%E6%9F%A5/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡åŸºäºä¸ªäººç”µè„‘éƒ¨ç½²çš„ç¯å¢ƒå’Œ Superset å®˜ç½‘æ ·ä¾‹æ•°æ®è®²è§£æ•°æ®æ¢æŸ¥ã€‚</p><h1 id="å¯ç”¨æ•°æ®ä¸Šä¼ åŠŸèƒ½"><a href="#å¯ç”¨æ•°æ®ä¸Šä¼ åŠŸèƒ½" class="headerlink" title="å¯ç”¨æ•°æ®ä¸Šä¼ åŠŸèƒ½"></a>å¯ç”¨æ•°æ®ä¸Šä¼ åŠŸèƒ½</h1><p>é»˜è®¤ä¸Šä¼ åŠŸèƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚<br><img src="/images/202509/03.png"></p><p>è¦å¯ç”¨æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåœ¨å³ä¸Šè§’â€œSettingsâ€ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©â€œDatabase Connectionsâ€ã€‚<br><img src="/images/202509/04.png"></p><p>é¼ æ ‡åœç•™åœ¨è¦ä¸Šä¼ æ•°æ®çš„æ•°æ®åº“ä¸Šï¼ŒActions åˆ—ä¸­ä¼šæ˜¾ç¤ºå¯é€‰æ“ä½œï¼Œç‚¹å‡» Edit å›¾æ ‡ã€‚<br><img src="/images/202509/05.png"></p><p>åœ¨å¼¹å‡ºç¼–è¾‘é¡µâ€œADVANCEDâ€é€‰é¡¹å¡â€œSecurityâ€ä¸‹é€‰ä¸­â€œAllow file uploads to databaseâ€ï¼Œå¹¶ç‚¹å‡» FINISH æŒ‰é’®ã€‚<br><img src="/images/202509/06.png"><br><img src="/images/202509/07.png"></p><p>ä¹‹ååœ¨å³ä¸Šè§’ â€œ+â€ ä¸‹æ‹‰èœå• â€œDataâ€ ä¸­å¯ä»¥çœ‹åˆ°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å˜ä¸ºå¯ç”¨äº†ã€‚<br><img src="/images/202509/08.png"></p><h1 id="åŠ è½½-CSV-æ•°æ®"><a href="#åŠ è½½-CSV-æ•°æ®" class="headerlink" title="åŠ è½½ CSV æ•°æ®"></a>åŠ è½½ CSV æ•°æ®</h1><p>ä¸‹è½½ä¸‹é¢çš„æ ·ä¾‹æ•° ã€‚æ ·ä¾‹æ•°æ®ä¸­åŒ…å«ä¸€äº›æ—…é€”ä¿¡æ¯ã€‚</p><p><a href="https://raw.githubusercontent.com/apache-superset/examples-data/master/tutorial_flights.csv">https://raw.githubusercontent.com/apache-superset/examples-data/master/tutorial_flights.csv</a></p><p>é€‰æ‹©ä¸Šæ–‡å¯ç”¨çš„â€œUpload CSV to databaseâ€å¯¼å…¥åŠŸèƒ½ï¼Œé€‰æ‹©æ–‡ä»¶åŠè®¾ç½®ç›¸åº”å‚æ•°ï¼Œç‚¹å‡»â€œSaveâ€æŒ‰é’®å®Œæˆä¸Šä¼ ã€‚<br><img src="/images/202509/09.png"></p><h1 id="è¡¨æ ¼å¯è§†åŒ–"><a href="#è¡¨æ ¼å¯è§†åŒ–" class="headerlink" title="è¡¨æ ¼å¯è§†åŒ–"></a>è¡¨æ ¼å¯è§†åŒ–</h1><p>ä¸Šä¼ å®Œæˆåï¼Œåœ¨ Datasets ä¸­å¯ä»¥çœ‹åˆ° tutorial_flights æ•°æ®é›†ã€‚<br><img src="/images/202509/10.png"></p><p>ç‚¹å‡»ç¼–è¾‘æŒ‰é’®è¿›å…¥æ•°æ®é›†ç¼–è¾‘ç•Œé¢ï¼Œè®¾ç½® Travel Date ä¸ºæ—¶é—´åºåˆ—å­—æ®µã€‚è¿™ä¸€æ­¥éª¤å¯¹ä¸‹æ–‡çš„æ ·ä¾‹ä¼šæœ‰æ¯”è¾ƒå¤§çš„å½±å“ï¼Œå¦‚æœä¸è®¾ç½®å¾ˆå¤šæ ·ä¾‹åšä¸äº†ã€‚<br><img src="/images/202509/11.png"></p><p>ç‚¹å‡»æ•°æ®é›†åç§°è¿›å…¥è¯¥æ•°æ®é›†çš„æ¢æŸ¥å·¥ä½œæµã€‚<br><img src="/images/202509/12.png"></p><p>åœ¨æœ¬ä¾‹ä¸­ä¼šåˆ›å»ºä¸€ä¸ªå±•ç¤ºæ¯ç§æ—…è¡Œç±»åˆ«çš„èˆªç­æ•°é‡å’Œæˆæœ¬ã€‚åœ¨ DATA é€‰é¡¹å¡ Query çš„ç»´åº¦ä¸­é€‰æ‹© Travel Class ä½œä¸ºåˆ†æç»´åº¦ã€‚<br><img src="/images/202509/13.png"></p><p>åœ¨ç»Ÿè®¡æŒ‡æ ‡ä¸­è®¾ç½®ä»¥ä¸‹ä¸¤é¡¹ï¼š</p><ul><li>COUNT(*)ï¼šç”¨äºåœ¨è¡¨æ ¼æ¯è¡Œä¸­æ˜¾ç¤ºæ¯ç§æ—…è¡Œèˆªç­æ•°é‡ã€‚</li><li>SUM(Cost)ï¼šæ˜¾ç¤ºæ¯ç§æ—…è¡Œèˆªç­çš„æˆæœ¬ã€‚</li></ul><p><img src="/images/202509/14.png"></p><p>ç„¶åç‚¹å‡»â€œCREATE CHARTâ€æŒ‰é’®å®Œæˆè¡¨æ ¼å¯è§†åŒ–çš„åˆ›å»ºã€‚<br><img src="/images/202509/15.png"></p><p>ç‚¹å‡» SAVE æŒ‰é’®ä¿å­˜ã€‚å¯ä»¥åœ¨ä¿å­˜æ—¶é€‰æ‹©å¯è§†åŒ–è¡¨åœ¨å“ªä¸ªä»ªè¡¨ç›˜ä¸­æ˜¾ç¤ºï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæ–°çš„ä»ªè¡¨ç›˜æ—¶é€‰æ‹©è¦å±•ç¤ºçš„å›¾è¡¨ã€‚</p><h1 id="ä»ªè¡¨ç›˜åŸºç¡€"><a href="#ä»ªè¡¨ç›˜åŸºç¡€" class="headerlink" title="ä»ªè¡¨ç›˜åŸºç¡€"></a>ä»ªè¡¨ç›˜åŸºç¡€</h1><p>ç‚¹å‡»å·¦ä¸Šè§’â€œDashboardâ€èœå•ï¼Œè¿›å…¥ä»ªè¡¨ç›˜åˆ—è¡¨é¡µé¢ã€‚ç‚¹å‡»åˆ—è¡¨çš„å³ä¸Šæ–¹çš„â€œ+DASHBOARDâ€æŒ‰é’®è¿›å…¥ä»ªè¡¨ç›˜æ–°å»ºé¡µé¢ã€‚ç»™æ–°å»ºçš„ä»ªè¡¨ç›˜å‘½åï¼Œå¹¶å°†åˆšæ‰æ–°å»ºçš„å·®æ—…åˆ†æè¡¨æ‹–å…¥ä»ªè¡¨ç›˜ï¼Œä¿å­˜å³å¯ã€‚è¿™æ ·ä¸€ä¸ªç®€å•çš„ä»ªè¡¨ç›˜å°±åˆ›å»ºå®Œæˆäº†ã€‚<br><img src="/images/202509/16.png"></p><p>åˆ›å»ºå®Œçš„ä»ªè¡¨ç›˜åœ¨ä»ªè¡¨ç›˜åˆ—è¡¨ä¸­é€‰ä¸­å¹¶ç‚¹å‡»ï¼Œè¿›å…¥ä»ªè¡¨ç›˜å±•ç¤ºé¡µé¢ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç¼–è¾‘æŒ‰é’®å¯å†æ¬¡ç¼–è¾‘ã€‚åœ¨ä»ªè¡¨ç›˜ç¼–è¾‘é¡µé¢å¯ä»¥ç”¨é¼ æ ‡è°ƒæ•´æ¯ä¸ªå›¾è¡¨çš„å¤§å°ï¼Œå¦‚ä¸‹å›¾ï¼ˆé¼ æ ‡æ”¾åœ¨çº¢åœˆå›¾è¡¨å³ä¸‹è§’çš„ä½ç½®ï¼‰ï¼š<br><img src="/images/202509/17.png"></p><h1 id="æ•°æ®é€è§†è¡¨"><a href="#æ•°æ®é€è§†è¡¨" class="headerlink" title="æ•°æ®é€è§†è¡¨"></a>æ•°æ®é€è§†è¡¨</h1><p>æ•°æ®é€è§†è¡¨æ˜¯ä¸€ç§æ›´å¤æ‚çš„å¯è§†åŒ–åˆ†æå·¥å…·ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°†æŒ‰ç…§éƒ¨é—¨ã€æ—…è¡Œç§ç±»å±•ç¤ºå‰6ä¸ªæœˆæ¯ä¸ªæœˆçš„é£è¡ŒèŠ±è´¹ã€‚åœ¨ä»ªè¡¨ç›˜ç¼–è¾‘é¡µé¢ç‚¹å‡»â€œ+ CREATE NEW CHARTâ€æŒ‰é’®ã€‚<br><img src="/images/202509/18.png"></p><p>é€‰æ‹© tutorial_flights ä½œä¸ºæ•°æ®é›†ï¼Œé€‰æ‹© Pivot Table ä½œä¸ºå›¾è¡¨ç±»å‹ï¼ˆå¯é€šè¿‡æœç´¢æŸ¥æ‰¾ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202509/19.png"></p><p>ç‚¹å‡»å³ä¸‹è§’â€œCREATE NEW CHATâ€å®Œæˆåˆ›å»ºï¼Œå¹¶è¿›å…¥å›¾è¡¨ç¼–è¾‘é¡µé¢ã€‚</p><p>è¿›å…¥é€è§†è¡¨ç¼–è¾‘é¡µé¢ï¼Œå¹¶åšå¦‚ä¸‹è®¾ç½®ï¼š</p><ul><li>æŸ¥è¯¢åˆ—ä¸­é€‰æ‹© Department å’Œ Travel Classs</li><li>åœ¨è¡Œä¸­é€‰æ‹©åœ¨æ•°æ®é›†ä¸­æ–°å»ºçš„è®¡ç®—åˆ— Travel Dateï¼Œæ—¶é—´ç²’åº¦é€‰æ‹© Monthã€‚</li><li>åœ¨æŒ‡æ ‡æ æ–°å¢ Sumï¼ˆCostï¼‰</li><li>è®¾ç½®æ•°æ®è¿‡æ»¤æ¡ä»¶ Travel Date â‰¥ â€˜2011-01-01â€™ å’Œ Travel Date â‰¤ â€˜2011-06-30â€™</li></ul><p>ç‚¹å‡»ä¿å­˜åœ¨å³ä¾§å°±å¯ä»¥çœ‹åˆ°é€è§†è¡¨çš„æ•ˆæœï¼š<br><img src="/images/202509/20.png"></p><p>å®Œæˆä»¥ä¸Šå·¥ä½œåï¼Œç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå¹¶å°†è¯¥é€è§†è¡¨å‘å¸ƒè‡³ä¸Šæ–‡åˆ›å»ºçš„ä»ªè¡¨ç›˜ã€‚</p><h1 id="æŠ˜çº¿å›¾"><a href="#æŠ˜çº¿å›¾" class="headerlink" title="æŠ˜çº¿å›¾"></a>æŠ˜çº¿å›¾</h1><p>è¿™ä¸€å°èŠ‚ï¼Œç”¨æŠ˜çº¿å›¾æ˜¾ç¤ºæ¯ä¸ªæœˆå¹³å‡ç¥¨ä»·ã€‚å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œä¾ç„¶æ˜¯åœ¨ä»ªè¡¨ç›˜ç¼–è¾‘é¡µé¢æ·»åŠ æ–°çš„å›¾è¡¨ã€‚æœ¬ä¾‹ä¸­å›¾è¡¨ç±»å‹é€‰æ‹©æŠ˜çº¿å›¾ã€‚è¿›å…¥å›¾è¡¨ç¼–è¾‘é¡µé¢åï¼Œåšå¦‚ä¸‹è®¾ç½®ï¼š</p><ul><li>è®¾ç½®å›¾è¡¨åç§°ä¸ºï¼šç¥¨ä»·è¶‹åŠ¿åˆ†æ</li><li>Xè½´é€‰æ‹© Travel Dateï¼Œæ—¶é—´ç²’åº¦é€‰æ‹© Month</li><li>æŒ‡æ ‡è®¾ç½®ä¸º AVGï¼ˆCostï¼‰</li></ul><p>ä¿å­˜åæ•ˆæœå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202509/21.png"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºåœ¨ 2011-12 æœˆä»½ç¥¨ä»·å¤§å¹…å¢é«˜ã€‚ç°åœ¨å›¾è¡¨æ•°æ®æœªè€ƒè™‘å•ç¨‹å’Œå¾€è¿”ç¥¨çš„åŒºåˆ«ï¼Œæ›´åˆç†çš„åº”è¯¥æ˜¯å°†ä¸¤ç§ç¥¨ä»·åšæˆä¸¤æ¡æŠ˜çº¿ã€‚åœ¨å›¾è¡¨ç¼–è¾‘é¡µé¢ç»´åº¦é€‰æ‹© Ticket Single or Returnï¼Œæ›´æ–°åæ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/images/202509/22.png"></p><p>æŠ˜çº¿å›¾çš„ä¿å­˜ä¸å‘å¸ƒè‡³ä»ªè¡¨ç›˜ä¸ä¸Šé¢çš„ä¾‹å­ä¸€æ ·ã€‚</p><h1 id="æ ‡è®°"><a href="#æ ‡è®°" class="headerlink" title="æ ‡è®°"></a>æ ‡è®°</h1><p>æœ¬èŠ‚å°†åœ¨å‰æ–‡åˆ›å»ºçš„ä»ªè¡¨ç›˜ä¸Šå¢åŠ ä¸€äº›æ–‡æœ¬ä¿¡æ¯ã€‚é¦–å…ˆè¿›å…¥ä¸Šæ–‡åˆ›å»ºçš„â€œå·®æ—…åˆ†æâ€ä»ªè¡¨ç›˜çš„ç¼–è¾‘é¡µé¢ã€‚ä»å³ä¾§å¸ƒå±€ç»„ä»¶ä¸­æ‹–åŠ¨â€œTextâ€ç»„ä»¶è‡³ä»ªè¡¨ç›˜ï¼Œæ­¤æ—¶åœ¨ä»ªè¡¨ç›˜ä¸­ä¼šæœ‰ä¸€ä¸ªMarkdownçš„ç¼–è¾‘æ¡†ï¼Œå¯ä»¥è¾“å…¥æ–‡æœ¬ä¿¡æ¯ã€‚ç‚¹å‡»æ–‡æœ¬æ¡†ä¸­çš„é“¾æ¥å­¦ä¹ MarkdownçŸ¥è¯†ã€‚<br><img src="/images/202509/23.png"></p><p>åœ¨æ–‡æœ¬æ¡†çš„å·¦ä¸Šè§’å¯ä»¥é€‰æ‹©é¢„è§ˆæ–‡æœ¬æ•ˆæœï¼š<br><img src="/images/202509/24.png"></p><h1 id="å‘å¸ƒä»ªè¡¨ç›˜"><a href="#å‘å¸ƒä»ªè¡¨ç›˜" class="headerlink" title="å‘å¸ƒä»ªè¡¨ç›˜"></a>å‘å¸ƒä»ªè¡¨ç›˜</h1><p>æ ¹æ®ä¸Šé¢çš„æ­¥éª¤å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ ·ä¾‹ä»ªè¡¨ç›˜ï¼Œè¿™ä¸ªä»ªè¡¨ç›˜éšæ—¶å¯ä»¥å†æ¬¡ç¼–è¾‘ã€‚å¦‚æœè¦å°†è¯¥ä»ªè¡¨ç›˜å‘å¸ƒç»™å…¶ä»–ç”¨æˆ·ï¼Œåˆ™ç‚¹å‡»ä»ªè¡¨ç›˜å·¦ä¸Šè§’â€œDraftâ€æŒ‰é’®ï¼Œè¿™æ—¶ä»ªè¡¨ç›˜çŠ¶æ€å°±å˜ä¸ºâ€œPublishedâ€çŠ¶æ€äº†ã€‚ç‚¹å‡»çŠ¶æ€æŒ‰é’®å·¦ä¾§çš„æ˜Ÿå·å¯æ”¶è—è¯¥ä»ªè¡¨ç›˜ã€‚<br><img src="/images/202509/25.png"></p><h1 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h1><p>ä½¿ç”¨æ³¨é‡Šå¯ä»¥åœ¨å›¾è¡¨ä¸­æ·»åŠ è¯´æ˜ï¼Œæœ¬ä¾‹å°†åœ¨ä¸Šæ–‡ä¸­æŠ˜çº¿å›¾ä¸­å¢åŠ è¯´æ˜ã€‚</p><p>ç‚¹å‡»â€œSettingsâ€â†’â€œManageâ€â†’â€œAnnotation Layersâ€è¿›å…¥æ³¨é‡Šç®¡ç†é¡µé¢ã€‚<br><img src="/images/202509/26.png"></p><p>ç‚¹å‡»æ–°å»º Annotation Layer æŒ‰é’®ï¼Œè¾“å…¥ä¿¡æ¯åè¿›å…¥ Annotation ç®¡ç†é¡µé¢ã€‚ç‚¹å‡»æ–°å»º Annotation æŒ‰é’®ï¼Œè¾“å…¥ä¿¡æ¯åˆ›å»ºæ–°çš„ Annotationï¼š<br><img src="/images/202509/27.png"></p><p>è¿›å…¥å·®æ—…æŠ˜çº¿å›¾ç¼–è¾‘é¡µé¢ï¼Œåœ¨Annotations and Layerséƒ¨åˆ†é€‰æ‹©æ·»åŠ ï¼Œåœ¨å¼¹å‡ºå¯¹è¯æ¡†ä¸­åšå¦‚ä¸‹è®¾ç½®ï¼š</p><ul><li>å¸ƒå±€å‘½åï¼šç‰¹æ®Šå¤©æ°”</li><li>Annotation Layer Typeè®¾ç½®ä¸ºï¼šEvent</li><li>Annotation Sourceè®¾ç½®ä¸ºï¼šSuperset annotation</li><li>Annotation Layeré€‰æ‹©ä¸Šé¢æ–°å»ºçš„â€œç‰¹æ®Šå¤©æ°”â€</li><li>çº¿å®½è®¾ç½®ä¸º5ã€‚å¦‚æœé€‰æ‹© Annotation Layer Type ä¸º Event æ—¶ï¼Œå¦‚æœçº¿å®½ä¸å¤Ÿï¼Œæ³¨é‡Šæ˜¾ç¤ºä¸æ˜æ˜¾ã€‚</li></ul><p>ä¿å­˜ååœ¨æŠ˜çº¿å›¾ä¸­å°±å¯ä»¥çœ‹åˆ°è¡¥å……ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="/images/202509/28.png"></p><h1 id="é«˜çº§åˆ†æ"><a href="#é«˜çº§åˆ†æ" class="headerlink" title="é«˜çº§åˆ†æ"></a>é«˜çº§åˆ†æ</h1><p>Superset çš„é«˜çº§åˆ†æç‰¹æ€§å…è®¸å¯¹æ•°æ®åº”ç”¨ä¸‰ç§ç±»å‹é¢å¤–çš„è½¬æ¢ã€‚æœ¬èŠ‚å°†å»ºç«‹ä¸€ä¸ªåŸºç¡€å›¾è¡¨ï¼Œç„¶ååº”ç”¨ä¸åŒçš„é«˜çº§åˆ†æç‰¹æ€§ã€‚</p><p>é¦–å…ˆï¼Œä½¿ç”¨æœ¬æ–‡å¯¼å…¥çš„ tutorial_flights æ•°æ®æºå’ŒæŠ˜çº¿å›¾ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202509/29.png"></p><h1 id="æ»šåŠ¨å¹³å‡å€¼"><a href="#æ»šåŠ¨å¹³å‡å€¼" class="headerlink" title="æ»šåŠ¨å¹³å‡å€¼"></a>æ»šåŠ¨å¹³å‡å€¼</h1><p>å½“æ•°æ®ä¸­æœ‰ç›¸å½“å¤šçš„å˜åŒ–æ—¶ï¼Œä¼šä½¿å¾—å¾ˆéš¾ç¡®å®šä»»ä½•è¶‹åŠ¿ã€‚å¯ä»¥é‡‡ç”¨çš„ä¸€ç§æ–¹æ³•æ˜¯æ˜¾ç¤ºæ—¶é—´åºåˆ—çš„æ»šåŠ¨å¹³å‡å€¼ã€‚ä¸ºæ­¤ï¼Œåœ¨åˆšæ‰åˆ›å»ºçš„å›¾è¡¨ä¸­çš„â€œé«˜çº§åˆ†æâ€ Rolling window è®¾ç½®ä¸­é€‰æ‹© meanï¼Œå¹¶åœ¨â€œå‘¨æœŸâ€å’Œâ€œæœ€å°å‘¨æœŸâ€ä¸­è¾“å…¥7ã€‚å‘¨æœŸæ˜¯ä»¥æ—¶é—´ç²’åº¦çš„å€æ•°è¡¨ç¤ºçš„æ»šåŠ¨å‘¨æœŸçš„é•¿åº¦ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ—¶é—´ç²’åº¦æ˜¯ä¸€å¤©ï¼Œæ‰€ä»¥æ»šåŠ¨å‘¨æœŸæ˜¯7å¤©ï¼Œè¿™æ ·åœ¨2011å¹´10æœˆ7æ—¥æ˜¾ç¤ºçš„å€¼å°†å¯¹åº”äº2011å¹´10æœˆçš„å‰7å¤©ã€‚æœ€åï¼Œé€šè¿‡æŒ‡å®šæœ€å°å‘¨æœŸä¸º7ï¼Œæˆ‘ä»¬ç¡®ä¿æˆ‘ä»¬çš„å¹³å‡å€¼æ€»æ˜¯è®¡ç®—åœ¨7å¤©ã€‚<br><img src="/images/202509/30.png"></p><h1 id="æ—¶é—´æ¯”è¾ƒ"><a href="#æ—¶é—´æ¯”è¾ƒ" class="headerlink" title="æ—¶é—´æ¯”è¾ƒ"></a>æ—¶é—´æ¯”è¾ƒ</h1><p>æœ¬èŠ‚å°†æ¯”è¾ƒæ—¶é—´åºåˆ—ä¸­çš„å€¼ä¸ä¸€å‘¨å‰çš„å€¼ã€‚é¦–å…ˆåˆ›å»ºåŸºç¡€çš„æŠ˜çº¿å›¾ï¼Œç„¶ååœ¨é«˜çº§åˆ†ææ—¶é—´æ¯”è¾ƒä¸­é€‰æ‹©â€œ1 week agoâ€ï¼Œæ›´æ–°å›¾è¡¨ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/images/202509/31.png"></p><p>ç„¶åï¼Œå°†â€œè®¡ç®—â€ç±»å‹æ›´æ”¹ä¸ºâ€œç»å¯¹å·®å¼‚â€å¹¶æ›´æ–°å›¾è¡¨ã€‚ç°åœ¨åªèƒ½çœ‹åˆ°ä¸€ä¸ªç³»åˆ—ï¼Œæ˜¾ç¤ºäº†ä¹‹å‰ä¸¤ä¸ªç³»åˆ—ä¹‹é—´çš„å·®å¼‚ã€‚<br><img src="/images/202509/32.png"></p><h1 id="é‡æ–°å–æ ·æ•°æ®"><a href="#é‡æ–°å–æ ·æ•°æ®" class="headerlink" title="é‡æ–°å–æ ·æ•°æ®"></a>é‡æ–°å–æ ·æ•°æ®</h1><p>æœ¬èŠ‚å°†å¯¹æ•°æ®è¿›è¡Œé‡æ–°å–æ ·ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯å¤©çš„æ•°æ®ï¼Œè€Œæ˜¯æ¯å‘¨çš„æ•°æ®ã€‚è·Ÿä¸Šé¢çš„ç« èŠ‚ä¸€æ ·ï¼Œæ–°åˆ›å»ºä¸€ä¸ªæŠ˜çº¿å›¾ã€‚ç„¶åï¼Œåœ¨ Advanced Analytics çš„é‡æ–°å–æ ·çš„ Rule ä¸­è¾“å…¥â€œ7 calendar day frequencyâ€ ï¼Œå¹¶å°†ä¸­ä½æ•°ä½œä¸ºè¿‡æ»¤æ–¹æ³•ï¼Œç„¶åä¿å­˜ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/images/202509/33.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®æ¢ç´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> æ•°æ®æ¢ç´¢ </tag>
            
            <tag> Superset </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SparkSQL å†…ç½®å‡½æ•°</title>
      <link href="/2025/09/28/SparkSQL-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/"/>
      <url>/2025/09/28/SparkSQL-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>SparkSQL æœ‰å¾ˆå¤šæ–¹ä¾¿ä¸”åŠŸèƒ½å¼ºå¤§çš„å†…ç½®å‡½æ•°ã€‚æœ¬ç¯‡æ–‡ç« ç”¨æ¥è®°å½•æˆ‘åœ¨å®é™…å·¥ä½œä¸­ç”¨åˆ°çš„ä¸€äº›å‡½æ•°ï¼Œå¹¶ç»“åˆè‡ªå·±çš„ä½¿ç”¨åœºæ™¯è¿›è¡Œåˆ†äº«ã€‚æˆ‘ä¼šä¸æ–­æ›´æ–°æœ¬æ–‡çš„å†…å®¹ã€‚</p><h1 id="last-day"><a href="#last-day" class="headerlink" title="last_day"></a>last_day</h1><p>last_day(date)ï¼šè¿”å›æ—¥æœŸå‚æ•°æ‰€å±æœˆæœ€åä¸€å¤©çš„æ—¥æœŸã€‚</p><p>ç”¨ä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">SELECT</span> last_day(<span class="string">&#x27;2009-01-12&#x27;</span>);</span><br><span class="line"> <span class="number">2009</span><span class="number">-01</span><span class="number">-31</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨æ¥å¿«é€Ÿé€‰æ‹©æœˆåº•æ•°æ®ã€‚å¦‚æ•°æ®è¡¨ï¼ˆTï¼‰ï¼ŒåŒ…å«ä» 2023-01-01 è‡³ 2024-09-18 è¿ç»­æ—¥æœŸçš„æ•°æ®ã€‚</p><table><thead><tr><th>col1</th><th>col2</th></tr></thead><tbody><tr><td>2023-01-01</td><td>1</td></tr><tr><td>â€¦</td><td>â€¦</td></tr><tr><td>2024-09-18</td><td>18</td></tr></tbody></table><p>å¦‚æœåªæŸ¥è¯¢æœŸé—´æ¯æœˆåº•çš„æ•°æ®ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ SQL è¯­å¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> T <span class="keyword">WHERE</span> col1 <span class="operator">=</span> last_day(col1);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Spark </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Emacsåˆ—ç¼–è¾‘</title>
      <link href="/2025/09/28/Emacs%E5%88%97%E7%BC%96%E8%BE%91/"/>
      <url>/2025/09/28/Emacs%E5%88%97%E7%BC%96%E8%BE%91/</url>
      
        <content type="html"><![CDATA[<p>æ¨èä½¿ç”¨ rect-mark.el æ’ä»¶ï¼Œå‚è€ƒåœ°å€ï¼š<a href="https://www.emacswiki.org/emacs/RectangleMark">https://www.emacswiki.org/emacs/RectangleMark</a>ã€‚</p><p>åœ¨ Emacs é…ç½®æ–‡ä»¶ä¸­ï¼ˆä¸€èˆ¬æ˜¯ ~&#x2F;.emacsï¼‰æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">;; åˆ—ç¼–è¾‘</span><br><span class="line">(require &#x27;rect-mark)</span><br><span class="line">(global-set-key (kbd &quot;C-x r C-w&quot;) &#x27;rm-kill-region)</span><br><span class="line">(global-set-key (kbd &quot;C-x r M-w&quot;) &#x27;rm-kill-ring-save)</span><br><span class="line">(global-set-key (kbd &quot;C-x r C-y&quot;) &#x27;yank-rectangle)</span><br><span class="line">(global-set-key (kbd &quot;C-x r C-M-d&quot;) &#x27;delete-rectangle)</span><br><span class="line">(global-set-key (kbd &quot;C-x r C-i&quot;) &#x27;string-insert-rectangle)</span><br><span class="line">(global-set-key (kbd &quot;C-x r C-M-i&quot;) &#x27;string-rectangle)</span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨åˆ—ç¼–è¾‘å‘½ä»¤å‰ï¼Œå…ˆä½¿ç”¨å¿«æ·é”® <code>Ctrl+@</code>ï¼ˆæ³¨æ„ @ ç¬¦éœ€è¦ä½¿ç”¨ Shift é”®ï¼‰è®¾ç½® Markï¼Œå¹¶ç§»åŠ¨å…‰æ ‡é€‰ä¸­éœ€è¦æ“ä½œçš„åŒºåŸŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Emacs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Emacs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºå•èŠ‚ç‚¹Hadoopé›†ç¾¤</title>
      <link href="/2025/09/27/%E6%90%AD%E5%BB%BA%E5%8D%95%E8%8A%82%E7%82%B9Hadoop%E9%9B%86%E7%BE%A4/"/>
      <url>/2025/09/27/%E6%90%AD%E5%BB%BA%E5%8D%95%E8%8A%82%E7%82%B9Hadoop%E9%9B%86%E7%BE%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h1><p>å¯ä»¥å¿«é€Ÿä½¿ç”¨ Hadoop çš„ MapReduce å’Œ HDFS æ‰§è¡ŒæŸäº›æ“ä½œï¼Œä¸»è¦ç”¨äºå­¦ä¹ çš„ç›®çš„ã€‚</p><h1 id="å…ˆå†³æ¡ä»¶"><a href="#å…ˆå†³æ¡ä»¶" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h1><h2 id="ç¯å¢ƒä¿¡æ¯"><a href="#ç¯å¢ƒä¿¡æ¯" class="headerlink" title="ç¯å¢ƒä¿¡æ¯"></a>ç¯å¢ƒä¿¡æ¯</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šdeepin 20.9 ç¤¾åŒºç‰ˆ</li><li>å†…æ ¸ï¼š5.18.17-amd64-desktop-hwe</li><li>Hadoopç‰ˆæœ¬ï¼šApache Hadoop 3.3.6</li><li>Javaç‰ˆæœ¬ï¼šjava version â€œ11.0.21â€ 2023-10-17 LTS</li></ul><h2 id="å®‰è£…å¿…è¦çš„è½¯ä»¶"><a href="#å®‰è£…å¿…è¦çš„è½¯ä»¶" class="headerlink" title="å®‰è£…å¿…è¦çš„è½¯ä»¶"></a>å®‰è£…å¿…è¦çš„è½¯ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt-get install ssh</span><br><span class="line">$ <span class="built_in">sudo</span> apt-get install pdsh</span><br></pre></td></tr></table></figure><blockquote><p>pdsh æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹å¹¶å‘åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤çš„ shell å®¢æˆ·ç«¯ã€‚é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/chaos/pdsh">https://github.com/chaos/pdsh</a>ã€‚</p></blockquote><h1 id="Hadoop-å®‰è£…"><a href="#Hadoop-å®‰è£…" class="headerlink" title="Hadoop å®‰è£…"></a>Hadoop å®‰è£…</h1><p>ä¸‹è½½ Hadoopï¼š<a href="https://www.apache.org/dyn/closer.cgi/hadoop/common/">Apache Download Mirrors</a>ã€‚ä¸‹è½½å®Œæˆåè§£å‹è‡³æœ¬åœ°çš„ç›®å½•ã€‚åœ¨è§£å‹åçš„ç›®å½•ä¸­ï¼Œç¼–è¾‘ <code>etc/hadoop/hadoop-env.sh</code> æ–‡ä»¶ï¼Œå¢åŠ  JAVA_HOME ç¯å¢ƒå˜é‡å®šä¹‰ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set to the root of your Java installation</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¼šæ˜¾ç¤º hadoop å‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ bin/hadoop</span><br><span class="line">Usage: hadoop [OPTIONS] SUBCOMMAND [SUBCOMMAND OPTIONS]</span><br><span class="line"> or    hadoop [OPTIONS] CLASSNAME [CLASSNAME OPTIONS]</span><br><span class="line">  <span class="built_in">where</span> CLASSNAME is a user-provided Java class</span><br></pre></td></tr></table></figure><h1 id="ä¼ªåˆ†å¸ƒå¼"><a href="#ä¼ªåˆ†å¸ƒå¼" class="headerlink" title="ä¼ªåˆ†å¸ƒå¼"></a>ä¼ªåˆ†å¸ƒå¼</h1><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä½¿ç”¨ä»¥ä¸‹é…ç½®ã€‚</p><p>etc&#x2F;hadoop&#x2F;core-site.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>etc&#x2F;hadoop&#x2F;hdfs-site.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®-ssh-å…å¯†ç™»å½•"><a href="#é…ç½®-ssh-å…å¯†ç™»å½•" class="headerlink" title="é…ç½® ssh å…å¯†ç™»å½•"></a>é…ç½® ssh å…å¯†ç™»å½•</h2><p>è§æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ä¸­çš„ç« èŠ‚ï¼š<a href="https://www.zhangjc.com/2025/09/26/Linux%E4%B8%8BSpark-Standalone%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/">Linuxä¸‹Spark Standaloneæµ‹è¯•ç¯å¢ƒéƒ¨ç½²</a>ã€‚</p><h2 id="å¯åŠ¨-HDFS"><a href="#å¯åŠ¨-HDFS" class="headerlink" title="å¯åŠ¨ HDFS"></a>å¯åŠ¨ HDFS</h2><ol><li>æ ¼å¼æ¢ HDFS</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bin/hdfs namenode -format</span><br></pre></td></tr></table></figure><ol start="2"><li>å¯åŠ¨ NameNode å’Œ DataNode</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sbin/start-dfs.sh</span><br></pre></td></tr></table></figure><ol start="3"><li>NameNode WebUI</li></ol><p><a href="http://localhost:9870/">http://localhost:9870/</a></p><ol start="4"><li>åœæ­¢ NameNode å’Œ DataNode</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sbin/stop-dfs.sh</span><br></pre></td></tr></table></figure><blockquote><p>é»˜è®¤çš„ HDFS å…ƒæ•°æ®ä¿¡æ¯ä¼šå­˜å‚¨åœ¨ä¸´æ—¶ç›®å½• tmp ä¸‹ï¼Œæœºå™¨é‡å¯åå†æ¬¡å¯åŠ¨ HDFS æ—¶ä¼šå‡ºç°é”™è¯¯ï¼Œè§æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/09/27/Directory-tmp-hadoop-zhangjc-dfs-name-is-in-an-inconsistent-state/">Directory &#x2F;tmp&#x2F;hadoop-zhangjc&#x2F;dfs&#x2F;name is in an inconsistent state</a>ã€‚</p></blockquote><h2 id="å•èŠ‚ç‚¹-Yarn"><a href="#å•èŠ‚ç‚¹-Yarn" class="headerlink" title="å•èŠ‚ç‚¹ Yarn"></a>å•èŠ‚ç‚¹ Yarn</h2><ol><li>æ·»åŠ ä»¥ä¸‹é…ç½®</li></ol><p>etc&#x2F;hadoop&#x2F;mapred-site.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.application.classpath<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>etc&#x2F;hadoop&#x2F;yarn-site.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.env-whitelist<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_HOME,PATH,LANG,TZ,HADOOP_MAPRED_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å¯åŠ¨ ResourceManager å’Œ NodeManager</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sbin/start-yarn.sh</span><br></pre></td></tr></table></figure><ol start="3"><li>ResourceManager WebUI</li></ol><p><a href="http://localhost:8088/">http://localhost:8088/</a></p><ol start="4"><li>åœæ­¢ ResourceManager å’Œ NodeManager</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sbin/stop-yarn.sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Directory /tmp/hadoop-zhangjc/dfs/name is in an inconsistent state</title>
      <link href="/2025/09/27/Directory-tmp-hadoop-zhangjc-dfs-name-is-in-an-inconsistent-state/"/>
      <url>/2025/09/27/Directory-tmp-hadoop-zhangjc-dfs-name-is-in-an-inconsistent-state/</url>
      
        <content type="html"><![CDATA[<p>æŒ‰ç…§å®˜ç½‘æ‰‹å†Œå®‰è£…å®Œå•æœº Hadoop é›†ç¾¤ï¼ˆè§æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/09/27/%E6%90%AD%E5%BB%BA%E5%8D%95%E8%8A%82%E7%82%B9Hadoop%E9%9B%86%E7%BE%A4/">æ­å»ºå•èŠ‚ç‚¹Hadoopé›†ç¾¤</a>ï¼‰ï¼Œç”µè„‘é‡å¯åï¼Œåœ¨å¯åŠ¨ HDFS æ—¶ NameNode å¯åŠ¨å¤±è´¥ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sbin/start-dfs.sh </span><br><span class="line">Starting namenodes on [localhost]</span><br><span class="line">pdsh@frin: localhost: ssh exited with <span class="built_in">exit</span> code 1</span><br><span class="line">Starting datanodes</span><br><span class="line">Starting secondary namenodes [frin]</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ NameNode å¯åŠ¨æ—¥å¿—å¯ä»¥çœ‹åˆ°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2024-08-10 21:02:21,500 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: Failed to start namenode.</span><br><span class="line">org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /tmp/hadoop-zhangjc/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverStorageDirs(FSImage.java:392)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:243)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFSImage(FSNamesystem.java:1236)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFromDisk(FSNamesystem.java:808)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.NameNode.loadNamesystem(NameNode.java:694)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:781)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.NameNode.&lt;init&gt;(NameNode.java:1033)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.NameNode.&lt;init&gt;(NameNode.java:1008)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1782)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1847)</span><br><span class="line">2024-08-10 21:02:21,501 INFO org.apache.hadoop.util.ExitUtil: Exiting with status 1: org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /tmp/hadoop-zhangjc/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.</span><br><span class="line">2024-08-10 21:02:21,502 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: </span><br><span class="line">/************************************************************</span><br><span class="line">SHUTDOWN_MSG: Shutting down NameNode at frin/127.0.0.1</span><br><span class="line">************************************************************/</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸º HDFS çš„å…ƒæ•°æ®ä¿¡æ¯é»˜è®¤å­˜å‚¨åœ¨ä¸´æ—¶ç›®å½• tmp ä¸­ï¼Œæœºå™¨é‡å¯åè¿™äº›ä¸´æ—¶ç›®å½•ä¼šè¢«æ¸…ç†æ‰ã€‚å¢åŠ ä»¥ä¸‹é…ç½®ï¼š</p><p>etc&#x2F;hadoop&#x2F;hdfs-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///home/zhangjc/frin/hadoop/dfs/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‡æ–°æ ¼å¼åŒ– HDFSï¼Œå¹¶é‡å¯å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼å­˜å‚¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> åˆ†å¸ƒå¼å­˜å‚¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹Spark Standaloneæµ‹è¯•ç¯å¢ƒéƒ¨ç½²</title>
      <link href="/2025/09/26/Linux%E4%B8%8BSpark-Standalone%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/"/>
      <url>/2025/09/26/Linux%E4%B8%8BSpark-Standalone%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p>ä¸ºäº†å¯ä»¥ä½¿ç”¨ start-all.sh è„šæœ¬å¯åŠ¨æ•´ä¸ªæœ¬åœ°é›†ç¾¤ï¼Œéœ€è¦å…ˆé…ç½® ssh å…å¯†ã€‚</p><p>æ£€æŸ¥æœ¬æœºæ˜¯å¦å¯åŠ¨äº† ssh æœåŠ¡ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹ä¿¡æ¯åˆ™è¯´æ˜æœåŠ¡æœªå¯åŠ¨ï¼Œéœ€å…ˆé…ç½®æœ¬æœºçš„ ssh æœåŠ¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh localhost</span><br><span class="line">ssh: connect to host localhost port 22: Connection refused</span><br></pre></td></tr></table></figure><h1 id="é…ç½®-SSH-æœåŠ¡"><a href="#é…ç½®-SSH-æœåŠ¡" class="headerlink" title="é…ç½® SSH æœåŠ¡"></a>é…ç½® SSH æœåŠ¡</h1><ol><li>å®‰è£… SSH æœåŠ¡</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install openssh-server</span><br></pre></td></tr></table></figure><ol start="2"><li>å¯åŠ¨ SSH æœåŠ¡</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start ssh</span><br></pre></td></tr></table></figure><ol start="3"><li>å¯ç”¨ SSH æœåŠ¡å¼€æœºå¯åŠ¨</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> ssh</span><br></pre></td></tr></table></figure><h1 id="é…ç½®å…å¯†-SSH-ç™»å½•"><a href="#é…ç½®å…å¯†-SSH-ç™»å½•" class="headerlink" title="é…ç½®å…å¯† SSH ç™»å½•"></a>é…ç½®å…å¯† SSH ç™»å½•</h1><p>é¦–å…ˆï¼Œéœ€è¦ç”Ÿæˆ SSH å¯†é’¥å¯¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°†å…¬é’¥å¤åˆ¶åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼ˆlocalhostï¼‰ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¹¶æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç å³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-copy-id zhangjc@localhost</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to <span class="built_in">log</span> <span class="keyword">in</span> with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- <span class="keyword">if</span> you are prompted now it is to install the new keys</span><br><span class="line">zhangjc@localhost<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">ERROR: Python with virtualenvwrapper module not found!</span></span><br><span class="line"><span class="string">Either, install virtualenvwrapper module for the default python3 interpreter</span></span><br><span class="line"><span class="string">or set VIRTUALENVWRAPPER_PYTHON to the interpreter to use.</span></span><br><span class="line"><span class="string">Number of key(s) added: 1</span></span><br><span class="line"><span class="string">Now try logging into the machine, with:   &quot;ssh &#x27;</span>zhangjc@localhost<span class="string">&#x27;&quot;</span></span><br><span class="line"><span class="string">and check to make sure that only the key(s) you wanted were added.</span></span><br></pre></td></tr></table></figure><h1 id="Spark-Standaloneå¯åŠ¨"><a href="#Spark-Standaloneå¯åŠ¨" class="headerlink" title="Spark Standaloneå¯åŠ¨"></a>Spark Standaloneå¯åŠ¨</h1><p>é¦–å…ˆï¼Œä»Sparkå®˜ç½‘ï¼ˆ<a href="https://spark.apache.org/downloads.html">Downloads | Apache Spark</a>ï¼‰ä¸‹è½½å®‰è£…åŒ…ã€‚æˆ‘ä¸‹è½½çš„æ˜¯â€œ<a href="https://www.apache.org/dyn/closer.lua/spark/spark-3.5.1/spark-3.5.1-bin-hadoop3.tgz">spark-3.5.1-bin-hadoop3.tgz</a>â€ã€‚</p><p>ç„¶åï¼Œå°†ä¸‹è½½å®‰è£…åŒ…è§£å‹è‡³è‡ªå·±å–œæ¬¢çš„ä½ç½®ã€‚</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æœªé…ç½®JAVA_HOMEçš„é”™è¯¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./sbin/start-all.sh </span><br><span class="line">localhost:   JAVA_HOME is not <span class="built_in">set</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºSparké€šè¿‡SSHç™»å½•WorkerèŠ‚ç‚¹å¯åŠ¨æœåŠ¡ï¼Œä½†shellç™»å½•æœåŠ¡å™¨æ—¶ä¸ä¼šåŠ è½½ç¯å¢ƒå˜é‡ã€‚è§£å†³è¯¥é—®é¢˜éœ€è¦åœ¨spark-config.shä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/java</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåï¼Œå†æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é›†ç¾¤å¯åŠ¨æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ./sbin/start-all.sh</span><br><span class="line">$ jps</span><br><span class="line">99510 Master</span><br><span class="line">99654 Worker</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Spark </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLè¿æ¥ä¸²ç‰¹æ®Šå­—ç¬¦å¤„ç†</title>
      <link href="/2025/09/26/MySQL%E8%BF%9E%E6%8E%A5%E4%B8%B2%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E5%A4%84%E7%90%86/"/>
      <url>/2025/09/26/MySQL%E8%BF%9E%E6%8E%A5%E4%B8%B2%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡ç±» URI çš„è¿æ¥ä¸²è¿æ¥ MySQL æ˜¯å¾ˆå¸¸è§çš„ä¸€ç§æ–¹å¼ã€‚è¿æ¥ä¸²çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[scheme://][user[:[password]]@]host[:port][/schema][?attribute1=value1&amp;attribute2=value2...</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æœ‰æ—¶å‚æ•°ä¸­ä¼šå‡ºç°ç±» URI è¿æ¥ä¸²çš„ä¿ç•™å­—ç¬¦ï¼Œå¦‚åœ¨å¯†ç ä¸­å‡ºç° @ å­—ç¬¦ã€‚è¿™æ—¶å°±éœ€è¦å¯¹å‚æ•°ä¸­çš„è¿™äº›å­—ç¬¦è¿›è¡Œç¼–ç ã€‚ä¾‹å¦‚ï¼Œç”¨ %40 æ›¿æ¢ @ï¼Œç”¨ %25 æ›¿æ¢ %ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntuå¯åŠ¨ç»ˆç«¯æ—¶é»˜è®¤çª—å£æœ€å¤§åŒ–</title>
      <link href="/2025/09/05/Ubuntu%E5%90%AF%E5%8A%A8%E7%BB%88%E7%AB%AF%E6%97%B6%E9%BB%98%E8%AE%A4%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%8C%96/"/>
      <url>/2025/09/05/Ubuntu%E5%90%AF%E5%8A%A8%E7%BB%88%E7%AB%AF%E6%97%B6%E9%BB%98%E8%AE%A4%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼Œå¯ä»¥ä¼˜é›…çš„å®ç°ä»å¿«æ·æ å’Œä½¿ç”¨å¿«æ·é”®å¯åŠ¨ç»ˆç«¯æ—¶ï¼Œé»˜è®¤çª—å£æœ€å¤§åŒ–ã€‚</p><h1 id="å¿«æ·æ "><a href="#å¿«æ·æ " class="headerlink" title="å¿«æ·æ "></a>å¿«æ·æ </h1><p>æ‰“å¼€å¿«æ·æ å›¾æ ‡é…ç½®æ–‡ä»¶ <code>/usr/share/applications/org.gnome.Terminal.desktop</code>ï¼Œåœ¨å¯åŠ¨å‘½ä»¤åæ·»åŠ  <code>--maximize</code> å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exec=gnome-terminal --maximize</span><br></pre></td></tr></table></figure><p>ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºï¼Œæ­¤æ—¶å†ä»å¿«æ·æ å¯åŠ¨ç»ˆç«¯æ—¶ï¼Œçª—å£é»˜è®¤æœ€å¤§åŒ–ã€‚</p><h1 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h1><p>é¦–å…ˆï¼Œå–æ¶ˆç³»ç»Ÿé»˜è®¤çš„ç»ˆç«¯å¯åŠ¨å¿«æ·é”®ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202509/01.png"></p><p>ç„¶åï¼Œæ–°å»ºç»ˆç«¯å¯åŠ¨å¿«æ·é”®ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202509/02.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows 11ä¸»æœºUbuntu 24.04è™šæœºå…±äº«ç›®å½•æƒé™é—®é¢˜</title>
      <link href="/2025/09/05/Windows-11%E4%B8%BB%E6%9C%BAUbuntu-24-04%E8%99%9A%E6%9C%BA%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/"/>
      <url>/2025/09/05/Windows-11%E4%B8%BB%E6%9C%BAUbuntu-24-04%E8%99%9A%E6%9C%BA%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>é—®é¢˜å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202509/virtualbox%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9.jpg"></p><p>é—®é¢˜åŸå› æ˜¯åœ¨è™šæœºä¸­æŒ‚åœ¨ç›®å½•çš„å±ä¸»éç³»ç»Ÿç™»é™†ç”¨æˆ·å¼•èµ·çš„ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -l /media/</span><br><span class="line">æ€»è®¡ 8</span><br><span class="line">drwxrwx---  1 root vboxsf 4096  9æœˆ  5 09:58 sf_Downloads</span><br></pre></td></tr></table></figure><p>å¯é€šè¿‡ä»¥ä¸‹æ–¹æ³•è§£å†³ï¼š</p><p><strong>1. ä¿®æ”¹ç”¨æˆ·ç»„æƒé™</strong></p><p>åœ¨è™šæœºç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° boxsf ç»„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usermod -aG vboxsf $(<span class="built_in">whoami</span>)</span><br></pre></td></tr></table></figure><p><strong>2. é‡å¯è™šæœº</strong></p><p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œéœ€é‡å¯è™šæ‹Ÿæœºä½¿æƒé™ç”Ÿæ•ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> è™šæ‹ŸåŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Windows </tag>
            
            <tag> VirtualBox </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 24.04 ä¸­ nvm å®‰è£… Node æƒé™é—®é¢˜è§£å†³</title>
      <link href="/2025/09/05/Ubuntu-24-04-%E4%B8%AD-nvm-%E5%AE%89%E8%A3%85-Node-%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2025/09/05/Ubuntu-24-04-%E4%B8%AD-nvm-%E5%AE%89%E8%A3%85-Node-%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>å‚è€ƒnvmçš„ä¸€ä¸ªissueï¼š<a href="https://github.com/nvm-sh/nvm/issues/3363">https://github.com/nvm-sh/nvm/issues/3363</a>ã€‚</p><p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ nvm install 22</span><br><span class="line">Downloading and installing node v22.19.0...</span><br><span class="line">Downloading https://nodejs.org/dist/v22.19.0/node-v22.19.0-linux-x64.tar.xz...</span><br><span class="line">-#O=#    #       #                                                                                                                                                                       Warning: Failed to open the file /home/zhangjc/.nvm/.cache/bin/node-v22.19.0-linux-x64/node-v22.19.0-linux-x64.tar.xz: Permission denied</span><br><span class="line">curl: (23) client returned ERROR on write of 1360 bytes</span><br><span class="line"> </span><br><span class="line">download from https://nodejs.org/dist/v22.19.0/node-v22.19.0-linux-x64.tar.xz failed</span><br><span class="line">grep: /home/zhangjc/.nvm/.cache/bin/node-v22.19.0-linux-x64/node-v22.19.0-linux-x64.tar.xz: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">Provided file to checksum does not exist.</span><br><span class="line">Binary download failed, trying source.</span><br><span class="line">Downloading https://nodejs.org/dist/v22.19.0/node-v22.19.0.tar.xz...</span><br><span class="line">-=#=- #     #       #                                                                                                                                                                    Warning: Failed to open the file /home/zhangjc/.nvm/.cache/src/node-v22.19.0/node-v22.19.0.tar.xz: Permission denied</span><br><span class="line">curl: (23) client returned ERROR on write of 1360 bytes</span><br><span class="line"> </span><br><span class="line">download from https://nodejs.org/dist/v22.19.0/node-v22.19.0.tar.xz failed</span><br><span class="line">grep: /home/zhangjc/.nvm/.cache/src/node-v22.19.0/node-v22.19.0.tar.xz: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">Provided file to checksum does not exist.</span><br></pre></td></tr></table></figure><p>å¸è½½ä½¿ç”¨ snap å®‰è£…çš„ curlï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> snap remove curl --purge</span><br></pre></td></tr></table></figure><p>é‡æ–°å®‰è£… curlï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt install curl</span><br></pre></td></tr></table></figure><p>å†æ¬¡å®‰è£… node æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ nvm install 22</span><br><span class="line">Downloading and installing node v22.19.0...</span><br><span class="line">Downloading https://nodejs.org/dist/v22.19.0/node-v22.19.0-linux-x64.tar.xz...</span><br><span class="line"><span class="comment">################################################################################################################################################################################## 100.0%</span></span><br><span class="line">Computing checksum with <span class="built_in">sha256sum</span></span><br><span class="line">Checksums matched!</span><br><span class="line">Now using node v22.19.0 (npm v10.9.3)</span><br><span class="line">Creating default <span class="built_in">alias</span>: default -&gt; 22 (-&gt; v22.19.0)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Node.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Node.js </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒç³»ç»Ÿé€šè¿‡Grubä¿®æ”¹å¯åŠ¨é¡ºåº</title>
      <link href="/2025/09/05/%E5%8F%8C%E7%B3%BB%E7%BB%9F%E9%80%9A%E8%BF%87Grub%E4%BF%AE%E6%94%B9%E5%90%AF%E5%8A%A8%E9%A1%BA%E5%BA%8F/"/>
      <url>/2025/09/05/%E5%8F%8C%E7%B3%BB%E7%BB%9F%E9%80%9A%E8%BF%87Grub%E4%BF%AE%E6%94%B9%E5%90%AF%E5%8A%A8%E9%A1%BA%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘çš„åŒç³»ç»Ÿæ˜¯ Deepin + Windows 11ã€‚å®‰è£…å®Œåï¼Œé»˜è®¤å¯åŠ¨ Deepinã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202509/deepin.jpg"></p><p>æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¿®æ”¹é»˜è®¤å¯åŠ¨çš„ç³»ç»Ÿä¸º Windows 11ã€‚</p><p><strong>1. æ‰“å¼€ç»ˆç«¯</strong></p><p>é¦–å…ˆï¼Œæ‰“å¼€ Deepin ç³»ç»Ÿçš„ç»ˆç«¯ã€‚</p><p><strong>2. ç¼–è¾‘GRUBé…ç½®æ–‡ä»¶</strong></p><p>GRUBé…ç½®æ–‡ä»¶é€šå¸¸ä½äº &#x2F;etc&#x2F;default&#x2F;grubã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vi /etc/default/grub</span><br></pre></td></tr></table></figure><p><strong>3. ä¿®æ”¹GRUB_DEFAULTè®¾ç½®</strong></p><p>åœ¨&#x2F;etc&#x2F;default&#x2F;grubæ–‡ä»¶ä¸­ï¼ŒGRUB_DEFAULTé…ç½®é¡¹å†³å®šäº†é»˜è®¤å¯åŠ¨å“ªä¸ªç³»ç»Ÿã€‚ç³»ç»Ÿé¡ºåºå·ä»0å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è®¾ç½®ç¬¬ä¸€ä¸ªç³»ç»Ÿä¸ºé»˜è®¤å¯åŠ¨é¡¹ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_DEFAULT=0</span><br></pre></td></tr></table></figure><p><strong>4. ä¿å­˜å¹¶å…³é—­æ–‡ä»¶</strong></p><p>ä¿å­˜å¹¶å…³é—­ä¿®æ”¹åçš„&#x2F;etc&#x2F;default&#x2F;grubæ–‡ä»¶ã€‚</p><p><strong>5. æ›´æ–°GRUBé…ç½®</strong></p><p>æ›´æ–°GRUBé…ç½®æ–‡ä»¶ä»¥ä½¿é…ç½®ç”Ÿæ•ˆã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> update-grub</span><br></pre></td></tr></table></figure><p><strong>6. é‡å¯ç³»ç»Ÿ</strong></p><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œé‡å¯ç³»ç»Ÿä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202509/windows.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Deepin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Windows </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå…å¯†sudo</title>
      <link href="/2025/09/04/Linux%E5%85%8D%E5%AF%86sudo/"/>
      <url>/2025/09/04/Linux%E5%85%8D%E5%AF%86sudo/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºäº†é¿å… <code>/etc/sudoers</code> é…ç½®æ–‡ä»¶å†…å®¹è¿‡å¤šï¼Œå¯ä»¥åœ¨ <code>/etc/sudoers.d</code> ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶ã€‚ä»¥æˆ‘çš„ç”¨æˆ·å <code>zhangjc</code> ä¸ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> vi /etc/sudoers.d/zhangjc</span></span><br></pre></td></tr></table></figure><p>è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zhangjc ALL=(ALL) NOPASSWD:ALL</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶é€€å‡ºã€‚é‡æ–°æ‰“å¼€ç»ˆç«¯ï¼Œæ­¤æ—¶æ‰§è¡Œ <code>sudo</code> å‘½ä»¤å°±ä¸éœ€è¦å†è¾“å…¥å¯†ç äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Please make sure the TESSDATA_PREFIX environment variable is set to your tessdata directory</title>
      <link href="/2025/05/31/Please-make-sure-the-TESSDATA-PREFIX-environment-variable-is-set-to-your-tessdata-directory/"/>
      <url>/2025/05/31/Please-make-sure-the-TESSDATA-PREFIX-environment-variable-is-set-to-your-tessdata-directory/</url>
      
        <content type="html"><![CDATA[<p>å®‰è£… Tesseract åŠ PyTesseract åï¼Œåœ¨éªŒè¯æ—¶ï¼Œå‡ºç°ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/Downloads/pyocr.py&quot;</span>, line 7, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span>(pytesseract.image_to_string(Image.open(<span class="string">&quot;example.png&quot;</span>)))</span><br><span class="line">          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/crawler/lib/python3.13/site-packages/pytesseract/pytesseract.py&quot;</span>, line 486, <span class="keyword">in</span> image_to_string</span><br><span class="line">    <span class="built_in">return</span> &#123;</span><br><span class="line">           ~</span><br><span class="line">    ...&lt;2 lines&gt;...</span><br><span class="line">        Output.STRING: lambda: run_and_get_output(*args),</span><br><span class="line">        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    &#125;[output_type]()</span><br><span class="line">    ~~~~~~~~~~~~~~^^</span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/crawler/lib/python3.13/site-packages/pytesseract/pytesseract.py&quot;</span>, line 489, <span class="keyword">in</span> &lt;lambda&gt;</span><br><span class="line">    Output.STRING: lambda: run_and_get_output(*args),</span><br><span class="line">                           ~~~~~~~~~~~~~~~~~~^^^^^^^</span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/crawler/lib/python3.13/site-packages/pytesseract/pytesseract.py&quot;</span>, line 352, <span class="keyword">in</span> run_and_get_output</span><br><span class="line">    run_tesseract(**kwargs)</span><br><span class="line">    ~~~~~~~~~~~~~^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/crawler/lib/python3.13/site-packages/pytesseract/pytesseract.py&quot;</span>, line 284, <span class="keyword">in</span> run_tesseract</span><br><span class="line">    raise TesseractError(proc.returncode, get_errors(error_string))</span><br><span class="line">pytesseract.pytesseract.TesseractError: (1, <span class="string">&#x27;Error opening data file /usr/share/tesseract-ocr/5/tessdata/eng.traineddata Please make sure the TESSDATA_PREFIX environment variable is set to your &quot;tessdata&quot; directory. Failed loading language \&#x27;</span>eng\&#x27; Tesseract couldn\&#x27;t load any languages! Could not initialize tesseract.<span class="string">&#x27;)</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºä¿¡æ¯ï¼Œéœ€è¦è®¾ç½® TESSDATA_PREFIX ç¯å¢ƒå˜é‡æŒ‡å‘åŒ…å« Tesseract è¯­è¨€æ•°æ®æ–‡ä»¶ï¼ˆå¦‚ eng.traineddataã€fra.traineddata ç­‰ï¼‰çš„ tessdata ç›®å½•ã€‚é€šå¸¸è¯¥ç›®å½•ä½ç½®å¦‚ä¸‹ï¼š</p><ul><li>Linuxï¼š&#x2F;usr&#x2F;share&#x2F;tesseract-ocr&#x2F;4.00&#x2F;tessdata&#x2F;</li><li>MacOSï¼š&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;tesseract&#x2F;<version>&#x2F;share&#x2F;tessdata&#x2F;</li><li>Windowsï¼šC:\Program Files\Tesseract-OCR\tessdata\</li></ul><p>Linux ä¸‹è®¾ç½®ç¯å¢ƒå˜é‡å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> TESSDATA_PREFIX=<span class="string">&quot;/usr/share/tesseract-ocr/4.00/tessdata&quot;</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡ŒéªŒè¯ï¼ŒæˆåŠŸï¼</p><p>Linux ä¸‹ï¼Œå¯ä»¥åœ¨ &#x2F;etc&#x2F;profile æˆ– ~&#x2F;.bashrc ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œé¿å…æ¯æ¬¡ä¸´æ—¶è®¾ç½®ã€‚</p><p>å…¶ä»–ç³»ç»Ÿä¸‹ï¼Œå¯è‡ªè¡Œè®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œçˆ¬è™« </tag>
            
            <tag> OCR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux ä¸‹ ChromeDriver å®‰è£…</title>
      <link href="/2025/05/31/Linux-%E4%B8%8B-ChromeDriver-%E5%AE%89%E8%A3%85/"/>
      <url>/2025/05/31/Linux-%E4%B8%8B-ChromeDriver-%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>Selenium æ˜¯ä¸€ä¸ªç”¨äº Web åº”ç”¨ç¨‹åºæµ‹è¯•çš„å·¥å…·ã€‚å¯ä»¥é€šè¿‡å®ƒé©±åŠ¨æµè§ˆå™¨æ‰§è¡Œç‰¹å®šçš„æ“ä½œï¼Œå¦‚ç‚¹å‡»ã€ä¸‹æ»‘ã€èµ„æºåŠ è½½ä¸æ¸²æŸ“ç­‰ã€‚è¯¥å·¥å…·åœ¨çˆ¬è™«å¼€å‘ä¸­ä¹Ÿéå¸¸æœ‰å¸®åŠ©ã€‚Selenium éœ€è¦é€šè¿‡æµè§ˆå™¨é©±åŠ¨æ“æ§æµè§ˆå™¨ï¼Œä¸åŒçš„æµè§ˆå™¨å¯¹åº”çš„é©±åŠ¨ä¸åŒï¼ŒChrome æµè§ˆå™¨çš„é©±åŠ¨æ˜¯ChromeDriverï¼ŒFirefox æµè§ˆå™¨çš„é©±åŠ¨æ˜¯ GeckoDriverã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œæµè§ˆå™¨é©±åŠ¨ç‰ˆæœ¬å¿…é¡»ä¸è®¡ç®—æœºä¸Šçš„æµè§ˆå™¨ç‰ˆæœ¬å¯¹åº”ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚</p><p>æ‰“å¼€ Chrome æµè§ˆå™¨åç‚¹å‡»å³ä¸Šè§’ä¸‰ä¸ªç‚¹èœå•ä¸­çš„â€œå¸®åŠ©â€é€‰é¡¹ï¼Œå¹¶é€‰æ‹©â€œå…³äº Google Chromeâ€â€‹ï¼Œå³å¯çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯ï¼š<img src="/images/202505/02.png"></p><p>114.0.5735.90 åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œä» <a href="http://chromedriver.storage.googleapis.com/index.html">http://chromedriver.storage.googleapis.com/index.html</a> ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ã€‚114.0.5735.90 ä»¥ä¸Šç‰ˆæœ¬ï¼Œéœ€è¦ä» GitHub é¡¹ç›® <a href="https://github.com/GoogleChromeLabs/chrome-for-testing?tab=readme-ov-file#json-api-endpoints">chrome-for-testing</a> ä¸­çš„ <a href="https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json">JSON API ç«¯ç‚¹æ–‡ä»¶</a> å†…å®¹æŸ¥æ‰¾å¯¹åº”ç‰ˆæœ¬çš„ä¸‹è½½åœ°å€ã€‚</p><p>ä¸‹è½½åï¼Œå°†å‹ç¼©åŒ…è§£å‹åå¾—åˆ°çš„ chromedriver æ–‡ä»¶å¤åˆ¶åˆ° <code>/user/bin/</code> ç›®å½•ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">mv</span> chromedriver /usr/bin/</span><br></pre></td></tr></table></figure><p>åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ ChromeDriver ç‰ˆæœ¬å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ chromedriver --version</span><br><span class="line">ChromeDriver 135.0.7049.95 (de2eb485a1951079e63bdb57ce25544d2dc79c15-refs/branch-heads/7049@&#123;#1836&#125;)</span><br></pre></td></tr></table></figure><p>æ­£ç¡®æ˜¾ç¤º ChromeDriver ç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æ­£ç¡®ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p><p>å¯ä»¥é€šè¿‡ Python ä»£ç æ¥éªŒè¯æµè§ˆå™¨ä¸é©±åŠ¨ç‰ˆæœ¬æ˜¯å¦åŒ¹é…ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>browser = webdriver.Chrome()</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨å‘½ä»¤æ‰§è¡Œåå”¤èµ·ä¸‹å›¾æ‰€ç¤ºçš„æµè§ˆå™¨çª—å£ï¼Œä¸”æ— æŠ¥é”™ï¼Œåˆ™ä»£è¡¨æµè§ˆå™¨ä¸é©±åŠ¨ç¨‹åºåŒ¹é…ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p><p><img src="/images/202505/03.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> æµè§ˆå™¨ </tag>
            
            <tag> ç½‘ç»œçˆ¬è™« </tag>
            
            <tag> Chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux ç³»ç»Ÿ Docker Compose å®‰è£…</title>
      <link href="/2025/05/31/Linux-%E7%B3%BB%E7%BB%9F-Docker-Compose-%E5%AE%89%E8%A3%85/"/>
      <url>/2025/05/31/Linux-%E7%B3%BB%E7%BB%9F-Docker-Compose-%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡æ–¹æ³•æ˜¯ç›´æ¥ä¸‹è½½ GitHub é¡¹ç›®çš„ release ç‰ˆæœ¬ã€‚é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/docker/compose">https://github.com/docker/compose</a>ã€‚</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†å‘å¸ƒç¨‹åºåŠ è½½è‡³æœ¬åœ°ç›®å½•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> wget -c -t 0 https://github.com/docker/compose/releases/download/v2.29.2/docker-compose-`<span class="built_in">uname</span> -s`-`<span class="built_in">uname</span> -m` -O /opt/docker/docker-compose</span><br></pre></td></tr></table></figure><p>æ·»åŠ æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> a+rx /opt/docker/docker-compose</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè½¯é“¾æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /opt/docker/docker-compose /usr/local/bin/</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¦‚æœæ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose -v</span><br><span class="line">Docker Compose version v2.29.2</span><br></pre></td></tr></table></figure><p>Docker å®‰è£…è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Deepin-20-9%E7%A4%BE%E5%8C%BA%E7%89%88%E5%AE%89%E8%A3%85Docker/">Deepin 20.9 ç¤¾åŒºç‰ˆå®‰è£… Docker</a> å’Œ <a href="https://www.zhangjc.com/2025/05/30/Deepin-23-10%E5%AE%89%E8%A3%85Docker/">Deepin 23.10 å®‰è£… Docker</a>ã€‚</p><p>DockerHub é•œåƒé…ç½®è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Linux%E9%85%8D%E7%BD%AEDockerHub%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/">Linux é…ç½® DockerHub é•œåƒæºé…ç½®</a>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> äº‘è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxé…ç½®DockerHubé•œåƒæºé…ç½®</title>
      <link href="/2025/05/31/Linux%E9%85%8D%E7%BD%AEDockerHub%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/"/>
      <url>/2025/05/31/Linux%E9%85%8D%E7%BD%AEDockerHub%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºæŸäº›åŸå› ï¼ŒDockerHubå®˜æ–¹é•œåƒæºå·²ä¸å¯ç”¨ï¼Œå›½å†…ä¸€äº›é•œåƒæºä¹Ÿå·²ä¸å¯ç”¨ï¼Œå¤§å®¶å¯ä»¥æœç´¢å¯ç”¨çš„é•œåƒæºå¹¶ä¿®æ”¹é…ç½®ã€‚æ¨èä¸€ç¯‡è‰¯å¿ƒåšæ–‡ï¼š<a href="https://zhuanlan.zhihu.com/p/24461370776">https://zhuanlan.zhihu.com/p/24461370776</a>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vi /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">    &quot;https://docker.xuanyuan.me&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é•œåƒæºä¸ä¿è¯ä¸€ç›´å¯ç”¨ï¼Œå¦‚ä¸å¯ç”¨è‡ªè¡Œæœç´¢æŸ¥æ‰¾å¯ç”¨çš„é•œåƒæºã€‚<br>å›½å†…å¯ç”¨é•œåƒæºä¸€èˆ¬åªåŒ…å«äº†åŸºç¡€é•œåƒï¼Œå¦‚æˆ‘ä½¿ç”¨çš„é•œåƒæºä¸­å°±æ²¡æœ‰Supersetçš„é•œåƒï¼Œä½¿ç”¨Dockeréƒ¨ç½²æœ¬åœ°è¯•ç”¨Supersetç¯å¢ƒæ—¶ï¼Œåªèƒ½è‡ªè¡Œæ„å»ºé•œåƒï¼Œä¹‹åçš„æ–‡ç« å†åˆ†äº«éƒ¨ç½²è¿‡ç¨‹ã€‚</p></blockquote><p>é‡å¯dockeråŠ è½½æ›´æ–°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure><p>Docker å®‰è£…è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Deepin-20-9%E7%A4%BE%E5%8C%BA%E7%89%88%E5%AE%89%E8%A3%85Docker/">Deepin 20.9 ç¤¾åŒºç‰ˆå®‰è£… Docker</a> å’Œ <a href="https://www.zhangjc.com/2025/05/30/Deepin-23-10%E5%AE%89%E8%A3%85Docker/">Deepin 23.10 å®‰è£… Docker</a>ã€‚</p><p>Docker Compose å®‰è£…è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Linux-%E7%B3%BB%E7%BB%9F-Docker-Compose-%E5%AE%89%E8%A3%85/">Linux ç³»ç»Ÿ Docker Compose å®‰è£…</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äº‘è®¡ç®— </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> äº‘è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin 20.9ç¤¾åŒºç‰ˆå®‰è£…Docker</title>
      <link href="/2025/05/31/Deepin-20-9%E7%A4%BE%E5%8C%BA%E7%89%88%E5%AE%89%E8%A3%85Docker/"/>
      <url>/2025/05/31/Deepin-20-9%E7%A4%BE%E5%8C%BA%E7%89%88%E5%AE%89%E8%A3%85Docker/</url>
      
        <content type="html"><![CDATA[<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><p>Deepin 20.9 ç¤¾åŒºç‰ˆå®‰è£… Docker éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p><ul><li>å› ä¸ºæŸäº›åŸå› ï¼ŒDocker å®˜æ–¹æºåŸºæœ¬ä¸å¯ç”¨ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨é•œåƒæºè¿›è¡Œå®‰è£…ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç”¨å®‰è£…åŒ…ç›´æ¥å®‰è£…ï¼Œä½†åç»­å‡çº§ä¸å¤Ÿæ–¹ä¾¿ã€‚</li><li>éœ€è¦ç¡®å®šå¯¹åº” Debian çš„ç‰ˆæœ¬åŠä»£å·ã€‚</li></ul><h1 id="å¸è½½è€ç‰ˆæœ¬"><a href="#å¸è½½è€ç‰ˆæœ¬" class="headerlink" title="å¸è½½è€ç‰ˆæœ¬"></a>å¸è½½è€ç‰ˆæœ¬</h1><p>å¦‚æœå®‰è£…è¿‡è€ç‰ˆæœ¬ï¼Œç¡®ä¿å…ˆå¸è½½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get remove docker.io docker-engine</span><br></pre></td></tr></table></figure><h1 id="ç¡®å®š-Debian-ç‰ˆæœ¬ä»£å·"><a href="#ç¡®å®š-Debian-ç‰ˆæœ¬ä»£å·" class="headerlink" title="ç¡®å®š Debian ç‰ˆæœ¬ä»£å·"></a>ç¡®å®š Debian ç‰ˆæœ¬ä»£å·</h1><p>æŸ¥çœ‹Deepinå¯¹åº”çš„Debianç‰ˆæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/debian_version</span><br><span class="line">10.10</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹Debianç‰ˆæœ¬åˆ—è¡¨ï¼Œ10.10ç‰ˆæœ¬ä»£å·ä¸ºbusterã€‚</p><p><img src="/images/202505/01.jpg"></p><h1 id="æ·»åŠ é•œåƒæº"><a href="#æ·»åŠ é•œåƒæº" class="headerlink" title="æ·»åŠ é•œåƒæº"></a>æ·»åŠ é•œåƒæº</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> deepin-editor /etc/apt/sources.list.d/docker.list</span><br></pre></td></tr></table></figure><p>åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian buster stable</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œä¸€äº›é•œåƒæºç¼ºå°‘å¯¹åº”ç‰ˆæœ¬çš„å‘è¡ŒåŒ…ï¼Œå¯ä»¥æµè§ˆå™¨è®¿é—®é•œåƒæºæŸ¥çœ‹ç¡®å®šã€‚</p></blockquote><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>æ›´æ–°ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><p>å®‰è£… docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> a+rw /var/run/docker.sock</span><br><span class="line"><span class="comment"># å°†ç”¨æˆ·æ·»åŠ åˆ°dockerç»„ä¸­</span></span><br><span class="line"><span class="built_in">sudo</span> usermod -aG docker <span class="variable">$USER</span></span><br><span class="line"><span class="comment"># é‡å¯docker</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure><blockquote><p>é‡å¯ç”µè„‘ï¼Œå¦‚æœä¸é‡å¯å¯èƒ½ä¼š æœ‰é—®é¢˜ã€‚</p></blockquote><p>Deepin 23.10 å®‰è£… Docker è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/30/Deepin-23-10%E5%AE%89%E8%A3%85Docker/">Deepin 23.10 å®‰è£… Docker</a>ã€‚</p><p>DockerHub é•œåƒæºé…ç½®è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Linux%E9%85%8D%E7%BD%AEDockerHub%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/">Linux é…ç½® DockerHub é•œåƒæºé…ç½®</a>ã€‚</p><p>Docker Compose å®‰è£…è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Linux-%E7%B3%BB%E7%BB%9F-Docker-Compose-%E5%AE%89%E8%A3%85/">Linux ç³»ç»Ÿ Docker Compose å®‰è£…</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äº‘è®¡ç®— </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Deepin </tag>
            
            <tag> Docker </tag>
            
            <tag> äº‘è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin 23.10å®‰è£…Docker</title>
      <link href="/2025/05/30/Deepin-23-10%E5%AE%89%E8%A3%85Docker/"/>
      <url>/2025/05/30/Deepin-23-10%E5%AE%89%E8%A3%85Docker/</url>
      
        <content type="html"><![CDATA[<p>Deepin æ˜¯åŸºäº Debian çš„å›½äº§ Linux å‘è¡Œç‰ˆï¼Œå®‰è£… Docker Desktop å¯èƒ½ä¼šé‡åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œå› ä¸º Docker Desktop å®˜æ–¹ä¸»è¦æ”¯æŒ Ubuntu&#x2F;Debian&#x2F;Red Hat&#x2F;Fedora&#x2F;Arch ç­‰ä¸»æµå‘è¡Œç‰ˆï¼Œæ‰€ä»¥é€‰æ‹©å®‰è£… Docker Engineã€‚</p><ol><li>å¸è½½æ—§ç‰ˆæœ¬ï¼ˆå¦‚æœ‰ï¼‰</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt remove docker.io docker-doc docker-compose podman-docker containerd runc</span><br></pre></td></tr></table></figure><ol start="2"><li>å®‰è£…ä¾èµ–</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install -y ca-certificates curl gnupg lsb-release</span><br></pre></td></tr></table></figure><ol start="3"><li>æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /etc/apt/keyrings</span><br><span class="line">curl -fsSL https://download.docker.com/linux/debian/gpg | <span class="built_in">sudo</span> gpg --dearmor -o /etc/apt/keyrings/docker.gpg</span><br></pre></td></tr></table></figure><ol start="4"><li>æ·»åŠ  Docker æº</li></ol><p>ç”±äº Deepin åŸºäº Debianï¼Œå¯ä»¥ä½¿ç”¨ Debian çš„ Docker æºï¼ˆéœ€åŒ¹é… Deepin ç‰ˆæœ¬å¯¹åº”çš„ Debian ç‰ˆæœ¬ï¼‰ã€‚</p><p>æŸ¥çœ‹Deepinå¯¹åº”çš„Debianç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/debian_version</span><br><span class="line">bookworm/sid</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ  Docker æºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian bookworm stable&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure><ol start="5"><li>å®‰è£… Docker Engine</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure><ol start="6"><li>å¯åŠ¨ Docker</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> --now docker</span><br></pre></td></tr></table></figure><ol start="7"><li>å…è®¸æ™®é€šç”¨æˆ·è¿è¡Œ Docker</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usermod -aG docker <span class="variable">$USER</span></span><br><span class="line">newgrp docker  <span class="comment"># é‡æ–°åŠ è½½ç”¨æˆ·ç»„</span></span><br></pre></td></tr></table></figure><blockquote><p>å¯èƒ½éœ€è¦é‡å¯ç”µè„‘ã€‚</p></blockquote><ol start="8"><li>æµ‹è¯• Docker</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run hello-world</span><br></pre></td></tr></table></figure><blockquote><p>éœ€å…ˆé…ç½®å›½å†…é•œåƒæºã€‚ç°åœ¨å¯ç”¨çš„é•œåƒæºè¶Šæ¥è¶Šå°‘äº†ï¼Œæ¨èä¸€ç¯‡è‰¯å¿ƒåšæ–‡ï¼š<a href="https://zhuanlan.zhihu.com/p/24461370776">https://zhuanlan.zhihu.com/p/24461370776</a>ã€‚</p></blockquote><p>å®‰è£…æˆåŠŸçš„éªŒè¯ç»“æœä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ docker run hello-world</span><br><span class="line">Unable to find image <span class="string">&#x27;hello-world:latest&#x27;</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">e6590344b1a5: Pull complete </span><br><span class="line">Digest: sha256:dd01f97f252193ae3210da231b1dca0cffab4aadb3566692d6730bf93f123a48</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">&quot;hello-world&quot;</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure><p>Deepin 20.9 ç¤¾åŒºç‰ˆå®‰è£… Docker è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Deepin-20-9%E7%A4%BE%E5%8C%BA%E7%89%88%E5%AE%89%E8%A3%85Docker/">Deepin 20.9 ç¤¾åŒºç‰ˆå®‰è£… Docker</a>ã€‚</p><p>DockerHub é•œåƒæºé…ç½®è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Linux%E9%85%8D%E7%BD%AEDockerHub%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/">Linux é…ç½® DockerHub é•œåƒæºé…ç½®</a>ã€‚</p><p>Docker Compose å®‰è£…è§æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2025/05/31/Linux-%E7%B3%BB%E7%BB%9F-Docker-Compose-%E5%AE%89%E8%A3%85/">Linux ç³»ç»Ÿ Docker Compose å®‰è£…</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äº‘è®¡ç®— </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Deepin </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå‘½ä»¤è¡Œå‘½ä»¤è‡ªåŠ¨è¡¥å…¨</title>
      <link href="/2025/05/28/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8/"/>
      <url>/2025/05/28/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<p>GitHubé¡¹ç›®ï¼š<a href="https://github.com/scop/bash-completion%E3%80%82">https://github.com/scop/bash-completionã€‚</a></p><p>ç¡®è®¤bashç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash --version</span><br></pre></td></tr></table></figure><p>make checkè¿‡ç¨‹å‡ºç°é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/bin/sh: pytest: <span class="built_in">command</span> not found</span><br><span class="line">make[4]: *** [check-local] Error 127</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘çš„ç¯å¢ƒæ²¡æœ‰å®‰è£…pipï¼Œæ‰€ä»¥å…ˆå®‰è£…ã€‚å®‰è£…å‚è€ƒ<a href="https://pip.pypa.io/en/stable/installation/%E3%80%82%E9%87%87%E7%94%A8get-pip.py%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85%EF%BC%8C%E8%AF%A5%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E4%BF%A1%E6%81%AF%E5%A6%82%E4%B8%8B%EF%BC%9A">https://pip.pypa.io/en/stable/installation/ã€‚é‡‡ç”¨get-pip.pyæ–¹å¼å®‰è£…ï¼Œè¯¥æ–‡ä»¶ä¸‹è½½ä¿¡æ¯å¦‚ä¸‹ï¼š</a></p><ul><li>Python3.7åŠä»¥ä¸Šç‰ˆæœ¬ï¼š<a href="https://bootstrap.pypa.io/get-pip.py">https://bootstrap.pypa.io/get-pip.py</a></li><li>Python3.7ä»¥ä¸‹ç‰ˆæœ¬ï¼š<a href="https://bootstrap.pypa.io/pip/2.7/get-pip.py">https://bootstrap.pypa.io/pip/2.7/get-pip.py</a></li></ul><p>å®‰è£…æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python get-pip.py</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…pytestï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest</span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œmake checkæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ABS_TOP_BUILDDIR=<span class="string">&quot;/root/bash-completion&quot;</span> \</span><br><span class="line">pytest  .</span><br><span class="line">ImportError <span class="keyword">while</span> loading conftest <span class="string">&#x27;/root/bash-completion/test/t/conftest.py&#x27;</span>.</span><br><span class="line">  File <span class="string">&quot;/root/bash-completion/test/t/conftest.py&quot;</span>, line 32</span><br><span class="line">    items: Iterable[str],</span><br><span class="line">         ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line">make[4]: *** [check-local] Error 4</span><br></pre></td></tr></table></figure><p>æ€€ç–‘æ˜¯Pythonç‰ˆæœ¬å¯¼è‡´çš„é—®é¢˜ï¼Œç”±äºæ—¶é—´å…³ç³»æ²¡ç»§ç»­ç ”ç©¶ã€‚åæ­£è¯¥é”™è¯¯ä¸å½±å“å®‰è£…å’Œæ­£å¸¸ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pipå›½å†…é•œåƒæºé…ç½®</title>
      <link href="/2025/05/27/pip%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/"/>
      <url>/2025/05/27/pip%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>ä»¥æ¸…åå¤§å­¦é•œåƒæºä¸ºä¾‹ï¼š<a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p><h1 id="å•æ¬¡ä½¿ç”¨é•œåƒæº"><a href="#å•æ¬¡ä½¿ç”¨é•œåƒæº" class="headerlink" title="å•æ¬¡ä½¿ç”¨é•œåƒæº"></a>å•æ¬¡ä½¿ç”¨é•œåƒæº</h1><p>åœ¨pipå®‰è£…å‘½ä»¤åæ·»åŠ <code>-i</code>å‚æ•°æŒ‡å®šé•œåƒæºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install package_name -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h1 id="æ°¸ä¹…é…ç½®é•œåƒæº"><a href="#æ°¸ä¹…é…ç½®é•œåƒæº" class="headerlink" title="æ°¸ä¹…é…ç½®é•œåƒæº"></a>æ°¸ä¹…é…ç½®é•œåƒæº</h1><h2 id="ä½¿ç”¨å‘½ä»¤é…ç½®"><a href="#ä½¿ç”¨å‘½ä»¤é…ç½®" class="headerlink" title="ä½¿ç”¨å‘½ä»¤é…ç½®"></a>ä½¿ç”¨å‘½ä»¤é…ç½®</h2><p>ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨å‘½ä»¤é…ç½®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹pipé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹pipé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹pipé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹pipé…ç½®æ–‡ä»¶</h2><p>åˆ›å»ºæˆ–ä¿®æ”¹pipé…ç½®æ–‡ä»¶ï¼š</p><ul><li>Linux&#x2F;MacOS: ~&#x2F;.pip&#x2F;pip.conf</li><li>Windows: %APPDATA%\pip\pip.ini æˆ– %USERPROFILE%\pip\pip.ini</li></ul><p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[global]</span></span><br><span class="line"><span class="attr">index-url</span> = https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="attr">trusted-host</span> = pypi.tuna.tsinghua.edu.cn</span><br></pre></td></tr></table></figure><h1 id="å¸¸ç”¨å›½å†…é•œåƒæº"><a href="#å¸¸ç”¨å›½å†…é•œåƒæº" class="headerlink" title="å¸¸ç”¨å›½å†…é•œåƒæº"></a>å¸¸ç”¨å›½å†…é•œåƒæº</h1><ul><li>æ¸…åå¤§å­¦ï¼š<a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></li><li>é˜¿é‡Œäº‘ï¼š<a href="https://mirrors.aliyun.com/pypi/simple/">https://mirrors.aliyun.com/pypi/simple/</a></li><li>ä¸­å›½ç§‘æŠ€å¤§å­¦ï¼š<a href="https://pypi.mirrors.ustc.edu.cn/simple/">https://pypi.mirrors.ustc.edu.cn/simple/</a></li></ul><h1 id="æ¢å¤é»˜è®¤æº"><a href="#æ¢å¤é»˜è®¤æº" class="headerlink" title="æ¢å¤é»˜è®¤æº"></a>æ¢å¤é»˜è®¤æº</h1><p>åˆ é™¤é…ç½®æ–‡ä»¶æˆ–è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config <span class="built_in">unset</span> global.index-url</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹³å‡ä¸æ–¹å·®</title>
      <link href="/2025/05/20/%E5%B9%B3%E5%9D%87%E4%B8%8E%E6%96%B9%E5%B7%AE/"/>
      <url>/2025/05/20/%E5%B9%B3%E5%9D%87%E4%B8%8E%E6%96%B9%E5%B7%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="å¹³å‡"><a href="#å¹³å‡" class="headerlink" title="å¹³å‡"></a>å¹³å‡</h1><h2 id="ç®—æœ¯å¹³å‡æ•°"><a href="#ç®—æœ¯å¹³å‡æ•°" class="headerlink" title="ç®—æœ¯å¹³å‡æ•°"></a>ç®—æœ¯å¹³å‡æ•°</h2><p>æŠŠæ‰€æœ‰çš„æ•°åŠ èµ·æ¥ï¼Œç„¶åé™¤ä»¥æ•°çš„æ•°ç›®ã€‚æŠŠæ•°å‹å¹³ï¼Œå¹³å‡åˆ†é…ã€‚</p><h2 id="å‡ ä½•å¹³å‡æ•°"><a href="#å‡ ä½•å¹³å‡æ•°" class="headerlink" title="å‡ ä½•å¹³å‡æ•°"></a>å‡ ä½•å¹³å‡æ•°</h2><p>æŠŠæ‰€æœ‰æ•°ç›¸ä¹˜ï¼Œç„¶åå¼€ n æ¬¡æ–¹æ ¹ã€‚å‡ ä½•å¹³å‡æ•°å¯ä»¥ç”¨æ¥æ¯”è¾ƒæ€§è´¨éå¸¸ä¸åŒçš„äº‹ç‰©ã€‚</p><h2 id="å¹³å‡å·®"><a href="#å¹³å‡å·®" class="headerlink" title="å¹³å‡å·®"></a>å¹³å‡å·®</h2><p>ä¹Ÿå«å¹³å‡ç»å¯¹åå·®ã€‚å„ä¸ªæ•°æ®å€¼ç¦»å¹³å‡å€¼å¹³å‡æœ‰å¤šè¿œã€‚</p><h1 id="æ–¹å·®"><a href="#æ–¹å·®" class="headerlink" title="æ–¹å·®"></a>æ–¹å·®</h1><h2 id="æ–¹å·®-1"><a href="#æ–¹å·®-1" class="headerlink" title="æ–¹å·®"></a>æ–¹å·®</h2><p>ç¦»å¹³å‡çš„å¹³æ–¹è·ç¦»çš„å¹³å‡ã€‚å¦‚æœæœ‰â€œNâ€ä¸ªæ•°å€¼ï¼Œæ±‚æ–¹å·®æœ‰ä¸€ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¯¹è±¡æ€»ä½“ï¼šåœ¨æ±‚æ–¹å·®æ—¶é™¤ä»¥ N</li><li>æ ·æœ¬ï¼šåœ¨æ±‚æ–¹å·®æ—¶é™¤ä»¥ N-1</li></ul><h2 id="æ ‡å‡†å·®"><a href="#æ ‡å‡†å·®" class="headerlink" title="æ ‡å‡†å·®"></a>æ ‡å‡†å·®</h2><p>æ ‡å‡†å·®æ˜¯æ–¹å·®çš„å¹³æ–¹æ ¹ã€‚æ ‡å‡†å·®å¾ˆæœ‰ç”¨ï¼Œæ˜¯ä¸€ä¸ªç”„åˆ«æ•°å€¼æ˜¯æ­£å¸¸ä¸å¦çš„â€æ ‡å‡†â€ã€‚</p><h1 id="æå·®"><a href="#æå·®" class="headerlink" title="æå·®"></a>æå·®</h1><p>æå·®åˆç§°èŒƒå›´è¯¯å·®æˆ–å…¨è·(Range)ï¼Œä»¥Rè¡¨ç¤ºï¼Œæ˜¯ç”¨æ¥è¡¨ç¤ºç»Ÿè®¡èµ„æ–™ä¸­çš„å˜å¼‚é‡æ•°(measures of variation)ï¼Œå…¶æœ€å¤§å€¼ä¸æœ€å°å€¼ä¹‹é—´çš„å·®è·ï¼Œå³æœ€å¤§å€¼å‡æœ€å°å€¼åæ‰€å¾—ä¹‹æ•°æ®ã€‚</p><p>æå·®æŒ‡çš„æ˜¯è¿™äº›æ•°å­—åˆ†å¼€å¾—æœ‰å¤šè¿œï¼Œè®¡ç®—æ–¹æ³•æ˜¯ï¼šç”¨å…¶ä¸­æœ€å¤§çš„æ•°å‡å»æœ€å°çš„æ•°ã€‚æå·®è¶Šå¤§ï¼Œè¡¨ç¤ºåˆ†å¾—è¶Šå¼€ï¼Œæœ€å¤§æ•°å’Œæœ€å°æ•°ä¹‹é—´çš„å·®å°±è¶Šå¤§ï¼›æå·®è¶Šå°ï¼Œæ•°å­—é—´å°±è¶Šç´§å¯†ï¼Œè¿™å°±æ˜¯æå·®çš„æ¦‚å¿µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®åˆ†æ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLè®¾ç½®å­—æ®µå†…å®¹å¤§å°å†™æ•æ„Ÿ</title>
      <link href="/2025/04/15/MySQL%E8%AE%BE%E7%BD%AE%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E5%A4%A7%E5%B0%8F%E5%86%99%E6%95%8F%E6%84%9F/"/>
      <url>/2025/04/15/MySQL%E8%AE%BE%E7%BD%AE%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E5%A4%A7%E5%B0%8F%E5%86%99%E6%95%8F%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<p>MySQLçš„COLLATEæ”¯æŒä»¥ä¸‹å‡ ç§å¸¸ç”¨ç¼–ç :</p><ul><li>utf8mb4_unicode_ci - åŸºäº Unicode æ’åºè§„åˆ™ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚</li><li>utf8mb4_general_ci - ç®€å•æ’åºè§„åˆ™ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚</li><li>utf8mb4_bin - äºŒè¿›åˆ¶æ¯”è¾ƒï¼ŒåŒºåˆ†å¤§å°å†™ã€‚</li><li>utf8mb4_0900_ai_ci - MySQL 8.0+ çš„ Unicode 9.0 æ ‡å‡†æ’åºè§„åˆ™ã€‚</li></ul><p>å¦‚ä¸è®¾ç½®ï¼Œåœ¨<code>MySQL 8.4.4</code>ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤æ˜¯<code>utf8mb4_0900_ai_ci</code>ç¼–ç ï¼Œåœ¨æŸ¥è¯¢æ•°æ®æ—¶ä¸åŒºåˆ†å¤§å°å†™ã€‚å¦‚ä»¥ä¸‹ä¸¤æ¡è¯­å¥çš„æŸ¥è¯¢ç»“æœä¸€æ ·ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stock_trans <span class="keyword">where</span> tran_type <span class="operator">=</span> <span class="string">&#x27;S&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stock_trans <span class="keyword">where</span> tran_type <span class="operator">=</span> <span class="string">&#x27;s&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å…¨å±€è®¾ç½®COLLATEçš„ç¼–ç ä¸º<code>utf8mb4_bin</code>ã€‚åœ¨my.cnfï¼ˆLinuxï¼‰é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8mb4</span><br><span class="line">collation-server=utf8mb4_bin</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯MySQLï¼Œè¿™æ ·æ–°å»ºåº“æˆ–è¡¨æ—¶é»˜è®¤æ•°æ®å†…å®¹åŒºåˆ†å¤§å°å†™ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinsé…ç½®QQé‚®ç®±</title>
      <link href="/2025/03/31/Jenkins%E9%85%8D%E7%BD%AEQQ%E9%82%AE%E7%AE%B1/"/>
      <url>/2025/03/31/Jenkins%E9%85%8D%E7%BD%AEQQ%E9%82%AE%E7%AE%B1/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œé…ç½®SMTPæœåŠ¡å™¨ä¸ºâ€œsmtp.qq.comâ€ã€‚</p><p>ç„¶åï¼Œå±•å¼€é«˜çº§é…ç½®é¡¹ï¼Œå¹¶é€‰ä¸­ä½¿ç”¨SMTPè®¤è¯ï¼ŒåŒæ—¶é€‰ä¸­ä½¿ç”¨SSLã€‚</p><p>æœ€åï¼Œåœ¨ç”¨æˆ·åè¾“å…¥æ¡†è¾“å…¥å®Œæ•´QQé‚®ç®±åœ°å€ã€‚æ³¨æ„ï¼Œå¯†ç è¾“å…¥æ¡†éœ€è¦è¾“å…¥ç”Ÿæˆçš„æˆæƒç ï¼Œè€Œä¸æ˜¯è¾“å…¥é‚®ç®±çš„ç™»é™†å¯†ç ã€‚</p><ul><li>Jenkinsé‚®ç®±ç”¨æˆ·åï¼š</li></ul><p><img src="/images/202503/03.png" alt="Jenkinsé‚®ç®±ç”¨æˆ·å"></p><ul><li>QQé‚®ç®±æˆæƒç å…¥å£ï¼š</li></ul><p><img src="/images/202503/04.png" alt="QQé‚®ç®±æˆæƒç å…¥å£"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinsä¸­æ‰¾ä¸åˆ°pyenvå‘½ä»¤é—®é¢˜è§£å†³</title>
      <link href="/2025/03/31/Jenkins%E4%B8%AD%E6%89%BE%E4%B8%8D%E5%88%B0pyenv%E5%91%BD%E4%BB%A4%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2025/03/31/Jenkins%E4%B8%AD%E6%89%BE%E4%B8%8D%E5%88%B0pyenv%E5%91%BD%E4%BB%A4%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Building in workspace /home/zhangjc/.jenkins/workspace/updateCompanies</span><br><span class="line">[updateCompanies] $ /bin/sh -xe /tmp/jenkins15523675592087959393.sh</span><br><span class="line">+ pyenv activate probe</span><br><span class="line">/tmp/jenkins15523675592087959393.sh: 2: pyenv: not found</span><br><span class="line">Build step &#x27;Execute shell&#x27; marked build as failure</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç”¨æˆ·ç¯å¢ƒå˜é‡åŠ è½½è„šæœ¬<code>.bashrc</code>ï¼Œæ‰¾åˆ°pyenvç¯å¢ƒå˜é‡åŠ è½½å†…å®¹ï¼Œå°†å†…å®¹æ·»åŠ è‡³Jenkinsæ„å»ºæ­¥éª¤è„šæœ¬ä¸­ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export PYENV_ROOT=&quot;$HOME/.pyenv&quot;</span><br><span class="line">command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;</span><br><span class="line">eval &quot;$(pyenv init -)&quot;</span><br><span class="line"></span><br><span class="line">pyenv activate probe</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Firefoxé»˜è®¤åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€æ”¶è—æ é“¾æ¥</title>
      <link href="/2025/03/31/Firefox%E9%BB%98%E8%AE%A4%E5%9C%A8%E6%96%B0%E6%A0%87%E7%AD%BE%E9%A1%B5%E6%89%93%E5%BC%80%E6%94%B6%E8%97%8F%E6%A0%8F%E9%93%BE%E6%8E%A5/"/>
      <url>/2025/03/31/Firefox%E9%BB%98%E8%AE%A4%E5%9C%A8%E6%96%B0%E6%A0%87%E7%AD%BE%E9%A1%B5%E6%89%93%E5%BC%80%E6%94%B6%E8%97%8F%E6%A0%8F%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<p>é€‰æ‹©Firefoxæµè§ˆå™¨ï¼Œæœ‰ä¸¤ä¸ªç†ç”±ï¼š</p><ul><li>å¯ä»¥ä½¿ç”¨Firefoxå¤šç«¯åŒæ­¥åŠŸèƒ½ã€‚</li><li>å¯ä»¥åœ¨æµè§ˆå™¨å†…é…ç½®ä»£ç†ï¼Œæ–¹ä¾¿æŠ“åŒ…æ—¶çš„ä»£ç†é…ç½®ã€‚</li></ul><p>è™½ç„¶å¯ä»¥æŒ‰ä¸‹Ctrlé”®æ—¶ç‚¹å‡»é“¾æ¥ï¼Œä»¥åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€ï¼Œä½†æ¯æ¬¡æ“ä½œè¿˜æ˜¯å¤ªéº»çƒ¦äº†ã€‚é…ç½®é»˜è®¤åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ï¼Œå¯ä»¥å®‰è£…Firefoxçš„æ‰©å±•æ’ä»¶â€œOpen bookmarks in new tabâ€ã€‚</p><p>åœ¨Firefoxçš„â€œç®¡ç†æ‰©å±•â€é¡µé¢æœç´¢â€œOpen bookmarks in new tabâ€ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ’ä»¶å®‰è£…å³å¯ã€‚å®‰è£…å®Œæˆåï¼Œå†ç‚¹å‡»é“¾æ¥æ—¶ï¼Œé»˜è®¤åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æµè§ˆå™¨ </category>
          
          <category> Firefox </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Firefox </tag>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NPMé•œåƒæºè®¾ç½®</title>
      <link href="/2025/03/10/NPM%E9%95%9C%E5%83%8F%E6%BA%90%E8%AE%BE%E7%BD%AE/"/>
      <url>/2025/03/10/NPM%E9%95%9C%E5%83%8F%E6%BA%90%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>ä»¥è®¾ç½®é˜¿é‡Œé•œåƒæºä¸ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰é•œåƒæº</span></span><br><span class="line">npm config get registry</span><br><span class="line">Â </span><br><span class="line"><span class="comment"># è®¾ç½®é˜¿é‡Œé•œåƒæº</span></span><br><span class="line">npm config <span class="built_in">set</span> registry http://registry.npmmirror.com</span><br><span class="line">Â </span><br><span class="line"><span class="comment"># åˆ é™¤é˜¿é‡Œé•œåƒæº</span></span><br><span class="line">npm config delete registry http://registry.npmmirror.com</span><br></pre></td></tr></table></figure><p>é˜¿é‡Œé•œåƒæºç½‘å€ï¼š<a href="https://developer.aliyun.com/mirror/NPM?spm=a2c6h.13651102.0.0.30da1b11bsbolw">https://developer.aliyun.com/mirror/NPM?spm=a2c6h.13651102.0.0.30da1b11bsbolw</a></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Node.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepinä¸‹åˆ›å»ºWebStormå¿«æ·æ–¹å¼</title>
      <link href="/2025/03/07/Deepin%E4%B8%8B%E5%88%9B%E5%BB%BAWebStorm%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/"/>
      <url>/2025/03/07/Deepin%E4%B8%8B%E5%88%9B%E5%BB%BAWebStorm%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹è½½WebStormå¹¶è§£å‹è‡³å®‰è£…ç›®å½•ï¼Œé»˜è®¤çš„åªèƒ½é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ï¼Œæ¯æ¬¡éƒ½éœ€è¦å…ˆæ‰“å¼€ç»ˆç«¯ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚è§£å†³æ–¹æ³•æ˜¯åˆ›å»ºå¿«æ·æ–¹å¼ï¼Œå¹¶é©»ç•™ä»»åŠ¡æ ã€‚è¿™æ ·ç‚¹å‡»ä»»åŠ¡æ ä¸Šçš„å›¾æ ‡å³å¯å¯åŠ¨ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿å¿«æ·æ–¹å¼é…ç½®ï¼Œåœ¨å®‰è£…ç›®å½•åˆ›å»ºè½¯é“¾æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ln -s WebStorm-243.25659.40 webstorm</span></span><br><span class="line"><span class="comment"># ls -l</span></span><br><span class="line">lrwxrwxrwx 1 root    root           21  3æœˆ 7æ—¥ 21:26 webstorm -&gt; WebStorm-243.25659.40</span><br><span class="line">drwxr-xr-x 9 zhangjc zhangjc      4096  3æœˆ 7æ—¥ 20:35 WebStorm-243.25659.40</span><br></pre></td></tr></table></figure><p>åœ¨<code>/usr/share/applications/</code>ç›®å½•ä¸‹ï¼Œåˆ›å»º<code>webstorm.desktop</code>æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=WebStorm</span><br><span class="line">Exec=/opt/webstorm/bin/webstorm</span><br><span class="line">Icon=/opt/webstorm/bin/webstorm.png</span><br><span class="line">Type=Application</span><br></pre></td></tr></table></figure><p>ä¿å­˜æ–‡ä»¶åï¼Œå°±å¯ä»¥ä»å¯åŠ¨å™¨æœç´¢åˆ°WebStormäº†ï¼š</p><p><img src="/images/202503/01.png"></p><p>å¯åŠ¨åï¼Œå¯ä»¥å°†WebStormé©»ç•™è‡³ä»»åŠ¡æ ï¼š</p><p><img src="/images/202503/02.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Deepin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepinä¸‹åˆ›å»ºAppImageåº”ç”¨çš„å¿«æ·æ–¹å¼</title>
      <link href="/2025/03/07/Deepin%E4%B8%8B%E5%88%9B%E5%BB%BAAppImage%E5%BA%94%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/"/>
      <url>/2025/03/07/Deepin%E4%B8%8B%E5%88%9B%E5%BB%BAAppImage%E5%BA%94%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä»¥åˆ›å»ºNavicatçš„å¿«æ·æ–¹å¼ä¸ºä¾‹ã€‚æˆ‘ä¸‹è½½çš„Navicatåº”ç”¨ç¨‹åºå­˜æ”¾è·¯å¾„ï¼š&#x2F;opt&#x2F;navicat17-premium-lite-cs-x86_64.AppImageã€‚</p><p>ä¸ºäº†æ–¹ä¾¿åç»­é…ç½®ï¼Œä¸ºNavicatåˆ›å»ºè½¯è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">ln</span> -s navicat17-premium-lite-cs-x86_64.AppImage navicat</span><br><span class="line">$ <span class="built_in">ls</span> -l navicat*</span><br><span class="line">lrwxrwxrwx 1 root    root           41 12æœˆ 6æ—¥ 22:46 navicat -&gt; navicat17-premium-lite-cs-x86_64.AppImage</span><br><span class="line">-rwxrwxr-x 1 zhangjc zhangjc 249385280 12æœˆ 6æ—¥ 18:15 navicat17-premium-lite-cs-x86_64.AppImage</span><br></pre></td></tr></table></figure><p>åœ¨<code>/usr/share/applications</code>ç›®å½•ä¸‹åˆ›å»º<code>navicat.desktop</code>æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=Navicat</span><br><span class="line">Exec=/opt/navicat</span><br><span class="line">Type=Application</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Deepin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>qt.qpa.plugin: Could not find the Qt platform plugin &quot;dxcb&quot; in &quot;&quot;</title>
      <link href="/2025/01/27/qt-qpa-plugin-Could-not-find-the-Qt-platform-plugin-dxcb-in/"/>
      <url>/2025/01/27/qt-qpa-plugin-Could-not-find-the-Qt-platform-plugin-dxcb-in/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘é‡åˆ°çš„åœºæ™¯æ˜¯ï¼Œåœ¨Deepinç³»ç»Ÿç»ˆç«¯ä¸­è¿è¡ŒPySideåº”ç”¨æ—¶ï¼Œæ²¡æœ‰é”™è¯¯æç¤ºï¼Œä½†åœ¨VS Codeä¸­è¿è¡Œæ—¶ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qt.qpa.plugin: Could not find the Qt platform plugin &quot;dxcb&quot; in &quot;&quot;</span><br></pre></td></tr></table></figure><p>æˆ‘æœ¬åœ°çš„ç¯å¢ƒä¿¡æ¯å¦‚ä¸‹ï¼š</p><ul><li>æ“ä½œç³»ç»Ÿï¼šDeepin 23ç¤¾åŒºç‰ˆ</li><li>Pythonç‰ˆæœ¬ï¼šPython 3.12.8</li><li>PySideç‰ˆæœ¬ï¼šPySide 6.6.3</li></ul><p>å¿«é€Ÿè§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨VS Codeé…ç½®ä¸­è®¾ç½®å¦‚ä¸‹ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QT_QPA_PLATFORM=xcb</span><br></pre></td></tr></table></figure><p>æ‰“å¼€è®¾ç½®ï¼Œæœç´¢envï¼Œæ‰¾åˆ°Linuxçš„Envè®¾ç½®ï¼Œå¦‚ä¸‹å›¾ï¼š<img src="/images/202501/24.png"></p><p>ç‚¹å‡»<code>Edit in settings.json</code>ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;QT_QPA_PLATFORM&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xcb&quot;</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ åçš„æ•ˆæœå¦‚ä¸‹å›¾ï¼š<img src="/images/202501/25.png"></p><p>å†æ¬¡è¿è¡ŒPySideåº”ç”¨ï¼Œæ²¡æœ‰é”™è¯¯ä¿¡æ¯äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Qt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Deepin </tag>
            
            <tag> Python </tag>
            
            <tag> VS Code </tag>
            
            <tag> PySide6 </tag>
            
            <tag> Qt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…Officeè‡ªå®šä¹‰é¡¹ï¼Œå®‰è£…æœŸé—´å‡ºé”™</title>
      <link href="/2025/01/26/%E5%AE%89%E8%A3%85Office%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B9%EF%BC%8C%E5%AE%89%E8%A3%85%E6%9C%9F%E9%97%B4%E5%87%BA%E9%94%99/"/>
      <url>/2025/01/26/%E5%AE%89%E8%A3%85Office%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B9%EF%BC%8C%E5%AE%89%E8%A3%85%E6%9C%9F%E9%97%B4%E5%87%BA%E9%94%99/</url>
      
        <content type="html"><![CDATA[<p>å¸è½½PowerDesigneråï¼Œæ‰“å¼€â€œWPSæ–‡å­—â€æ—¶å‡ºç°ä¸‹å›¾é”™è¯¯ï¼š<img src="/images/202501/21.png"></p><p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p><ol><li>æŒ‰â€œWin+Râ€å¿«æ·é”®ï¼Œæ‰“å¼€ã€è¿è¡Œã€‘æ¡†ï¼Œåœ¨å¯¹è¯æ¡†ä¸­è¾“å…¥â€œregeditâ€ï¼Œæ‰“å¼€æ³¨å†Œè¡¨ã€‚</li><li>æŒ‰â€œCtrl+Fâ€ï¼Œåœ¨æœç´¢å¯¹è¯æ¡†ä¸­è¾“å…¥â€œYDWordAddIn.vstoâ€ã€‚</li><li>æ‰¾åˆ°ä¸‹å›¾ä¸­çš„åœ°å€æ ä¸­çº¢è‰²æ¡†åœˆä¸­çš„æ³¨å†Œè¡¨é¡¹ï¼Œå¹¶åˆ é™¤ã€Manifestã€‘é¡¹ä¸­çš„æ•°æ®ã€‚<br>åˆ é™¤å‰ï¼Œå¦‚ä¸‹å›¾ï¼š<img src="/images/202501/22.png"><br>åˆ é™¤åï¼Œå¦‚ä¸‹å›¾ï¼š<img src="/images/202501/23.png"></li></ol><p>é‡æ–°æ‰“å¼€â€œWPSæ–‡å­—â€æ—¶ä¸å†æŠ¥é”™ã€‚</p><p>é”™è¯¯åŸå› æ˜¯ï¼Œå¸è½½PowerDesigneråï¼Œè°ƒç”¨Officeæ’ä»¶çš„æ³¨å†Œè¡¨æ²¡æœ‰æ¸…ç†å¹²å‡€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŠå…¬è½¯ä»¶ </category>
          
          <category> WPS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WPS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepinå¼€æœºSMBus Timeout</title>
      <link href="/2025/01/26/Deepin%E5%BC%80%E6%9C%BASMBus-Timeout/"/>
      <url>/2025/01/26/Deepin%E5%BC%80%E6%9C%BASMBus-Timeout/</url>
      
        <content type="html"><![CDATA[<p>Deepin 23åœ¨å¼€æœºå¯åŠ¨æ—¶ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[    1.368406] i2c i2c-0: SMBus Timeout!</span><br><span class="line">[    1.368428] i2c i2c-0: Failed reset at end of transaction (01)</span><br><span class="line">[    1.368478] i2c i2c-0:Failed! (01)</span><br></pre></td></tr></table></figure><p>è™½ç„¶ä¸å½±å“å¼€æœºå’Œä½¿ç”¨ï¼Œä½†å¼€ç€è¿˜æ˜¯ä¸å¤ªçˆ½ã€‚å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vi /etc/default/grub</span><br></pre></td></tr></table></figure><p>å°†ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;splash quiet &quot;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;splash quiet loglevel=3&quot;</span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºåï¼Œè¿è¡Œ<code>update-grub</code>æ›´æ–°Grubé…ç½®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Deepin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VirtualBox can&#39;t enable the AMD-V extension</title>
      <link href="/2025/01/20/VirtualBox-can-t-enable-the-AMD-V-extension/"/>
      <url>/2025/01/20/VirtualBox-can-t-enable-the-AMD-V-extension/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ä¸€æ¬¡å®ŒæˆDeepinçš„ç³»ç»Ÿæ›´æ–°åï¼Œè¿›å…¥VirtualBoxåˆ›å»ºçš„è™šæ‹Ÿæœºï¼ˆWidows10ï¼‰æ—¶ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š<img src="/images/202501/20.png"></p><p>æ ¹æ®ç½‘å€â€œ<a href="https://askubuntu.com/questions/403591/amd-v-is-being-used-by-another-hypervisor-verr-svm-in-use">https://askubuntu.com/questions/403591/amd-v-is-being-used-by-another-hypervisor-verr-svm-in-use</a>â€å¯¹é—®é¢˜çš„æç¤ºï¼Œæ£€æŸ¥æˆ‘çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºåŒæ—¶å®‰è£…äº†Virtualboxå’ŒKVMå†²çªå¯¼è‡´çš„ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Virtualbox modules</span></span><br><span class="line">$ <span class="built_in">sudo</span> lsmod | grep vbox</span><br><span class="line">vboxnetadp             28672  0</span><br><span class="line">vboxnetflt             32768  0</span><br><span class="line">vboxdrv               638976  2 vboxnetadp,vboxnetflt</span><br><span class="line"></span><br><span class="line"><span class="comment">#kvm</span></span><br><span class="line">$ <span class="built_in">sudo</span> lsmod| grep kvm</span><br><span class="line">kvm_amd               200704  0</span><br><span class="line">kvm                  1232896  1 kvm_amd</span><br><span class="line">ccp                   147456  2 i2c_designware_platform,kvm_amd</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼ŒVirtualBoxæ¨¡å—å’ŒKVMæ¨¡å—éƒ½å­˜åœ¨ã€‚è¿è¡Œä¸€ä¸‹å‘½ä»¤ç§»é™¤KVMæ¨¡å—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> rmmod kvm_amd</span><br><span class="line">$ <span class="built_in">sudo</span> rmmod kvm</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œæ‰§è¡Œç§»é™¤å‘½ä»¤çš„é¡ºåºï¼Œé¦–å…ˆç§»é™¤ä¾èµ–kvmçš„kvm_amdæ¨¡å—ï¼Œå¦åˆ™ä¼šæç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> rmmod kvm</span><br><span class="line">rmmod: ERROR: Module kvm is <span class="keyword">in</span> use by: kvm_amd</span><br></pre></td></tr></table></figure></blockquote><p>å†æ¬¡å¯åŠ¨è™šæ‹Ÿæœºï¼Œé—®é¢˜è§£å†³ã€‚</p><p>ä½†æ˜¯ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡é‡å¯ç”µè„‘éƒ½éœ€è¦æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤æ“ä½œæ‰è¡Œï¼Œæœªå…å¤ªéº»çƒ¦äº†ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œå°†kvmå’Œkvm_amtåŠ å…¥é»‘åå•æ¨¡å—åˆ—è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;blacklist kvm&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/modprobe.d/blacklist.conf</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;blacklist kvm_amd&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/modprobe.d/blacklist.conf</span><br><span class="line">$ <span class="built_in">sudo</span> update-initramfs -u</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæˆåï¼Œé‡å¯åå†è¯•ï¼Œé—®é¢˜è§£å†³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Deepin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Windows </tag>
            
            <tag> Deepin </tag>
            
            <tag> VirtualBox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VS Codeä¸­Pythonä»£ç è°ƒè¯•</title>
      <link href="/2025/01/05/VS-Code%E4%B8%ADPython%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95/"/>
      <url>/2025/01/05/VS-Code%E4%B8%ADPython%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>Pythonæ‰©å±•é€šè¿‡<a href="https://marketplace.visualstudio.com/items?itemName=ms-python.debugpy">Pythonè°ƒè¯•å™¨æ‰©å±•</a>æ”¯æŒå¤šç§ç±»å‹çš„Pythonåº”ç”¨è°ƒè¯•ã€‚ç®€çŸ­äº†è§£åŸºæœ¬è°ƒè¯•ï¼Œè§<a href="https://code.visualstudio.com/docs/python/python-tutorial#_configure-and-run-the-debugger">Tutorial - Configure and run the debugger</a>ã€‚æ­¤å¤–ä¹ŸæŸ¥çœ‹<a href="https://code.visualstudio.com/docs/python/tutorial-flask">Flask tutorial</a>ã€‚ä¸¤ä¸ªæ‰‹å†Œå±•ç¤ºäº†åƒè®¾ç½®æ–­ç‚¹å’Œæ­¥å…¥ä»£ç æ ¸å¿ƒæŠ€èƒ½ã€‚</p><p>å­¦ä¹ é€šç”¨çš„è°ƒè¯•ç‰¹æ€§ï¼Œåƒæ£€æŸ¥å˜é‡ã€è®¾ç½®æ–­ç‚¹å’Œå…¶ä»–ä¸ä¾èµ–è¯­è¨€çš„æ´»åŠ¨ï¼Œå›é¡¾<a href="https://code.visualstudio.com/docs/editor/debugging">VS Code debugging</a>ã€‚</p><p>æœ¬æ–‡ä¸»è¦è®²è¿°Pythonç‰¹å®šçš„è°ƒè¯•é…ç½®ï¼ŒåŒ…å«ç‰¹å®šåº”ç”¨ç±»å‹å’Œè¿œç¨‹è°ƒè¯•å¿…è¦çš„æ­¥éª¤ã€‚</p><h1 id="Pythonè°ƒè¯•å™¨æ‰©å±•"><a href="#Pythonè°ƒè¯•å™¨æ‰©å±•" class="headerlink" title="Pythonè°ƒè¯•å™¨æ‰©å±•"></a>Pythonè°ƒè¯•å™¨æ‰©å±•</h1><p>åœ¨VS Codeä¸­ï¼Œ<a href="https://marketplace.visualstudio.com/items?itemName=ms-python.debugpy">Pythonè°ƒè¯•å™¨æ‰©å±•</a>ä¼šéšç€<a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Pythonæ‰©å±•</a>ä¸€èµ·å®‰è£…ã€‚Pythonè°ƒè¯•å™¨åŸºäºå®ç°äº†Pythonè°ƒè¯•é€‚é…å™¨åè®®çš„<a href="https://pypi.org/project/debugpy/">debugpy</a>æ¨¡å—ï¼Œå¯ä»¥è°ƒè¯•å¤šç§ç±»å‹çš„Pythonåº”ç”¨ï¼ŒåŒ…æ‹¬è„šæœ¬ã€Webåº”ç”¨ã€è¿œç¨‹è¿›ç¨‹ç­‰ã€‚</p><p>éªŒè¯ä¸Šé¢æ’ä»¶å®‰è£…çš„æ–¹æ³•æ˜¯ï¼Œæ‰“å¼€<strong>æ‰©å±•é¢æ¿</strong>ï¼ˆ<code>Ctrl+Shift+X</code>ï¼‰ï¼Œåœ¨æœç´¢æ¡†ä¸­è¾“å…¥<code>@installed python debugger</code>ï¼Œåœ¨ç»“æœåˆ—è¡¨ä¸­å¯ä»¥çœ‹åˆ°Pythonå’ŒPythonè°ƒè¯•å™¨æ’ä»¶ã€‚</p><p><img src="/images/202501/05.png"></p><h1 id="åˆå§‹é…ç½®"><a href="#åˆå§‹é…ç½®" class="headerlink" title="åˆå§‹é…ç½®"></a>åˆå§‹é…ç½®</h1><p>VS Codeé€šè¿‡é…ç½®æ§åˆ¶è°ƒè¯•è¡Œä¸ºã€‚è¿™äº›é…ç½®åœ¨<code>launch.json</code>æ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰ã€‚<code>launch.json</code>æ–‡ä»¶å­˜å‚¨åœ¨å·¥ä½œç©ºé—´çš„<code>.vscode</code>ç›®å½•ä¸­ã€‚</p><p>åˆå§‹åŒ–è°ƒè¯•é…ç½®ï¼Œé¦–å…ˆæ‰“å¼€<strong>è¿è¡Œå’Œè°ƒè¯•é¢æ¿</strong>ï¼ˆ<code>Ctrl+Shift+D</code>ï¼‰ã€‚å¦‚æœè¿˜æœªåšé…ç½®ï¼Œä¼šçœ‹åˆ°<strong>è¿è¡Œå’Œè°ƒè¯•</strong>æŒ‰é’®å’Œåˆ›å»ºlaunch.jsonæ–‡ä»¶çš„è¶…é“¾æ¥ã€‚</p><p>æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åˆ›å»º<code>launch.json</code>æ–‡ä»¶ï¼š</p><ol><li><p>ç‚¹å‡»åˆ›å»ºlaunch.jsonæ–‡ä»¶é“¾æ¥ã€‚</p></li><li><p>ä»è°ƒè¯•é€‰é¡¹åˆ—è¡¨ä¸­é€‰æ‹©<strong>Python Debugger</strong>ã€‚</p></li></ol><p><img src="/images/202501/06.png"></p><ol start="3"><li>ä»å¼¹å‡ºçš„é…ç½®ç±»å‹é€‰æ‹©åˆ—è¡¨ä¸­ï¼Œæ ¹æ®éœ€è¦é€‰æ‹©ï¼šå¦‚æœè°ƒè¯•å•ä¸ªPythonè„šæœ¬ï¼Œé€‰æ‹©<strong>Pythonæ–‡ä»¶</strong>ã€‚å…¶ä»–ç±»å‹åŠé€‰é¡¹åœ¨åˆ—è¡¨ä¸­æœ‰è¯´æ˜ï¼Œå¦‚ä¸‹ï¼š</li></ol><p><img src="/images/202501/07.png"></p><ol start="4"><li>è¿™æ—¶å€™Pythonè°ƒè¯•å™¨æ‰©å±•ä¼šåˆ›å»ºå¹¶æ‰“å¼€<code>launch.json</code>æ–‡ä»¶ã€‚æ ¹æ®ä¸Šä¸€æ­¥éª¤é€‰æ‹©çš„ç±»å‹ï¼Œæ–‡ä»¶ä¸­å·²ç»é¢„å…ˆå®šä¹‰äº†ä¸€äº›é…ç½®ï¼Œå¦‚æœ¬ä¾‹ä¸­é€‰æ‹©çš„<strong>Pythonæ–‡ä»¶</strong>ã€‚å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹æ–‡ä»¶å†…å®¹æ·»åŠ é…ç½®ï¼ˆå¦‚æ·»åŠ å‚æ•°ï¼‰ã€‚</li></ol><p><img src="/images/202501/08.png"></p><blockquote><p>ä¸‹æ–‡ä¼šè®²è§£é…ç½®ç»†èŠ‚å’Œä¸åŒç±»å‹åº”ç”¨çš„é…ç½®ã€‚</p></blockquote><h1 id="é™„åŠ é…ç½®"><a href="#é™„åŠ é…ç½®" class="headerlink" title="é™„åŠ é…ç½®"></a>é™„åŠ é…ç½®</h1><p>é»˜è®¤çš„ï¼ŒVS Codeåªå±•ç¤ºPythonè°ƒè¯•å™¨æ‰©å±•æœ€é€šç”¨çš„é…ç½®ã€‚å¯ç‚¹å‡»å…¶ä»–é…ç½®ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©<strong>æ·»åŠ é…ç½®</strong>å‘½ä»¤æˆ–ç‚¹å‡»<code>launch.json</code>æ–‡ä»¶ç¼–è¾‘å™¨ä¸­çš„<strong>æ·»åŠ é…ç½®</strong>æŒ‰é’®ï¼ŒVS Codeä¼šå±•ç¤ºæ‰€æœ‰å¯é€‰é…ç½®çš„åˆ—è¡¨ï¼ˆæ³¨æ„é€‰æ‹©<strong>Pythonè°ƒè¯•ç¨‹åº</strong>é€‰é¡¹ï¼‰ï¼š</p><p><img src="/images/202501/09.png"></p><p>é€‰æ‹©å¸¦æœ‰å‚æ•°çš„Pythonæ–‡ä»¶åï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/202501/10.png"></p><p>è°ƒè¯•çš„æ—¶å€™ï¼ŒçŠ¶æ€æ ä¼šæ˜¾ç¤ºå½“å‰çš„é…ç½®å’Œå½“å‰çš„è§£é‡Šå™¨ã€‚ç‚¹å‡»çŠ¶æ€æ ä¸Šçš„é…ç½®ï¼Œå¯ä»¥é€‰æ‹©å…¶ä»–é…ç½®ã€‚</p><p><img src="/images/202501/11.png"></p><p>åœ¨å·¥ä½œç©ºé—´ä¸‹ï¼Œé»˜è®¤è°ƒè¯•å™¨è·Ÿå…¶ä»–æ‰©å±•ä¸€æ ·ä½¿ç”¨ç›¸åŒçš„è§£é‡Šå™¨ã€‚å¦‚æœè°ƒè¯•å™¨è¦ä½¿ç”¨ä¸åŒçš„è§£é‡Šå™¨ï¼Œè®¾ç½®<code>launch.json</code>ä¸­çš„<code>python</code>å€¼ï¼Œæˆ–è€…ä½¿ç”¨çŠ¶æ€æ çš„Pythonè§£é‡Šå™¨æŒ‡ç¤ºå™¨ã€‚</p><h1 id="åŸºç¡€è°ƒè¯•"><a href="#åŸºç¡€è°ƒè¯•" class="headerlink" title="åŸºç¡€è°ƒè¯•"></a>åŸºç¡€è°ƒè¯•</h1><p>å¦‚æœåªæ˜¯è°ƒè¯•Pythonè„šæœ¬ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯è„šæœ¬ç¼–è¾‘å™¨è¿è¡Œä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©<strong>Pythonè°ƒè¯•ç¨‹åºï¼šè°ƒè¯•Pythonæ–‡ä»¶</strong>ã€‚</p><p><img src="/images/202501/12.png"></p><p>å¦‚æœè°ƒè¯•ä½¿ç”¨Flaskã€Djangoæˆ–FastAPIå¼€å‘çš„webåº”ç”¨ï¼ŒPythonè°ƒè¯•å™¨æ‰©å±•åœ¨<strong>è¿è¡Œå’Œè°ƒè¯•é¢æ¿</strong>ä¸­ï¼Œæä¾›äº†æ ¹æ®é¡¹ç›®ç»“æ„æä¾›åŠ¨æ€è°ƒè¯•é…ç½®çš„é€‰é¡¹ã€‚</p><p><img src="/images/202501/13.png"></p><p>å¦‚æœè°ƒè¯•å…¶ä»–ç±»å‹åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»<strong>è¿è¡Œå’Œè°ƒè¯•é¢æ¿</strong>ä¸­çš„<strong>è¿è¡Œå’Œè°ƒè¯•</strong>æŒ‰é’®ã€‚</p><p><img src="/images/202501/14.png"></p><p>å½“æ²¡æœ‰è®¾ç½®é…ç½®æ—¶ï¼ŒVS Codeä¼šç»™å‡ºè°ƒè¯•é€‰é¡¹ï¼Œé€‰æ‹©é€‚åˆçš„é€‰é¡¹å¿«é€Ÿè¿›å…¥è°ƒè¯•ã€‚æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„é€‰é¡¹ï¼Œ<strong>Pythonæ–‡ä»¶</strong>é…ç½®è¿è¡Œå½“å‰æ‰“å¼€çš„Pythonæ–‡ä»¶ï¼Œæˆ–è€…<strong>ä½¿ç”¨è¿›ç¨‹IDè¿›è¡Œé™„åŠ </strong>é…ç½®è¿ç»“è°ƒè¯•å™¨åˆ°ä¸€ä¸ªè¿è¡Œä¸­çš„è¿›ç¨‹ã€‚æ·»åŠ é…ç½®åï¼Œå°±å¯ä»¥åœ¨åˆ—è¡¨ä¸­é€‰æ‹©ï¼Œå¹¶ä½¿ç”¨<strong>å¼€å§‹è°ƒè¯•ï¼ˆF5ï¼‰</strong>è¿›è¡Œè°ƒè¯•ã€‚</p><p><img src="/images/202501/15.png"></p><h1 id="å‘½ä»¤è¡Œè°ƒè¯•"><a href="#å‘½ä»¤è¡Œè°ƒè¯•" class="headerlink" title="å‘½ä»¤è¡Œè°ƒè¯•"></a>å‘½ä»¤è¡Œè°ƒè¯•</h1><p>å¦‚æœå®‰è£…äº†<code>debugpy</code>ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œè¿è¡Œè°ƒè¯•å™¨ã€‚</p><h2 id="å®‰è£…debugpy"><a href="#å®‰è£…debugpy" class="headerlink" title="å®‰è£…debugpy"></a>å®‰è£…debugpy</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…<a href="https://pypi.org/project/debugpy/">debugpy</a>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ pip install --upgrade debugpy</span><br><span class="line">Looking <span class="keyword">in</span> indexes: https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">Collecting debugpy</span><br><span class="line">  Downloading https://mirrors.aliyun.com/pypi/packages/fd/b6/ee71d5e73712daf8307a9e85f5e39301abc8b66d13acd04dfff1702e672e/debugpy-1.8.5-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.4 MB)</span><br><span class="line">     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 1.4/1.4 MB 11.6 MB/s eta 0:00:00</span><br><span class="line">Installing collected packages: debugpy</span><br><span class="line">Successfully installed debugpy-1.8.5</span><br><span class="line"></span><br><span class="line">[notice] A new release of pip is available: 24.0 -&gt; 24.2</span><br><span class="line">[notice] To update, run: pip install --upgrade pip</span><br></pre></td></tr></table></figure><blockquote><p>è™½ç„¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒä»ç„¶æ˜¯æ¨èçš„æœ€ä½³å®è·µã€‚åœ¨VS Codeä¸­ï¼Œå¯ä»¥æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ<code>Ctrl+Shift+P</code>ï¼‰ï¼Œè¿è¡Œ**Python: åˆ›å»ºç¯å¢ƒâ€¦**å‘½ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚</p></blockquote><h2 id="å‘½ä»¤è¡Œè¯­æ³•"><a href="#å‘½ä»¤è¡Œè¯­æ³•" class="headerlink" title="å‘½ä»¤è¡Œè¯­æ³•"></a>å‘½ä»¤è¡Œè¯­æ³•</h2><p>è°ƒè¯•å™¨å‘½ä»¤è¡Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python -m debugpy</span><br><span class="line">    --listen | --connect</span><br><span class="line">    [&lt;host&gt;:]&lt;port&gt;</span><br><span class="line">    [--wait-for-client]</span><br><span class="line">    [--configure-&lt;name&gt; &lt;value&gt;]...</span><br><span class="line">    [--log-to &lt;path&gt;] [--log-to-stderr]</span><br><span class="line">    &lt;filename&gt; | -m &lt;module&gt; | -c &lt;code&gt; | --pid &lt;pid&gt;</span><br><span class="line">    [&lt;arg&gt;]...</span><br></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>åœ¨å‘½ä»¤è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ï¼ˆ5678ï¼‰å¯åŠ¨è¦è°ƒè¯•è„šæœ¬çš„è°ƒè¯•å™¨ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m debugpy --listen 5678 ./myscript.py</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹å‡è®¾è¿™ä¸ªè„šæœ¬æ˜¯é•¿æœŸè¿è¡Œä¸”å¿½ç•¥<code>--wait-for-client</code>æ ‡è¯†ï¼Œæ„å‘³ç€è„šæœ¬ä¸ä¼šç­‰å¾…å®¢æˆ·ç«¯è¿ç»“ã€‚</p><p>ç„¶åï¼ŒVS Codeè°ƒè¯•å™¨æ’ä»¶ä½¿ç”¨ä¸‹é¢çš„é…ç½®è¿ç»“ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Python Debugger: Attach&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">  &quot;request&quot;: &quot;attach&quot;,</span><br><span class="line">  &quot;connect&quot;: &#123;</span><br><span class="line">    &quot;host&quot;: &quot;localhost&quot;,</span><br><span class="line">    &quot;port&quot;: 5678</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong>ï¼šå¯ä»¥æŒ‡å®š<strong>ç›‘å¬</strong>çš„ä¸»æœºï¼Œé»˜è®¤ä½¿ç”¨127.0.0.1ã€‚</p></blockquote><p>å¦‚æœè°ƒè¯•è¿œç¨‹æœºå™¨ä¸Šçš„è¿œç¨‹ä»£ç æˆ–è¿è¡Œåœ¨dockerå®¹å™¨ä¸­çš„ä»£ç ï¼Œéœ€è¦ä¿®æ”¹å‰æ–‡çš„ CLI å‘½ä»¤æŒ‡å®šä¸€å°æœºå™¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m debugpy --listen 0.0.0.0:5678 ./myscript.py</span><br></pre></td></tr></table></figure><p>å…³è”çš„é…ç½®æ–‡ä»¶çœ‹èµ·æ¥å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Attach&quot;</span>,</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;debugpy&quot;</span>,</span><br><span class="line">  <span class="string">&quot;request&quot;</span>: <span class="string">&quot;attach&quot;</span>,</span><br><span class="line">  <span class="string">&quot;connect&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;host&quot;</span>: <span class="string">&quot;remote-machine-name&quot;</span>, // replace this with remote machine name</span><br><span class="line">    <span class="string">&quot;port&quot;</span>: 5678</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong>ï¼šæ³¨æ„ï¼Œå¦‚æœæŒ‡å®šäº†<code>127.0.0.1</code>æˆ–<code>localhost</code>ä»¥å¤–çš„æœºå™¨ï¼Œå°±æ‰“å¼€äº†ä¸€ä¸ªä»ä»»ä½•æœºå™¨å…è®¸è®¿é—®çš„ä¸€ä¸ªç«¯å£ï¼Œè¿™å°†å¸¦æ¥å®‰å…¨é£é™©ã€‚åœ¨è¿œç¨‹è°ƒè¯•æ—¶ï¼Œéœ€ç¡®ä¿å·²é‡‡å–äº†é€‚åˆçš„é¢„é˜²æªæ–½ï¼Œä¾‹å¦‚SSHéš§é“ã€‚</p></blockquote><h2 id="å‘½ä»¤è¡Œé€‰é¡¹"><a href="#å‘½ä»¤è¡Œé€‰é¡¹" class="headerlink" title="å‘½ä»¤è¡Œé€‰é¡¹"></a>å‘½ä»¤è¡Œé€‰é¡¹</h2><table><thead><tr><th><strong>æ ‡è¯†</strong></th><th><strong>é€‰é¡¹</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td><strong>â€“listen</strong> or <strong>â€“connect</strong></td><td><code>[&lt;host&gt;:]&lt;port&gt;</code></td><td><strong>å¿…é¡»</strong>ã€‚ä¸ºè°ƒè¯•é€‚é…å™¨æœåŠ¡å™¨æŒ‡å®šä¸»æœºåœ°å€å’Œç«¯å£å·ï¼Œæ¥ç­‰å¾…è¿æ¥ï¼ˆâ€“listenï¼‰æˆ–è¿æ¥ä¸€ä¸ªç­‰å¾…è¿æ¥çš„å®¢æˆ·ç«¯ï¼ˆâ€“connect) ã€‚è¿™è·ŸVS Codeè°ƒè¯•é…ç½®ä½¿ç”¨çš„åœ°å€ç›¸åŒã€‚é»˜è®¤ï¼Œä¸»æœºåœ°å€æ˜¯<code>localhost (127.0.0.1)</code>ã€‚</td></tr><tr><td><strong>â€“wait-for-client</strong></td><td>none</td><td><strong>å¯é€‰</strong>ã€‚ æŒ‡å®šä»è°ƒè¯•æœåŠ¡å™¨æœ‰ä¸€ä¸ªè¿æ¥è¿å…¥æ—¶æ‰è¿è¡Œä»£ç ã€‚è¿™ä¸ªè®¾ç½®å…è®¸ä»ç¬¬ä¸€è¡Œä»£ç å¼€å§‹è°ƒè¯•ã€‚</td></tr><tr><td><strong>â€“log-to</strong></td><td><code>&lt;path&gt;</code></td><td><strong>å¯é€‰</strong>ã€‚æŒ‡å®šä¿å­˜æ—¥å¿—çš„ä¸€ä¸ªå·²å­˜åœ¨ç›®å½•ã€‚</td></tr><tr><td><strong>â€“log-to-stderr</strong></td><td>none</td><td><strong>å¯é€‰</strong>ã€‚å¯ç”¨ debugpy å†™æ—¥å¿—åˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚</td></tr><tr><td><strong>â€“pid</strong></td><td><code>&lt;pid&gt;</code></td><td><strong>å¯é€‰</strong>ã€‚æŒ‡å®šä¸€ä¸ªå·²ç»è¿è¡Œä¸­å¾…è°ƒè¯•æœåŠ¡å™¨è¿›å…¥çš„è¿›ç¨‹ã€‚</td></tr><tr><td><strong>â€“configure-<name></strong></td><td><code>&lt;value&gt;</code></td><td><strong>å¯é€‰</strong>ã€‚è®¾ç½®åœ¨å®¢æˆ·ç«¯è¿æ¥å‰è°ƒè¯•æœåŠ¡å™¨å¿…é¡»çŸ¥é“çš„è°ƒè¯•å±æ€§ã€‚è¿™äº›å±æ€§å¯ä»¥ç›´æ¥åœ¨<em>è°ƒç”¨</em>é…ç½®ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯å¿…é¡»ä»¥è¿™ç§æ–¹å¼è®¾ç½®çš„<em>è¿ç»“</em>é…ç½®ã€‚ä¾‹å¦‚ï¼Œä¸æƒ³è°ƒè¯•æœåŠ¡å™¨è‡ªåŠ¨å¼•å…¥è¿ç»“çš„è¿›ç¨‹åˆ›å»ºçš„å­è¿›ç¨‹ï¼Œä½¿ç”¨<code>--configure-subProcess false</code>ã€‚</td></tr></tbody></table><blockquote><p><strong>æç¤º</strong>ï¼šå¯ä»¥ä½¿ç”¨<code>[&lt;arg&gt;]</code>å°†å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™å·²å¯åŠ¨çš„åº”ç”¨ç¨‹åºã€‚</p></blockquote><h1 id="é€šè¿‡ç½‘ç»œè¿ç»“è°ƒè¯•"><a href="#é€šè¿‡ç½‘ç»œè¿ç»“è°ƒè¯•" class="headerlink" title="é€šè¿‡ç½‘ç»œè¿ç»“è°ƒè¯•"></a>é€šè¿‡ç½‘ç»œè¿ç»“è°ƒè¯•</h1><h2 id="æœ¬åœ°è„šæœ¬è°ƒè¯•"><a href="#æœ¬åœ°è„šæœ¬è°ƒè¯•" class="headerlink" title="æœ¬åœ°è„šæœ¬è°ƒè¯•"></a>æœ¬åœ°è„šæœ¬è°ƒè¯•</h2><p>åœ¨æŸäº›å®ä¾‹ä¸­ï¼Œéœ€è¦è°ƒè¯•ç”±å¦å¤–ä¸€ä¸ªè¿›ç¨‹åœ¨æœ¬åœ°è°ƒç”¨çš„Pythonè„šæœ¬ã€‚ä¾‹å¦‚ï¼Œè°ƒè¯•ä¸€ä¸ªwebæœåŠ¡å™¨è¿è¡Œçš„ä¸€äº›å¤„ç†ç‰¹å®šä»»åŠ¡çš„è„šæœ¬ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸€æ—¦è¿™ä¸ªè„šæœ¬è¢«è°ƒç”¨åˆ™éœ€è¦VS Codeè°ƒè¯•å™¨å°±è¿ç»“å®ƒï¼š</p><ol><li>è¿è¡ŒVS Codeï¼Œæ‰“å¼€è¿™ä¸ªè„šæœ¬æ‰€åœ¨çš„æ–‡ä»¶å¤¹æˆ–å·¥ä½œç©ºé—´ï¼Œå¦‚æœ<code>launch.json</code>ä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒã€‚</li><li>åœ¨è„šæœ¬ä»£ç ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„ä»£ç å¹¶ä¿å­˜ï¼š</li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import debugpy</span><br><span class="line"></span><br><span class="line"># 5678 is the default attach port in the VS Code debug configurations. Unless a host and port are specified, host defaults to 127.0.0.1</span><br><span class="line">debugpy.listen(5678)</span><br><span class="line">print(&quot;Waiting for debugger attach&quot;)</span><br><span class="line">debugpy.wait_for_client()</span><br><span class="line">debugpy.breakpoint()</span><br><span class="line">print(&#x27;break on this line&#x27;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨<strong>ç»ˆç«¯ï¼šåˆ›å»ºæ–°çš„ç»ˆç«¯</strong>å‘½ä»¤åˆ›å»ºä¸€ä¸ªç»ˆç«¯ï¼Œç»ˆç«¯ä¼šè‡ªåŠ¨æ¿€æ´»è„šæœ¬é€‰æ‹©çš„ç¯å¢ƒã€‚</li><li>åœ¨ç»ˆç«¯ä¸­å®‰è£…debugpyï¼ˆè§<strong>å®‰è£…debugpy</strong>ä¸€èŠ‚ï¼‰ã€‚</li><li>åœ¨ç»ˆç«¯ä¸­ï¼Œç”¨è¯¥è„šæœ¬å¼€å¯Pythonï¼Œå¦‚<code>python3 myscript.py</code>ã€‚ä¼šçœ‹åˆ°åŒ…å«åœ¨ä»£ç ä¸­çš„â€œWaiting for debugger attachâ€ä¿¡æ¯ï¼Œè„šæœ¬ä¼šåœ¨<code>debugpy.wait_for_client()</code>å¤„ç­‰å¾…è°ƒç”¨ã€‚</li><li>åˆ‡æ¢è‡³<strong>è¿è¡Œå’Œè°ƒè¯•ï¼ˆ<code>Ctrl+Shift+D</code>ï¼‰</strong>é¢æ¿ï¼Œä»è°ƒè¯•å™¨ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©åˆé€‚çš„é…ç½®è¿›å…¥è°ƒè¯•å™¨ã€‚</li><li>è°ƒè¯•å™¨åœ¨<code>debugpy.breakpoint()</code>å¤„ç­‰å¾…è°ƒç”¨ï¼Œåœ¨è¯¥å¤„å¯ä»¥æ­£å¸¸çš„ä½¿ç”¨è°ƒè¯•å™¨ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨UIç•Œé¢è®¾ç½®å…¶ä»–æ–­ç‚¹ï¼Œè€Œä¸æ˜¯ç”¨<code>debugpy.breakpoint()</code>ã€‚</li></ol><h2 id="ç”¨SSHè°ƒè¯•è¿œç¨‹è„šæœ¬"><a href="#ç”¨SSHè°ƒè¯•è¿œç¨‹è„šæœ¬" class="headerlink" title="ç”¨SSHè°ƒè¯•è¿œç¨‹è„šæœ¬"></a>ç”¨SSHè°ƒè¯•è¿œç¨‹è„šæœ¬</h2><p>è¿œç¨‹è°ƒè¯•èƒ½åŠ›å…è®¸åœ¨æœ¬åœ°VS Codeå†…å•æ­¥è°ƒè¯•è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ç¨‹åºï¼Œè€Œä¸éœ€è¦åœ¨è¿œç¨‹æœåŠ¡å™¨å®‰è£…VS Codeã€‚ä¸ºäº†å®‰å…¨ï¼Œåœ¨è¿æ¥è¿œç¨‹æœåŠ¡å™¨è°ƒè¯•æ—¶éœ€è¦ä½¿ç”¨å®‰å…¨è¿æ¥ï¼Œå¦‚SSHã€‚</p><blockquote><p><strong>æç¤º</strong>ï¼šåœ¨Windowsç³»ç»Ÿä¸Šï¼Œéœ€è¦å®‰è£…<a href="https://learn.microsoft.com/windows-server/administration/openssh/openssh_install_firstuse">Windows 10 OpenSSH</a>æ‰å¯ä»¥ä½¿ç”¨<code>ssh</code>å‘½ä»¤ã€‚</p></blockquote><p>ä¸‹é¢çš„æ­¥éª¤ç®€è¦åˆ—å‡ºäº†è®¾ç½®SSHéš§é“çš„æ­¥éª¤ã€‚ä¸å¼€æ”¾ä¸€ä¸ªå¯å…¬å…±è®¿é—®çš„ç«¯å£æ¯”ï¼ŒSSHéš§é“å…è®¸å®‰å…¨çš„åœ¨æœ¬åœ°è¿æ¥è¿œç¨‹æœºå™¨è¿›è¡Œå·¥ä½œã€‚</p><p><strong>åœ¨è¿œç¨‹ä¸»æœºä¸Šï¼š</strong></p><ol><li>è¦å¯ç”¨ç«¯å£ï¼Œæ‰“å¼€<code>sshd_config</code>é…ç½®æ–‡ä»¶ï¼ˆLinuxæœåŠ¡å™¨åœ¨<code>/etc/ssh/</code>ä¸‹ï¼ŒWindowsåœ¨<code>%programfiles(x86)%/openssh/etc</code>ä¸‹ï¼‰ï¼Œæ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š</li></ol>  <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AllowTcpForwarding yes</span><br></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong>ï¼šAllowTcpForwardingé»˜è®¤å€¼ä¸ºyesï¼Œå¯èƒ½ä¸éœ€è¦ä¿®æ”¹ã€‚</p></blockquote><ol start="2"><li>å¦‚æœå¿…é¡»æ·»åŠ <code>AllowTcpForwarding</code>ï¼Œåˆ™éœ€è¦é‡å¯SSHæœåŠ¡ã€‚åœ¨Linux&#x2F;macOSä¸Šï¼Œè¿è¡Œ<code>sudo service ssh restart</code>ï¼›åœ¨Windowsä¸Šï¼Œè¿è¡Œ<code>services.msc</code>ï¼Œåœ¨æœåŠ¡åˆ—è¡¨ä¸­é€‰æ‹©OpenSSHæˆ–sshdã€‚</li></ol><p><strong>åœ¨æœ¬åœ°ä¸»æœºä¸Šï¼š</strong></p><ol><li>æ‰§è¡Œ<code>ssh -2 -L sourceport:localhost:destinationport -i identityfile user@remoteaddress</code>åˆ›å»ºä¸€ä¸ªSSHéš§é“ï¼Œä¸º<code>destinationport</code>é€‰æ‹©ä¸€ä¸ªç«¯å£ï¼Œå¹¶åœ¨<code>user@remoteaddress</code>ä¸­æŒ‡å®šåˆé€‚çš„ç”¨æˆ·åå’Œè¿œç¨‹ä¸»æœºçš„IPã€‚ä¾‹å¦‚ï¼Œåœ¨IPåœ°å€1.2.3.4ä¸Šä½¿ç”¨ç«¯å£5678ï¼Œå‘½ä»¤ä¸º<code>ssh -2 -L 5678:localhost:5678 -i identityfile user@1.2.3.4</code>ã€‚å¯ä»¥ä½¿ç”¨<code>-i</code>æ ‡è¯†æŒ‡å®šè®¤è¯æ–‡ä»¶çš„è·¯å¾„ã€‚</li><li>ç¡®å®šåœ¨SSHä¼šè¯ä¸­å¯ä»¥çœ‹åˆ°æç¤ºä¿¡æ¯ã€‚</li><li>åœ¨VS Codeå·¥ä½œç©ºé—´ä¸­ï¼Œåœ¨<code>launch.json</code>æ–‡ä»¶ä¸­ä¸ºè¿œç¨‹è°ƒè¯•åˆ›å»ºé…ç½®é¡¹ï¼Œè®¾ç½®åŒ¹é…<code>ssh</code>å‘½ä»¤ä½¿ç”¨çš„ç«¯å£å·ï¼Œå¹¶è®¾ç½®ä¸»æœºä¸º<code>localhost</code>ã€‚ä½¿ç”¨<code>localhost</code>æ˜¯å› ä¸ºå·²ç»è®¾ç½®äº†SSHéš§é“ã€‚</li></ol>  <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Python Debugger: Attach&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">  &quot;request&quot;: &quot;attach&quot;,</span><br><span class="line">  &quot;port&quot;: 5678,</span><br><span class="line">  &quot;host&quot;: &quot;localhost&quot;,</span><br><span class="line">  &quot;pathMappings&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;localRoot&quot;: &quot;$&#123;workspaceFolder&#125;&quot;, // Maps C:\Users\user1\project1</span><br><span class="line">      &quot;remoteRoot&quot;: &quot;.&quot; // To current working directory ~/project1</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¼€å§‹è°ƒè¯•</strong></p><p>ç°åœ¨å·²ç»è®¾ç½®äº†è¿æ¥è¿œç¨‹ä¸»æœºçš„SSHéš§é“ï¼Œå¯ä»¥å¼€å§‹è°ƒè¯•äº†ã€‚</p><ol><li>è¿œç¨‹å’Œæœ¬åœ°ä¸»æœºï¼šä¿è¯å¯ä»¥è·å–ç›¸åŒçš„ä»£ç ã€‚</li><li>è¿œç¨‹å’Œæœ¬åœ°ä¸»æœºï¼šå®‰è£…debugpyï¼ˆè§<strong>å®‰è£…debugpy</strong>ä¸€èŠ‚ï¼‰ã€‚</li><li>è¿œç¨‹ä¸»æœºï¼šæœ‰ä¸¤ç§æŒ‡å®šè¿ç»“è¿œç¨‹ä¸»æœºçš„æ–¹å¼ã€‚</li></ol><p>  a. åœ¨æºä»£ç ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„ä»£ç ï¼Œ<code>address</code>æ›¿æ¢ä¸ºè¿œç¨‹ä¸»æœºçš„IPå’Œç«¯å£ï¼ˆè¿™é‡Œç”¨1.2.3.4ä½œä¸ºç¤ºä¾‹ï¼‰ã€‚</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> debugpy</span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow other computers to attach to debugpy at this IP address and port.</span></span><br><span class="line">debugpy.listen((<span class="string">&#x27;1.2.3.4&#x27;</span>, <span class="number">5678</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pause the program until a remote debugger is attached</span></span><br><span class="line">debugpy.wait_for_client()</span><br></pre></td></tr></table></figure><p>  åœ¨<code>listen</code>ä¸­åº”è¯¥ä½¿ç”¨è¿œç¨‹ä¸»æœºçš„ç§æœ‰IPã€‚ç„¶åå¯ä»¥æ­£å¸¸å¯åŠ¨ç¨‹åºï¼Œç›´åˆ°è°ƒè¯•å™¨è¿ç»“ä½¿å…¶æš‚åœã€‚</p><p>  b. é€šè¿‡debugpyå¯åŠ¨è¿œç¨‹è¿›ç¨‹ï¼Œä¾‹å¦‚ï¼š</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m debugpy --listen 1.2.3.4:5678 --wait-for-client -m myproject</span><br></pre></td></tr></table></figure><p>  ä»¥ä¸Šå‘½ä»¤ä½¿ç”¨<code>python3</code>å¯åŠ¨<code>myproject</code>ï¼Œä½¿ç”¨è¿œç¨‹ä¸»æœºçš„ç§æœ‰IP<code>1.2.3.4</code>ï¼Œå¹¶ç›‘å¬ç«¯å£<code>5678</code>ï¼ˆä¹Ÿå¯ä»¥ä¸ä½¿ç”¨<code>-m</code>ï¼Œè€Œæ˜¯æŒ‡å®šæ–‡ä»¶è·¯å¾„å¯åŠ¨è¿œç¨‹Pythonè¿›ç¨‹ï¼Œä¾‹å¦‚<code>./hello.py</code>ï¼‰ã€‚</p><ol start="4"><li>æœ¬åœ°ä¸»æœºï¼š<strong>åªæœ‰åœ¨ä¸Šé¢åˆ—å‡ºçš„è¿œç¨‹ä¸»æœºä¸Šçš„ä»£ç è¢«ä¿®æ”¹</strong>ï¼Œç„¶ååœ¨è¿œç¨‹ä¸»æœºçš„æºä»£ç ä¸­ï¼Œæ‹·è´æ·»åŠ æ³¨é‡Šçš„ç›¸åŒä»£ç ã€‚æ·»åŠ è¿™äº›ä»£ç ç¡®ä¿è¿œç¨‹å’Œæœ¬åœ°ä¸»æœºä¸Šçš„ä»£ç æ¯è¡Œéƒ½æ˜¯åŒ¹é…çš„ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#import debugpy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow other computers to attach to debugpy at this IP address and port.</span></span><br><span class="line"><span class="comment">#debugpy.listen((&#x27;1.2.3.4&#x27;, 5678))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pause the program until a remote debugger is attached</span></span><br><span class="line"><span class="comment">#debugpy.wait_for_client()</span></span><br></pre></td></tr></table></figure><ol start="5"><li>æœ¬åœ°æœºå™¨ï¼šåˆ‡æ¢è‡³<strong>è¿è¡Œå’Œè°ƒè¯•ï¼ˆCtrl+Shift+Dï¼‰</strong>é¢æ¿ï¼Œé€‰æ‹©<strong>Python Debugger: è¿œç¨‹é™„åŠ </strong>é…ç½®ã€‚</li><li>æœ¬åœ°æœºå™¨ï¼šåœ¨æ‰“ç®—è°ƒè¯•çš„ä»£ç ä½ç½®è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚</li><li>æœ¬åœ°æœºå™¨ï¼šä½¿ç”¨ä¿®æ”¹è¿‡çš„<strong>Python Debugger:é™„åŠ </strong>é…ç½®æ–‡ä»¶å’Œå¯åŠ¨è°ƒè¯•æŒ‰é’®å¯åŠ¨VS Codeè°ƒè¯•å™¨ã€‚VS Codeä¼šåœåœ¨æœ¬åœ°è®¾ç½®çš„æ–­ç‚¹ä½ç½®ï¼Œå…è®¸å•æ­¥è°ƒè¯•ä»£ç ã€æ£€æŸ¥å˜é‡å¹¶æ‰§è¡Œå…¶ä»–è°ƒè¯•åŠ¨ä½œã€‚åœ¨<strong>Debug Console</strong>ä¸­è¾“å…¥çš„è¡¨è¾¾å¼ä¹Ÿä¼šåœ¨è¿œç¨‹ä¸»æœºä¸Šè¿è¡Œã€‚</li></ol><blockquote><p>åƒæ¥è‡ª<code>print</code>è¡¨è¾¾å¼çš„å†…å®¹ï¼Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºçš„æ–‡æœ¬ï¼Œä¼šå‡ºç°åœ¨ä¸¤è¾¹çš„ä¸»æœºä¸Šã€‚ä½†æ˜¯å…¶ä»–è¾“å‡ºï¼Œåƒæ¥è‡ªmatplotlibåŒ…çš„å›¾åƒï¼Œåªä¼šå‡ºç°åœ¨è¿œç¨‹ä¸»æœºä¸Šã€‚</p></blockquote><ol start="8"><li>åœ¨è¿œç¨‹è°ƒè¯•æ—¶ï¼Œè°ƒè¯•å·¥å…·æ å¦‚ä¸‹é¢ï¼š</li></ol><p><img src="/images/202501/16.png"></p><p>  åœ¨å·¥å…·æ ä¸Šï¼Œæ–­å¼€è¿æ¥æŒ‰é’®ï¼ˆ<code>Shift+F5</code>ï¼‰å¯ä»¥åœæ­¢è°ƒè¯•å™¨ï¼Œå¹¶å…è®¸è¿œç¨‹ç¨‹åºè¿è¡Œå®Œæˆã€‚é‡å¯æŒ‰é’®ï¼ˆ<code>Ctrl+Shift+F5</code>ï¼‰é‡å¯è°ƒè¯•å™¨æœ¬åœ°ä¸»æœºä¸Šçš„è°ƒè¯•å™¨ï¼Œä½†ä¸ä¼šé‡å¯è¿œç¨‹ç¨‹åºã€‚åªæœ‰åœ¨å·²ç»é‡å¯è¿œç¨‹ç¨‹åºå¹¶éœ€è¦é‡æ–°è¿ç»“è°ƒè¯•å™¨æ—¶ä½¿ç”¨é‡å¯æŒ‰é’®ã€‚</p><h1 id="è®¾ç½®é…ç½®é¡¹"><a href="#è®¾ç½®é…ç½®é¡¹" class="headerlink" title="è®¾ç½®é…ç½®é¡¹"></a>è®¾ç½®é…ç½®é¡¹</h1><p>å½“ç¬¬ä¸€æ¬¡åˆ›å»º<code>launch.json</code>æ—¶ï¼Œæœ‰ä¸¤ç§æ ‡å‡†é…ç½®å¯ä»¥åœ¨é›†æˆç»ˆç«¯ï¼ˆVS Codeå†…ï¼‰æˆ–å¤–éƒ¨ç»ˆç«¯ï¼ˆVS Codeå¤–éƒ¨ï¼‰è¿è¡Œç¼–è¾‘å™¨ä¸­æ´»åŠ¨çš„æ–‡ä»¶ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;configurations&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Python Debugger: Current File (Integrated Terminal)&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">      &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">      &quot;program&quot;: &quot;$&#123;file&#125;&quot;,</span><br><span class="line">      &quot;console&quot;: &quot;integratedTerminal&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Python Debugger: Current File (External Terminal)&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">      &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">      &quot;program&quot;: &quot;$&#123;file&#125;&quot;,</span><br><span class="line">      &quot;console&quot;: &quot;externalTerminal&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…·ä½“è®¾ç½®å°†åœ¨ä¸‹é¢çš„ç« èŠ‚ä¸­æè¿°ã€‚ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–ä¸åœ¨æ ‡å‡†é…ç½®ä¸­çš„è®¾ç½®ï¼Œå¦‚<code>args</code>ã€‚</p><blockquote><p><strong>æç¤º</strong>ï¼šåœ¨é¡¹ç›®ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªè¿è¡Œç‰¹å®šå¯åŠ¨æ–‡ä»¶çš„é…ç½®ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œå¯åŠ¨è°ƒè¯•å™¨æ—¶æ€»æ˜¯ä½¿ç”¨å‚æ•°<code>--port 1593</code>è°ƒç”¨<code>startup.py</code>ï¼Œå¦‚ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;Python Debugger: startup.py&quot;,</span><br><span class="line">    &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">    &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">    &quot;program&quot;: &quot;$&#123;workspaceFolder&#125;/startup.py&quot;,</span><br><span class="line">    &quot;args&quot; : [&quot;--port&quot;, &quot;1593&quot;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></blockquote><p><strong>name</strong></p><p>ç»™å±•ç¤ºåœ¨VS Codeè°ƒè¯•é…ç½®ä¸‹æ‹‰åˆ—è¡¨ä¸­çš„é…ç½®å‘½åã€‚</p><p><strong>type</strong></p><p>æ ‡è¯†è°ƒè¯•å™¨çš„ç±»å‹ï¼›ä¿æŒè¯¥è®¾ç½®ä¸º<code>debugpy</code>æ¥è°ƒè¯•Pythonä»£ç ã€‚</p><p><strong>request</strong></p><p>æŒ‡å®šå¼€å§‹è°ƒè¯•çš„æ¨¡å¼ï¼š</p><ul><li>launchï¼šåœ¨æŒ‡å®šä¸º<code>program</code>çš„æ–‡ä»¶ä¸Šå¯åŠ¨è°ƒè¯•å™¨ã€‚</li><li>attachï¼šé™„åŠ è°ƒè¯•å™¨è‡³å·²è¿è¡Œçš„ä¸€ä¸ªè¿›ç¨‹ã€‚å‚è§â€œé€šè¿‡ç½‘ç»œè¿ç»“è°ƒè¯•â€ä¸€èŠ‚ã€‚</li></ul><p><strong>program</strong></p><p>æä¾›Pythonç¨‹åºå…¥å£æ¨¡å—ï¼ˆå¯åŠ¨æ–‡ä»¶ï¼‰çš„å…¨è·¯å¾„ã€‚åœ¨é»˜è®¤é…ç½®ä¸­ç»å¸¸ä½¿ç”¨<code>$&#123;file&#125;</code>ï¼Œç”¨ä½œç¼–è¾‘å™¨å½“å‰æ´»åŠ¨çš„æ–‡ä»¶ã€‚æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„å¯åŠ¨æ–‡ä»¶æ—¶ï¼Œéœ€è¦ç¡®ä¿ä¸ç®¡æ‰“å¼€çš„æ˜¯å“ªä¸ªæ–‡ä»¶ï¼Œéƒ½ç”¨åŒä¸€ä¸ªå…¥å£è°ƒç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;program&quot;: &quot;/Users/Me/Projects/MyProject/src/event_handlers/__init__.py&quot;,</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯åŸºäºå·¥ä½œç©ºé—´æ ¹ç›®å½•è®¾ç½®ç›¸å¯¹è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå·¥ä½œç©ºé—´æ ¹ç›®å½•æ˜¯<code>/Users/Me/Projects/MyProject</code>ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;program&quot;: &quot;$&#123;workspaceFolder&#125;/src/event_handlers/__init__.py&quot;,</span><br></pre></td></tr></table></figure><p><strong>module</strong></p><p>æä¾›ç»™è¢«è°ƒè¯•æ¨¡å—æŒ‡å®šåç§°çš„èƒ½åŠ›ï¼Œè·Ÿå‘½ä»¤è¡Œè¿è¡Œæ—¶çš„<code>-m</code>å‚æ•°ç±»ä¼¼ã€‚æ›´å¤šä¿¡æ¯è§<a href="https://docs.python.org/3/using/cmdline.html#cmdoption-m">Python.org</a>ã€‚</p><p><strong>python</strong></p><p>æŒ‡å‘è°ƒè¯•ä½¿ç”¨çš„Pythonè§£é‡Šå™¨çš„å…¨è·¯å¾„ã€‚</p><p>å¦‚æœä¸æŒ‡å®šï¼Œè¿™ä¸ªè®¾ç½®é»˜è®¤æŒ‡å‘å·¥ä½œç©ºé—´é€‰æ‹©çš„è§£é‡Šå™¨ï¼Œè·Ÿ<code>$&#123;command:python.interpreterPath&#125;</code>ç­‰åŒã€‚ä½¿ç”¨å…¶ä»–è§£é‡Šå™¨ï¼Œåˆ™æŒ‡å®š<code>python</code>å€¼ä¸ºè§£é‡Šå™¨çš„è·¯å¾„ã€‚</p><p>å¯é€‰çš„ï¼Œå¯ä»¥åœ¨ä¸åŒå¹³å°ä¸Šä½¿ç”¨åŒ…å«ä½¿ç”¨çš„Pythonè§£é‡Šå™¨è·¯å¾„çš„ç¯å¢ƒå˜é‡ï¼Œå› æ­¤å°±ä¸å†éœ€è¦ç›®å½•è·¯å¾„äº†ã€‚</p><p>å¦‚æœéœ€è¦ä¼ é€’å‚æ•°ç»™Pythonè§£é‡Šå™¨ï¼Œå¯ä»¥ä½¿ç”¨<code>pythonArgs</code>å±æ€§ã€‚</p><p><strong>pythonArgs</strong></p><p>ç”¨è¯­æ³•<code>&quot;pythonArgs&quot;: [&quot;&lt;arg 1&gt;&quot;, &quot;&lt;arg 2&gt;&quot;,...]</code>æŒ‡å®šä¼ é€’ç»™Pythonè§£é‡Šå™¨çš„å‚æ•°ã€‚</p><p><strong>args</strong></p><p>æŒ‡å®šä¼ é€’ç»™Pythonç¨‹åºçš„å‚æ•°ã€‚æ¯ä¸ªç”¨ç©ºæ ¼åˆ†å¼€çš„å‚æ•°å­—ç¬¦ä¸²éœ€åœ¨å¼•å·å†…ï¼Œå¦‚ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;args&quot;: [&quot;--quiet&quot;, &quot;--norepeat&quot;, &quot;--port&quot;, &quot;1593&quot;],</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³æ¯æ¬¡è°ƒè¯•è¿è¡Œæä¾›ä¸åŒçš„å‚æ•°ï¼Œå¯ä»¥è®¾ç½®<code>args</code>ä¸º<code>$&#123;command:pickArgs&#125;</code>ã€‚æ¯æ¬¡å¯åŠ¨è°ƒè¯•æ—¶ï¼Œå°†æç¤ºè¾“å…¥å˜é‡ã€‚</p><p><strong>stopOnEntry</strong></p><p>è®¾ç½®ä¸ºtrueæ—¶ï¼Œåœ¨ç¨‹åºç¬¬ä¸€è¡Œä»£ç è¢«è°ƒè¯•æ—¶ä¸­æ–­è°ƒè¯•å™¨ã€‚å¦‚æœå¿½ç•¥ï¼ˆé»˜è®¤ï¼‰æˆ–è®¾ç½®ä¸ºfalseï¼Œè°ƒè¯•å™¨è¿è¡Œç¨‹åºè‡³ç¬¬ä¸€ä¸ªæ–­ç‚¹ã€‚</p><p><strong>console</strong></p><p>åœ¨<code>redirectOutput</code>é»˜è®¤å€¼æ²¡è¢«ä¿®æ”¹æ—¶ï¼ŒæŒ‡å®šç¨‹åºè¾“å‡ºå¦‚ä½•å±•ç¤ºã€‚</p><table><thead><tr><th>å€¼</th><th>æ˜¾ç¤ºè¾“å‡ºä¿¡æ¯çš„åœ°æ–¹</th></tr></thead><tbody><tr><td><code>&quot;internalConsole&quot;</code></td><td><strong>VS Codeè°ƒè¯•æ§åˆ¶å°</strong>ã€‚å¦‚æœ <code>redirectOutput</code> è®¾ç½®ä¸ºFalseï¼Œä¸å±•ç¤ºè¾“å‡ºä¿¡æ¯ã€‚</td></tr><tr><td><code>&quot;integratedTerminal&quot;</code> ï¼ˆé»˜è®¤ï¼‰</td><td><a href="https://code.visualstudio.com/docs/terminal/basics">VS Codeé›†æˆç»ˆç«¯</a>ã€‚å¦‚æœ<code>redirectOutput</code> è®¾ç½®ä¸ºTrueï¼Œåœ¨è°ƒè¯•æ§åˆ¶å°ä¹Ÿä¼šå±•ç¤ºè¾“å‡ºä¿¡æ¯ã€‚</td></tr><tr><td><code>&quot;externalTerminal&quot;</code></td><td><strong>ç‹¬ç«‹çš„æ§åˆ¶å°çª—å£</strong>ã€‚å¦‚æœ<code>redirectOutput</code> è®¾ç½®ä¸ºTrueï¼Œåœ¨è°ƒè¯•æ§åˆ¶å°ä¹Ÿä¼šå±•ç¤ºè¾“å‡ºä¿¡æ¯ã€‚</td></tr></tbody></table><p><strong>purpose</strong></p><p>ä½¿ç”¨<code>purpose</code>é€‰é¡¹ï¼Œä¸æ­¢ä¸€ç§æ–¹æ³•é…ç½®<strong>è¿è¡Œ</strong>æŒ‰é’®ã€‚è®¾ç½®é€‰é¡¹å€¼ä¸º<code>debug-test</code>ï¼Œå®šä¹‰å½“åœ¨VS Codeä¸­è°ƒè¯•å•å…ƒæµ‹è¯•æ—¶ä½¿ç”¨è¯¥é…ç½®ã€‚ç„¶è€Œï¼Œè®¾ç½®è¯¥é€‰é¡¹ä¸º<code>debug-in-terminal</code>ï¼Œå®šä¹‰åªæœ‰åœ¨è®¿é—®ç¼–è¾‘å™¨å³ä¸Šæ–¹çš„<strong>è¿è¡ŒPythonæ–‡ä»¶</strong>æŒ‰é’®æ—¶æ‰ä½¿ç”¨è¯¥é…ç½®ï¼ˆæ— è®ºæ˜¯è¯¥æŒ‰é’®çš„<strong>è¿è¡ŒPythonæ–‡ä»¶</strong>è¿˜æ˜¯<strong>è°ƒè¯•Pythonæ–‡ä»¶</strong>é€‰é¡¹è¢«ä½¿ç”¨ï¼‰ã€‚<strong>æ³¨æ„</strong>ï¼Œ<code>purpose</code>é€‰é¡¹ä¸èƒ½ç”¨æ¥é€šè¿‡<code>F5</code>æˆ–<strong>è¿è¡Œâ†’å¯åŠ¨è°ƒè¯•</strong>å¯åŠ¨è°ƒè¯•å™¨<strong>ã€‚</strong></p><p><strong>autoReload</strong></p><p>å…è®¸åœ¨è°ƒè¯•å™¨ç¢°åˆ°æ–­ç‚¹åï¼Œä»£ç åšäº†ä¿®æ”¹æ—¶è‡ªåŠ¨é‡æ–°åŠ è½½è°ƒè¯•å™¨ã€‚å¦‚ä¸‹é¢ä»£ç è®¾ç½®<code>&#123;&quot;enable&quot;: true&#125;</code>å¯ç”¨è¿™ä¸ªç‰¹æ€§ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Python Debugger: Current File&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">  &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">  &quot;program&quot;: &quot;$&#123;file&#125;&quot;,</span><br><span class="line">  &quot;console&quot;: &quot;integratedTerminal&quot;,</span><br><span class="line">  &quot;autoReload&quot;: &#123;</span><br><span class="line">    &quot;enable&quot;: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong>ï¼šå½“è°ƒè¯•å™¨é‡æ–°åŠ è½½æ—¶ï¼Œå¯¼å…¥ä»£ç å¯èƒ½ä¼šå†æ¬¡æ‰§è¡Œã€‚è¦é¿å…è¿™ç§æƒ…å†µï¼Œå°è¯•åªåœ¨æ¨¡å—ä¸­ä½¿ç”¨å¯¼ã€å¸¸é‡å’Œå®šä¹‰ï¼Œå°†æ‰€æœ‰ä»£ç æ”¾åˆ°å‡½æ•°ä¸­ã€‚å¯é€‰çš„ï¼Œç”¨<code>if __name__==&quot;__main__&quot;</code>åšæ£€æŸ¥ã€‚</p></blockquote><p><strong>subprocess</strong></p><p>æŒ‡å®šæ˜¯å¦å¯ç”¨å­è¿›ç¨‹è°ƒè¯•ã€‚é»˜è®¤æ˜¯falseï¼Œè®¾ç½®ä¸ºtrueå¯ç”¨ã€‚è·å–æ›´å¤šä¿¡æ¯è§<a href="https://code.visualstudio.com/docs/editor/debugging#_multitarget-debugging">multi-target debugging</a>ã€‚</p><p><strong>cwd</strong></p><p>ä¸ºè°ƒè¯•å™¨æŒ‡å®šå½“å‰å·¥ä½œç›®å½•ï¼Œä½œä¸ºå…¶ä»–ä»»ä½•ç›¸å¯¹è·¯å¾„çš„åŸºç¡€ç›®å½•ã€‚å¦‚æœå¿½ç•¥ï¼Œé»˜è®¤ä¸º<code>$&#123;workspaceFolder&#125;</code>ï¼ˆVS Codeæ‰“å¼€çš„æ–‡ä»¶å¤¹ï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>$&#123;workspaceFolder&#125;</code>åŒ…å«çš„ä¸€ä¸ªæœ‰<code>app.py</code>çš„<code>py_code</code>æ–‡ä»¶å¤¹ï¼Œå’Œæœ‰<code>salaries.csv</code>çš„<code>data</code>æ–‡ä»¶å¤¹ã€‚å¦‚æœåœ¨<code>py_code/app.py</code>ä¸Šå¯åŠ¨è°ƒè¯•å™¨ï¼Œåˆ™æŒ‡å‘dataæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„å°±éå¸¸ä¾èµ–<code>cwd</code>çš„å€¼ï¼š</p><table><thead><tr><th>cwd</th><th>dataçš„ç›¸å¯¹è·¯å¾„</th></tr></thead><tbody><tr><td>å¿½ç•¥ or <code>$&#123;workspaceFolder&#125;</code></td><td><code>data/salaries.csv</code></td></tr><tr><td><code>$&#123;workspaceFolder&#125;/py_code</code></td><td><code>../data/salaries.csv</code></td></tr><tr><td><code>$&#123;workspaceFolder&#125;/data</code></td><td><code>salaries.csv</code></td></tr></tbody></table><p><strong>redirectOutput</strong></p><p>è®¾ç½®ä¸ºtrueæ—¶ï¼ˆé»˜è®¤internalConsoleï¼‰ï¼Œè°ƒè¯•å™¨æ‰“å°ç¨‹åºæ‰€æœ‰è¾“å‡ºè‡³VS Codeè°ƒè¯•è¾“å‡ºçª—å£ã€‚å¦‚æœè®¾ç½®ä¸ºfalseï¼ˆé»˜è®¤integratedTerminalå’ŒexternalTerminalï¼‰ï¼Œç¨‹åºè¾“å‡ºä¸ä¼šå±•ç¤ºåœ¨è°ƒè¯•è¾“å‡ºçª—å£ã€‚</p><p>ä½¿ç”¨<code>&quot;console&quot;: &quot;integratedTerminal&quot;</code>æˆ–<code>&quot;console&quot;: &quot;externalTerminal&quot;</code>æ—¶ï¼Œè¯¥é€‰é¡¹é€šå¸¸è¢«ç¦ç”¨ï¼Œå› ä¸ºä¸éœ€è¦é‡å¤è¾“å‡ºåˆ°è°ƒè¯•æ§åˆ¶å°ã€‚</p><p><strong>justMyCode</strong></p><p>å½“å¿½ç•¥æˆ–è®¾ç½®ä¸ºtrueæ—¶ï¼ˆé»˜è®¤ï¼‰ï¼Œé™åˆ¶åªè°ƒè¯•ç”¨æˆ·ä»£ç ã€‚è®¾ç½®ä¸ºfalseæ—¶ä¹Ÿå…è®¸è°ƒè¯•æ ‡å‡†åº“å‡½æ•°ã€‚</p><p><strong>django</strong></p><p>è®¾ç½®ä¸ºtrueæ—¶ï¼Œæ¿€æ´»è°ƒè¯•Django webæ¡†æ¶çš„ç‰¹æ€§ã€‚</p><p><strong>sudo</strong></p><p>è®¾ç½®ä¸ºtrueä¸”ä½¿ç”¨<code>&quot;console&quot;: &quot;externalTerminal&quot;</code>æ—¶ï¼Œå…è®¸è°ƒè¯•éœ€è¦æå‡æƒé™çš„åº”ç”¨ã€‚ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨æ§åˆ¶å°æ•è·å¯†ç æ˜¯å¿…è¦çš„ã€‚</p><p><strong>pyramid</strong></p><p>å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œç¡®ä¿ä½¿ç”¨å¿…è¦çš„<code>pserve</code>å‘½ä»¤è°ƒç”¨<a href="https://docs.pylonsproject.org/projects/pyramid/en/latest/narr/startup.html">Pyramid</a>åº”ç”¨ã€‚</p><p><strong>env</strong></p><p>åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¹‹ä¸Šï¼Œä¸ºè°ƒè¯•å™¨è¿›ç¨‹è®¾ç½®æ€»æ˜¯ç»§æ‰¿çš„å¯é€‰ç¯å¢ƒå˜é‡ã€‚è¿™äº›å‚æ•°çš„å€¼å¿…é¡»ä½œä¸ºå­—ç¬¦ä¸²è¾“å…¥ã€‚</p><p><strong>envFile</strong></p><p>æŒ‡å‘åŒ…å«ç¯å¢ƒå˜é‡å®šä¹‰çš„ä¸€ä¸ªå¯é€‰æ–‡ä»¶è·¯å¾„ã€‚è§ï¼š<a href="https://code.visualstudio.com/docs/python/environments#_environment-variable-definitions-file">Configuring Python environments - environment variable definitions file</a>ã€‚</p><p><strong>gevent</strong></p><p>å¦‚æœè®¾ç½®ä¸ºtrueï¼Œå¯ç”¨è°ƒè¯•<a href="https://www.gevent.org/intro.html">gevent monkey-patched code</a>ã€‚</p><p><strong>jinja</strong></p><p>å½“è®¾ç½®ä¸ºtrueï¼Œæ¿€æ´»<a href="https://jinja.palletsprojects.com/">Jinja</a>æ¨¡æ¿æ¡†æ¶è°ƒè¯•ç‰¹æ€§ã€‚</p><h1 id="æ–­ç‚¹å’Œæ—¥å¿—ç‚¹"><a href="#æ–­ç‚¹å’Œæ—¥å¿—ç‚¹" class="headerlink" title="æ–­ç‚¹å’Œæ—¥å¿—ç‚¹"></a>æ–­ç‚¹å’Œæ—¥å¿—ç‚¹</h1><p>Pythonè°ƒè¯•å™¨æ‰©å±•æ”¯æŒä¸ºè°ƒè¯•ä»£ç è®¾ç½®<a href="https://code.visualstudio.com/docs/editor/debugging#_breakpoints">æ–­ç‚¹</a>å’Œ<a href="https://code.visualstudio.com/docs/editor/debugging#_logpoints">æ—¥å¿—ç‚¹</a>ã€‚ç®€çŸ­äº†è§£åŸºç¡€çš„è°ƒè¯•å’Œæ–­ç‚¹ä½¿ç”¨ï¼Œ<a href="https://code.visualstudio.com/docs/python/python-tutorial#_configure-and-run-the-debugger">Tutorial - Configure and run the debugger</a>ã€‚</p><h2 id="æ¡ä»¶æ–­ç‚¹"><a href="#æ¡ä»¶æ–­ç‚¹" class="headerlink" title="æ¡ä»¶æ–­ç‚¹"></a>æ¡ä»¶æ–­ç‚¹</h2><p>æ–­ç‚¹ä¹Ÿå¯ä»¥è¢«è®¾ç½®åœ¨è¡¨è¾¾å¼ã€å‘½ä¸­è®¡æ•°æˆ–ä¸¤è€…ç»„åˆæ»¡è¶³æ—¶è¢«è§¦å‘ã€‚Pythonè°ƒè¯•å™¨æ‰©å±•æ”¯æŒå‘½ä¸­è®¡æ•°æ˜¯æ•´æ•°ï¼Œè¿›è€Œæ”¯æŒ&#x3D;&#x3D;ã€&gt;ã€&gt;&#x3D;ã€&lt;ã€&lt;&#x3D;å’Œ%æ“ä½œã€‚ä¾‹å¦‚ï¼Œè®¾ç½®å‘½ä¸­æ¬¡æ•°&gt;5ï¼Œä¼šåœ¨å‘ç”Ÿ5æ¬¡åè®¾ç½®çš„æ–­ç‚¹è¢«è§¦å‘ã€‚è·å–æ›´å¤šä¿¡æ¯ï¼Œè§<a href="https://code.visualstudio.com/docs/editor/debugging#_conditional-breakpoints">conditional breakpoints</a>ã€‚</p><h2 id="åœ¨ä»£ç ä¸­è°ƒç”¨æ–­ç‚¹"><a href="#åœ¨ä»£ç ä¸­è°ƒç”¨æ–­ç‚¹" class="headerlink" title="åœ¨ä»£ç ä¸­è°ƒç”¨æ–­ç‚¹"></a>åœ¨ä»£ç ä¸­è°ƒç”¨æ–­ç‚¹</h2><p>è°ƒè¯•ä¼šè¯ä¸­ï¼Œå¯ä»¥åœ¨æƒ³è¦æš‚åœè°ƒè¯•å™¨çš„ä½ç½®è°ƒç”¨<code>debugpy.breakpoint()</code>ã€‚</p><h2 id="æ–­ç‚¹éªŒè¯"><a href="#æ–­ç‚¹éªŒè¯" class="headerlink" title="æ–­ç‚¹éªŒè¯"></a>æ–­ç‚¹éªŒè¯</h2><p>Pythonè°ƒè¯•å™¨æ‰©å±•ä¼šè‡ªåŠ¨æ¢æµ‹åœ¨éå¯æ‰§è¡Œè¡Œè®¾ç½®çš„æ–­ç‚¹ï¼Œç±»ä¼¼<code>pass</code>è¡¨è¾¾å¼æˆ–å¤šè¡Œè¡¨è¾¾å¼çš„ä¸­é—´ã€‚åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œè°ƒè¯•å™¨ä¼šç§»åŠ¨æ–­ç‚¹è‡³æœ€è¿‘çš„ä»£ç è¡Œï¼Œç¡®ä¿ä»£ç æ‰§è¡Œåœåœ¨è¿™ä¸ªæ–­ç‚¹ã€‚</p><h1 id="è°ƒè¯•ç‰¹å®šçš„åº”ç”¨ç±»å‹"><a href="#è°ƒè¯•ç‰¹å®šçš„åº”ç”¨ç±»å‹" class="headerlink" title="è°ƒè¯•ç‰¹å®šçš„åº”ç”¨ç±»å‹"></a>è°ƒè¯•ç‰¹å®šçš„åº”ç”¨ç±»å‹</h1><p>é…ç½®ä¸‹æ‹‰è¡¨ä¸­ä¸ºä¸€èˆ¬åº”ç”¨æä¾›äº†å¤šç§ä¸åŒçš„é€‰é¡¹ï¼š</p><table><thead><tr><th>é…ç½®</th><th>æè¿°</th></tr></thead><tbody><tr><td>Attach</td><td>è§å‰æ–‡â€œé€šè¿‡ç½‘ç»œè¿ç»“è°ƒè¯•â€ä¸€èŠ‚ã€‚</td></tr><tr><td>Django</td><td>æŒ‡å®š<code>&quot;program&quot;: &quot;$&#123;workspaceFolder&#125;/manage.py&quot;</code>ã€<code>&quot;args&quot;: [&quot;runserver&quot;]</code>ï¼Œå¹¶ä¸”æ·»åŠ <code>&quot;django&quot;: true</code>å¯ç”¨Django HTMLæ¨¡æ¿çš„è°ƒè¯•ã€‚</td></tr><tr><td>Flask</td><td>è§ä¸‹æ–‡â€œFlaskè°ƒè¯•â€ä¸€èŠ‚ã€‚</td></tr><tr><td>Gevent</td><td>æ·»åŠ  <code>&quot;gevent&quot;: true</code> åˆ°é›†æˆçš„æ ‡å‡†ç»ˆç«¯é…ç½®ã€‚</td></tr><tr><td>Pyramid</td><td>ç§»é™¤<code>program</code>ï¼Œæ·»åŠ <code>&quot;args&quot;: [&quot;$&#123;workspaceFolder&#125;/development.ini&quot;]</code>ï¼Œæ·»åŠ <code>&quot;jinja&quot;: true</code>ï¼Œå¯ç”¨æ¨¡æ¿è°ƒè¯•ï¼Œå¹¶ä¸”æ·»åŠ <code>&quot;pyramid&quot;: true</code>ï¼Œç¡®ä¿ä½¿ç”¨å¿…è¦çš„<code>pserve</code>å‘½ä»¤è°ƒç”¨<a href="https://docs.pylonsproject.org/projects/pyramid/en/latest/narr/startup.html">Pyramid</a>åº”ç”¨ã€‚</td></tr></tbody></table><p>è¿œç¨‹è°ƒè¯•å’ŒGoogle App Engineéœ€è¦ç‰¹å®šçš„æ­¥éª¤ã€‚äº†è§£è°ƒè¯•å•å…ƒæµ‹è¯•çš„è¯¦æƒ…ï¼Œè§<a href="https://code.visualstudio.com/docs/python/testing">Testing</a>ã€‚</p><p>è°ƒè¯•éœ€è¦ç®¡ç†å‘˜æƒé™çš„åº”ç”¨ï¼Œä½¿ç”¨<code>&quot;console&quot;: &quot;externalTerminal&quot;</code>å’Œ<code>&quot;sudo&quot;: &quot;True&quot;</code>ã€‚</p><h2 id="Flaskè°ƒè¯•"><a href="#Flaskè°ƒè¯•" class="headerlink" title="Flaskè°ƒè¯•"></a>Flaskè°ƒè¯•</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;Python Debugger: Flask&quot;,</span><br><span class="line">    &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">    &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">    &quot;module&quot;: &quot;flask&quot;,</span><br><span class="line">    &quot;env&quot;: &#123;</span><br><span class="line">        &quot;FLASK_APP&quot;: &quot;app.py&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;args&quot;: [</span><br><span class="line">        &quot;run&quot;,</span><br><span class="line">        &quot;--no-debugger&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;jinja&quot;: true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šé…ç½®ï¼ŒæŒ‡å®š<code>&quot;env&quot;: &#123;&quot;FLASK_APP&quot;: &quot;app.py&quot;&#125;</code>å’Œ<code>&quot;args&quot;: [&quot;run&quot;, &quot;--no-debugger&quot;]</code>ã€‚<code>&quot;module&quot;: &quot;flask&quot;</code>å±æ€§æ›¿ä»£<code>program</code>ã€‚ï¼ˆå¯èƒ½åœ¨<code>env</code>å±æ€§ä¸­çœ‹åˆ°<code>&quot;FLASK_APP&quot;: &quot;$&#123;workspaceFolder&#125;/app.py&quot;</code>ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸­ä¿®æ”¹é…ç½®åªæœ‰æ–‡ä»¶åã€‚ç„¶è€Œï¼Œå¯èƒ½ä¼šçœ‹åˆ°â€œCannot import module Câ€é”™è¯¯ï¼ŒCæ˜¯ä¸€ä¸ªé©±åŠ¨å™¨å­—ç¬¦ã€‚ï¼‰</p><p><code>&quot;jinja&quot;: true</code>ä¹Ÿæ˜¯å¯ç”¨Flaské»˜è®¤çš„Jinjaæ¨¡æ¿å¼•æ“è°ƒè¯•çš„è®¾ç½®ã€‚</p><p>å¦‚æœä»¥å¼€å‘æ¨¡å¼è¿è¡ŒFlaskå¼€å‘æœåŠ¡å™¨ï¼Œä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;Python Debugger: Flask (development mode)&quot;,</span><br><span class="line">    &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">    &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">    &quot;module&quot;: &quot;flask&quot;,</span><br><span class="line">    &quot;env&quot;: &#123;</span><br><span class="line">        &quot;FLASK_APP&quot;: &quot;app.py&quot;,</span><br><span class="line">        &quot;FLASK_ENV&quot;: &quot;development&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;args&quot;: [</span><br><span class="line">        &quot;run&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;jinja&quot;: true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><p>ä¸ºä»€ä¹ˆè°ƒè¯•å™¨ä¸å·¥ä½œæœ‰å¾ˆå¤šåŸå› ã€‚æœ‰æ—¶è°ƒè¯•æ§åˆ¶å°ä¼šæ˜¾ç¤ºå‡ºåŸå› ï¼Œä½†ä¸»è¦çš„åŸå› å¦‚ä¸‹ï¼š</p><ul><li>æ‰“å¼€æ‰©å±•é¢æ¿ï¼ˆ<code>Ctrl+Shift+X</code>ï¼‰å¹¶æœç´¢<code>@installed python debugger</code>ï¼Œç¡®ä¿<a href="https://marketplace.visualstudio.com/items?itemName=ms-python.debugpy">Pythonè°ƒè¯•å™¨æ‰©å±•</a>å·²å®‰è£…å¹¶å·²å¯ç”¨ã€‚</li><li>æŒ‡å‘å¯æ‰§è¡Œç¨‹åºpythonçš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼šé€šè¿‡è¿è¡Œ<strong>Pythonï¼šé€‰æ‹©è§£é‡Šå™¨</strong>å‘½ä»¤å¹¶æŸ¥çœ‹å½“å‰å€¼ï¼Œæ£€æŸ¥é€‰æ‹©çš„è§£é‡Šå™¨è·¯å¾„ã€‚</li></ul><p><img src="/images/202501/17.png"></p><ul><li>åœ¨<code>launch.json</code>æ–‡ä»¶ä¸­<code>&quot;type&quot;</code>è®¾ç½®ä¸ºè¿‡æ—¶çš„å€¼<code>&quot;python&quot;</code>ï¼šç”¨Pythonè°ƒè¯•å™¨æ­£å¸¸å·¥ä½œçš„<code>&quot;debugpy&quot;</code>æ›¿ä»£<code>&quot;python&quot;</code>ã€‚</li><li>åœ¨ç›‘è§†çª—å£ä¸­æœ‰æ— æ•ˆçš„è¡¨è¾¾å¼ï¼šæ¸…ç†ç›‘è§†çª—å£ä¸­çš„æ‰€æœ‰è¡¨è¾¾å¼å¹¶é‡å¯è°ƒè¯•å™¨ã€‚</li><li>å¦‚æœåœ¨ä½¿ç”¨æœ¬åœ°ç°æˆAPIçš„å¤šçº¿ç¨‹åº”ç”¨ä¸Šå·¥ä½œï¼ˆä¾‹å¦‚Win32çš„<code>CreateThread</code>å‡½æ•°ï¼Œè€Œä¸æ˜¯Pythonçš„çº¿ç¨‹APIï¼‰ï¼Œéå¸¸æœ‰å¿…è¦åœ¨æ¯ä¸ªè¦è°ƒè¯•æ–‡ä»¶çš„å¤´éƒ¨åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> debugpy</span><br><span class="line">debugpy.debug_this_thread()</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœåœ¨<strong>Linux</strong>ç³»ç»Ÿä¸­å·¥ä½œï¼Œå½“å°è¯•åº”ç”¨è°ƒè¯•å™¨è‡³ä»»ä½•è¿è¡Œä¸­çš„è¿›ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šæ”¶åˆ°â€œtimed outâ€é”™è¯¯ä¿¡æ¯ã€‚è¦é˜²æ­¢è¯¥é”™è¯¯ï¼Œå¯ä»¥ä¸´æ—¶è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 0 | <span class="built_in">sudo</span> <span class="built_in">tee</span> /proc/sys/kernel/yama/ptrace_scope</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> VS Code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> VS Code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows PySide6 MySQLé©±åŠ¨é—®é¢˜</title>
      <link href="/2025/01/01/Windows-PySide6-MySQL%E9%A9%B1%E5%8A%A8%E9%97%AE%E9%A2%98/"/>
      <url>/2025/01/01/Windows-PySide6-MySQL%E9%A9%B1%E5%8A%A8%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒä¿¡æ¯"><a href="#ç¯å¢ƒä¿¡æ¯" class="headerlink" title="ç¯å¢ƒä¿¡æ¯"></a>ç¯å¢ƒä¿¡æ¯</h1><ul><li>Windows 11 å®¶åº­ä¸­æ–‡ç‰ˆ 64 ä½æ“ä½œç³»ç»Ÿ 23H2</li><li>Python 3.12.4</li><li>PySide 6.6.0</li><li>MySQL 8.0.38</li></ul><h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>å®‰è£…PySide 6.6.0åè¿æ¥MySQLæ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D:\gitee\Scrat&gt; &amp; d:/gitee/Scrat/.venv/Scripts/python.exe d:/gitee/Scrat/main.py</span><br><span class="line">QSqlDatabase: QMYSQL driver not loaded</span><br><span class="line">QSqlDatabase: available drivers: QSQLITE QMIMER QODBC QPSQL</span><br></pre></td></tr></table></figure><p>æ ¹æ®é”™è¯¯ä¿¡æ¯å¯ä»¥æ¸…æ™°çœ‹å‡ºï¼Œåœ¨å¯è·å–çš„é©±åŠ¨ä¸­ä¸­æ²¡æœ‰MySQLï¼Œè¿™æ˜¯å› ä¸ºPySide6æ²¡æœ‰å†…ç½®MySQLçš„é©±åŠ¨ã€‚å®˜æ–¹æˆ–ç½‘ä¸Šé€šå¸¸çš„è§£å†³æ–¹æ¡ˆæ˜¯è‡ªè¡Œç¼–è¯‘ã€‚</p><h1 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h1><p>è¿™é‡Œä»‹ç»ä¸€ä¸ªä¸éœ€è¦è‡ªè¡Œç¼–è¯‘çš„è§£å†³æ–¹æ³•ï¼Œå‚è€ƒç½‘å€ï¼š<a href="https://github.com/thecodemonkey86/qt_mysql_driver">https://github.com/thecodemonkey86/qt_mysql_driver</a>ã€‚æ³¨æ„ï¼Œä¸€å®šè¦ä¸‹è½½è·Ÿè‡ªå·±å®‰è£…çš„PySideä¸€è‡´çš„ç‰ˆæœ¬ã€‚</p><p>æŒ‰ç…§è¯´æ˜å°†é©±åŠ¨æ–‡ä»¶æ‹·è´è‡³ä¸ªäººå®‰è£…ç›®å½•ï¼Œå¦‚æˆ‘åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…çš„ä½ç½®ï¼š<img src="/images/202501/01.png"></p><p>å®Œæˆåï¼Œå†æ¬¡è¿è¡Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D:\gitee\Scrat&gt; &amp; d:/gitee/Scrat/.venv/Scripts/python.exe d:/gitee/Scrat/main.py</span><br><span class="line">QSqlDatabase: QMYSQL driver not loaded</span><br><span class="line">QSqlDatabase: available drivers: QSQLITE QMIMER QMARIADB QMYSQL QODBC QPSQL</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºMySQLé©±åŠ¨å·²ç»å­˜åœ¨ï¼ŒæœªåŠ è½½æˆåŠŸæ˜¯å› ä¸ºç¼ºå°‘å…¶ä»–åº“ã€‚ä»MySQLå®‰è£…ç›®å½•ä¸‹ï¼Œæ‹·è´ä»¥ä¸‹3ä¸ªåŠ¨æ€åº“åˆ°PySideå®‰è£…ç›®å½•ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/202501/02.png"><br><img src="/images/202501/03.png"></p><p>æ‹·è´åçš„ç›®å½•æˆªå›¾ï¼š<img src="/images/202501/04.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Qt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> MySQL </tag>
            
            <tag> PySide6 </tag>
            
            <tag> Qt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Superseté…ç½®æ•°æ®åº“è¿æ¥ä¸²å¯†ç ä¸èƒ½åŒ…å«@</title>
      <link href="/2024/12/28/Superset%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E4%B8%B2%E5%AF%86%E7%A0%81%E4%B8%8D%E8%83%BD%E5%8C%85%E5%90%AB/"/>
      <url>/2024/12/28/Superset%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E4%B8%B2%E5%AF%86%E7%A0%81%E4%B8%8D%E8%83%BD%E5%8C%85%E5%90%AB/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœSupersetå…ƒæ•°æ®åº“è¿æ¥é…ç½®SQLALCHEMY_DATABASE_URIä¸­å¯†ç éƒ¨åˆ†åŒ…å«@ç¬¦ï¼Œåˆ™åœ¨æ‰§è¡Œsuperset db upgradeæ—¶å¼‚å¸¸ï¼Œå³ä½¿å¯¹@åšè½¬ä¹‰ä¹Ÿä¸èƒ½è§£å†³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå…ƒæ•°æ®é…ç½®å‚æ•°SQLALCHEMY_DATABASE_URIå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&#x27;mysql://superset1:superset%4001@localhost/superset1?unix_socket=/tmp/mysql.sock&amp;charset=utf8&#x27;</span></span><br></pre></td></tr></table></figure><p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  File &quot;/home/zhangjc/.pyenv/versions/3.11.9/envs/superset/lib/python3.11/site-packages/MySQLdb/connections.py&quot;, line 195, in __init__</span><br><span class="line">    super().__init__(*args, **kwargs2)</span><br><span class="line">sqlalchemy.exc.OperationalError: (MySQLdb.OperationalError) (2005, &quot;Unknown MySQL server host &#x27;01@localhost&#x27; (-2)&quot;)</span><br><span class="line">(Background on this error at: https://sqlalche.me/e/14/e3q8)</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œæ‰€ä»¥è¿›è¡Œäº†è½¬ä¹‰ï¼Œä½†ä»ç„¶å°†å¯†ç éƒ¨åˆ†çš„@ç¬¦ä½œä¸ºå¯†ç å’Œä¸»æœºçš„åˆ†éš”ç¬¦ã€‚</p><p>è¯¥é—®é¢˜ç›®å‰å”¯ä¸€çš„è§£å†³æ–¹æ³•æ˜¯ä¿®æ”¹å…ƒæ•°æ®åº“è®¿é—®å¯†ç ï¼Œä¸è¦åŒ…å«@ç¬¦ã€‚è¿™æ˜¯å› ä¸ºSuperset Serverä¸æ•°æ®åº“è¿ç§»ç»„ä»¶Alembicä¹‹é—´å¯¹è¿æ¥ä¸²çš„å¤„ç†å­˜åœ¨å†²çªã€‚</p><p>Superset Serverä¼šå°†è¿æ¥ä¸²è½¬æ¢ä¸ºsqlalchemy.engine.url.URLè¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´è§£æé”™è¯¯ï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_uri</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="variable language_">self</span>._bind <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>]</span><br><span class="line">    binds = <span class="variable language_">self</span>._app.config.get(<span class="string">&#x27;SQLALCHEMY_BINDS&#x27;</span>) <span class="keyword">or</span> ()</span><br><span class="line">    <span class="keyword">assert</span> <span class="variable language_">self</span>._bind <span class="keyword">in</span> binds, \</span><br><span class="line">        <span class="string">&#x27;Bind %r is not specified.  Set it in the SQLALCHEMY_BINDS &#x27;</span> \</span><br><span class="line">        <span class="string">&#x27;configuration variable&#x27;</span> % <span class="variable language_">self</span>._bind</span><br><span class="line">    <span class="keyword">return</span> binds[<span class="variable language_">self</span>._bind]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_engine</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="variable language_">self</span>._lock:</span><br><span class="line">        uri = <span class="variable language_">self</span>.get_uri()</span><br><span class="line">        echo = <span class="variable language_">self</span>._app.config[<span class="string">&#x27;SQLALCHEMY_ECHO&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> (uri, echo) == <span class="variable language_">self</span>._connected_for:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>._engine</span><br><span class="line"></span><br><span class="line">        sa_url = make_url(uri)</span><br><span class="line">        sa_url, options = <span class="variable language_">self</span>.get_options(sa_url, echo)</span><br><span class="line">        <span class="variable language_">self</span>._engine = rv = <span class="variable language_">self</span>._sa.create_engine(sa_url, options)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> _record_queries(<span class="variable language_">self</span>._app):</span><br><span class="line">            _EngineDebuggingSignalEvents(<span class="variable language_">self</span>._engine,</span><br><span class="line">                                         <span class="variable language_">self</span>._app.import_name).register()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>._connected_for = (uri, echo)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> rv</span><br></pre></td></tr></table></figure><p>Alembicä½¿ç”¨Pythonå†…ç½®é…ç½®æ–‡ä»¶è§£æå™¨<a href="https://docs.python.org/zh-cn/3.11/library/configparser.html#module-configparser">configparser</a>å¤„ç†é…ç½®ä¿¡æ¯ï¼Œå¤„ç†æ—¶åªèƒ½ç”¨å­—ç¬¦ä¸²ï¼Œå¯¹SQLALCHEMY_DATABASE_URIå¤„ç†å‰ä¼šå…ˆè§£ç ï¼Œæ‰€ä»¥å¯¼è‡´è§£æä¸æ­£ç¡®ã€‚å‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DATABASE_URI = current_app.config[<span class="string">&quot;SQLALCHEMY_DATABASE_URI&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;sqlite&quot;</span> <span class="keyword">in</span> DATABASE_URI:</span><br><span class="line">    logger.warning(</span><br><span class="line">        <span class="string">&quot;SQLite Database support for metadata databases will \</span></span><br><span class="line"><span class="string">        be removed in a future version of Superset.&quot;</span></span><br><span class="line">    )</span><br><span class="line">decoded_uri = urllib.parse.unquote(DATABASE_URI)</span><br><span class="line">config.set_main_option(<span class="string">&quot;sqlalchemy.url&quot;</span>, decoded_uri)</span><br></pre></td></tr></table></figure><blockquote><p>è™½ç„¶Alembicä¸­å¯ä»¥ç”¨%%å¯¹%è¿›è¡Œè½¬ä¹‰ï¼Œä½†è¿™æ ·åšä¼šå¯¼è‡´Superset Serverè§£æé…ç½®å¼‚å¸¸ã€‚</p></blockquote><p>å¯å‚è€ƒçš„é“¾æ¥å¦‚ä¸‹ï¼š</p><ul><li><a href="https://github.com/sqlalchemy/alembic/issues/1279">https://github.com/sqlalchemy/alembic/issues/1279</a></li><li><a href="https://github.com/sqlalchemy/alembic/discussions/1280">https://github.com/sqlalchemy/alembic/discussions/1280</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å¯è§†åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Python </tag>
            
            <tag> MySQL </tag>
            
            <tag> Superset </tag>
            
            <tag> æ•°æ®å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ— æ³•è¿æ¥æœ¬åœ°MySQL</title>
      <link href="/2024/12/26/%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0MySQL/"/>
      <url>/2024/12/26/%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0MySQL/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Linuxç³»ç»Ÿä¸‹ï¼ŒMySQLå®¢æˆ·ç«¯æœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•è¿æ¥æœ¬åœ°<strong>mysqld</strong>æœåŠ¡ï¼š</p><ul><li>é€šè¿‡Unix socketæ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼Œé»˜è®¤&#x2F;tmp&#x2F;mysql.sockã€‚</li><li>ä½¿ç”¨TCP&#x2F;IPè¿æ¥ã€‚TCP&#x2F;IPéœ€è¦ä¸ªç½‘ç»œç«¯å£ï¼Œé»˜è®¤3306ã€‚</li></ul><p>Unix socketæ–‡ä»¶æ¯”TCP&#x2F;IPè¿æ¥é€Ÿåº¦å¿«ï¼Œä½†åªèƒ½è¿æ¥å®¢æˆ·ç«¯æ‰€åœ¨çš„åŒä¸€å°æœåŠ¡å™¨ä¸Šçš„MySQLã€‚è¿æ¥MySQLæ—¶ä¸æŒ‡å®šä¸»æœºåï¼Œæˆ–è€…æŒ‡å®šç‰¹å®šçš„ä¸»æœºå<strong>localhost</strong>ï¼Œåˆ™ä½¿ç”¨Unix socketæ–‡ä»¶è¿æ¥ã€‚</p><p>error (2002) <code>Can&#39;t connect to ...</code>é”™è¯¯ä¸€èˆ¬å¯èƒ½æ˜¯ä»¥ä¸‹åŸå› å¯¼è‡´çš„ï¼š</p><ul><li>MySQLæœåŠ¡æœªå¯åŠ¨ã€‚</li><li>è¿æ¥ä½¿ç”¨äº†é”™è¯¯çš„Unix socketæ–‡ä»¶ã€‚</li><li>è¿æ¥ä½¿ç”¨äº†é”™è¯¯çš„TCP&#x2F;IPç«¯å£å·ã€‚</li></ul><p>åŸå› çŸ¥é“äº†ï¼Œæ’æŸ¥èµ·æ¥ä¹Ÿå°±ç®€å•äº†ã€‚</p><p>é¦–å…ˆæ£€æŸ¥æœåŠ¡å™¨ä¸Šæ˜¯å¦æœ‰<strong>mysqld</strong>è¿›ç¨‹ï¼Œç¡®å®šMySQLæœåŠ¡å·²å¯åŠ¨ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªè¿›ç¨‹ï¼Œåˆ™è¯´æ˜MySQLæœåŠ¡æœªå¯åŠ¨ã€‚Linuxç³»ç»ŸæŸ¥çœ‹æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ps xa | grep mysqld</span><br><span class="line">  13974 ?        S      0:01 /bin/sh /usr/bin/mysqld_safe</span><br><span class="line">  14051 ?        Sl   112:17 /opt/mysql/bin/mysqld --basedir=/opt/mysql --datadir=/opt/mysql/data --plugin-dir=/opt/mysql/lib/plugin --user=mysql --log-error=frin.err --pid-file=frin.pid</span><br><span class="line"> 151147 pts/4    S+     0:00 grep mysqld</span><br></pre></td></tr></table></figure><p>å¦‚æœ<strong>mysqld</strong>è¿›ç¨‹åœ¨è¿è¡Œï¼Œå¯ä»¥ç”¨ä¸‹é¢ä¸¤ç§è¿æ¥MySQLçš„æ–¹å¼ï¼Œä½¿ç”¨<strong>mysqladmin</strong>å·¥å…·æŸ¥çœ‹MySQLç«¯å£æˆ–Unix socketæ–‡ä»¶ä¿¡æ¯ã€‚</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”¨æˆ·æ˜¯supersetï¼Œå¯ä»¥çœ‹å‡ºè¿æ¥æ–¹å¼æ˜¯é€šè¿‡Unix socketï¼ˆLocalhost via UNIX socketï¼‰ï¼ŒUnix socketæ–‡ä»¶æ˜¯&#x2F;tmp&#x2F;mysql.sockã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ mysqladmin -hlocalhost -usuperset -p version</span><br><span class="line">Enter password: </span><br><span class="line">mysqladmin  Ver 8.0.34 <span class="keyword">for</span> Linux on x86_64 (MySQL Community Server - GPL)</span><br><span class="line">Copyright (c) 2000, 2023, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Server version          8.0.34</span><br><span class="line">Protocol version        10</span><br><span class="line">Connection              Localhost via UNIX socket</span><br><span class="line">UNIX socket             /tmp/mysql.sock</span><br><span class="line">Uptime:                 31 min 49 sec</span><br><span class="line"></span><br><span class="line">Threads: 2  Questions: 3537  Slow queries: 0  Opens: 191  Flush tables: 3  Open tables: 110  Queries per second avg: 1.852</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨Linuxä¸­ä¸´æ—¶ç›®å½•&#x2F;tmpä¸‹çš„æ–‡ä»¶ä¼šè¢«å®šæœŸæ¸…ç†ï¼Œæ‰€ä»¥&#x2F;tmp&#x2F;mysql.sockä¹Ÿä¼šè¢«æ¸…ç†æ‰ï¼Œå¯¼è‡´MySQLæ— æ³•è®¿é—®ã€‚å…³äºå¦‚ä½•ä¿æŠ¤æˆ–ä¿®æ”¹MySQLçš„Unix socketæ–‡ä»¶ä»¥åçš„æ–‡ç« å†åˆ†é¡¹ã€‚</p></blockquote><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”¨æˆ·åŒæ ·æ˜¯supersetï¼Œå¯ä»¥çœ‹å‡ºè¿æ¥æ–¹å¼æ˜¯TCP&#x2F;IPï¼ˆ127.0.0.1 via TCP&#x2F;IPï¼‰ï¼Œç«¯å£æ˜¯3306ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ mysqladmin -h127.0.0.1 -usuperset -p version</span><br><span class="line">Enter password: </span><br><span class="line">mysqladmin  Ver 8.0.34 <span class="keyword">for</span> Linux on x86_64 (MySQL Community Server - GPL)</span><br><span class="line">Copyright (c) 2000, 2023, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Server version          8.0.34</span><br><span class="line">Protocol version        10</span><br><span class="line">Connection              127.0.0.1 via TCP/IP</span><br><span class="line">TCP port                3306</span><br><span class="line">Uptime:                 38 min 34 sec</span><br><span class="line"></span><br><span class="line">Threads: 2  Questions: 4252  Slow queries: 0  Opens: 191  Flush tables: 3  Open tables: 110  Queries per second avg: 1.837</span><br></pre></td></tr></table></figure><p>ç†è§£äº†MySQLè¿æ¥çš„ä¸¤ç§æ–¹å¼ï¼Œå‡ºç°è¿æ¥ä¸ä¸Šçš„é—®é¢˜åŸºæœ¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ’æŸ¥ï¼š</p><ul><li>MySQLæœåŠ¡ï¼š<ul><li>MySQLæœåŠ¡æ˜¯å¦è¿è¡Œæ­£å¸¸ã€‚</li><li>MySQLå¯åŠ¨æ²¡æœ‰æŒ‡å®š<a href="https://dev.mysql.com/doc/refman/8.4/en/server-system-variables.html#sysvar_skip_networking">skip_networking</a>å‚æ•°ï¼Œè¿™ä¼šå¯¼è‡´MySQLä¸ä¼šæ¥å—ä»»ä½•TCP&#x2F;IPè¿æ¥ã€‚</li><li>MySQLæœåŠ¡ç»‘å®šçš„IPåœ°å€ï¼Œå¦‚æœè®¾ç½®äº†127.0.0.1ï¼Œåˆ™åªå…è®¸æœ¬æœºè®¿é—®ï¼Œä¸æ¥å—è¿œç¨‹è®¿é—®ã€‚</li></ul></li><li>Unix socketæ–‡ä»¶ç›¸å…³ï¼š<ul><li>æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</li><li>æ–‡ä»¶æƒé™æ˜¯å¦é€‚å½“ã€‚</li><li>å®¢æˆ·ç«¯ç”¨çš„Unix socketæ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚</li></ul></li><li>ç½‘ç»œç›¸å…³ï¼š<ul><li>æ£€æŸ¥ç½‘ç»œæ˜¯å¦è¿é€šï¼Œå¯ä»¥ç”¨pingå‘½ä»¤ã€‚</li><li>æ£€æŸ¥ç«¯å£æ˜¯å¦å¯è®¿é—®ï¼Œå¯ä»¥ç”¨telnetå‘½ä»¤ã€‚</li><li>æ£€æŸ¥æ˜¯å¦é˜²ç«å¢™å±è”½äº†è®¿é—®ã€‚</li></ul></li></ul><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://dev.mysql.com/doc/refman/8.4/en/can-not-connect-to-server.html">Canâ€™t connect to [local] MySQL server</a></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Superseté…ç½®</title>
      <link href="/2024/12/25/Superset%E9%85%8D%E7%BD%AE/"/>
      <url>/2024/12/25/Superset%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="superset-config-py"><a href="#superset-config-py" class="headerlink" title="superset_config.py"></a>superset_config.py</h1><p>é€šè¿‡config.pyæ¨¡å—ï¼ŒSupersetå¯¹å¤–æš´éœ²ä¸Šç™¾ä¸ªé…ç½®å‚æ•°ã€‚åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œå¯ä»¥æ‰¾åˆ°è¿™äº›å‚æ•°ï¼Œå’Œè¿™äº›å‚æ•°çš„é»˜è®¤å€¼ã€‚ä»¥æ³¨é‡Šçš„æ–¹å¼ï¼Œè¿™ä¸ªæ¨¡å—ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªä¸°å¯Œçš„æ–‡æ¡£ã€‚</p><p>ä¸ºäº†é…ç½®è‡ªå·±çš„åº”ç”¨ï¼Œéœ€è¦åˆ›å»ºè‡ªå·±çš„é…ç½®æ¨¡å—ï¼Œç”¨æ¥é‡è½½æ”¹å†™è¿™äº›å‚æ•°çš„é»˜è®¤å€¼ã€‚ä¸ºäº†ä¸æ”¹å˜æ ¸å¿ƒæ¨¡å—ï¼Œä¸€èˆ¬éœ€è¦åˆ›å»ºè‡ªå·±çš„é…ç½®æ¨¡å—ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªåç§°ä¸ºsuperset_config.pyçš„æ–‡ä»¶ï¼‰ã€‚æ·»åŠ è¿™ä¸ªæ–‡ä»¶åˆ°PYTHONPATHæˆ–åˆ›å»ºç¯å¢ƒå˜é‡SUPERSET_CONFIG_PATHå¹¶æŒ‡å®šsuperset_config.pyçš„å®Œæ•´è·¯å¾„ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨Linuxç³»ç»Ÿä¸‹éƒ¨ç½²Supersetï¼Œsuperset_config.pyæ–‡ä»¶åœ¨&#x2F;appç›®å½•ä¸‹ï¼Œç¯å¢ƒå˜é‡å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> SUPERSET_CONFIG_PATH=/app/superset_config.py</span><br></pre></td></tr></table></figure><blockquote><p>é€šå¸¸åªæ‹·è´æ ¸å¿ƒæ¨¡å—<a href="https://github.com/apache/superset/blob/master/superset/config.py">superset&#x2F;config.py</a>ä¸­éœ€è¦ä¿®æ”¹çš„å‚æ•°åŠæ³¨é‡Šåˆ°è‡ªå·±çš„superset_config.pyæ–‡ä»¶ä¸­ã€‚</p></blockquote><p><a href="https://github.com/apache/superset/blob/master/superset/config.py">superset&#x2F;config.py</a>ä¸­å®šä¹‰çš„æ‰€æœ‰å‚æ•°å’Œé»˜è®¤å€¼éƒ½å¯ä»¥åœ¨è‡ªå·±çš„superset_config.pyä¸­ä¿®æ”¹ã€‚</p><p>å› ä¸ºsuperset_config.pyä½œä¸ºä¸€ä¸ªFlaskçš„é…ç½®æ¨¡å—ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨æ¥ä¿®æ”¹Flaskæœ¬èº«çš„è®¾ç½®ï¼ŒåŒ…æ‹¬Supersetç»‘å®šçš„Flaskæ‰©å±•ï¼Œå¦‚flask-wtfã€flask-cachingã€flask-migrateã€å’Œflask-appbuilderã€‚æ¯ä¸ªæ‰©å±•éƒ½æä¾›äº†å¤æ‚çš„é…ç½®é¡¹ã€‚Flask App Builderæ˜¯Supersetä½¿ç”¨çš„Webæ¡†æ¶ï¼Œä¹Ÿæä¾›äº†å¾ˆå¤šé…ç½®ã€‚å¯ä»¥æŸ¥é˜…<a href="https://flask-appbuilder.readthedocs.org/en/latest/config.html">Flask App Builder</a>æ–‡æ¡£è·å–å¦‚ä½•é…ç½®çš„ä¿¡æ¯ã€‚</p><h1 id="æŒ‡å®šSECRET-KEY"><a href="#æŒ‡å®šSECRET-KEY" class="headerlink" title="æŒ‡å®šSECRET_KEY"></a>æŒ‡å®šSECRET_KEY</h1><h2 id="åˆå§‹åŒ–SECRET-KEY"><a href="#åˆå§‹åŒ–SECRET-KEY" class="headerlink" title="åˆå§‹åŒ–SECRET_KEY"></a>åˆå§‹åŒ–SECRET_KEY</h2><p>Supersetéœ€è¦ä¸€ä¸ªç”¨æˆ·è®¾ç½®çš„SECRET_KEYå€¼æ‰å¯ä»¥å¯åŠ¨ã€‚è¿™ä¸ªå¿…è¦æ¡ä»¶æ˜¯åœ¨ <a href="https://preset.io/blog/superset-security-update-default-secret_key-vulnerability/">2.1.0 ç‰ˆæœ¬çš„å¼ºåˆ¶å®‰å…¨é…ç½®ä¸­æ·»åŠ çš„ã€‚</a>åœ¨superset_config.pyä¸­æ·»åŠ ä¸€ä¸ªå¼ºSECRET_KEYï¼Œå¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SECRET_KEY = <span class="string">&#x27;YOUR_OWN_RANDOM_GENERATED_SECRET_KEY&#x27;</span></span><br></pre></td></tr></table></figure><p>ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€ä¸ªå¼ºå®‰å…¨keyå€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl rand -<span class="built_in">base64</span> 42</span><br></pre></td></tr></table></figure><blockquote><p><strong>ä½¿ç”¨å¼ºå®‰å…¨keyå€¼</strong><br>è¿™ä¸ªkeyå€¼è¢«ç”¨æ¥ä¸ºä¼šè¯çš„cookiesç­¾åï¼Œä»¥åŠæŠŠå­˜å‚¨åœ¨Supersetåº”ç”¨å…ƒæ•°æ®åº“ä¸­çš„æ•æ„Ÿä¿¡æ¯åŠ å¯†ã€‚è‡ªå·±çš„éƒ¨ç½²å¿…é¡»ä½¿ç”¨ä¸€ä¸ªå¤æ‚ã€å”¯ä¸€çš„keyå€¼ã€‚</p></blockquote><h2 id="æ›´æ¢SECRET-KEY"><a href="#æ›´æ¢SECRET-KEY" class="headerlink" title="æ›´æ¢SECRET_KEY"></a>æ›´æ¢SECRET_KEY</h2><p>å¦‚æœæƒ³ä¿®æ”¹SECRET_KEYçš„å€¼ï¼Œæ·»åŠ å·²ç»å·²ç»å­˜åœ¨çš„SECRET_KEYå€¼åˆ°superset_config.pyæ–‡ä»¶ä¸­çš„PREVIOUS_SECRET_KEY&#x3D;ä¸­ï¼Œå¹¶ä¸”èµ‹æ–°å€¼ç»™SECRET_KEY&#x3D;ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹SECRET_KEYçš„å½“å‰å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">superset shell</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> current_app; <span class="built_in">print</span>(current_app.config[<span class="string">&quot;SECRET_KEY&quot;</span>])</span><br></pre></td></tr></table></figure><p>è®¾ç½®å®Œåä¿å­˜superset_config.pyæ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œå‘½ä»¤superset re-encrypt-secretsã€‚</p><h1 id="é…ç½®å…ƒæ•°æ®åº“"><a href="#é…ç½®å…ƒæ•°æ®åº“" class="headerlink" title="é…ç½®å…ƒæ•°æ®åº“"></a>é…ç½®å…ƒæ•°æ®åº“</h1><p>Supersetéœ€è¦æ•°æ®åº“æ¥å­˜å‚¨å®ƒç®¡ç†çš„ä¿¡æ¯ï¼Œå¦‚å›¾è¡¨ã€é¢æ¿åŠå…¶ä»–å¾ˆå¤šä¸œè¥¿çš„å®šä¹‰ã€‚</p><p>é»˜è®¤çš„ï¼ŒSupersetä½¿ç”¨SQLiteã€‚SQLiteæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å•ä¸ªæ–‡ä»¶çš„æ•°æ®åº“ï¼Œæä¾›ç®€å•ä¸”å¿«é€Ÿå¼€å§‹ä½¿ç”¨Supersetçš„æ–¹å¼ï¼ˆä¸éœ€è¦ä»»ä½•é¢å¤–å®‰è£…ï¼‰ã€‚ä½†æ˜¯ï¼Œç”±äºå®‰å…¨ã€æ‰©å±•æ€§åŠæ•°æ®å®Œæ•´æ€§çš„åŸå› ï¼ŒSQLiteä¸æ¨èç”¨ä½œç”Ÿäº§ç¯å¢ƒã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ”¯æŒçš„æ•°æ®åº“éå¸¸é‡è¦ã€‚</p><p>Supersetæ”¯æŒä»¥ä¸‹æ•°æ®åº“å¼•æ“&#x2F;ç‰ˆæœ¬ï¼š</p><table><thead><tr><th>æ•°æ®åº“å¼•æ“</th><th>æ”¯æŒçš„ç‰ˆæœ¬</th></tr></thead><tbody><tr><td><a href="https://www.postgresql.org/">PostgreSQL</a></td><td>10.X, 11.X, 12.X, 13.X, 14.X, 15.X</td></tr><tr><td><a href="https://www.mysql.com/">MySQL</a></td><td>5.7, 8.X</td></tr></tbody></table><p>ä½¿ç”¨ä¸‹é¢çš„æ•°æ®åº“é©±åŠ¨å’Œè¿æ¥è®¾ç½®ï¼š</p><table><thead><tr><th>æ•°æ®åº“</th><th>PyPIåŒ…</th><th>è¿æ¥ä¸²</th></tr></thead><tbody><tr><td><a href="https://www.postgresql.org/">PostgreSQL</a></td><td>pip install psycopg2</td><td>postgresql:&#x2F;&#x2F;<UserName>:<DBPassword>@<Database Host>&#x2F;<Database Name></td></tr><tr><td><a href="https://www.mysql.com/">MySQL</a></td><td>pip install mysqlclient</td><td>mysql:&#x2F;&#x2F;<UserName>:<DBPassword>@<Database Host>&#x2F;<Database Name></td></tr></tbody></table><p>è¦è®¾ç½®Supersetçš„å…ƒæ•°æ®åº“ï¼Œåœ¨superset_config.pyé…ç½®æ–‡ä»¶ä¸­è®¾ç½®SQLALCHEMY_DATABASE_URIé…ç½®é¡¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å¯è§†åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Python </tag>
            
            <tag> Superset </tag>
            
            <tag> æ•°æ®å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Supersetè¿æ¥æœ¬åœ°MySQLå¼‚å¸¸</title>
      <link href="/2024/12/25/Superset%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0MySQL%E5%BC%82%E5%B8%B8/"/>
      <url>/2024/12/25/Superset%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0MySQL%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<p>å°†Supersetçš„å…ƒæ•°æ®åº“é…ç½®ä¸ºMySQLï¼Œé…ç½®æ–¹æ³•è§<a href="https://www.zhangjc.com/2024/12/25/Superset%E9%85%8D%E7%BD%AE/">Superseté…ç½®</a>ã€‚é…ç½®å®Œæˆåï¼Œåœ¨å¯åŠ¨Supersetçš„æ—¶å€™ï¼Œå‡ºç°ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2024-09-01 16:28:36,614:ERROR:flask_appbuilder.security.sqla.manager:DB Creation and initialization failed: (MySQLdb.OperationalError) (2002, <span class="string">&quot;Can&#x27;t connect to local MySQL server through socket &#x27;/var/run/mysqld/mysqld.sock&#x27; (2)&quot;</span>)</span><br><span class="line">(Background on this error at: https://sqlalche.me/e/14/e3q8)</span><br><span class="line">Loaded your LOCAL configuration at [/home/zhangjc/github/superset/superset_config.py]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé”™è¯¯è·Ÿè¿æ¥MySQLçš„æ–¹å¼æœ‰å…³ï¼Œè¯¦ç»†ä¿¡æ¯è§<a href="https://www.zhangjc.com/2024/12/26/%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0MySQL/">æ— æ³•è¿æ¥æœ¬åœ°MySQL</a>ã€‚æˆ‘çš„è¿æ¥é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&#x27;mysql://superset:superset%4001@localhost/superset&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³å¿«é€Ÿè§£å†³é—®é¢˜ï¼Œå¯å°†è¿æ¥ä¸²ä¸­çš„<strong>localhost</strong>æ”¹ä¸º<strong>127.0.0.1</strong>ã€‚ä½†ä½œä¸ºæŠ€æœ¯äººï¼Œè¿˜æ˜¯éœ€è¦æ·±ç©¶ä¸‹ã€‚</p><p>æ ¹æ®<a href="https://www.zhangjc.com/2024/12/25/Superset%E9%85%8D%E7%BD%AE/">Superseté…ç½®</a>ä¸­çš„æè¿°ï¼Œè¿æ¥MySQLç”¨çš„æ˜¯<strong>mysqlclient</strong>é©±åŠ¨ï¼Œé—®é¢˜å¯èƒ½å‡ºç°åœ¨è¯¥é©±åŠ¨ä¸Šã€‚ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡ŒéªŒè¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ python</span><br><span class="line">Python 3.11.9 (main, Aug 28 2024, 23:13:21) [GCC 8.3.0] on linux</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; import MySQLdb</span><br><span class="line">&gt;&gt;&gt; from MySQLdb import _mysql</span><br><span class="line">&gt;&gt;&gt; db=_mysql.connect(host=<span class="string">&quot;localhost&quot;</span>,user=<span class="string">&quot;superset&quot;</span>, password=<span class="string">&quot;superset@01&quot;</span>, database=<span class="string">&quot;superset&quot;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line 1, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">MySQLdb.OperationalError: (2002, <span class="string">&quot;Can&#x27;t connect to local MySQL server through socket &#x27;/var/run/mysqld/mysqld.sock&#x27; (2)&quot;</span>)</span><br><span class="line">&gt;&gt;&gt; db=_mysql.connect(host=<span class="string">&quot;localhost&quot;</span>,user=<span class="string">&quot;superset&quot;</span>, password=<span class="string">&quot;superset@01&quot;</span>, database=<span class="string">&quot;superset&quot;</span>, unix_socket=<span class="string">&#x27;/tmp/mysql.sock&#x27;</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„éªŒè¯å¯ä»¥çœ‹å‡ºï¼Œé—®é¢˜å‡ºåœ¨<strong>mysqlclient</strong>é»˜è®¤ä½¿ç”¨çš„<strong>Unix socket</strong>æ–‡ä»¶ä¸MySQLæœåŠ¡çš„ä¸åŒï¼Œåœ¨æŒ‡å®šæ­£ç¡®çš„<strong>Unix socket</strong>æ–‡ä»¶åï¼Œé—®é¢˜è§£å†³ã€‚</p><p>å¦‚ä½•åœ¨supersetä¸­é…ç½®æŒ‡å®šMySQLè¿æ¥çš„Unix socketæ–‡ä»¶å‘¢ï¼ŸæŸ¥çœ‹MySQLå®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿æ¥ä¸²ä¸­é€šè¿‡<strong>socket</strong>å‚æ•°è®¾ç½®ã€‚</p><p>å‚è§ï¼š<a href="https://dev.mysql.com/doc/refman/8.4/en/connecting-using-uri-or-key-value-pairs.html#connection-parameters-base">Base Connection Parameters</a></p><p>ä¿®æ”¹Supersetå…ƒæ•°æ®åº“è¿æ¥ä¸²é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&#x27;mysql://superset:superset%4001@localhost/superset?socket=(/tmp/mysql.sock)&#x27;</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨Supersetå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ superset run -p 8088 --with-threads --reload --debugger</span><br><span class="line">Loaded your LOCAL configuration at [/home/zhangjc/github/superset/superset_config.py]</span><br><span class="line">logging was configured successfully</span><br><span class="line">2024-09-05 11:45:16,426:INFO:superset.utils.logging_configurator:logging was configured successfully</span><br><span class="line">2024-09-05 11:45:16,433:INFO:root:Configured event logger of <span class="built_in">type</span> &lt;class <span class="string">&#x27;superset.utils.log.DBEventLogger&#x27;</span>&gt;</span><br><span class="line">/home/zhangjc/frin/python/venvs/superset/lib/python3.11/site-packages/flask_limiter/extension.py:333: UserWarning: Using the in-memory storage <span class="keyword">for</span> tracking rate limits as no storage was explicitly specified. This is not recommended <span class="keyword">for</span> production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend <span class="keyword">for</span> documentation about configuring the storage backend.</span><br><span class="line">  warnings.warn(</span><br><span class="line">2024-09-05 11:45:16,438:ERROR:flask_appbuilder.security.sqla.manager:DB Creation and initialization failed: <span class="string">&#x27;socket&#x27;</span> is an invalid keyword argument <span class="keyword">for</span> connect()</span><br></pre></td></tr></table></figure><p>è¯´æ˜mysqlclientæ¨¡å—ä½¿ç”¨çš„å‚æ•°åä¸MySQLæ–‡æ¡£ä¸­çš„ä¸ä¸€è‡´ã€‚ä½†æŸ¥è¯¢mysqlclientæ–‡æ¡£å¹¶æœªå‘ç°Unix socketæ–‡ä»¶å‚æ•°çš„è¯´æ˜ğŸ˜‚ã€‚æ²¡åŠæ³•ï¼Œåªèƒ½ä½¿ç”¨ç å†œåŸºæœ¬èƒ½åŠ› - è¯»æºä»£ç äº†ğŸ˜ã€‚åŸæ¥mysqlclientä¸­çš„åç§°æ˜¯unix_socketï¼š</p><p><img src="/images/202412/09.png"></p><p>ä¿®æ”¹è¿æ¥ä¸²å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&#x27;mysql://superset:superset%4001@localhost/superset?unix_socket=/tmp/mysql.sock&#x27;</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡å¯åŠ¨Supersetï¼ŒDoneï¼âœŒï¸âœŒï¸âœŒï¸</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Python </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
            <tag> Superset </tag>
            
            <tag> æ•°æ®å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Supersetæš‚ä¸æ”¯æŒPython3.12</title>
      <link href="/2024/12/25/Superset%E6%9A%82%E4%B8%8D%E6%94%AF%E6%8C%81Python3-12/"/>
      <url>/2024/12/25/Superset%E6%9A%82%E4%B8%8D%E6%94%AF%E6%8C%81Python3-12/</url>
      
        <content type="html"><![CDATA[<p>ç‰ˆæœ¬å¦‚ä¸‹ï¼š</p><ul><li>Superset 4.0.2</li><li>Python 3.12.5</li></ul><p>æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">$ pip install apache-superset</span><br><span class="line"><span class="comment"># å®‰è£…è¿‡ç¨‹ä¿¡æ¯çœç•¥</span></span><br><span class="line">......</span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯é”™è¯¯ä¿¡æ¯éƒ¨åˆ†ï¼Œå†…å®¹ä¹Ÿå¾ˆå¤š</span></span><br><span class="line">ERROR: Exception:</span><br><span class="line">Traceback (most recent call last):                                                                                                                                </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/cli/base_command.py&quot;</span>, line 105, <span class="keyword">in</span> _run_wrapper         </span><br><span class="line">    status = _inner_run()                                                                                                                                         </span><br><span class="line">             ^^^^^^^^^^^^                                                                                                                                         </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/cli/base_command.py&quot;</span>, line 96, <span class="keyword">in</span> _inner_run            </span><br><span class="line">    <span class="built_in">return</span> self.run(options, args)                                                                                                                                </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                                </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/cli/req_command.py&quot;</span>, line 67, <span class="keyword">in</span> wrapper                </span><br><span class="line">    <span class="built_in">return</span> func(self, options, args)                                                                                                                              </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                              </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/commands/install.py&quot;</span>, line 379, <span class="keyword">in</span> run                  </span><br><span class="line">    requirement_set = resolver.resolve(                                                                                                                           </span><br><span class="line">                      ^^^^^^^^^^^^^^^^^                                                                                                                           </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/resolver.py&quot;</span>, line 95, <span class="keyword">in</span> resolve </span><br><span class="line">    result = self._result = resolver.resolve(                                                                                                                     </span><br><span class="line">                            ^^^^^^^^^^^^^^^^^                                                                                                                     </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/resolvelib/resolvers.py&quot;</span>, line 546, <span class="keyword">in</span> resolve            </span><br><span class="line">    state = resolution.resolve(requirements, max_rounds=max_rounds)                                                                                               </span><br><span class="line">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                               </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/resolvelib/resolvers.py&quot;</span>, line 427, <span class="keyword">in</span> resolve            </span><br><span class="line">    failure_causes = self._attempt_to_pin_criterion(name)                                                                                                         </span><br><span class="line">                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                         </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/resolvelib/resolvers.py&quot;</span>, line 239, <span class="keyword">in</span> _attempt_to_pin_criterion                                                                                                                                                            </span><br><span class="line">    criteria = self._get_updated_criteria(candidate)                                                                                                              </span><br><span class="line">               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                              </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/resolvelib/resolvers.py&quot;</span>, line 230, <span class="keyword">in</span> _get_updated_criteria                                                                                                                                                                </span><br><span class="line">    self._add_to_criteria(criteria, requirement, parent=candidate)                                                                                                </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/resolvelib/resolvers.py&quot;</span>, line 173, <span class="keyword">in</span> _add_to_criteria   </span><br><span class="line">    <span class="keyword">if</span> not criterion.candidates:                                                                                                                                  </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^                                                                                                                                   </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/resolvelib/structs.py&quot;</span>, line 156, <span class="keyword">in</span> __bool__             </span><br><span class="line">    <span class="built_in">return</span> bool(self._sequence)                                                                                                                                   </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^                                                                                                                                   </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py&quot;</span>, line 174, <span class="keyword">in</span> __bool__                                                                                                                                                         </span><br><span class="line">    <span class="built_in">return</span> any(self)                                                                                                                                              </span><br><span class="line">           ^^^^^^^^^                                                                                                                                              </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py&quot;</span>, line 162, <span class="keyword">in</span> &lt;genexpr&gt;                                                                                                                                                        </span><br><span class="line">    <span class="built_in">return</span> (c <span class="keyword">for</span> c <span class="keyword">in</span> iterator <span class="keyword">if</span> <span class="built_in">id</span>(c) not <span class="keyword">in</span> self._incompatible_ids)                                                                                           </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                           </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py&quot;</span>, line 53, <span class="keyword">in</span> _iter_built                                                                                                                                                       </span><br><span class="line">    candidate = func()                                                                                                                                            </span><br><span class="line">                ^^^^^^                                                                                                                                            </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/factory.py&quot;</span>, line 186, <span class="keyword">in</span> _make_candidate_from_link                                                                                                                                                 </span><br><span class="line">    base: Optional[BaseCandidate] = self._make_base_candidate_from_link(                                                                                          </span><br><span class="line">                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                          </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/factory.py&quot;</span>, line 232, <span class="keyword">in</span> _make_base_candidate_from_link                                                                                                                                            </span><br><span class="line">    self._link_candidate_cache[<span class="built_in">link</span>] = LinkCandidate(                                                                                                             </span><br><span class="line">                                       ^^^^^^^^^^^^^^                                                                                                             </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py&quot;</span>, line 303, <span class="keyword">in</span> __init__                                                                                                                                                               </span><br><span class="line">    super().__init__(                                                                                                                                             </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py&quot;</span>, line 158, <span class="keyword">in</span> __init__                                                                                                                                                               </span><br><span class="line">    self.dist = self._prepare()                                                                                                                                   </span><br><span class="line">                ^^^^^^^^^^^^^^^                                                                                                                                   </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py&quot;</span>, line 235, <span class="keyword">in</span> _prepare                                                                                                                                                               </span><br><span class="line">    dist = self._prepare_distribution()                                                                                                                           </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                           </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py&quot;</span>, line 314, <span class="keyword">in</span> _prepare_distribution                                                                                                                                                  </span><br><span class="line">    <span class="built_in">return</span> preparer.prepare_linked_requirement(self._ireq, parallel_builds=True)                                                                                  </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/operations/prepare.py&quot;</span>, line 527, <span class="keyword">in</span> prepare_linked_requirement                                                                                                                                                           </span><br><span class="line">    <span class="built_in">return</span> self._prepare_linked_requirement(req, parallel_builds)                                                                                                 </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                 </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/operations/prepare.py&quot;</span>, line 642, <span class="keyword">in</span> _prepare_linked_requirement                                                                                                                                                          </span><br><span class="line">    dist = _get_prepared_distribution(                                                                                                                            </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                            </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/operations/prepare.py&quot;</span>, line 72, <span class="keyword">in</span> _get_prepared_distribution                                                                                                                                                            </span><br><span class="line">    abstract_dist.prepare_distribution_metadata(                                                                                                                  </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/distributions/sdist.py&quot;</span>, line 56, <span class="keyword">in</span> prepare_distribution_metadata                                                                                                                                                        </span><br><span class="line">    self._install_build_reqs(finder)                                                                                                                              </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/distributions/sdist.py&quot;</span>, line 126, <span class="keyword">in</span> _install_build_reqs                                                                                                                                                                 </span><br><span class="line">    build_reqs = self._get_build_requires_wheel()                                                                                                                 </span><br><span class="line">                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                 </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/distributions/sdist.py&quot;</span>, line 103, <span class="keyword">in</span> _get_build_requires_wheel                                                                                                                                                           </span><br><span class="line">    <span class="built_in">return</span> backend.get_requires_for_build_wheel()                                                                                                                 </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                 </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_internal/utils/misc.py&quot;</span>, line 706, <span class="keyword">in</span> get_requires_for_build_wheel                                                                                                                                                                 </span><br><span class="line">    <span class="built_in">return</span> super().get_requires_for_build_wheel(config_settings=cs)                                                                                               </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                               </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_impl.py&quot;</span>, line 166, <span class="keyword">in</span> get_requires_for_build_wheel                                                                                                                                                        </span><br><span class="line">    <span class="built_in">return</span> self._call_hook(<span class="string">&#x27;get_requires_for_build_wheel&#x27;</span>, &#123;                                                                                                      </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                      </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_impl.py&quot;</span>, line 321, <span class="keyword">in</span> _call_hook        </span><br><span class="line">    raise BackendUnavailable(data.get(<span class="string">&#x27;traceback&#x27;</span>, <span class="string">&#x27;&#x27;</span>))                                                                                                           </span><br><span class="line">pip._vendor.pyproject_hooks._impl.BackendUnavailable: Traceback (most recent call last):                                                                          </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/envs/superset3.12/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;</span>, line 77, <span class="keyword">in</span> _build_backend                                                                                                                                                     </span><br><span class="line">    obj = import_module(mod_path)                                                                                                                                 </span><br><span class="line">          ^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                                 </span><br><span class="line">  File <span class="string">&quot;/home/zhangjc/.pyenv/versions/3.12.5/lib/python3.12/importlib/__init__.py&quot;</span>, line 90, <span class="keyword">in</span> import_module                                                     </span><br><span class="line">    <span class="built_in">return</span> _bootstrap._gcd_import(name[level:], package, level)                                                                                                   </span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                   </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 1387, <span class="keyword">in</span> _gcd_import                                                                                                 </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 1360, <span class="keyword">in</span> _find_and_load                                                                                              </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 1310, <span class="keyword">in</span> _find_and_load_unlocked                                                                                     </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 488, <span class="keyword">in</span> _call_with_frames_removed                                                                                    </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 1387, <span class="keyword">in</span> _gcd_import                                                                                                 </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 1360, <span class="keyword">in</span> _find_and_load                                                                                              </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 1331, <span class="keyword">in</span> _find_and_load_unlocked                                                                                     </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 935, <span class="keyword">in</span> _load_unlocked                                                                                               </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap_external&gt;&quot;</span>, line 995, <span class="keyword">in</span> exec_module                                                                                         </span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line 488, <span class="keyword">in</span> _call_with_frames_removed                                                                                    </span><br><span class="line">  File <span class="string">&quot;/tmp/pip-build-env-u9f30fu2/overlay/lib/python3.12/site-packages/setuptools/__init__.py&quot;</span>, line 10, <span class="keyword">in</span> &lt;module&gt;                                            </span><br><span class="line">    import distutils.core                                                                                                                                         </span><br><span class="line">ModuleNotFoundError: No module named <span class="string">&#x27;distutils&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„æŠ¥é”™ä¿¡æ¯å¾ˆé•¿ï¼Œå…¶å®æ ¸å¿ƒé—®é¢˜å°±å‡ºåœ¨â€œdistutilsâ€æ¨¡å—ä¸Šã€‚æ ¹æ®Pythonå®˜æ–¹æ–‡æ¡£ï¼Œ<a href="https://docs.python.org/zh-cn/3.11/library/distutils.html#module-distutils">distutils</a>å·²è¢«å¼ƒç”¨å¹¶è®¡åˆ’åœ¨Python 3.12ä¸­ç§»é™¤ã€‚</p><p>Superset 4.0.2åœ¨Python 3.11ä¸‹å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå‚è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ï¼š<a href="https://www.zhangjc.com/2024/12/25/%E4%BB%8EPyPI%E5%AE%89%E8%A3%85Superset/">ä»PyPIå®‰è£…Superset</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å¯è§†åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Python </tag>
            
            <tag> Superset </tag>
            
            <tag> æ•°æ®å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»PyPIå®‰è£…Superset</title>
      <link href="/2024/12/25/%E4%BB%8EPyPI%E5%AE%89%E8%A3%85Superset/"/>
      <url>/2024/12/25/%E4%BB%8EPyPI%E5%AE%89%E8%A3%85Superset/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦è®°å½•æœ¬äººä»PyPIå®‰è£…Supersetçš„è¿‡ç¨‹å’Œé‡åˆ°çš„é—®é¢˜ã€‚ä»PyPIå®‰è£…Supersetï¼Œé¦–å…ˆåº”å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚å¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–ä¸¤ç¯‡åšæ–‡ï¼Œå­¦ä¹ Pythonå’Œè™šæ‹Ÿç¯å¢ƒçš„ç®¡ç†ï¼š</p><ul><li><a href="https://www.zhangjc.com/2024/12/17/Python-%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/">Pythonç‰ˆæœ¬ç®¡ç†</a></li><li><a href="https://www.zhangjc.com/2024/12/22/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/">Pythonè™šæ‹Ÿç¯å¢ƒç®¡ç†</a></li></ul><p>Supersetç›®å‰ä¸æ”¯æŒPython3.12ã€‚å…·ä½“é”™è¯¯ä¿¡æ¯å’ŒåŸå› è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ï¼š<a href="https://www.zhangjc.com/2024/12/25/Superset%E6%9A%82%E4%B8%8D%E6%94%AF%E6%8C%81Python3-12/">Supersetæš‚ä¸æ”¯æŒPython 3.12</a>ã€‚</p><h1 id="æ“ä½œç³»ç»Ÿä¾èµ–"><a href="#æ“ä½œç³»ç»Ÿä¾èµ–" class="headerlink" title="æ“ä½œç³»ç»Ÿä¾èµ–"></a>æ“ä½œç³»ç»Ÿä¾èµ–</h1><p>Superset åœ¨å…¶å…ƒæ•°æ®åº“ä¸­å­˜å‚¨æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨åŠ å¯† Python åº“å¯¹è¿æ¥å¯†ç è¿›è¡ŒåŠ å¯†ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªåº“å…·æœ‰æ“ä½œç³»ç»Ÿçº§åˆ«çš„ä¾èµ–ã€‚</p><h2 id="Debian-and-Ubuntu"><a href="#Debian-and-Ubuntu" class="headerlink" title="Debian and Ubuntu"></a>Debian and Ubuntu</h2><p>ä¸‹é¢çš„å‘½ä»¤å°†ç¡®ä¿å®‰è£…æ‰€éœ€çš„ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install build-essential libssl-dev libffi-dev python-dev python-pip libsasl2-dev libldap2-dev default-libmysqlclient-dev</span><br></pre></td></tr></table></figure><p>åœ¨Ubuntu 20.04ä¸­ï¼Œä»¥ä¸‹å‘½ä»¤å°†ç¡®ä¿å®‰è£…æ‰€éœ€çš„ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install build-essential libssl-dev libffi-dev python3-dev python3-pip libsasl2-dev libldap2-dev default-libmysqlclient-dev</span><br></pre></td></tr></table></figure><h1 id="Python-è™šæ‹Ÿç¯å¢ƒ"><a href="#Python-è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="Python è™šæ‹Ÿç¯å¢ƒ"></a>Python è™šæ‹Ÿç¯å¢ƒ</h1><p>åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ Python 3.11ç‰ˆæœ¬</span></span><br><span class="line">$ python -V</span><br><span class="line">Python 3.11.9</span><br><span class="line">$ pyenv virtualenv superset</span><br><span class="line">created virtual environment CPython3.11.9.final.0-64 <span class="keyword">in</span> 268ms</span><br><span class="line">  creator CPython3Posix(dest=/home/zhangjc/.pyenv/versions/3.11.9/envs/superset, clear=False, no_vcs_ignore=False, global=False)</span><br><span class="line">  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/home/zhangjc/.local/share/virtualenv)</span><br><span class="line">    added seed packages: pip==24.2, setuptools==72.2.0, wheel==0.44.0</span><br><span class="line">  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator</span><br><span class="line">$ pyenv activate superset</span><br><span class="line">(superset) zhangjc@frin:~$ python -V</span><br><span class="line">Python 3.11.9</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…å’Œåˆå§‹åŒ–Superset"><a href="#å®‰è£…å’Œåˆå§‹åŒ–Superset" class="headerlink" title="å®‰è£…å’Œåˆå§‹åŒ–Superset"></a>å®‰è£…å’Œåˆå§‹åŒ–Superset</h1><blockquote><p>å¦‚æœé€‰æ‹©ä½¿ç”¨MySQLä½œä¸ºSupersetçš„å…ƒæ•°æ®åº“ï¼Œå‚è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢è¿›è¡Œé…ç½®ï¼š<a href="https://www.zhangjc.com/2024/12/25/Superset%E9%85%8D%E7%BD%AE/">Superseté…ç½®</a>ã€‚è¿æ¥ MySQL æ—¶å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ï¼Œè§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ï¼š<a href="https://www.zhangjc.com/2024/12/25/Superset%E8%BF%9E%E6%8E%A5MySQL%E5%BC%82%E5%B8%B8/">è¿æ¥MySQLå¼‚å¸¸</a>ã€‚</p></blockquote><p>é¦–å…ˆï¼Œä»å®‰è£… apache-superset å¼€å§‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install apache-superset</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œé¦–å…ˆé…ç½®ä»¥ä¸‹ä¸‰é¡¹ï¼š</p><ul><li>FLASK_APP</li><li>SECRET_KEYã€‚æ³¨æ„ï¼Œç¯å¢ƒå˜é‡åç§°æ˜¯SUPERSET_SECRET_KEYï¼Œé…ç½®æ–‡ä»¶ä¸­çš„åç§°æ˜¯SECRET_KEYã€‚å¯ä»¥ä½¿ç”¨å‘½ä»¤openssl rand -base64 42ç”ŸæˆSECRET_KEYã€‚</li><li>é…ç½®MySQLè¿æ¥ä¸²ã€‚</li></ul><p>ä¸è®¾ç½®FLASK_APPä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ superset db upgrade</span><br><span class="line">Usage: superset [OPTIONS] COMMAND [ARGS]...</span><br><span class="line">Try &#x27;superset --help&#x27; for help.</span><br><span class="line"></span><br><span class="line">Error: Could not locate a Flask application. Use the &#x27;flask --app&#x27; option, &#x27;FLASK_APP&#x27; environment variable, or a &#x27;wsgi.py&#x27; or &#x27;app.py&#x27; file in the current directory.</span><br></pre></td></tr></table></figure><p>ä¸è®¾ç½®SECRET_KEYä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ superset db upgrade</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">                                    WARNING</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">A Default SECRET_KEY was detected, please use superset_config.py to override it.</span><br><span class="line">Use a strong complex alphanumeric string and use a tool to help you generate </span><br><span class="line">a sufficiently random sequence, ex: openssl rand -base64 42</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Refusing to start due to insecure SECRET_KEY</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯è®¾ç½®å’Œåˆå§‹åŒ–æ•°æ®åº“è¿‡ç¨‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ export FLASK_APP=superset</span><br><span class="line">$ openssl rand -base64 42</span><br><span class="line">exxaWNURDIvZuqF8O75ngU+rgIXpAxkwO5AwWSKOzrIeHFwY2EvA9OPt</span><br><span class="line">$ export SUPERSET_SECRET_KEY=&#x27;exxaWNURDIvZuqF8O75ngU+rgIXpAxkwO5AwWSKOzrIeHFwY2EvA9OPt&#x27;</span><br><span class="line">$ export SUPERSET_CONFIG_PATH=/home/zhangjc/github/superset/superset_config.py</span><br></pre></td></tr></table></figure><p>superset_config.pyæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&#x27;mysql://superset:Superset123@localhost/superset?unix_socket=/tmp/mysql.sock&#x27;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿æ¥ä¸²ä¸­çš„å¯†ç éƒ¨åˆ†å¸¦æœ‰ç‰¹æ®Šå­—ç¬¦â€œ@â€æ—¶ï¼Œæ‰§è¡Œsuperset db upgradeæ—¶ä¼šå‡ºç°é”™è¯¯ã€‚è¿™æ˜¯å› ä¸º<a href="https://www.zhangjc.com/2024/12/28/Superset%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E4%B8%B2%E5%AF%86%E7%A0%81%E4%B8%8D%E8%83%BD%E5%8C%85%E5%90%AB/">Superseté…ç½®æ•°æ®åº“è¿æ¥ä¸²å¯†ç ä¸èƒ½åŒ…å«@</a>ã€‚</p><p>å®‰è£…MySQLé©±åŠ¨å¹¶åˆå§‹åŒ–æ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip install mysqlclient</span><br><span class="line">$ superset db upgrade</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å®Œæˆå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å…ƒæ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªç®¡ç†ç”¨æˆ·ï¼ˆä½¿ç”¨â€œadminâ€ä½œä¸ºç”¨æˆ·ååŠ è½½ç¤ºä¾‹ï¼‰,æ ¹æ®æç¤ºè¾“å…¥ä¿¡æ¯å³å¯åˆ›å»ºå®Œæ¯•ã€‚</span></span><br><span class="line">superset fab create-admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ ·ä¾‹</span></span><br><span class="line">superset load_examples</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé»˜è®¤çš„è§’è‰²å’Œæƒé™</span></span><br><span class="line">superset init</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨è°ƒè¯•æ¨¡å¼çš„æœåŠ¡å™¨</span></span><br><span class="line">superset run -p 8088 --with-threads --reload --debugger</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å¯è§†åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Python </tag>
            
            <tag> Superset </tag>
            
            <tag> æ•°æ®å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonæ—¥å¿—åº“ï¼šLoguru</title>
      <link href="/2024/12/23/Python%E6%97%A5%E5%BF%97%E5%BA%93%EF%BC%9ALoguru/"/>
      <url>/2024/12/23/Python%E6%97%A5%E5%BF%97%E5%BA%93%EF%BC%9ALoguru/</url>
      
        <content type="html"><![CDATA[<p>Loguruæ˜¯ä¸€ä¸ªæ—¨åœ¨ä¸ºPythonå¸¦æ¥æ„‰å¿«çš„æ—¥å¿—è®°å½•çš„åº“ã€‚ä½¿ç”¨Loguruï¼Œæ²¡æœ‰ç†ç”±ä¸ä»ä¸€å¼€å§‹å°±ä½¿ç”¨æ—¥å¿—è®°å½•ï¼Œè¿™å°±åƒä»Loguruå¯¼å…¥æ—¥å¿—ä¸€æ ·ç®€å•from loguru import loggerã€‚æ­¤å¤–ï¼Œè¿™ä¸ªåº“é€šè¿‡æ·»åŠ ä¸€ç³»åˆ—æœ‰ç”¨çš„åŠŸèƒ½æ¥è§£å†³ä½¿ç”¨æ ‡å‡†æ—¥å¿—è®°å½•åº“çš„ç—›è‹¦ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ—¥å¿—åº”è¯¥æ˜¯è‡ªåŠ¨çš„ï¼ŒLoguruè¯•å›¾ä½¿å…¶æ—¢ä»¤äººæ„‰å¿«åˆå¼ºå¤§ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install loguru</span><br></pre></td></tr></table></figure><h1 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h1><h2 id="å¼€ç®±å³ç”¨"><a href="#å¼€ç®±å³ç”¨" class="headerlink" title="å¼€ç®±å³ç”¨"></a>å¼€ç®±å³ç”¨</h2><p>Loguruçš„ä¸»è¦æ¦‚å¿µæ˜¯æœ‰ä¸”åªéœ€è¦ä¸€ä¸ª<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#loguru._logger.Logger">Logger</a>ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå®ƒé¢„å…ˆé…ç½®ä»è¾“å‡ºåˆ°stderrå¼€å§‹ï¼ˆä½†æ˜¯è¿™æ˜¯å®Œå…¨å¯é…ç½®çš„ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> loguru <span class="keyword">import</span> logger</span><br><span class="line"></span><br><span class="line">logger.debug(<span class="string">&quot;That&#x27;s it, beautiful and simple logging!&quot;</span>)</span><br></pre></td></tr></table></figure><p><a href="https://loguru.readthedocs.io/en/stable/api/logger.html#loguru._logger.Logger">Logger</a>åªæ˜¯ä¸€ä¸ªå°†æ—¥å¿—æ¶ˆæ¯åˆ†å‘ç»™å·²é…ç½®çš„å¤„ç†ç¨‹åºçš„æ¥å£ã€‚</p><h2 id="æ— å¤„ç†ç¨‹åºã€æ— æ ¼å¼åŒ–ã€æ— è¿‡æ»¤å™¨ï¼šä¸€ä¸ªå‡½æ•°æ¥è§„å®šæ‰€æœ‰"><a href="#æ— å¤„ç†ç¨‹åºã€æ— æ ¼å¼åŒ–ã€æ— è¿‡æ»¤å™¨ï¼šä¸€ä¸ªå‡½æ•°æ¥è§„å®šæ‰€æœ‰" class="headerlink" title="æ— å¤„ç†ç¨‹åºã€æ— æ ¼å¼åŒ–ã€æ— è¿‡æ»¤å™¨ï¼šä¸€ä¸ªå‡½æ•°æ¥è§„å®šæ‰€æœ‰"></a>æ— å¤„ç†ç¨‹åºã€æ— æ ¼å¼åŒ–ã€æ— è¿‡æ»¤å™¨ï¼šä¸€ä¸ªå‡½æ•°æ¥è§„å®šæ‰€æœ‰</h2><p>å¦‚ä½•æ·»åŠ å¤„ç†ç¨‹åº? å¦‚ä½•è®¾ç½®æ—¥å¿—æ ¼å¼? å¦‚ä½•è¿‡æ»¤æ¶ˆæ¯? å¦‚ä½•è®¾ç½®çº§åˆ«ï¼Ÿç­”æ¡ˆæ˜¯ï¼š<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#loguru._logger.Logger.add">add()</a>å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.add(sys.stderr, <span class="built_in">format</span>=<span class="string">&quot;&#123;time&#125; &#123;level&#125; &#123;message&#125;&quot;</span>, <span class="built_in">filter</span>=<span class="string">&quot;my_module&quot;</span>, level=<span class="string">&quot;INFO&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°ç”¨æ¥æ³¨å†Œä½¿ç”¨<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#record">record dict</a>æ¥ç®¡ç†<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#message">log messages</a>ä¸Šä¸‹æ–‡çš„<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#sink">sinks</a>ã€‚sinkå¯ä»¥æœ‰å¤šç§å½¢å¼ï¼šä¸€ä¸ªç®€å•çš„å‡½æ•°ã€ä¸€ä¸ªå­—ç¬¦ä¸²è·¯å¾„ã€ä¸€ä¸ªç±»ä¼¼æ–‡ä»¶çš„å¯¹è±¡ã€ä¸€ä¸ªåç¨‹å‡½æ•°æˆ–ä¸€ä¸ªå†…ç½®çš„Handlerã€‚</p><p>æ³¨æ„ï¼Œè¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨åœ¨æ·»åŠ å¤„ç†ç¨‹åºæ—¶è¿”å›çš„æ ‡è¯†ç¬¦æ¥remove()ä»¥å‰æ·»åŠ çš„å¤„ç†ç¨‹åºã€‚å¦‚æœå¸Œæœ›å–ä»£é»˜è®¤çš„stderrå¤„ç†ç¨‹åºï¼Œè¿™å°¤å…¶æœ‰ç”¨:åªéœ€è°ƒç”¨logger.remove()æ¥é‡æ–°å¼€å§‹ã€‚</p><h2 id="æ›´å®¹æ˜“çš„æ—‹è½¬-ä¿ç•™-å‹ç¼©æ—¥å¿—æ–‡ä»¶"><a href="#æ›´å®¹æ˜“çš„æ—‹è½¬-ä¿ç•™-å‹ç¼©æ—¥å¿—æ–‡ä»¶" class="headerlink" title="æ›´å®¹æ˜“çš„æ—‹è½¬&#x2F;ä¿ç•™&#x2F;å‹ç¼©æ—¥å¿—æ–‡ä»¶"></a>æ›´å®¹æ˜“çš„æ—‹è½¬&#x2F;ä¿ç•™&#x2F;å‹ç¼©æ—¥å¿—æ–‡ä»¶</h2><p>å¦‚æœå°†è®°å½•çš„æ¶ˆæ¯å‘é€åˆ°æ–‡ä»¶ï¼Œåªéœ€ä½¿ç”¨å­—ç¬¦ä¸²è·¯å¾„ä½œä¸ºæ¥æ”¶å™¨ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå®ƒè¿˜å¯ä»¥è‡ªåŠ¨è®¡æ—¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.add(<span class="string">&quot;file_&#123;time&#125;.log&quot;</span>)</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æ—‹è½¬æ—¥å¿—æ–‡ä»¶ï¼Œæˆ–è€…åˆ é™¤è¾ƒæ—§çš„æ—¥å¿—æ–‡ä»¶ï¼Œæˆ–è€…åœ¨å…³é—­æ—¶å‹ç¼©æ—¥å¿—æ–‡ä»¶ï¼Œä¹Ÿæ˜¯å¾ˆå®¹æ˜“é…ç½®çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">logger.add(<span class="string">&quot;file_1.log&quot;</span>, rotation=<span class="string">&quot;500 MB&quot;</span>)    <span class="comment"># Automatically rotate too big file</span></span><br><span class="line">logger.add(<span class="string">&quot;file_2.log&quot;</span>, rotation=<span class="string">&quot;12:00&quot;</span>)     <span class="comment"># New file is created each day at noon</span></span><br><span class="line">logger.add(<span class="string">&quot;file_3.log&quot;</span>, rotation=<span class="string">&quot;1 week&quot;</span>)    <span class="comment"># Once the file is too old, it&#x27;s rotated</span></span><br><span class="line"></span><br><span class="line">logger.add(<span class="string">&quot;file_X.log&quot;</span>, retention=<span class="string">&quot;10 days&quot;</span>)  <span class="comment"># Cleanup after some time</span></span><br><span class="line"></span><br><span class="line">logger.add(<span class="string">&quot;file_Y.log&quot;</span>, compression=<span class="string">&quot;zip&quot;</span>)    <span class="comment"># Save some loved space</span></span><br></pre></td></tr></table></figure><h2 id="å¤§æ‹¬å·æ ·å¼çš„ç°ä»£å­—ç¬¦ä¸²æ ¼å¼è®¾ç½®"><a href="#å¤§æ‹¬å·æ ·å¼çš„ç°ä»£å­—ç¬¦ä¸²æ ¼å¼è®¾ç½®" class="headerlink" title="å¤§æ‹¬å·æ ·å¼çš„ç°ä»£å­—ç¬¦ä¸²æ ¼å¼è®¾ç½®"></a>å¤§æ‹¬å·æ ·å¼çš„ç°ä»£å­—ç¬¦ä¸²æ ¼å¼è®¾ç½®</h2><p>Loguruå–œæ¬¢æ›´ä¼˜é›…å’Œå¼ºå¤§çš„{}æ ¼å¼åŒ–è€Œä¸æ˜¯%ï¼Œæ—¥å¿—è®°å½•å‡½æ•°å®é™…ä¸Šç­‰æ•ˆäºstr.format ()ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.info(<span class="string">&quot;If you&#x27;re using Python &#123;&#125;, prefer &#123;feature&#125; of course!&quot;</span>, <span class="number">3.6</span>, feature=<span class="string">&quot;f-strings&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="åœ¨çº¿ç¨‹æˆ–ä¸»çº¿ç¨‹ä¸­æ•è·å¼‚å¸¸"><a href="#åœ¨çº¿ç¨‹æˆ–ä¸»çº¿ç¨‹ä¸­æ•è·å¼‚å¸¸" class="headerlink" title="åœ¨çº¿ç¨‹æˆ–ä¸»çº¿ç¨‹ä¸­æ•è·å¼‚å¸¸"></a>åœ¨çº¿ç¨‹æˆ–ä¸»çº¿ç¨‹ä¸­æ•è·å¼‚å¸¸</h2><p>æ‚¨æ˜¯å¦æ›¾ç»é‡åˆ°è¿‡ç¨‹åºæ„å¤–å´©æºƒï¼Œè€Œåœ¨æ—¥å¿—æ–‡ä»¶ä¸­æ²¡æœ‰çœ‹åˆ°ä»»ä½•ä¿¡æ¯ï¼Ÿæ‚¨æ˜¯å¦æ³¨æ„åˆ°çº¿ç¨‹ä¸­å‘ç”Ÿçš„å¼‚å¸¸æ²¡æœ‰è¢«è®°å½•ï¼Ÿå¯ä»¥ä½¿ç”¨catch ()è£…é¥°å™¨&#x2F;ä¸Šä¸‹æ–‡ç®¡ç†å™¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯¥ç®¡ç†å™¨ç¡®ä¿ä»»ä½•é”™è¯¯éƒ½è¢«æ­£ç¡®åœ°ä¼ é€’åˆ°loggerã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@logger.catch</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_function</span>(<span class="params">x, y, z</span>):</span><br><span class="line">    <span class="comment"># An error? It&#x27;s caught anyway!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> / (x + y + z)</span><br></pre></td></tr></table></figure><h2 id="ä¼˜ç¾çš„å½©è‰²æ—¥å¿—"><a href="#ä¼˜ç¾çš„å½©è‰²æ—¥å¿—" class="headerlink" title="ä¼˜ç¾çš„å½©è‰²æ—¥å¿—"></a>ä¼˜ç¾çš„å½©è‰²æ—¥å¿—</h2><p>å¦‚æœç»ˆç«¯å…¼å®¹ï¼ŒLoguruä¼šè‡ªåŠ¨ä¸ºæ—¥å¿—æ·»åŠ é¢œè‰²ã€‚å¯ä»¥åœ¨æ¥æ”¶å™¨æ ¼å¼ä¸­ç”¨markup tagsæ¥å®šä¹‰å–œæ¬¢çš„æ ·å¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.add(sys.stdout, colorize=<span class="literal">True</span>, <span class="built_in">format</span>=<span class="string">&quot;&lt;green&gt;&#123;time&#125;&lt;/green&gt; &lt;level&gt;&#123;message&#125;&lt;/level&gt;&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="å¼‚æ­¥ã€çº¿ç¨‹å®‰å…¨ã€å¤šè¿›ç¨‹å®‰å…¨"><a href="#å¼‚æ­¥ã€çº¿ç¨‹å®‰å…¨ã€å¤šè¿›ç¨‹å®‰å…¨" class="headerlink" title="å¼‚æ­¥ã€çº¿ç¨‹å®‰å…¨ã€å¤šè¿›ç¨‹å®‰å…¨"></a>å¼‚æ­¥ã€çº¿ç¨‹å®‰å…¨ã€å¤šè¿›ç¨‹å®‰å…¨</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ·»åŠ åˆ°<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#loguru._logger.Logger">logger</a>çš„æ‰€æœ‰æ¥æ”¶å™¨éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®ƒä»¬ä¸æ˜¯å¤šè¿›ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å¯ä»¥å¯¹æ¶ˆæ¯è¿›è¡Œenqueueä»¥ç¡®ä¿æ—¥å¿—çš„å®Œæ•´æ€§ã€‚å¦‚æœéœ€è¦å¼‚æ­¥æ—¥å¿—è®°å½•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.add(<span class="string">&quot;somefile.log&quot;</span>, enqueue=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ”¯æŒä½œä¸ºæ¥æ”¶å™¨çš„ååŒå‡½æ•°ï¼Œå¹¶ä¸”åº”è¯¥ä½¿ç”¨complete()è¿›è¡Œç­‰å¾…ã€‚</p><h2 id="å®Œå…¨æè¿°ä¾‹å¤–"><a href="#å®Œå…¨æè¿°ä¾‹å¤–" class="headerlink" title="å®Œå…¨æè¿°ä¾‹å¤–"></a>å®Œå…¨æè¿°ä¾‹å¤–</h2><p>è®°å½•ä»£ç ä¸­å‘ç”Ÿçš„å¼‚å¸¸å¯¹äºè·Ÿè¸ªbugéå¸¸é‡è¦ï¼Œä½†æ˜¯å¦‚æœä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šå¤±è´¥ï¼Œé‚£ä¹ˆè®°å½•å¼‚å¸¸å°±å®Œå…¨æ²¡æœ‰ç”¨å¤„ã€‚Loguruå…è®¸æ˜¾ç¤ºæ•´ä¸ªå †æ ˆè·Ÿè¸ªï¼ŒåŒ…æ‹¬å˜é‡çš„å€¼ï¼Œä»è€Œå¸®åŠ©è¯†åˆ«é—®é¢˜ï¼ˆæ„Ÿè°¢<a href="https://github.com/Qix-/better-exceptions">better_exception</a>ï¼ï¼‰ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Caution, &quot;diagnose=True&quot; is the default and may leak sensitive data in prod</span></span><br><span class="line">logger.add(<span class="string">&quot;out.log&quot;</span>, backtrace=<span class="literal">True</span>, diagnose=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a / b</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nested</span>(<span class="params">c</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        func(<span class="number">5</span>, c)</span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">        logger.exception(<span class="string">&quot;What?!&quot;</span>)</span><br><span class="line"></span><br><span class="line">nested(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">2018-07-17 01:38:43.975 | ERROR    | __main__:nested:10 - What?!</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line"></span><br><span class="line">  File &quot;test.py&quot;, line 12, in &lt;module&gt;</span><br><span class="line">    nested(0)</span><br><span class="line">    â”” &lt;function nested at 0x7f5c755322f0&gt;</span><br><span class="line"></span><br><span class="line">&gt; File &quot;test.py&quot;, line 8, in nested</span><br><span class="line">    func(5, c)</span><br><span class="line">    â”‚       â”” 0</span><br><span class="line">    â”” &lt;function func at 0x7f5c79fc2e18&gt;</span><br><span class="line"></span><br><span class="line">  File &quot;test.py&quot;, line 4, in func</span><br><span class="line">    return a / b</span><br><span class="line">           â”‚   â”” 0</span><br><span class="line">           â”” 5</span><br><span class="line"></span><br><span class="line">ZeroDivisionError: division by zero</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œç”±äºå¸§æ•°æ®ä¸å¯ç”¨ï¼Œè¿™ä¸ªç‰¹æ€§ä¸èƒ½åœ¨é»˜è®¤çš„Python REPLä¸Šå·¥ä½œã€‚å‚è€ƒï¼š<a href="https://loguru.readthedocs.io/en/stable/resources/recipes.html#security-considerations-when-using-loguru">Security considerations when using Loguru</a>ã€‚</p><h2 id="æ ¹æ®éœ€è¦ç»“æ„åŒ–æ—¥å¿—"><a href="#æ ¹æ®éœ€è¦ç»“æ„åŒ–æ—¥å¿—" class="headerlink" title="æ ¹æ®éœ€è¦ç»“æ„åŒ–æ—¥å¿—"></a>æ ¹æ®éœ€è¦ç»“æ„åŒ–æ—¥å¿—</h2><p>æ˜¯å¦å¸Œæœ›å°†æ—¥å¿—åºåˆ—åŒ–ä»¥ä¾¿äºè§£ææˆ–ä¼ é€’å®ƒä»¬ï¼Ÿä½¿ç”¨serializeåºåˆ—åŒ–å‚æ•°ï¼Œæ¯ä¸ªæ—¥å¿—æ¶ˆæ¯åœ¨å‘é€åˆ°é…ç½®çš„æ¥æ”¶å™¨ä¹‹å‰éƒ½å°†è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.add(custom_sink_function, serialize=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨bind()ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é¢å¤–çš„recordå±æ€§æ·»åŠ æ¶ˆæ¯ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">logger.add(<span class="string">&quot;file.log&quot;</span>, <span class="built_in">format</span>=<span class="string">&quot;&#123;extra[ip]&#125; &#123;extra[user]&#125; &#123;message&#125;&quot;</span>)</span><br><span class="line">context_logger = logger.bind(ip=<span class="string">&quot;192.168.0.1&quot;</span>, user=<span class="string">&quot;someone&quot;</span>)</span><br><span class="line">context_logger.info(<span class="string">&quot;Contextualize your logger easily&quot;</span>)</span><br><span class="line">context_logger.bind(user=<span class="string">&quot;someone_else&quot;</span>).info(<span class="string">&quot;Inline binding of extra attribute&quot;</span>)</span><br><span class="line">context_logger.info(<span class="string">&quot;Use kwargs to add context during formatting: &#123;user&#125;&quot;</span>, user=<span class="string">&quot;anybody&quot;</span>)</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#loguru._logger.Logger.contextualize">contextualize()</a>ä¸´æ—¶ä¿®æ”¹ä¸Šä¸‹æ–‡å±€éƒ¨çŠ¶æ€ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> logger.contextualize(task=task_id):</span><br><span class="line">    do_something()</span><br><span class="line">    logger.info(<span class="string">&quot;End of task&quot;</span>)</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç»„åˆbind()å’Œfilterï¼Œå¯ä»¥å¯¹æ—¥å¿—è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logger.add(<span class="string">&quot;special.log&quot;</span>, <span class="built_in">filter</span>=<span class="keyword">lambda</span> record: <span class="string">&quot;special&quot;</span> <span class="keyword">in</span> record[<span class="string">&quot;extra&quot;</span>])</span><br><span class="line">logger.debug(<span class="string">&quot;This message is not logged to the file&quot;</span>)</span><br><span class="line">logger.bind(special=<span class="literal">True</span>).info(<span class="string">&quot;This message, though, is logged to the file!&quot;</span>)</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œ<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#loguru._logger.Logger.patch">patch()</a>æ–¹æ³•å…è®¸å°†åŠ¨æ€å€¼é™„åŠ åˆ°æ¯æ¡æ–°æ¶ˆæ¯è®°å½•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">logger.add(sys.stderr, <span class="built_in">format</span>=<span class="string">&quot;&#123;extra[utc]&#125; &#123;message&#125;&quot;</span>)</span><br><span class="line">logger = logger.patch(<span class="keyword">lambda</span> record: record[<span class="string">&quot;extra&quot;</span>].update(utc=datetime.utcnow()))</span><br></pre></td></tr></table></figure><h2 id="å»¶è¿Ÿæ±‚å€¼ä»£ä»·å‡½æ•°"><a href="#å»¶è¿Ÿæ±‚å€¼ä»£ä»·å‡½æ•°" class="headerlink" title="å»¶è¿Ÿæ±‚å€¼ä»£ä»·å‡½æ•°"></a>å»¶è¿Ÿæ±‚å€¼ä»£ä»·å‡½æ•°</h2><p>æœ‰æ—¶å¸Œæœ›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®°å½•è¯¦ç»†ä¿¡æ¯è€Œä¸ä¼šå½±å“æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://loguru.readthedocs.io/en/stable/api/logger.html#loguru._logger.Logger.opt">opt()</a>æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">logger.opt(lazy=<span class="literal">True</span>).debug(<span class="string">&quot;If sink level &lt;= DEBUG: &#123;x&#125;&quot;</span>, x=<span class="keyword">lambda</span>: expensive_function(<span class="number">2</span>**<span class="number">64</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># By the way, &quot;opt()&quot; serves many usages</span></span><br><span class="line">logger.opt(exception=<span class="literal">True</span>).info(<span class="string">&quot;Error stacktrace added to the log message (tuple accepted too)&quot;</span>)</span><br><span class="line">logger.opt(colors=<span class="literal">True</span>).info(<span class="string">&quot;Per message &lt;blue&gt;colors&lt;/blue&gt;&quot;</span>)</span><br><span class="line">logger.opt(record=<span class="literal">True</span>).info(<span class="string">&quot;Display values from the record (eg. &#123;record[thread]&#125;)&quot;</span>)</span><br><span class="line">logger.opt(raw=<span class="literal">True</span>).info(<span class="string">&quot;Bypass sink formatting\n&quot;</span>)</span><br><span class="line">logger.opt(depth=<span class="number">1</span>).info(<span class="string">&quot;Use parent stack context (useful within wrapped functions)&quot;</span>)</span><br><span class="line">logger.opt(capture=<span class="literal">False</span>).info(<span class="string">&quot;Keyword arguments not added to &#123;dest&#125; dict&quot;</span>, dest=<span class="string">&quot;extra&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰çº§åˆ«"><a href="#è‡ªå®šä¹‰çº§åˆ«" class="headerlink" title="è‡ªå®šä¹‰çº§åˆ«"></a>è‡ªå®šä¹‰çº§åˆ«</h2><p>Loguruæä¾›äº†æ‰€æœ‰æ·»åŠ trace()å’Œsuccess()çš„æ ‡å‡†æ—¥å¿—è®°å½•çº§åˆ«ã€‚æ˜¯å¦éœ€è¦æ›´å¤šï¼Ÿç„¶åï¼Œä½¿ç”¨level()å‡½æ•°åˆ›å»ºå®ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new_level = logger.level(<span class="string">&quot;SNAKY&quot;</span>, no=<span class="number">38</span>, color=<span class="string">&quot;&lt;yellow&gt;&quot;</span>, icon=<span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line"></span><br><span class="line">logger.log(<span class="string">&quot;SNAKY&quot;</span>, <span class="string">&quot;Here we go!&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="æ›´å¥½çš„å¤„ç†æ—¥æœŸæ—¶é—´"><a href="#æ›´å¥½çš„å¤„ç†æ—¥æœŸæ—¶é—´" class="headerlink" title="æ›´å¥½çš„å¤„ç†æ—¥æœŸæ—¶é—´"></a>æ›´å¥½çš„å¤„ç†æ—¥æœŸæ—¶é—´</h2><p>æ ‡å‡†æ—¥å¿—è®°å½•ä¸­å……æ–¥ç€è¯¸å¦‚datefmtæˆ–msecsã€%(asctime)så’Œ%(created)sä¹‹ç±»çš„å‚æ•°ï¼Œæ²¡æœ‰æ—¶åŒºä¿¡æ¯çš„æœ´ç´ æ—¥æœŸæ—¶é—´ï¼Œæ²¡æœ‰ç›´è§‚çš„æ ¼å¼è®¾ç½®ç­‰ç­‰ã€‚Loguruè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.add(<span class="string">&quot;file.log&quot;</span>, <span class="built_in">format</span>=<span class="string">&quot;&#123;time:YYYY-MM-DD at HH:mm:ss&#125; | &#123;level&#125; | &#123;message&#125;&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="é€‚ç”¨äºè„šæœ¬å’Œåº“"><a href="#é€‚ç”¨äºè„šæœ¬å’Œåº“" class="headerlink" title="é€‚ç”¨äºè„šæœ¬å’Œåº“"></a>é€‚ç”¨äºè„šæœ¬å’Œåº“</h2><p>åœ¨è„šæœ¬ä¸­ä½¿ç”¨æ—¥å¿—è®°å½•å™¨å¾ˆå®¹æ˜“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¼€å§‹æ—¶configure()ã€‚è¦åœ¨åº“ä¸­ä½¿ç”¨Loguruï¼Œè¯·è®°ä½æ°¸è¿œä¸è¦è°ƒç”¨add()ï¼Œè€Œæ˜¯ä½¿ç”¨disable()ï¼Œè¿™æ ·æ—¥å¿—è®°å½•å‡½æ•°å°±å˜ä¸ºno-opã€‚å¦‚æœå¼€å‘äººå‘˜å¸Œæœ›æŸ¥çœ‹åº“çš„æ—¥å¿—ï¼Œä»–ä»¬å¯ä»¥å†æ¬¡enable()ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For scripts</span></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;handlers&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;sink&quot;</span>: sys.stdout, <span class="string">&quot;format&quot;</span>: <span class="string">&quot;&#123;time&#125; - &#123;message&#125;&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;sink&quot;</span>: <span class="string">&quot;file.log&quot;</span>, <span class="string">&quot;serialize&quot;</span>: <span class="literal">True</span>&#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;extra&quot;</span>: &#123;<span class="string">&quot;user&quot;</span>: <span class="string">&quot;someone&quot;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line">logger.configure(**config)</span><br><span class="line"></span><br><span class="line"><span class="comment"># For libraries, should be your library&#x27;s `__name__`</span></span><br><span class="line">logger.disable(<span class="string">&quot;my_library&quot;</span>)</span><br><span class="line">logger.info(<span class="string">&quot;No matter added sinks, this message is not displayed&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># In your application, enable the logger in the library</span></span><br><span class="line">logger.enable(<span class="string">&quot;my_library&quot;</span>)</span><br><span class="line">logger.info(<span class="string">&quot;This message however is propagated to the sinks&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ›´åŠ æ–¹ä¾¿ï¼Œè¿˜å¯ä»¥ä½¿ç”¨loguru-configåº“ç›´æ¥ä»é…ç½®æ–‡ä»¶è®¾ç½®æ—¥å¿—è®°å½•å™¨ã€‚</p><h2 id="ä¸æ ‡å‡†æ—¥å¿—è®°å½•å®Œå…¨å…¼å®¹"><a href="#ä¸æ ‡å‡†æ—¥å¿—è®°å½•å®Œå…¨å…¼å®¹" class="headerlink" title="ä¸æ ‡å‡†æ—¥å¿—è®°å½•å®Œå…¨å…¼å®¹"></a>ä¸æ ‡å‡†æ—¥å¿—è®°å½•å®Œå…¨å…¼å®¹</h2><p>æ˜¯å¦å¸Œæœ›ä½¿ç”¨å†…ç½®çš„æ—¥å¿—Handlerä½œä¸ºLoguruæ¥æ”¶å™¨ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">handler = logging.handlers.SysLogHandler(address=(<span class="string">&#x27;localhost&#x27;</span>, <span class="number">514</span>))</span><br><span class="line">logger.add(handler)</span><br></pre></td></tr></table></figure><p>æ˜¯å¦éœ€è¦å°†Loguruæ¶ˆæ¯ä¼ æ’­åˆ°æ ‡å‡†æ—¥å¿—ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PropagateHandler</span>(logging.Handler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">emit</span>(<span class="params">self, record: logging.LogRecord</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        logging.getLogger(record.name).handle(record)</span><br><span class="line"></span><br><span class="line">logger.add(PropagateHandler(), <span class="built_in">format</span>=<span class="string">&quot;&#123;message&#125;&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ˜¯å¦æƒ³è¦æ‹¦æˆªåˆ°Loguruæ¥æ”¶å™¨çš„æ ‡å‡†æ—¥å¿—æ¶ˆæ¯ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">InterceptHandler</span>(logging.Handler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">emit</span>(<span class="params">self, record: logging.LogRecord</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># Get corresponding Loguru level if it exists.</span></span><br><span class="line">        level: <span class="built_in">str</span> | <span class="built_in">int</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            level = logger.level(record.levelname).name</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            level = record.levelno</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Find caller from where originated the logged message.</span></span><br><span class="line">        frame, depth = inspect.currentframe(), <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> frame <span class="keyword">and</span> (depth == <span class="number">0</span> <span class="keyword">or</span> frame.f_code.co_filename == logging.__file__):</span><br><span class="line">            frame = frame.f_back</span><br><span class="line">            depth += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        logger.opt(depth=depth, exception=record.exc_info).log(level, record.getMessage())</span><br><span class="line"></span><br><span class="line">logging.basicConfig(handlers=[InterceptHandler()], level=<span class="number">0</span>, force=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡ç¯å¢ƒå˜é‡çš„ä¸ªæ€§åŒ–é»˜è®¤å€¼"><a href="#é€šè¿‡ç¯å¢ƒå˜é‡çš„ä¸ªæ€§åŒ–é»˜è®¤å€¼" class="headerlink" title="é€šè¿‡ç¯å¢ƒå˜é‡çš„ä¸ªæ€§åŒ–é»˜è®¤å€¼"></a>é€šè¿‡ç¯å¢ƒå˜é‡çš„ä¸ªæ€§åŒ–é»˜è®¤å€¼</h2><p>æ˜¯å¦ä¸å–œæ¬¢é»˜è®¤çš„æ—¥å¿—è®°å½•å™¨æ ¼å¼ï¼Ÿå–œæ¬¢å¦ä¸€ç§DEBUGé¢œè‰²ï¼Ÿæ²¡é—®é¢˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux / OSX</span></span><br><span class="line">export LOGURU_FORMAT=<span class="string">&quot;&#123;time&#125; | &lt;lvl&gt;&#123;message&#125;&lt;/lvl&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line">setx LOGURU_DEBUG_COLOR <span class="string">&quot;&lt;green&gt;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æ–¹ä¾¿çš„è§£æå™¨"><a href="#æ–¹ä¾¿çš„è§£æå™¨" class="headerlink" title="æ–¹ä¾¿çš„è§£æå™¨"></a>æ–¹ä¾¿çš„è§£æå™¨</h2><p>ä»ç”Ÿæˆçš„æ—¥å¿—ä¸­æå–ç‰¹å®šä¿¡æ¯é€šå¸¸å¾ˆæœ‰ç”¨ï¼Œè¿™å°±æ˜¯Loguruæä¾›parse()æ–¹æ³•å¸®åŠ©å¤„ç†æ—¥å¿—å’Œæ­£åˆ™è¡¨è¾¾å¼çš„åŸå› ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pattern = <span class="string">r&quot;(?P&lt;time&gt;.*) - (?P&lt;level&gt;[0-9]+) - (?P&lt;message&gt;.*)&quot;</span>  <span class="comment"># Regex with named groups</span></span><br><span class="line">caster_dict = <span class="built_in">dict</span>(time=dateutil.parser.parse, level=<span class="built_in">int</span>)        <span class="comment"># Transform matching groups</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> groups <span class="keyword">in</span> logger.parse(<span class="string">&quot;file.log&quot;</span>, pattern, cast=caster_dict):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Parsed:&quot;</span>, groups)</span><br><span class="line">    <span class="comment"># &#123;&quot;level&quot;: 30, &quot;message&quot;: &quot;Log example&quot;, &quot;time&quot;: datetime(2018, 12, 09, 11, 23, 55)&#125;</span></span><br></pre></td></tr></table></figure><h2 id="è¯¦å°½çš„é€šçŸ¥"><a href="#è¯¦å°½çš„é€šçŸ¥" class="headerlink" title="è¯¦å°½çš„é€šçŸ¥"></a>è¯¦å°½çš„é€šçŸ¥</h2><p>Loguruå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸ä¸€æµçš„<a href="https://github.com/notifiers/notifiers">notifiers</a>åº“ï¼ˆå¿…é¡»å•ç‹¬å®‰è£…ï¼‰ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥ä¾¿åœ¨ç¨‹åºæ„å¤–å¤±è´¥æ—¶æ¥æ”¶ç”µå­é‚®ä»¶æˆ–å‘é€è®¸å¤šå…¶ä»–ç±»å‹çš„é€šçŸ¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> notifiers</span><br><span class="line"></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&quot;username&quot;</span>: <span class="string">&quot;you@gmail.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;abc123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;to&quot;</span>: <span class="string">&quot;dest@gmail.com&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Send a single notification</span></span><br><span class="line">notifier = notifiers.get_notifier(<span class="string">&quot;gmail&quot;</span>)</span><br><span class="line">notifier.notify(message=<span class="string">&quot;The application is running!&quot;</span>, **params)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Be alerted on each error message</span></span><br><span class="line"><span class="keyword">from</span> notifiers.logging <span class="keyword">import</span> NotificationHandler</span><br><span class="line"></span><br><span class="line">handler = NotificationHandler(<span class="string">&quot;gmail&quot;</span>, defaults=params)</span><br><span class="line">logger.add(handler, level=<span class="string">&quot;ERROR&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Loguru </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonè™šæ‹Ÿç¯å¢ƒç®¡ç†</title>
      <link href="/2024/12/22/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/"/>
      <url>/2024/12/22/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å¦å¤–ä¸€ç¯‡æ–‡ç« å·²ç»è®²äº†<a href="https://www.zhangjc.com/2024/12/17/Python-%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/">Pythonç‰ˆæœ¬ç®¡ç†</a>ã€‚æœ¬æ–‡ä¸»è¦è®²Pythonè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€‚æœ‰äº†è¿™ä¸¤ä¸ªæ–¹é¢çš„å·¥å…·ï¼Œå°±å¯ä»¥å®ç°åœ¨Pythonçš„ä¸åŒç‰ˆæœ¬ä¸åŒè™šæ‹Ÿç¯å¢ƒé—´æ–¹ä¾¿åœ°åˆ‡æ¢ã€‚</p><p>pyenv-virtualenvä¸€èˆ¬ä¼šéšpyenvä¸€èµ·å®‰è£…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸‹æ–‡æ–¹å¼ç‹¬ç«‹å®‰è£…ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒ"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒ"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿç¯å¢ƒ</h1><p>ä¸€ç§é‡‡ç”¨åä½œå¼éš”ç¦»çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå…è®¸Pythonç”¨æˆ·å’Œåº”ç”¨ç¨‹åºåœ¨å®‰è£…å’Œå‡çº§Pythonåˆ†å‘åŒ…æ—¶ä¸ä¼šå¹²æ‰°åˆ°åŒä¸€ç³»ç»Ÿä¸Šè¿è¡Œçš„å…¶ä»–Pythonåº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚</p><p>è™šæ‹Ÿç¯å¢ƒå…¶å®æ˜¯ä¸€ä¸ªç›®å½•æ ‘ï¼Œå…¶ä¸­å®‰è£…æœ‰ç‰¹å®šPythonç‰ˆæœ¬ï¼Œä»¥åŠè®¸å¤šå…¶ä»–åŒ…ã€‚</p><h1 id="ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒ"></a>ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒ</h1><p>Pythonåº”ç”¨ç¨‹åºé€šå¸¸ä¼šä½¿ç”¨éæ ‡å‡†åº“å†…çš„è½¯ä»¶åŒ…å’Œæ¨¡å—ã€‚å› ä¸ºå¯èƒ½éœ€è¦ä¿®å¤ç‰¹å®šçš„é”™è¯¯ï¼Œæˆ–è€…ä½¿ç”¨åº“çš„è¿‡æ—¶ç‰ˆæœ¬çš„æ¥å£ï¼Œåº”ç”¨ç¨‹åºæœ‰æ—¶éœ€è¦ç‰¹å®šç‰ˆæœ¬çš„åº“ã€‚</p><p>è¿™æ„å‘³ç€ä¸€ä¸ªPythonå®‰è£…å¯èƒ½æ— æ³•æ»¡è¶³æ¯ä¸ªåº”ç”¨ç¨‹åºçš„è¦æ±‚ã€‚å¦‚æœåº”ç”¨ç¨‹åºAéœ€è¦ç‰¹å®šæ¨¡å—çš„1.0ç‰ˆæœ¬ï¼Œä½†åº”ç”¨ç¨‹åºBéœ€è¦2.0ç‰ˆæœ¬ï¼Œåˆ™éœ€æ±‚å­˜åœ¨å†²çªï¼Œå®‰è£…ç‰ˆæœ¬1.0æˆ–2.0å°†å¯¼è‡´æŸä¸€ä¸ªåº”ç”¨ç¨‹åºæ— æ³•è¿è¡Œã€‚</p><p>è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚ç„¶åï¼Œä¸åŒçš„åº”ç”¨å°†å¯ä»¥ä½¿ç”¨ä¸åŒçš„è™šæ‹Ÿç¯å¢ƒã€‚ è¦è§£å†³å…ˆå‰éœ€æ±‚ç›¸å†²çªçš„ä¾‹å­ï¼Œåº”ç”¨ç¨‹åºAå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å®‰è£…äº†1.0ç‰ˆæœ¬çš„è™šæ‹Ÿç¯å¢ƒï¼Œè€Œåº”ç”¨ç¨‹åºBåˆ™æ‹¥æœ‰å®‰è£…äº†2.0ç‰ˆæœ¬çš„å¦ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚å¦‚æœåº”ç”¨ç¨‹åºBè¦æ±‚å°†æŸä¸ªåº“å‡çº§åˆ°3.0ç‰ˆæœ¬ï¼Œä¹Ÿä¸ä¼šå½±å“åº”ç”¨ç¨‹åºAçš„ç¯å¢ƒã€‚</p><h1 id="pyenv-virtualenv"><a href="#pyenv-virtualenv" class="headerlink" title="pyenv-virtualenv"></a>pyenv-virtualenv</h1><p>pyenv-viralenvæ˜¯ä¸€ä¸ªpyenvæ’ä»¶ï¼Œå®ƒæä¾›äº†åœ¨ç±»UNIXç³»ç»Ÿä¸Šç®¡ç†è™šæ‹Ÿç¯å¢ƒå’Œcondaç¯å¢ƒçš„ç‰¹æ€§ã€‚</p><blockquote><p>pyenv-virtualenvwrapperæ˜¯pyenvçš„å¦å¤–ä¸€ä¸ªç®¡ç†è™šæ‹Ÿç¯å¢ƒçš„æ’ä»¶ã€‚é€‰æ‹©pyenv-virtualenvçš„åŸå› æ˜¯ï¼Œpyenv-virtualenvwrapperæœ‰åŠ©äºä¸virtualenvwrapperè¿›è¡Œäº¤äº’ï¼Œä½†æ˜¯pyenv-virtualenvæä¾›äº†æ›´æ–¹ä¾¿çš„å‘½ä»¤ï¼Œå…¶ä¸­virtualenvsæ˜¯ç¬¬ä¸€ç§pyenvç‰ˆæœ¬ï¼Œå¯ä»¥ï¼ˆåï¼‰æ¿€æ´»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œpyenvå’Œvirtualenvwrapperä»ç„¶æ˜¯åˆ†å¼€çš„ï¼Œè€Œpyenv-virtualenvæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç»„åˆã€‚</p></blockquote><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>ä¸‹é¢å°†æŠŠæœ€æ–°å¼€å‘ç‰ˆæœ¬çš„pyenv-virtualenvå®‰è£…åˆ°$(pyenv root)&#x2F;plugins&#x2F;pyenv-virtualenvç›®å½•ä¸­ã€‚</p><blockquote><p><strong>é‡è¦æç¤º</strong>: å¦‚æœå°†pyenvå®‰è£…åˆ°ä¸€ä¸ªéæ ‡å‡†ç›®å½•ä¸­ï¼Œè¯·ç¡®ä¿å°†è¯¥ä»“åº“å…‹éš†åˆ°å®‰è£…ä½ç½®çš„â€œpluginsâ€ç›®å½•ä¸­ã€‚</p></blockquote><p>åœ¨è¿™ä¸ªç›®å½•ä¸­å¯ä»¥ï¼š</p><ul><li>æ£€å‡ºç‰¹å®šçš„å‘å¸ƒç‰ˆæ ‡ç­¾ã€‚</li><li>é€šè¿‡è¿è¡Œgit pullæ¥ä¸‹è½½æœ€æ–°çš„æ›´æ”¹ï¼Œä»è€Œè·å¾—æœ€æ–°çš„å¼€å‘ç‰ˆæœ¬ã€‚<ol><li>æ£€å‡ºpyenv-virtualenvè‡³æ’ä»¶ç›®å½•<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv</span><br></pre></td></tr></table></figure></li><li>ï¼ˆå¯é€‰ï¼‰æ·»åŠ pyenv virtualenv-initè‡³shellæ¥è‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚è¿™å®Œå…¨æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯éå¸¸æœ‰ç”¨ã€‚è¯·å‚é˜…ä¸‹é¢çš„â€œ<a href="https://www.zhangjc.com/2024/12/22/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/#%E6%BF%80%E6%B4%BB%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83">æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</a>â€ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;eval &quot;$(pyenv virtualenv-init -)&quot;&#x27; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure></li><li>é‡å¯shellä»¥å¯ç”¨pyenv-virtualenv<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec &quot;$SHELL&quot;</span><br></pre></td></tr></table></figure></li></ol></li></ul><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="ä¸pyenvä¸€èµ·ä½¿ç”¨pyenv-virtualenv"><a href="#ä¸pyenvä¸€èµ·ä½¿ç”¨pyenv-virtualenv" class="headerlink" title="ä¸pyenvä¸€èµ·ä½¿ç”¨pyenv virtualenv"></a>ä¸pyenvä¸€èµ·ä½¿ç”¨pyenv virtualenv</h2><p>è¦ä¸pyenvä¸€èµ·ä½¿ç”¨åˆ›å»ºPythonç‰ˆæœ¬çš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿è¡Œpyenv virtualenvï¼ŒæŒ‡å®šæ‰€éœ€çš„Pythonç‰ˆæœ¬å’Œè™šæ‹Ÿç¯å¢ƒç›®å½•çš„åç§°ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv virtualenv 3.13.1 scrat</span><br></pre></td></tr></table></figure><p>å°†åœ¨$(pyenv root)&#x2F;versionsç›®å½•ä¸‹ä¸€ä¸ªåä¸ºscratçš„æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåŸºäºPython 3.13.1çš„è™šæ‹Ÿç¯å¢ƒã€‚</p><p>pyenv virtualenvå°†ä»»ä½•é€‰é¡¹è½¬å‘ç»™å®é™…åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„åº•å±‚å‘½ä»¤ï¼ˆcondaã€ virtualenvæˆ–python -m venv)ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…pyenv virtualenv â€“helpçš„è¾“å‡ºã€‚</p><h2 id="ä»å½“å‰ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#ä»å½“å‰ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ä»å½“å‰ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>ä»å½“å‰ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><p>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æä¾›ç»™pyenv virtualenvï¼Œé‚£ä¹ˆå°†æ ¹æ®å½“å‰pyenvçš„Pythonç‰ˆæœ¬å¹¶ä½¿ç”¨ç»™å®šçš„åç§°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv version</span><br><span class="line">3.13.1 (set by /home/zhangjc/.pyenv/version)</span><br><span class="line">$ pyenv virtualenv venv3.13.1</span><br></pre></td></tr></table></figure><h2 id="åˆ—å‡ºå·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ—å‡ºå·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ—å‡ºå·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ"></a>åˆ—å‡ºå·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ</h2><p>pyenv virtualenvsæ˜¾ç¤ºå·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒå’Œcondaç¯å¢ƒåˆ—è¡¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv virtualenvs</span><br><span class="line">  3.13.1/envs/scrat (created from /home/zhangjc/.pyenv/versions/3.13.1)</span><br><span class="line">  scrat (created from /home/zhangjc/.pyenv/versions/3.13.1)</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªè™šæ‹Ÿç¯å¢ƒæœ‰ä¸¤ä¸ªæ¡ç›®ï¼Œè¾ƒçŸ­çš„æ¡ç›®åªæ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ã€‚</p><h2 id="æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"><a href="#æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"></a>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</h2><p>ä¸€äº›å¤–éƒ¨å·¥å…·ï¼ˆä¾‹å¦‚<a href="https://github.com/davidhalter/jedi">jedi</a>ï¼‰å¯èƒ½éœ€è¦æ‚¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå’Œcondaç¯å¢ƒã€‚</p><p>å¦‚æœeval â€œ$(pyenv virtualenv-init -)â€åœ¨shellä¸­é…ç½®ï¼Œå½“è¿›å…¥&#x2F;ç¦»å¼€åŒ…å«.python-versionæ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨æ¿€æ´»å¯¹åº”çš„è™šæ‹Ÿç¯å¢ƒï¼Œå‰ææ˜¯.python-versionä¸­çš„è™šæ‹Ÿç¯å¢ƒçš„åç§°æ˜¯æœ‰æ•ˆçš„ã€‚ä½¿ç”¨pyenv virtualenvså‘½ä»¤æŸ¥çœ‹æœ‰æ•ˆè™šæ‹Ÿç¯å¢ƒæ¸…å•ï¼Œå¦‚ä¸Šä¾‹ä¸­çš„scratã€‚pyenvä½¿ç”¨.python-versionæ–‡ä»¶æ¥è¡¨ç¤ºæœ¬åœ°Pythonç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨pyenv localå‘½ä»¤åˆ›å»ºå’Œåˆ é™¤è¿™äº›æ–‡ä»¶ã€‚</p><p>å¯ä»¥æ‰‹åŠ¨æ¿€æ´»å’Œåœç”¨ä¸€ä¸ªpyenvè™šæ‹Ÿç¯å¢ƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pyenv activate &lt;name&gt;</span><br><span class="line">pyenv deactivate</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤å·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ é™¤å·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ é™¤å·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ"></a>åˆ é™¤å·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ</h2><p>åˆ é™¤$(pyenv root)&#x2F;versionså’Œ$(pyenv root)&#x2F;versions&#x2F;{version}&#x2F;envsä¸­çš„ç›®å½•å°†åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼Œæˆ–è€…æ‚¨å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv uninstall my-virtual-env</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨virtualenv-deleteå‘½ä»¤åˆ é™¤å·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒï¼Œä¾‹å¦‚ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv virtualenv-delete my-virtual-env</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ é™¤åä¸ºmy-virtual-envçš„è™šæ‹Ÿç¯å¢ƒã€‚</p><h2 id="ç‰¹æ®Šç¯å¢ƒå˜é‡"><a href="#ç‰¹æ®Šç¯å¢ƒå˜é‡" class="headerlink" title="ç‰¹æ®Šç¯å¢ƒå˜é‡"></a>ç‰¹æ®Šç¯å¢ƒå˜é‡</h2><p>å¯ä»¥è®¾ç½®æŸäº›ç¯å¢ƒå˜é‡æ¥æ§åˆ¶pyenv-virtualenvã€‚</p><ul><li>PYENV_VIRTUALENV_CACHE_PATHï¼šå¦‚æœè®¾ç½®äº†ï¼Œåˆ™æŒ‡å®šä¸€ä¸ªç›®å½•ç”¨äºç¼“å­˜ä¸‹è½½çš„åŒ…æ–‡ä»¶ã€‚</li><li>VIRTUALENV_VERSIONï¼šå¦‚æœè®¾ç½®äº†ï¼Œåˆ™å¼ºåˆ¶pyenv-virtualenvå®‰è£…æ‰€éœ€çš„virtualenvç‰ˆæœ¬ã€‚å¦‚æœæ²¡æœ‰å®‰è£…virtualenvï¼Œpyenv-virtualenvå°†å°è¯•å®‰è£…ç»™å®šç‰ˆæœ¬çš„virtualenvã€‚</li><li>GET_PIPï¼šå¦‚æœè®¾ç½®äº†å¹¶ä¸”venvä¼˜äºvirtualenvï¼Œåˆ™ä»æŒ‡å®šä½ç½®ä½¿ç”¨get_pip.pyã€‚</li><li>GET_PIP_URLï¼šå¦‚æœè®¾ç½®äº†å¹¶ä¸”venvä¼˜äºvirtualenvï¼Œåˆ™ä»æŒ‡å®šçš„URLä¸‹è½½get_pip.pyã€‚</li><li>PIP_VERSIONï¼šå¦‚æœè®¾ç½®äº†å¹¶ä¸”venvä¼˜äºvirtualenvï¼Œåˆ™å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„pipã€‚</li><li>PYENV_VIRTUALENV_VERBOSE_ACTIVATEï¼šå¦‚æœè®¾ç½®äº†ï¼Œåˆ™æ˜¾ç¤ºä¸€äº›å…³äºæ¿€æ´»å’Œåœç”¨çš„è¯¦ç»†è¾“å‡ºã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepinå®‰è£…å®Œæˆåæ— çº¿ç½‘æ— æ³•ä½¿ç”¨é—®é¢˜</title>
      <link href="/2024/12/22/Deepin%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%E6%97%A0%E7%BA%BF%E7%BD%91%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98/"/>
      <url>/2024/12/22/Deepin%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%E6%97%A0%E7%BA%BF%E7%BD%91%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å®‰è£…å®ŒDeepin 23åï¼Œæ— çº¿ç½‘ç»œç”¨ä¸äº†ã€‚è‡ªå·±å®‰è£…æ— çº¿ç½‘å¡é©±åŠ¨åï¼Œé‡å¯ç”µè„‘ï¼Œç™»é™†ç³»ç»Ÿæ—¶ç”µè„‘ä¸€ç›´é»‘å±çŠ¶æ€ã€‚é‡æ–°å®‰è£…Deepin 20.9ä¹Ÿæ˜¯ç›¸åŒçš„æƒ…å†µã€‚</p><p>åæ¥å‘ç°æ˜¯å› ä¸ºDeepinç³»ç»Ÿå®‰è£…æ—¶ï¼Œéœ€è¦é€‰æ‹©é«˜ç‰ˆæœ¬å†…æ ¸ï¼Œå¯¹äºDeepin 20.9å’ŒDeepin 23ç‰ˆæœ¬éƒ½ä¸€æ ·ï¼š</p><p><strong>Deepin 20.9</strong></p><p><img src="/images/202412/07.png"></p><p><strong>Deepin 23</strong></p><p><img src="/images/202412/08.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Deepin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoè‡ªåŠ¨ç”Ÿæˆæ‘˜è¦</title>
      <link href="/2024/12/21/Hexo%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E6%91%98%E8%A6%81/"/>
      <url>/2024/12/21/Hexo%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E6%91%98%E8%A6%81/</url>
      
        <content type="html"><![CDATA[<p>Hexoé¦–é¡µé»˜è®¤å±•ç¤ºæ•´ç¯‡å†…å®¹ï¼Œä¼šå¯¼è‡´é¦–é¡µéå¸¸å†—é•¿ã€‚è™½ç„¶å¯ä»¥åœ¨å¤´è®¾ç½®ä¸­æŒ‡å®šæ‘˜è¦ excerpt: å€¼ï¼Œæˆ–è€…åœ¨æ–‡ç« ä¸­ä½¿ç”¨ &lt;!-- more --&gt;ï¼Œé‚£ä¹ˆ &lt;!-- more --&gt; ä¹‹å‰çš„æ–‡å­—å°†ä¼šä½œä¸ºæ‘˜è¦ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span><br><span class="line"><span class="comment">&lt;!-- more --&gt;</span></span><br><span class="line">Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span><br></pre></td></tr></table></figure><p>æ›´å¥½çš„é€‰é¡¹æ˜¯ï¼Œä½¿ç”¨æ‘˜è¦è‡ªåŠ¨ç”Ÿæˆæ’ä»¶ hexo-excerptã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-excerpt --save</span><br></pre></td></tr></table></figure><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>å¯ä»¥é€šè¿‡åœ¨é…ç½®ä¸­è®¾ç½®æ·±åº¦ï¼ˆé»˜è®¤ä¸º10ï¼‰æ¥æŒ‡å®šæ‘˜å½•çš„å¤§å°ã€‚</p><p>è¿˜å¯ä»¥ä½¿ç”¨ css é€‰æ‹©å™¨ä»ç”Ÿæˆçš„æ‘˜å½•ä¸­æ’é™¤æŸäº›æ ‡è®°ã€‚ä¸ä»»ä½•é€‰æ‹©å™¨åŒ¹é…çš„æ ‡è®°å°†è¢«æ’é™¤åœ¨å¤–ã€‚</p><p>é»˜è®¤è¡Œä¸ºæ˜¯åªæ˜¾ç¤ºä¸€ä¸ªæ‘˜å½•ï¼Œå¦‚æœå®ƒä¸ä¼šæ˜¯æ•´ç¯‡æ–‡ç« ã€‚å°† hideWholePostExcerpts è®¾ç½®ä¸º false ä»¥è¦†ç›–å®ƒå¹¶æ˜¾ç¤ºæ•´ä¸ªæ–‡ç« æ‘˜è¦ã€‚</p><p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">excerpt:</span><br><span class="line">  depth: 5</span><br><span class="line">  excerpt_excludes: []</span><br><span class="line">  more_excludes: []</span><br><span class="line">  hideWholePostExcerpts: true</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git bashä¸­æ–‡æ˜¾ç¤ºé—®é¢˜</title>
      <link href="/2024/12/20/git-bash%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/"/>
      <url>/2024/12/20/git-bash%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>é»˜è®¤æƒ…å†µä¸‹git bashä¸­æ–‡ä»¥ASCIIç¼–ç ï¼Œä¸æ–¹ä¾¿æŸ¥çœ‹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">ä½äºåˆ†æ”¯ master</span><br><span class="line"></span><br><span class="line">å°šæ— æäº¤</span><br><span class="line"></span><br><span class="line">è¦æäº¤çš„å˜æ›´ï¼š</span><br><span class="line">  ï¼ˆä½¿ç”¨ <span class="string">&quot;git rm --cached &lt;æ–‡ä»¶&gt;...&quot;</span> ä»¥å–æ¶ˆæš‚å­˜ï¼‰</span><br><span class="line"></span><br><span class="line">        æ–°æ–‡ä»¶ï¼š   <span class="string">&quot;source/_posts/Airflow\345\210\235\344\275\223\351\252\214.md&quot;</span></span><br></pre></td></tr></table></figure><p>è¦æ˜¾ç¤ºæ­£ç¡®çš„ä¸­æ–‡ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Nextä¸»é¢˜é›†æˆç™¾åº¦ç»Ÿè®¡</title>
      <link href="/2024/12/20/Hexo-Next%E4%B8%BB%E9%A2%98%E9%9B%86%E6%88%90%E7%99%BE%E5%BA%A6%E7%BB%9F%E8%AE%A1/"/>
      <url>/2024/12/20/Hexo-Next%E4%B8%BB%E9%A2%98%E9%9B%86%E6%88%90%E7%99%BE%E5%BA%A6%E7%BB%9F%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œéœ€è¦åœ¨ç™¾åº¦ç»Ÿè®¡æ§åˆ¶å°æ–°å¢è‡ªå·±çš„ç«™ç‚¹ã€‚</p><p><img src="/images/202412/01.png"></p><p>ç‚¹å‡»â€œæ–°å¢ç½‘ç«™â€æŒ‰é’®ï¼š</p><p><img src="/images/202412/02.png"></p><p>æŒ‰ç…§è¦æ±‚è¾“å…¥ç›¸å…³ä¿¡æ¯å¹¶ä¿å­˜ï¼Œé¡µé¢è·³è½¬è‡³ä»£ç è·å–é¡µé¢ã€‚ä»ä»£ç é¡µé¢ä¸­æ‹·è´ç½‘ç«™çš„IDï¼š</p><p><img src="/images/202412/03.png"></p><p>æ‰“å¼€Nextä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå¹¶æ‰¾åˆ°ç™¾åº¦ç»Ÿè®¡é…ç½®ï¼Œå‚æ•°å€¼ä¸ºä¸Šä¸€æ­¥ç™¾åº¦ç»Ÿè®¡åˆ†ç±»çš„ç½‘ç«™IDã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Baidu Analytics</span><br><span class="line"># See: https://tongji.baidu.com</span><br><span class="line">baidu_analytics: 5c46************************e1de</span><br></pre></td></tr></table></figure><p>é‡æ–°éƒ¨ç½²ç½‘ç«™ã€‚</p><p>ä»¥ä¸Šæ“ä½œå®Œæˆåï¼Œåœ¨ç™¾åº¦ç»Ÿè®¡æ§åˆ¶å°è¿›è¡ŒéªŒè¯ã€‚</p><p><img src="/images/202412/04.png"></p><p>å¦‚ä¸‹å›¾ï¼Œå‡ºç°â€œä»£ç å®‰è£…æ­£ç¡®â€æç¤ºï¼Œåˆ™è¯´æ˜æˆåŠŸã€‚</p><p><img src="/images/202412/05.png"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Nextä¸»é¢˜æœ¬åœ°æœç´¢åŠŸèƒ½ä¸å¯ç”¨é—®é¢˜è§£å†³</title>
      <link href="/2024/12/18/Hexo-Next%E4%B8%BB%E9%A2%98%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD%E4%B8%8D%E5%8F%AF%E7%94%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2024/12/18/Hexo-Next%E4%B8%BB%E9%A2%98%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD%E4%B8%8D%E5%8F%AF%E7%94%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>æŒ‰ç…§Nextä¸»é¢˜å®˜ç½‘é…ç½®æ­¥éª¤ï¼ˆ<a href="https://theme-next.js.org/docs/third-party-services/search-services#Local-Search">Local Search</a>ï¼‰é…ç½®åï¼Œç«™ç‚¹çš„â€œæœç´¢â€èœå•ç‚¹å‡»æ— å“åº”ã€‚</p><p>æŸ¥çœ‹Nextä¸»é¢˜æºä»£ç ï¼ˆ{Nextä¸»é¢˜æ ¹ç›®å½•}&#x2F;hexo-theme-next&#x2F;layout&#x2F;_partials&#x2F;search&#x2F;index.njkï¼‰,å‘ç°ç«™ç‚¹ä¼˜å…ˆä½¿ç”¨Algoliaæœç´¢ã€‚å¦‚ä¸‹19è¡Œä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;%- if theme.algolia_search.enable or theme.local_search.enable %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-pop-overlay&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;popup search-popup&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;search-icon&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-input-container&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">autocapitalize</span>=<span class="string">&quot;off&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;80&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">placeholder</span>=<span class="string">&quot;&#123;&#123; __(&#x27;search.placeholder&#x27;) &#125;&#125;&quot;</span> <span class="attr">spellcheck</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;search&quot;</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;popup-btn-close&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-times-circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-result-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-result-icon&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;&#123;% if theme.algolia_search.enable %&#125;fab fa-algolia&#123;% elif theme.local_search.enable %&#125;fa fa-spinner fa-pulse&#123;% endif %&#125; fa-5x&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ä¸»é¢˜é…ç½®ï¼ŒAlgoliaå’ŒLocal Searchsé»˜è®¤æ˜¯åŒæ—¶å¯ç”¨çš„ã€‚ä¿®æ”¹é…ç½®ç¦ç”¨Algoliaï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoåšå®¢ç”Ÿæˆæ ‡ç­¾å’Œåˆ†ç±»é¡µ</title>
      <link href="/2024/12/17/Hexo%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E6%A0%87%E7%AD%BE%E5%92%8C%E5%88%86%E7%B1%BB%E9%A1%B5/"/>
      <url>/2024/12/17/Hexo%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E6%A0%87%E7%AD%BE%E5%92%8C%E5%88%86%E7%B1%BB%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="æ ‡ç­¾é¡µ"><a href="#æ ‡ç­¾é¡µ" class="headerlink" title="æ ‡ç­¾é¡µ"></a>æ ‡ç­¾é¡µ</h1><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHexoç«™ç‚¹åˆ›å»ºåï¼Œéœ€æ‰‹åŠ¨ç”Ÿæˆæ ‡ç­¾é¡µã€‚å¦‚ä¸ç”Ÿæˆï¼Œåœ¨ç‚¹å‡»â€œæ ‡ç­¾â€èœå•æ—¶ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot GET /tags/</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ ‡ç­¾é¡µï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤ä¼šåœ¨ç«™ç‚¹ä¸‹ç”Ÿæˆé¡µé¢source&#x2F;tags&#x2F;index.mdã€‚æ‰“å¼€å¹¶ç¼–è¾‘è¯¥é¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ ‡ç­¾</span><br><span class="line">date: 2024-12-17 23:27:10</span><br><span class="line"><span class="section">type: tags</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå†…å®¹çš„é‡ç‚¹æ˜¯è®¾ç½®é¡µé¢typeçš„å€¼ä¸ºtagsã€‚</p><h1 id="åˆ†ç±»é¡µ"><a href="#åˆ†ç±»é¡µ" class="headerlink" title="åˆ†ç±»é¡µ"></a>åˆ†ç±»é¡µ</h1><p>åŒæ ‡ç­¾é¡µï¼Œåˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘source&#x2F;categories&#x2F;index.mdå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: åˆ†ç±»</span><br><span class="line">date: 2024-12-17 23:54:38</span><br><span class="line"><span class="section">type: categories</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python ç‰ˆæœ¬ç®¡ç†</title>
      <link href="/2024/12/17/Python-%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/"/>
      <url>/2024/12/17/Python-%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>Pythonçš„ç‰ˆæœ¬ç®¡ç†æ˜¯åœ¨å®è·µä¸­ä¸€å®šä¼šé¢å¯¹çš„é—®é¢˜ã€‚Pyenvæ˜¯ä¸€ä¸ªç®€å•çš„Pythonç‰ˆæœ¬ç®¡ç†ç¨‹åºã€‚ä½¿ç”¨Pyenvå¯ä»¥åœ¨å¤šä¸ªPythonç‰ˆæœ¬é—´è¿›è¡Œåˆ‡æ¢ã€‚æœ¬æ–‡ä¸»è¦å‚è€ƒé¡¹ç›®æ–‡æ¡£è¿›è¡Œç¿»è¯‘å’Œç¼–å†™ã€‚å¤§æ¦‚çš„ä½¿ç”¨æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/images/202412/06.png"></p><h1 id="Pyenvå¯ä»¥åšä»€ä¹ˆâ€¦"><a href="#Pyenvå¯ä»¥åšä»€ä¹ˆâ€¦" class="headerlink" title="Pyenvå¯ä»¥åšä»€ä¹ˆâ€¦"></a>Pyenvå¯ä»¥åšä»€ä¹ˆâ€¦</h1><ul><li>å…è®¸æ‚¨æ ¹æ®æ¯ä¸ªç”¨æˆ·æ›´æ”¹å…¨å±€Pythonç‰ˆæœ¬ã€‚</li><li>æä¾›å¯¹æ¯ä¸ªé¡¹ç›®Pythonç‰ˆæœ¬çš„æ”¯æŒã€‚</li><li>å…è®¸ç”¨ç¯å¢ƒå˜é‡è¦†ç›–Pythonç‰ˆæœ¬ã€‚</li><li>ä¸€æ¬¡ä»å¤šä¸ªç‰ˆæœ¬çš„Pythonä¸­æœç´¢å‘½ä»¤ã€‚è¿™æœ‰åŠ©äºä½¿ç”¨<a href="https://pypi.python.org/pypi/tox">tox</a>è·¨Pythonç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚</li></ul><h1 id="ä¸pythonbrewå’Œpythonzç›¸æ¯”ï¼ŒPyenvä¸èƒ½åšä»€ä¹ˆâ€¦"><a href="#ä¸pythonbrewå’Œpythonzç›¸æ¯”ï¼ŒPyenvä¸èƒ½åšä»€ä¹ˆâ€¦" class="headerlink" title="ä¸pythonbrewå’Œpythonzç›¸æ¯”ï¼ŒPyenvä¸èƒ½åšä»€ä¹ˆâ€¦"></a>ä¸pythonbrewå’Œpythonzç›¸æ¯”ï¼ŒPyenvä¸èƒ½åšä»€ä¹ˆâ€¦</h1><ul><li>å–å†³äºPythonæœ¬èº«ã€‚Pyenvæ˜¯ç”±çº¯shellè„šæœ¬æ„æˆçš„ã€‚Pythonä¸å­˜åœ¨å¼•å¯¼é—®é¢˜ã€‚</li><li>éœ€è¦åŠ è½½åˆ°shellä¸­ã€‚ç›¸åï¼ŒPyenvçš„æ¥å…¥é€šè¿‡åœ¨PATHä¸­æ·»åŠ ä¸€ä¸ªç›®å½•æ¥å·¥ä½œã€‚</li><li>å½“ç„¶ï¼Œå¯ä»¥åˆ›å»ºviralenvï¼Œæˆ–è€…åˆ›å»ºpyenv-viralenvæ¥è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚ä½†ç®¡ç†ä¼šæ¯”è¾ƒç¹çï¼Œå¹¶å®¹æ˜“äº§ç”Ÿæ··ä¹±ã€‚</li></ul><h1 id="Pyenvå¦‚ä½•å·¥ä½œ"><a href="#Pyenvå¦‚ä½•å·¥ä½œ" class="headerlink" title="Pyenvå¦‚ä½•å·¥ä½œ"></a>Pyenvå¦‚ä½•å·¥ä½œ</h1><p>åœ¨é«˜çº§åˆ«ä¸Šï¼ŒPyenvä½¿ç”¨æ³¨å…¥åˆ°PATHä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶æ‹¦æˆªPythonå‘½ä»¤ï¼Œç¡®å®šåº”ç”¨ç¨‹åºæŒ‡å®šäº†å“ªä¸ªPythonç‰ˆæœ¬ï¼Œå¹¶å°†å‘½ä»¤ä¼ é€’åˆ°æ­£ç¡®çš„Pythonå®‰è£…ã€‚</p><h2 id="ç†è§£Pyenvçš„Shims"><a href="#ç†è§£Pyenvçš„Shims" class="headerlink" title="ç†è§£Pyenvçš„Shims"></a>ç†è§£Pyenvçš„Shims</h2><p>Pyenvçš„å·¥ä½œåŸç†æ˜¯åœ¨PATHå‰é¢æ’å…¥ä¸€ä¸ªshimsç›®å½•æ¥å·¥ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(pyenv root)/shims:/usr/local/bin:/usr/bin:/bin</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸€ä¸ªç§°ä¸ºé‡æ‹¼å‡‘çš„è¿‡ç¨‹ï¼ŒPyenvåœ¨è¯¥ç›®å½•ä¸­ç»´æŠ¤shimsï¼Œä»¥åŒ¹é…æ¯ä¸ªå·²å®‰è£…ç‰ˆæœ¬Pythonçš„å‘½ä»¤ï¼Œpythonã€pipç­‰ã€‚</p><p>Shimsæ˜¯è½»é‡çº§çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªéœ€å°†å‘½ä»¤ä¼ é€’ç»™Pyenvå³å¯ã€‚å› æ­¤ï¼Œå®‰è£…äº†Pyenvä¹‹åï¼Œå½“è¿è¡Œpipæ—¶ï¼Œæ“ä½œç³»ç»Ÿå°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>åœ¨PATHä¸­æœç´¢åä¸ºpipçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li><li>åœ¨PATHçš„å¼€å¤´æ‰¾åˆ°åä¸ºpipçš„Pyenv shimã€‚</li><li>è¿è¡Œåä¸ºpipçš„shimï¼Œç„¶åå°†å‘½ä»¤ä¼ é€’ç»™Pyenvã€‚</li></ul><h2 id="ç†è§£Pythonç‰ˆæœ¬é€‰æ‹©"><a href="#ç†è§£Pythonç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="ç†è§£Pythonç‰ˆæœ¬é€‰æ‹©"></a>ç†è§£Pythonç‰ˆæœ¬é€‰æ‹©</h2><p>å½“æ‰§è¡Œä¸€ä¸ªshimæ—¶ï¼ŒPyenvé€šè¿‡ä»ä»¥ä¸‹æ¥æºè¯»å–å®ƒæ¥å†³å®šä½¿ç”¨å“ªä¸ªPythonç‰ˆæœ¬ï¼Œé¡ºåºå¦‚ä¸‹ï¼š</p><ol><li>PYENV_VERIONç¯å¢ƒå˜é‡(å¦‚æœæŒ‡å®š)ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-shell">Pyenv shell</a> å‘½ä»¤åœ¨å½“å‰shellä¼šè¯ä¸­è®¾ç½®è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚</li><li>å½“å‰ç›®å½•ä¸­åº”ç”¨æŒ‡å®šçš„ .python-version æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚å¯ä»¥ä½¿ç”¨ <a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-shell">Pyenv shell</a> å‘½ä»¤ä¿®æ”¹å½“å‰ç›®å½•çš„ .python-version æ–‡ä»¶ã€‚</li><li>é€šè¿‡æœç´¢æ¯ä¸ªçˆ¶ç›®å½•æ‰¾åˆ°ç¬¬ä¸€ä¸ª .python-version æ–‡ä»¶ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œç›´åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ã€‚</li><li>å…¨å±€ $(Pyenv root)&#x2F;version æ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨ <a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-global">Pyenv global</a>å‘½ä»¤ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰å…¨å±€ç‰ˆæœ¬æ–‡ä»¶ï¼Œpyenv å‡è®¾æƒ³è¦ä½¿ç”¨â€œç³»ç»Ÿâ€ Python ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</li></ol><p>ä¸€ä¸ªç‰¹æ®Šçš„ç‰ˆæœ¬åç§°â€œsystemâ€æ„å‘³ç€åœ¨PATHä¸­shimsçš„æ¡ç›®ä¹‹åæ‰¾åˆ°çš„ä»»ä½•Pythonï¼ˆæ¢å¥è¯è¯´ï¼Œå¦‚æœPyenv shimsä¸åœ¨PATHä¸­ï¼Œå°†è¿è¡ŒPATHä¸­æ‰¾åˆ°çš„Pythonï¼‰ã€‚è¯·æ³¨æ„ï¼ŒPyenvè®¤ä¸ºè¿™äº›å®‰è£…ä¸åœ¨å…¶æ§åˆ¶èŒƒå›´ä¹‹å†…ï¼Œå¹¶ä¸è¯•å›¾ä»¥ä»»ä½•æ–¹å¼æ£€æŸ¥æˆ–åŒºåˆ†å®ƒä»¬ã€‚å› æ­¤ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨MacOSä¸Šå¹¶ä¸”æœ‰OSç»‘å®šçš„Python 3.8.9å’ŒHomebrewå®‰è£…çš„Python 3.9.12å’Œ3.10.2 â€“ å¯¹äºPyenvæ¥è¯´ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå•ç‹¬çš„â€œsystemâ€ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ— è®ºå“ªä¸€ä¸ªæ˜¯åœ¨PATHæŒ‡å®šçš„ç¬¬ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶åï¼Œå®ƒéƒ½å°†è¢«è¿è¡Œã€‚</p><p><strong>æ³¨æ„</strong>: å¯ä»¥åŒæ—¶æ¿€æ´»å¤šä¸ªç‰ˆæœ¬ï¼ŒåŒ…æ‹¬åŒæ—¶æ¿€æ´»Python2æˆ–Python3çš„å¤šä¸ªç‰ˆæœ¬ã€‚è¿™å…è®¸å¹¶è¡Œä½¿ç”¨Python2å’ŒPython3ï¼Œå¹¶ä¸”æ˜¯ç±»ä¼¼toxè¿™æ ·çš„å·¥å…·æ‰€éœ€è¦çš„ã€‚ä¾‹å¦‚ï¼Œè¦æŒ‡ç¤ºPyenvé¦–å…ˆä½¿ç”¨ç³»ç»ŸPythonå’ŒPython3ï¼ˆä¾‹å¦‚2.7.9å’Œ3.4.2ï¼‰ï¼Œä½†åŒæ—¶ä½¿ç”¨Python 3.3.6ã€3.2.1å’Œ2.5.2ï¼Œé¦–å…ˆæ‰§è¡Œpyenv installå®‰è£…ç¼ºå°‘çš„ç‰ˆæœ¬ï¼Œç„¶åè®¾ç½®pyenv global system 3.3.6 3.2.1 2.5.2ã€‚ç„¶åå°±å¯ä»¥ä½¿ç”¨é€‚å½“çš„pythonXæˆ–pythonX.Yåç§°æ¥è°ƒç”¨è¿™äº›ç‰ˆæœ¬ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚ä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨ .python-version æ–‡ä»¶ä¸­æŒ‡å®šå¤šä¸ªç‰ˆæœ¬ï¼Œç”¨æ¢è¡Œç¬¦åˆ†éš”ã€‚ä»¥ # å¼€å¤´çš„è¡Œå°†è¢«å¿½ç•¥ã€‚</p><p><a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-which">pyenv which <command></a>æ˜¾ç¤ºé€šè¿‡ä¸€ä¸ªshimè°ƒç”¨<command>æ—¶å°†è¿è¡Œå“ªä¸ªçœŸæ­£çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå·²ç»å®‰è£…äº†3.3.6ã€3.2.1å’Œ2.5.2ï¼Œå…¶ä¸­é€‰æ‹©äº†3.3.6å’Œ2.5.2ï¼Œå¹¶ä¸”ç³»ç»ŸPythonæ˜¯3.2.5ï¼Œpyenv which python2.5åº”è¯¥æ˜¾ç¤º$(Pyenv root)&#x2F;version&#x2F;2.5.2&#x2F;bin&#x2F;python2.5ï¼Œpyenv which python3 â€“ $(Pyenv root)&#x2F;version&#x2F;3.3.6&#x2F;bin&#x2F;python3å’Œpyenv which python3.2 â€“ ç”±äºç©¿é€æŒ‡å‘ç³»ç»ŸPythonï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</p><p>å¦‚æœåœ¨æ‰€é€‰çš„Pythonå®‰è£…ä¸­æ²¡æœ‰å‡ºç°ç›¸åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šç©¿é€åˆ°åœ¨PATHä¸­ç›¸å…³çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™å…è®¸ä½¿ç”¨ç³»ç»Ÿä¸Šå…¶ä»–åœ°æ–¹å®‰è£…çš„ä»»ä½•ç¨‹åºï¼Œåªè¦å®ƒä»¬æ²¡æœ‰è¢«é€‰å®šçš„Pythonå®‰è£…é®è”½ã€‚</p><h2 id="ç”±Pyenvæä¾›å®‰è£…Pythonçš„ä½ç½®"><a href="#ç”±Pyenvæä¾›å®‰è£…Pythonçš„ä½ç½®" class="headerlink" title="ç”±Pyenvæä¾›å®‰è£…Pythonçš„ä½ç½®"></a>ç”±Pyenvæä¾›å®‰è£…Pythonçš„ä½ç½®</h2><p>ä¸€æ—¦pyenvç¡®å®šäº†åº”ç”¨ç¨‹åºæŒ‡å®šçš„Pythonç‰ˆæœ¬ï¼Œå®ƒå°±ä¼šå°†å‘½ä»¤ä¼ é€’ç»™ç›¸åº”çš„Pythonã€‚<br>æ¯ä¸ªPythonç‰ˆæœ¬éƒ½å®‰è£…åˆ°$(Pyenv root)&#x2F;versionsä¸‹è‡ªå·±çš„ç›®å½•ä¸­ã€‚<br>ä¾‹å¦‚ï¼Œå¯èƒ½å·²ç»å®‰è£…äº†ä»¥ä¸‹ç‰ˆæœ¬ï¼š</p><ul><li>$(pyenv root)&#x2F;versions&#x2F;2.7.8&#x2F;</li><li>$(pyenv root)&#x2F;versions&#x2F;3.4.2&#x2F;</li><li>$(pyenv root)&#x2F;versions&#x2F;pypy-2.4.0&#x2F;</li></ul><p>å°±Pyenvè€Œè¨€ï¼Œç‰ˆæœ¬åå°±æ˜¯$(Pyenv root)&#x2F;versionä¸‹çš„ç›®å½•ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>åœ¨Linuxç±»ç³»ç»Ÿä¸‹ç”¨è‡ªåŠ¨å®‰è£…ç¨‹åºå¯ä»¥å¾ˆç®€å•çš„å®Œæˆå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://pyenv.run | bash</span><br></pre></td></tr></table></figure><p>æ›´å¤šè¯¦æƒ…è¯·è®¿é—®é¡¹ç›®ï¼š<a href="https://github.com/pyenv/pyenv-installer">https://github.com/pyenv/pyenv-installer</a>ã€‚</p><blockquote><p>æ³¨æ„ï¼Œå‡ºäºæŸç§åŸå› ï¼Œè‡ªåŠ¨å®‰è£…ç¨‹åºå¯èƒ½ä¼šå‡ºç°å¥½åƒå¡æ­»çš„ç°è±¡ï¼Œå¤šå°è¯•å‡ æ¬¡å³å¯ã€‚</p></blockquote><h2 id="è®¾ç½®Pyenvçš„shellç¯å¢ƒ"><a href="#è®¾ç½®Pyenvçš„shellç¯å¢ƒ" class="headerlink" title="è®¾ç½®Pyenvçš„shellç¯å¢ƒ"></a>è®¾ç½®Pyenvçš„shellç¯å¢ƒ</h2><p><strong>å¯¹äºbashï¼š</strong></p><p>Bashå¯åŠ¨æ–‡ä»¶åœ¨ä¸åŒçš„å‘è¡Œç‰ˆä¹‹é—´å·®å¼‚å¾ˆå¤§ï¼Œå®ƒä»¬çš„æ¥æºã€åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ã€ä»¥ä»€ä¹ˆé¡ºåºï¼Œä»¥åŠå®ƒä»¬æ‰§è¡Œä»€ä¹ˆé™„åŠ é…ç½®ã€‚å› æ­¤ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸­è·å–Pyenvçš„æœ€å¯é æ–¹æ³•æ˜¯å°†Pyenvé…ç½®å‘½ä»¤è¿½åŠ åˆ° .bashrcï¼ˆç”¨äºäº¤äº’å¼shellï¼‰å’ŒBashå°†ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼ˆç”¨äºç™»å½•shellï¼‰ã€‚</p><p>é¦–å…ˆï¼Œé€šè¿‡åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†å‘½ä»¤æ·»åŠ åˆ° ~&#x2F;.bashrcï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;eval &quot;$(pyenv init -)&quot;&#x27;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå¦‚æœæœ‰ ~&#x2F;.profileã€~&#x2F;.bash_profileæˆ– ~&#x2F;.bash_loginï¼Œä¹Ÿå°†å‘½ä»¤æ·»åŠ åˆ°é‚£é‡Œã€‚å¦‚æœæ²¡æœ‰è¿™äº›æ–‡ä»¶ï¼Œè¯·å°†å®ƒä»¬æ·»åŠ åˆ° ~&#x2F;.profileã€‚</p><ul><li>æ·»åŠ åˆ° ~&#x2F;.profileï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span> &gt;&gt; ~/.profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;eval &quot;$(pyenv init -)&quot;&#x27;</span> &gt;&gt; ~/.profile</span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ åˆ° ~&#x2F;.bash_ profileï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;[[ -d $PYENV_ROOT/bin ]] &amp;&amp; export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;eval &quot;$(pyenv init -)&quot;&#x27;</span> &gt;&gt; ~/.bash_profile</span><br></pre></td></tr></table></figure><h2 id="é‡å¯shell"><a href="#é‡å¯shell" class="headerlink" title="é‡å¯shell"></a>é‡å¯shell</h2><p>ä½¿PATHæ›´æ”¹ç”Ÿæ•ˆã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exec</span> <span class="string">&quot;<span class="variable">$SHELL</span>&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Pythonæ„å»ºä¾èµ–"><a href="#å®‰è£…Pythonæ„å»ºä¾èµ–" class="headerlink" title="å®‰è£…Pythonæ„å»ºä¾èµ–"></a>å®‰è£…Pythonæ„å»ºä¾èµ–</h2><p>åœ¨å°è¯•å®‰è£…æ–°çš„Pythonç‰ˆæœ¬ä¹‹å‰éœ€è¦å…ˆå®‰è£…æ„å»ºPythonçš„ä¾èµ–ã€‚</p><p><strong>å¯¹äºUbuntu&#x2F;Debianï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update; <span class="built_in">sudo</span> apt install build-essential libssl-dev zlib1g-dev \</span><br><span class="line">libbz2-dev libreadline-dev libsqlite3-dev curl git \</span><br><span class="line">libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="å®‰è£…å…¶ä»–Pythonç‰ˆæœ¬"><a href="#å®‰è£…å…¶ä»–Pythonç‰ˆæœ¬" class="headerlink" title="å®‰è£…å…¶ä»–Pythonç‰ˆæœ¬"></a>å®‰è£…å…¶ä»–Pythonç‰ˆæœ¬</h2><p>è¦å®‰è£…å…¶ä»–Pythonç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨<a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-install">pyenv install</a>ã€‚<br>è¿è¡Œpyenv install -læä¾›æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬çš„åˆ—è¡¨ã€‚<br>ä¾‹å¦‚ï¼Œè¦ä¸‹è½½å¹¶å®‰è£…Python 3.13.1ï¼Œè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.13.1</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„: å¤§å¤šæ•°Pyenvæä¾›çš„Pythonç‰ˆæœ¬éƒ½æ˜¯æºä»£ç ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ˜¯ä»æºä»£ç æ„å»ºçš„ï¼Œä½œä¸ºå®‰è£…çš„ä¸€éƒ¨åˆ†ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦é¢„å®‰è£…Pythonæ„å»ºä¾èµ–ï¼‰ã€‚ä½ å¯ä»¥ç»™Pythonçš„configureå’Œç¼–è¯‘å™¨æ ‡å¿—ä¼ é€’é€‰é¡¹æ¥è‡ªå®šä¹‰æ„å»ºï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚é˜…<a href="https://github.com/pyenv/pyenv/blob/master/plugins/python-build/README.md#special-environment-variables">Special environment variables in Python-Buildâ€™s README</a>ã€‚</p></blockquote><blockquote><p>æ³¨æ„: å¦‚æœåœ¨å®‰è£…Pythonç‰ˆæœ¬æ—¶é‡åˆ°å›°éš¾ï¼Œè¯·è®¿é—®wikié¡µé¢ï¼š<a href="https://github.com/pyenv/pyenv/wiki/Common-build-problems">Common Build Problems</a>ã€‚</p></blockquote><blockquote><p>æ³¨æ„: å¦‚æœå¸Œæœ›ä»¥è¾ƒé•¿çš„æ„å»ºæ—¶é—´ä¸ºä»£ä»·è·å¾—æ›´å¿«çš„è§£é‡Šå™¨ï¼Œè¯·å‚é˜…<a href="https://github.com/pyenv/pyenv/blob/master/plugins/python-build/README.md#building-for-maximum-performance">Building for maximum performance in Python-Buildâ€™s README</a>ã€‚</p></blockquote><h3 id="è‡ªåŠ¨è§£ææœ€æ–°ç‰ˆæœ¬çš„å‰ç¼€"><a href="#è‡ªåŠ¨è§£ææœ€æ–°ç‰ˆæœ¬çš„å‰ç¼€" class="headerlink" title="è‡ªåŠ¨è§£ææœ€æ–°ç‰ˆæœ¬çš„å‰ç¼€"></a>è‡ªåŠ¨è§£ææœ€æ–°ç‰ˆæœ¬çš„å‰ç¼€</h3><p>é™¤uninstallå¤–ï¼Œæ‰€æœ‰Pyenvå­å‘½ä»¤éƒ½ä¼šè‡ªåŠ¨è§£æç›¸åº”ç‰ˆæœ¬è¡Œä¸­æœ€æ–°ç‰ˆæœ¬çš„å®Œæ•´å‰ç¼€ã€‚<br>pyenv installé€‰æ‹©å·²çŸ¥çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè€Œå…¶ä»–å­å‘½ä»¤é€‰æ‹©å·²å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œå®‰è£…ï¼Œç„¶ååˆ‡æ¢åˆ°æœ€æ–°çš„3.13.1ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.13.1</span><br><span class="line">pyenv global 3.13.1</span><br></pre></td></tr></table></figure><p>å¯ä»¥è¿è¡Œ<a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-latest">pyenv latest -k <prefix></a>æ¥æŸ¥çœ‹pyenv installå°†å¦‚ä½•è§£æç‰¹å®šçš„å‰ç¼€ï¼Œæˆ–è€…è¿è¡Œ<a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-latest">pyenv latest <prefix></a>æ¥æŸ¥çœ‹å…¶ä»–å­å‘½ä»¤å°†å¦‚ä½•è§£æå®ƒã€‚<br>æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-latest">pyenvæœ€æ–°æ–‡æ¡£</a>ã€‚</p><h3 id="å…·æœ‰æ‰©å±•æ”¯æŒçš„Pythonç‰ˆæœ¬"><a href="#å…·æœ‰æ‰©å±•æ”¯æŒçš„Pythonç‰ˆæœ¬" class="headerlink" title="å…·æœ‰æ‰©å±•æ”¯æŒçš„Pythonç‰ˆæœ¬"></a>å…·æœ‰æ‰©å±•æ”¯æŒçš„Pythonç‰ˆæœ¬</h3><p>å¯¹äºä»¥ä¸‹Pythonç‰ˆæœ¬ï¼ŒPyenvåº”ç”¨äº†ç”¨æˆ·æä¾›çš„è¡¥ä¸ï¼Œè¿™äº›è¡¥ä¸ä¸ºä¸€äº›è¾ƒæ–°çš„ç¯å¢ƒæ·»åŠ äº†æ”¯æŒã€‚è™½ç„¶æ²¡æœ‰ç§¯æåœ°ç»´æŠ¤è¿™äº›è¡¥ä¸ï¼Œå› ä¸ºç°æœ‰çš„ç‰ˆæœ¬ä»æ¥æ²¡æœ‰æ›´æ”¹è¿‡ï¼Œä½†å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œå®ƒä»¬å°†ç»§ç»­å·¥ä½œï¼Œç›´åˆ°è¿™äº›ç¯å¢ƒçš„åç»­ç‰ˆæœ¬ä¸­å‡ºç°æ›´å¤šä¸å…¼å®¹çš„æ›´æ”¹ã€‚</p><ul><li>3.7.8-3.7.15ã€3.8.4-3.8.12ã€3.9.0-3.9.7ï¼šXCode 13.3</li><li>3.5.10ã€3.6.15ï¼šMacOS 11+å’ŒXCode 13.3</li><li>2.7.18ï¼šMacOS 10.15+å’ŒApple Silicon</li></ul><h2 id="åœ¨Pythonç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢"><a href="#åœ¨Pythonç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢" class="headerlink" title="åœ¨Pythonç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢"></a>åœ¨Pythonç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢</h2><p>è¦é€‰æ‹©Pyenvå®‰è£…çš„Pythonä½œä¸ºè¦ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€ï¼š</p><ul><li><a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-shell">pyenv shell <version></a>ä»…ä¸ºå½“å‰shellä¼šè¯é€‰æ‹©ã€‚</li><li><a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-local">pyenv local <version></a>æ— è®ºä½•æ—¶ï¼Œåªè¦åœ¨å·¥ä½œç›®å½•ï¼ˆæˆ–è€…å®ƒçš„å­ç›®å½•ï¼‰ä¸­ï¼Œå°±ä¼šè‡ªåŠ¨é€‰æ‹©ã€‚</li><li><a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-shell">pyenv global <version></a>ä¸ºç”¨æˆ·å¸æˆ·å…¨å±€é€‰æ‹©ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œé€‰æ‹©ä¸Šé¢æåˆ°çš„æ–°å®‰è£…çš„Python 3.13.1ä½œä¸ºé¦–é€‰ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv global 3.13.1</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæ— è®ºä½•æ—¶è°ƒç”¨pythonã€ pipç­‰ï¼Œéƒ½å°†è¿è¡Œæ¥è‡ªPyenvæä¾›çš„3.13.1å®‰è£…çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç³»ç»ŸPythonã€‚</p><p>ä½¿ç”¨â€œsystemâ€ä½œä¸ºç‰ˆæœ¬åç§°å°†æŠŠé€‰æ‹©é‡ç½®ä¸ºç³»ç»Ÿæä¾›çš„Pythonã€‚</p><p>è¯·å‚é˜…<a href="https://github.com/pyenv/pyenv?tab=readme-ov-file#understanding-shims">Understanding shims</a>å’Œ<a href="https://github.com/pyenv/pyenv?tab=readme-ov-file#understanding-python-version-selection">Understanding Python version selection</a>ï¼Œä»¥è·å¾—æœ‰å…³é€‰æ‹©å¦‚ä½•å·¥ä½œçš„æ›´å¤šç»†èŠ‚å’Œæœ‰å…³å…¶ç”¨æ³•çš„æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="å¸è½½Pythonç‰ˆæœ¬"><a href="#å¸è½½Pythonç‰ˆæœ¬" class="headerlink" title="å¸è½½Pythonç‰ˆæœ¬"></a>å¸è½½Pythonç‰ˆæœ¬</h2><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå°†åœ¨$(Pyenv root)&#x2F;versionsç›®å½•ä¸­ç´¯ç§¯Pythonç‰ˆæœ¬ã€‚<br>è¦åˆ é™¤æ—§çš„Pythonç‰ˆæœ¬ï¼Œä½¿ç”¨<a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-uninstall">pyenv uninstall <versions></a>ã€‚<br>æˆ–è€…ï¼Œå¯ä»¥ç®€å•åœ°rm -rfè¦åˆ é™¤çš„ç‰ˆæœ¬çš„ç›®å½•ã€‚å¯ä»¥ä½¿ç”¨pyenv prefixå‘½ä»¤æ‰¾åˆ°ç‰¹å®šPythonç‰ˆæœ¬çš„ç›®å½•ï¼Œä¾‹å¦‚ï¼špyenv prefix 2.6.8ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œæ’ä»¶å¯èƒ½ä¼šåœ¨å¸è½½æ—¶è¿è¡Œé¢å¤–çš„æ“ä½œï¼Œè¿™ä¹Ÿéœ€è¦æ‰‹åŠ¨å®Œæˆã€‚ä¾‹å¦‚ï¼ŒPyenv-Virtualenv è¿˜åˆ é™¤äº†ä¸æ­£åœ¨å¸è½½çš„ç‰ˆæœ¬ç›¸å…³çš„æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒã€‚</p><h2 id="å…¶ä»–æ“ä½œ"><a href="#å…¶ä»–æ“ä½œ" class="headerlink" title="å…¶ä»–æ“ä½œ"></a>å…¶ä»–æ“ä½œ</h2><p>è¿è¡Œpyenv commandsè·å–æ‰€æœ‰å¯ç”¨å­å‘½ä»¤çš„åˆ—è¡¨ã€‚ä½¿ç”¨â€“helpè¿è¡Œä¸€ä¸ªå­å‘½ä»¤ä»¥è·å¾—æœ‰å…³å®ƒçš„å¸®åŠ©ï¼Œæˆ–è€…æŸ¥çœ‹<a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md">Commands Reference</a>ã€‚<br>æ³¨æ„ï¼Œå®‰è£…çš„Pyenvæ’ä»¶å¯ä»¥æ·»åŠ å®ƒä»¬è‡ªå·±çš„å­å‘½ä»¤ã€‚</p><h1 id="ä½¿ç”¨å®‰è£…ç¨‹åºå‡çº§"><a href="#ä½¿ç”¨å®‰è£…ç¨‹åºå‡çº§" class="headerlink" title="ä½¿ç”¨å®‰è£…ç¨‹åºå‡çº§"></a>ä½¿ç”¨å®‰è£…ç¨‹åºå‡çº§</h1><p>å¦‚æœç”¨Pyenvå®‰è£…ç¨‹åºå®‰è£…äº†Pyenvï¼Œå°±å·²ç»æœ‰äº†å¯ä»¥å‡çº§Pyenvå’Œæ‰€æœ‰å·²å®‰è£…æ’ä»¶çš„Pyenv-Updateæ’ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv update</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pyenv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepinå¯ç”¨llå‘½ä»¤</title>
      <link href="/2024/12/16/Deepin%E5%90%AF%E7%94%A8ll%E5%91%BD%E4%BB%A4/"/>
      <url>/2024/12/16/Deepin%E5%90%AF%E7%94%A8ll%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>llæ˜¯ä¸ªå¾ˆæ–¹ä¾¿çš„å¿«æ·å‘½ä»¤ï¼Œé»˜è®¤Deepinæœªå¯ç”¨ã€‚å¯ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œç¼–è¾‘ä¸‹é¢çš„æ–‡ä»¶ï¼Œå»æ‰ä»¥ä¸‹å†…å®¹å‰é¢çš„æ³¨é‡Šå³å¯ã€‚</p><p>æ–‡ä»¶ï¼š~&#x2F;.bashrc</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -l&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Deepin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL Workbench 8.0ä¸æ”¯æŒéSSLè¿æ¥</title>
      <link href="/2022/01/27/MySQL-Workbench-8-0%E4%B8%8D%E6%94%AF%E6%8C%81%E9%9D%9ESSL%E8%BF%9E%E6%8E%A5/"/>
      <url>/2022/01/27/MySQL-Workbench-8-0%E4%B8%8D%E6%94%AF%E6%8C%81%E9%9D%9ESSL%E8%BF%9E%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<p>è¿æ¥é”™è¯¯ä¿¡æ¯ï¼šSSL connection error: SSL is required but the server doesnâ€™t support itã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202502/mysql-ssl-error1.jpg" alt="é”™è¯¯ä¿¡æ¯"></p><p>è§£å†³æ–¹æ³•æ˜¯åœ¨é…ç½®è¿æ¥æ—¶â€œAdvancedâ€é€‰é¡¹å¡ä¸­çš„Othersä¸­æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useSSL=0</span><br></pre></td></tr></table></figure><p>å¦‚å›¾ï¼š<img src="/images/202502/mysql-ssl-error2.jpg" alt="ç¦ç”¨SSL"></p><p>æµ‹è¯•è¿æ¥å‡ºç°è­¦å‘Šä¿¡æ¯ï¼Œé€‰æ‹©â€œContinue Anywayâ€ï¼š</p><p><img src="/images/202502/mysql-ssl-error3.jpg" alt="è­¦å‘Šä¿¡æ¯"></p><p><img src="/images/202502/mysql-ssl-error4.jpg" alt="è­¦å‘Šä¿¡æ¯"></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10å®‰è£…MySQLæ‰¾ä¸åˆ°MSVCR120.dllå’ŒMSVCP120.dllé—®é¢˜è§£å†³</title>
      <link href="/2022/01/18/Windows10%E5%AE%89%E8%A3%85MySQL%E6%89%BE%E4%B8%8D%E5%88%B0MSVCR120-dll%E5%92%8CMSVCP120-dll%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2022/01/18/Windows10%E5%AE%89%E8%A3%85MySQL%E6%89%BE%E4%B8%8D%E5%88%B0MSVCR120-dll%E5%92%8CMSVCP120-dll%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>msvcp120.dllã€msvcr120.dllã€vcomp120.dllå±äºVC++2013ç‰ˆä¸­çš„åŠ¨æ€é“¾æ¥åº“ï¼Œå¦‚æœä¸¢å¤±é‡æ–°å®‰è£…VC++2013å³å¯ã€‚ä¸‹è½½åœ°å€ï¼š<a href="https://www.microsoft.com/zh-cn/download/confirmation.aspx?id=40784">https://www.microsoft.com/zh-cn/download/confirmation.aspx?id=40784</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Windows </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 20.04 Realtek 8852æ— çº¿ç½‘å¡é©±åŠ¨</title>
      <link href="/2022/01/05/Ubuntu-20-04-Realtek-8852-%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8/"/>
      <url>/2022/01/05/Ubuntu-20-04-Realtek-8852-%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install make gcc linux-headers-$(uname -r) build-essential git</span><br><span class="line"></span><br><span class="line">git clone https://github.com/lwfinger/rtw89.git -b v5</span><br><span class="line">cd rtw89 &amp;&amp; make &amp;&amp; sudo make install</span><br><span class="line"></span><br><span class="line">sudo modprobe rtw89pci</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæˆåé‡å¯ã€‚</p><blockquote><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://askubuntu.com/questions/1352731/ubuntu-20-04-no-wifi-adapter-found-lenovo-ideapad-realtek">https://askubuntu.com/questions/1352731/ubuntu-20-04-no-wifi-adapter-found-lenovo-ideapad-realtek</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sudoersæ–‡ä»¶ä¿®æ”¹æ ¼å¼é”™è¯¯æ¢å¤</title>
      <link href="/2021/12/27/sudoers%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9%E6%A0%BC%E5%BC%8F%E9%94%99%E8%AF%AF%E6%81%A2%E5%A4%8D/"/>
      <url>/2021/12/27/sudoers%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9%E6%A0%BC%E5%BC%8F%E9%94%99%E8%AF%AF%E6%81%A2%E5%A4%8D/</url>
      
        <content type="html"><![CDATA[<p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo -i</span><br><span class="line">&gt;&gt;&gt; /etc/sudoers.d/dev: è¯­æ³•é”™è¯¯ near line 1 &lt;&lt;&lt;</span><br><span class="line">sudo: /etc/sudoers.d/dev ä¸­ç¬¬ 1 è¡Œé™„è¿‘æœ‰è§£æé”™è¯¯</span><br><span class="line">sudo: æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„ sudoers èµ„æºï¼Œé€€å‡º</span><br><span class="line">sudo: æ— æ³•åˆå§‹åŒ–ç­–ç•¥æ’ä»¶</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¾‘sudoersæ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkexec visudo</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443</title>
      <link href="/2021/12/23/LibreSSL-SSL-connect-SSL-ERROR-SYSCALL-in-connection-to-github-com-443/"/>
      <url>/2021/12/23/LibreSSL-SSL-connect-SSL-ERROR-SYSCALL-in-connection-to-github-com-443/</url>
      
        <content type="html"><![CDATA[<p>å‘GitHub Pushä»£ç çš„æ—¶å€™å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br><span class="line">fatal: unable to access &#x27;https://github.com/zhang-jc/zhangjc.git/&#x27;: LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼šå°†é¡¹ç›®cloneåè®®æ”¹ä¸ºSSHã€‚å¯ä»¥ç›´æ¥ä¿®æ”¹é¡¹ç›®ç›®å½•ä¸‹.git&#x2F;configé…ç½®æ–‡ä»¶ä¸­çš„é¡¹ç›®åœ°å€ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeperæ¦‚è§ˆ</title>
      <link href="/2021/12/07/Zookeeper%E6%A6%82%E8%A7%88/"/>
      <url>/2021/12/07/Zookeeper%E6%A6%82%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡ç›®æ ‡"><a href="#è®¾è®¡ç›®æ ‡" class="headerlink" title="è®¾è®¡ç›®æ ‡"></a>è®¾è®¡ç›®æ ‡</h1><ul><li>ç®€å•çš„ï¼šæ–¹ä¾¿ä½¿ç”¨ä»¥å®ç°å¤æ‚çš„ä¸šåŠ¡åº”ç”¨ã€‚</li><li>å¤åˆ¶å¼çš„ï¼šè·ŸZookeeperåè°ƒçš„åˆ†å¸ƒå¼è¿›ç¨‹ä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯åœ¨ä¸€ç»„æœåŠ¡å™¨ä¸Šå¤åˆ¶çš„ã€‚é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹é—´äº’ç›¸çŸ¥é“ã€‚å®ƒä»¬ç»´æŠ¤ä¸€ä¸ªçŠ¶æ€æ•°æ®åœ¨å†…å­˜ä¸­çš„é•œåƒã€ä¸€ä¸ªäº‹åŠ¡æ—¥å¿—å’ŒæŒä¹…å­˜å‚¨çš„å¿«ç…§ã€‚åªè¦é›†ç¾¤çš„å¤šæ•°èŠ‚ç‚¹å¯ç”¨åˆ™ZookeeperæœåŠ¡å¯ç”¨ã€‚å®¢æˆ·ç«¯è¿æ¥åˆ°ä¸€ä¸ªZookeeperæœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯ç»´æŒä¸€ä¸ªTCPè¿æ¥æ¥å‘é€è¯·æ±‚ã€è·å–å“åº”ã€è·å–ç›‘å¬äº‹ä»¶ã€å‘é€å¿ƒè·³ã€‚å¦‚æœè¿™ä¸ªTCPè¿æ¥ä¸­æ–­ï¼Œåˆ™å®¢æˆ·ç«¯ä¼šè¿æ¥å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ã€‚</li><li>é¡ºåºçš„ï¼šZookeeperèµ‹äºˆæ¯æ¬¡æ›´æ–°æ“ä½œä¸€ä¸ªæ•°å­—æˆ³ä»¥æ ‡æ˜äº‹åŠ¡çš„é¡ºåºã€‚å…¶åçš„æ“ä½œå¯ä»¥ç”¨è¿™ä¸ªé¡ºåºå®ç°é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œä¾‹å¦‚åŒæ­¥åŸè¯­ã€‚</li><li>å¿«é€Ÿçš„ï¼šåœ¨è¯»å–æ“ä½œå ä¼˜åŠ¿çš„åœºæ™¯å°¤å…¶å¿«é€Ÿã€‚Zookeeperåº”ç”¨è¿è¡Œåœ¨ä¸Šåƒå°æœºå™¨ä¸Šï¼Œåœ¨è¯»æ“ä½œæ¯”å†™æ“ä½œå¸¸è§çš„æƒ…å†µä¸‹å¾ˆé«˜æ•ˆï¼Œé€šå¸¸è¯»å†™æ¯”ä¾‹ä¸º10ï¼š1ã€‚</li></ul><h1 id="ä¿éšœ"><a href="#ä¿éšœ" class="headerlink" title="ä¿éšœ"></a>ä¿éšœ</h1><ul><li>é¡ºåºä¸€è‡´æ€§ï¼šé¡ºåºåº”ç”¨å®¢æˆ·ç«¯å‘é€çš„æ›´æ–°æ“ä½œã€‚</li><li>åŸå­æ€§ï¼šæ›´æ–°æ“ä½œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥ï¼Œæ²¡æœ‰ä¸å®Œæ•´çš„ç»“æœã€‚</li><li>å•ä¸€ç³»ç»Ÿé•œåƒï¼šä¸ç®¡å®¢æˆ·ç«¯è¿æ¥åˆ°å“ªä¸ªæœåŠ¡å™¨éƒ½ä¼šçœ‹åˆ°ç›¸åŒç³»ç»Ÿè§†å›¾ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨åŒä¸€ä¸ªSessionè¿æ¥æ°¸è¿œä¸ä¼šçœ‹åˆ°ç³»ç»Ÿæ—§çš„è§†å›¾ï¼Œå³ä½¿å®¢æˆ·ç«¯å¤±è´¥åé‡è¿åˆ°å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ã€‚</li><li>å¯é æ€§ï¼šä¸€æ—¦ä¸€ä¸ªæ›´æ–°è¢«åº”ç”¨ï¼Œå®ƒå°±åœ¨è¿™ä¸€åˆ»è¢«ä¿æŒç›´åˆ°ä¸€ä¸ªå®¢æˆ·ç«¯è¦†ç›–è¿™æ¬¡æ›´æ–°ã€‚</li><li>æ—¶æ•ˆæ€§ï¼šç³»ç»Ÿçš„å®¢æˆ·ç«¯è§†å›¾ä¿è¯åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…å˜ä¸ºæœ€æ–°ã€‚</li></ul><h1 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h1><p>ZooKeeperè¢«è®¾è®¡ä¸ºé«˜æ€§èƒ½çš„ã€‚çœŸçš„æ˜¯å—ï¼ŸYahoo ZooKeeperå¼€å‘å›¢é˜Ÿçš„ç ”ç©¶è¡¨æ˜æ˜¯çš„ã€‚å°¤å…¶æ˜¯åœ¨è¯»è¿œå¤šäºå†™çš„åº”ç”¨ç¨‹åºä¸­ã€‚å› ä¸ºå†™ä¼šæ¶‰åŠæ‰€æœ‰æœåŠ¡å™¨çš„åŒæ­¥ã€‚</p><blockquote><p>è¯»è¿œå¤šäºå†™æ˜¯åè°ƒæœåŠ¡å…¸å‹çš„ä½¿ç”¨åœºæ™¯ã€‚</p></blockquote><p>ä¸‹å›¾æ˜¯ZooKeeperååé‡éšè¯»å†™æ¯”ç‡çš„å˜åŒ–è€Œå˜åŒ–ï¼š</p><p><img src="/images/202501/zkperfRW-3.2.jpg" alt="ZooKeeper Throughput as the Read-Write Ratio Varies"></p><p>ä¸Šå›¾æ˜¯ZooKeeper 3.2è¿è¡Œåœ¨æ‹¥æœ‰åŒ2Ghz Xeonå’Œä¸¤ä¸ªSATA 15K RPMé©±åŠ¨å™¨çš„æœåŠ¡å™¨ä¸Šçš„ååé‡å›¾ã€‚ä¸€ä¸ªé©±åŠ¨ä¸“ç”¨äºZooKeeperæ—¥å¿—ã€‚å¿«ç…§å†™åˆ°OSçš„é©±åŠ¨ã€‚å†™å’Œè¯»éƒ½æ˜¯1Kçš„æ•°æ®ã€‚â€œServersâ€æ˜¯ZooKeeperé›†ç¾¤çš„è§„æ¨¡ã€‚å¤§æ¦‚30å°å¦å¤–çš„æœåŠ¡å™¨æ¨¡æ‹Ÿå®¢æˆ·ç«¯ã€‚ZooKeeperé›†ç¾¤é…ç½®leadersä¸å…è®¸å®¢æˆ·ç«¯è¿æ¥ã€‚</p><blockquote><p>3.2ç‰ˆæœ¬æ¯”3.1ç‰ˆæœ¬è¯»å†™æ•ˆç‡æå‡2å€ä»¥ä¸Šã€‚</p></blockquote><p>åŸºå‡†æµ‹è¯•ä¹Ÿè¡¨æ˜å®ƒæ˜¯å¯é çš„ã€‚â€œå­˜åœ¨é”™è¯¯æ—¶çš„å¯é æ€§â€å›¾å±•ç¤ºäº†å¦‚ä½•å“åº”å„ç§å¤±è´¥ã€‚å›¾ä¸­æ ‡æ³¨çš„äº‹ä»¶å¦‚ä¸‹ï¼š</p><ol><li>ä¸€ä¸ªfollowerçš„å¤±è´¥æ¢å¤</li><li>å¦å¤–ä¸€ä¸ªfollowerçš„å¤±è´¥æ¢å¤</li><li>leaderå¤±è´¥</li><li>ä¸¤ä¸ªfollowerçš„å¤±è´¥æ¢å¤</li><li>å¦å¤–ä¸€ä¸ªleaderå¤±è´¥</li></ol><h1 id="å¯é æ€§"><a href="#å¯é æ€§" class="headerlink" title="å¯é æ€§"></a>å¯é æ€§</h1><p>ä¸ºäº†æ˜¾ç¤ºç³»ç»Ÿæ•…éšœéšæ—¶é—´å˜åŒ–çš„è¡Œä¸ºï¼Œæˆ‘ä»¬è¿è¡Œäº†ä¸€ä¸ªç”±7å°æœºå™¨ç»„æˆçš„ZooKeeperæœåŠ¡ã€‚æˆ‘ä»¬è¿è¡Œäº†ä¸ä¹‹å‰ç›¸åŒçš„é¥±å’ŒåŸºå‡†æµ‹è¯•ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬å°†å†™å…¥ç™¾åˆ†æ¯”ä¿æŒåœ¨30%ï¼Œè¿™æ˜¯æˆ‘ä»¬é¢„æœŸå·¥ä½œè´Ÿè½½çš„æ¯”ä¾‹ã€‚</p><p><img src="/images/202501/zkperfreliability.jpg" alt="Reliability in the Presence of Errors"></p><p>ä»è¿™å¼ å›¾ä¸­å¯ä»¥çœ‹å‡ºä¸€äº›é‡è¦çš„è§‚å¯Ÿç»“æœã€‚é¦–å…ˆï¼Œå¦‚æœfollowerå¤±è´¥å¹¶å¿«é€Ÿæ¢å¤ï¼Œé‚£ä¹ˆå³ä½¿å‡ºç°æ•…éšœï¼ŒZooKeeperä¹Ÿèƒ½å¤Ÿç»´æŒé«˜ååé‡ã€‚ä½†ä¹Ÿè®¸æ›´é‡è¦çš„æ˜¯ï¼Œé¢†å¯¼è€…é€‰ä¸¾ç®—æ³•å…è®¸ç³»ç»Ÿè¶³å¤Ÿå¿«åœ°æ¢å¤ä»¥é˜²æ­¢ååé‡å¤§å¹…ä¸‹é™ã€‚åœ¨æˆ‘ä»¬çš„è§‚å¯Ÿä¸­ï¼ŒZooKeeperèŠ±è´¹ä¸åˆ°200æ¯«ç§’çš„æ—¶é—´æ¥é€‰ä¸¾ä¸€ä¸ªæ–°çš„é¢†å¯¼è€…ã€‚ç¬¬ä¸‰ï¼Œéšç€followerçš„æ¢å¤ï¼Œä¸€æ—¦ä»–ä»¬å¼€å§‹å¤„ç†è¯·æ±‚ï¼ŒZooKeeperèƒ½å¤Ÿå†æ¬¡æé«˜ååé‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> å¸¸ç”¨ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pdsh@frin: localhost: rcmd: socket: Permission denied</title>
      <link href="/2021/12/06/pdsh-frin-localhost-rcmd-socket-Permission-denied/"/>
      <url>/2021/12/06/pdsh-frin-localhost-rcmd-socket-Permission-denied/</url>
      
        <content type="html"><![CDATA[<p>åœ¨éƒ¨ç½²å•èŠ‚ç‚¹Hadoopé›†ç¾¤æ—¶ï¼Œæ‰§è¡Œ<code>sbin/start-dfs.sh</code>å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sbin/start-dfs.sh</span></span><br><span class="line">Starting namenodes on [localhost]</span><br><span class="line">pdsh@frin: localhost: rcmd: socket: Permission denied</span><br><span class="line">Starting datanodes</span><br><span class="line">pdsh@frin: localhost: rcmd: socket: Permission denied</span><br><span class="line">Starting secondary namenodes [frin]</span><br><span class="line">pdsh@frin: frin: rcmd: socket: Permission denied</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼šåœ¨<code>/etc/pdsh/</code>ä¸‹åˆ›å»º<code>rcmd_default</code>æ–‡ä»¶ï¼Œè¾“å…¥å†…å®¹ï¼šsshã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼å­˜å‚¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npmå®‰è£…æ—¶æ— æ³•è®¿é—®githubåŸŸåçš„è§£å†³æ–¹æ³•</title>
      <link href="/2021/11/10/npm%E5%AE%89%E8%A3%85%E6%97%B6%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub%E5%9F%9F%E5%90%8D%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
      <url>/2021/11/10/npm%E5%AE%89%E8%A3%85%E6%97%B6%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEgithub%E5%9F%9F%E5%90%8D%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ç”¨<code>npm install</code>çš„æ—¶å€™å‡ºç°äº†githubé¡¹ç›®è®¿é—®ä¸äº†çš„å¼‚å¸¸ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm ERR! Error while executing:</span><br><span class="line">npm ERR! /bin/git ls-remote -h -t https://github.com/nhn/raphael.git</span><br><span class="line">npm ERR! </span><br><span class="line">npm ERR! fatal: unable to access &#x27;https://github.com/nhn/raphael.git/&#x27;: Encountered end of file</span><br><span class="line">npm ERR! </span><br><span class="line">npm ERR! exited with error code: 128</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     /home/ycs/.npm/_logs/2021-11-10T09_14_23_017Z-debug.log</span><br></pre></td></tr></table></figure><p>pingåŠcurlæµ‹è¯•éƒ½æ— æ³•è®¿é—®ã€‚ä½†æœåŠ¡å™¨æ˜¯å¯ä»¥è®¿é—®äº’è”ç½‘çš„ï¼Œæ€€ç–‘æ˜¯è¢«å¢™äº†ã€‚</p><p>ä»ç½‘å€<a href="https://websites.ipaddress.com/github.com">https://websites.ipaddress.com/github.com</a>æŸ¥è¯¢GitHubçš„IPåœ°å€ã€‚</p><p><img src="/images/202502/github-ip.png" alt="GitHub IP"></p><p>æ·»åŠ hostsé…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">140.82.114.3 github.com</span><br></pre></td></tr></table></figure><p>é—®é¢˜è§£å†³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Node.js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
            <tag> Node.js </tag>
            
            <tag> NPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spark SQLè¯»å†™Hive Tableéƒ¨ç½²</title>
      <link href="/2021/10/26/Spark-SQL%E8%AF%BB%E5%86%99-Hive-Table-%E9%83%A8%E7%BD%B2/"/>
      <url>/2021/10/26/Spark-SQL%E8%AF%BB%E5%86%99-Hive-Table-%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<p>å®˜ç½‘å‚è€ƒæ–‡æ¡£ï¼š<a href="http://spark.apache.org/docs/3.1.2/sql-data-sources-hive-tables.html">Hive Tables</a>ã€‚</p><p>æœ¬æ–‡ä½¿ç”¨çš„ç»„ä»¶ç‰ˆæœ¬å¦‚ä¸‹ï¼š</p><ul><li>Spark 3.1.2</li><li>Hive 3.1.2</li></ul><h1 id="ç¬¬ä¸€æ­¥ï¼šHiveéƒ¨ç½²"><a href="#ç¬¬ä¸€æ­¥ï¼šHiveéƒ¨ç½²" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šHiveéƒ¨ç½²"></a>ç¬¬ä¸€æ­¥ï¼šHiveéƒ¨ç½²</h1><p>åœ¨æ‰€æœ‰WorkerèŠ‚ç‚¹ä¸Šéƒ¨ç½²Hiveã€‚ä¸»è¦æ˜¯ä½¿ç”¨Hiveä¸‹é¢çš„libsã€‚</p><h1 id="ç¬¬äºŒæ­¥ï¼šSpark-CLASSPATH"><a href="#ç¬¬äºŒæ­¥ï¼šSpark-CLASSPATH" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šSpark CLASSPATH"></a>ç¬¬äºŒæ­¥ï¼šSpark CLASSPATH</h1><p>åœ¨${SPARK_HOME}&#x2F;conf&#x2F;spark-env.shä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_DIST_CLASSPATH=$(hadoop classpath)</span><br></pre></td></tr></table></figure><h1 id="ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘Spark"><a href="#ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘Spark" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘Spark"></a>ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘Spark</h1><p>ç¼–è¯‘çš„ç›®çš„æ˜¯æ”¯æŒHiveã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dev/make-distribution.sh --tgz -Phive -Phive-thriftserver -Pyarn -Dhadoop.version=3.2.2 -Phadoop-provided</span><br></pre></td></tr></table></figure><h1 id="ç¬¬å››æ­¥ï¼šéƒ¨ç½²Spark-On-Yarn"><a href="#ç¬¬å››æ­¥ï¼šéƒ¨ç½²Spark-On-Yarn" class="headerlink" title="ç¬¬å››æ­¥ï¼šéƒ¨ç½²Spark On Yarn"></a>ç¬¬å››æ­¥ï¼šéƒ¨ç½²Spark On Yarn</h1><p>éƒ¨ç½²è¿‡ç¨‹æ¯”è¾ƒç®€å•ã€‚éƒ¨ç½²è¿‡ç¨‹é‡åˆ°çš„é—®é¢˜å‚è§å¦å¤–ä¸€ç¯‡åšæ–‡ï¼š<a href="https://www.zhangjc.com/2021/10/25/Spark-on-YARN%E9%83%A8%E7%BD%B2/">Spark on YARNéƒ¨ç½²</a></p><h1 id="ç¬¬äº”æ­¥ï¼šå…¼å®¹Hive-3-1-2"><a href="#ç¬¬äº”æ­¥ï¼šå…¼å®¹Hive-3-1-2" class="headerlink" title="ç¬¬äº”æ­¥ï¼šå…¼å®¹Hive 3.1.2"></a>ç¬¬äº”æ­¥ï¼šå…¼å®¹Hive 3.1.2</h1><ul><li>å°†hive-site.xmlå¤åˆ¶åˆ°sparké…ç½®ç›®å½•ä¸‹ã€‚</li><li>åœ¨é…ç½®æ–‡ä»¶spark-defaults.confä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚å‡è®¾Hiveå®‰è£…ç›®å½•ä¸ºï¼š&#x2F;opt&#x2F;hiveã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spark.sql.hive.metastore.version 3.1.2</span><br><span class="line">spark.sql.hive.metastore.jars path</span><br><span class="line">spark.sql.hive.metastore.jars.path file:///opt/hive/lib/*.jar</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè¿™äº›JaråŒ…éœ€è¦ä½¿ç”¨Hive 3.1.2ç‰ˆæœ¬çš„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
            <tag> Spark </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spark On Yarn External Shuffle Service</title>
      <link href="/2021/10/25/Spark-On-Yarn-External-Shuffle-Service/"/>
      <url>/2021/10/25/Spark-On-Yarn-External-Shuffle-Service/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡åŸºäºspark-3.1.2-bin-without-hadoop.tgzç‰ˆæœ¬ï¼Œæ‰€ä»¥spark-3.1.2-yarn-shuffle.jarå·²ç»åœ¨èŠ‚ç‚¹çš„<code>$&#123;SPARK_HOME&#125;/yarn</code>ç›®å½•ä¸‹ã€‚</p><h1 id="HADOOP-CLASSPATH"><a href="#HADOOP-CLASSPATH" class="headerlink" title="HADOOP_CLASSPATH"></a>HADOOP_CLASSPATH</h1><p>åœ¨æ‰€æœ‰NodeManagerèŠ‚ç‚¹ä¸Šè®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export HADOOP_CLASSPATH=$&#123;SPARK_HOME&#125;/yarn/spark-3.1.2-yarn-shuffle.jar:$HADOOP_CLASSPATH</span><br></pre></td></tr></table></figure><h1 id="yarn-site-xml"><a href="#yarn-site-xml" class="headerlink" title="yarn-site.xml"></a>yarn-site.xml</h1><p>åœ¨yarn-site.xmlä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå¹¶åˆ†å‘è‡³æ‰€æœ‰NodeManagerèŠ‚ç‚¹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spark Configuration --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>spark_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services.spark_shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.spark.network.yarn.YarnShuffleService<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>spark.yarn.shuffle.stopOnFailure<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="é‡å¯NodeManager"><a href="#é‡å¯NodeManager" class="headerlink" title="é‡å¯NodeManager"></a>é‡å¯NodeManager</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn --daemon stop nodemanager</span><br><span class="line">yarn --daemon start nodemanager</span><br></pre></td></tr></table></figure><h1 id="æ£€æŸ¥"><a href="#æ£€æŸ¥" class="headerlink" title="æ£€æŸ¥"></a>æ£€æŸ¥</h1><p>åœ¨NodeManagerèŠ‚ç‚¹ä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹7337ç«¯å£æ˜¯å¦å·²è¢«ç›‘å¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ntlp|grep 7337</span><br></pre></td></tr></table></figure><p>è¯¥ç«¯å£é€šè¿‡spark.shuffle.service.portæŒ‡å®šï¼Œé»˜è®¤æ˜¯7337ã€‚</p><h1 id="å¯ç”¨"><a href="#å¯ç”¨" class="headerlink" title="å¯ç”¨"></a>å¯ç”¨</h1><p>åœ¨<code>$&#123;SPARK_HOME&#125;/conf/spark-defaults.conf</code>ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå¹¶åˆ†å‘è‡³æ‰€æœ‰èŠ‚ç‚¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spark.shuffle.service.enabled true</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Spark </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spark on YARNéƒ¨ç½²</title>
      <link href="/2021/10/25/Spark-on-YARN%E9%83%A8%E7%BD%B2/"/>
      <url>/2021/10/25/Spark-on-YARN%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<p>ç›®å‰å„å¤§æ•°æ®ç»„ä»¶éƒ¨ç½²å…¶å®éƒ½æ¯”è¾ƒç®€å•ï¼Œå‡ ä¹æ¥è¿‘å¼€ç®±å³ç”¨ã€‚æ­¤å¤„åªè®°å½•éƒ¨ç½²æ—¶é‡åˆ°çš„é—®é¢˜ã€‚</p><h1 id="é—®é¢˜ä¸€ï¼šjava-lang-ClassNotFoundException-org-apache-log4j-spi-Filter"><a href="#é—®é¢˜ä¸€ï¼šjava-lang-ClassNotFoundException-org-apache-log4j-spi-Filter" class="headerlink" title="é—®é¢˜ä¸€ï¼šjava.lang.ClassNotFoundException: org.apache.log4j.spi.Filter"></a>é—®é¢˜ä¸€ï¼šjava.lang.ClassNotFoundException: org.apache.log4j.spi.Filter</h1><p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Error: A JNI error has occurred, please check your installation and try again</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/log4j/spi/Filter</span><br><span class="line">at java.lang.Class.getDeclaredMethods0(Native Method)</span><br><span class="line">at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)</span><br><span class="line">at java.lang.Class.privateGetMethodRecursive(Class.java:3048)</span><br><span class="line">at java.lang.Class.getMethod0(Class.java:3018)</span><br><span class="line">at java.lang.Class.getMethod(Class.java:1784)</span><br><span class="line">at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:544)</span><br><span class="line">at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:526)</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: org.apache.log4j.spi.Filter</span><br><span class="line">at java.net.URLClassLoader.findClass(URLClassLoader.java:381)</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:424)</span><br><span class="line">at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:357)</span><br><span class="line">... 7 more</span><br></pre></td></tr></table></figure><p>ä»Spark3.1.2æºç pom.xmlä¸­å¯ä»¥çœ‹åˆ°log4jçš„ç‰ˆæœ¬ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„JaråŒ…ï¼Œå¹¶åˆ†å‘åˆ°å„WorkerèŠ‚ç‚¹çš„${SPARK_HOME}&#x2F;jarsä¸‹ã€‚</p><h1 id="é—®é¢˜äºŒï¼šjava-lang-ClassNotFoundException-org-apache-hadoop-fs-FSDataInputStream"><a href="#é—®é¢˜äºŒï¼šjava-lang-ClassNotFoundException-org-apache-hadoop-fs-FSDataInputStream" class="headerlink" title="é—®é¢˜äºŒï¼šjava.lang.ClassNotFoundException: org.apache.hadoop.fs.FSDataInputStream"></a>é—®é¢˜äºŒï¼šjava.lang.ClassNotFoundException: org.apache.hadoop.fs.FSDataInputStream</h1><p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Error: A JNI error has occurred, please check your installation and try again</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/fs/FSDataInputStream</span><br><span class="line">at java.lang.Class.getDeclaredMethods0(Native Method)</span><br><span class="line">at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)</span><br><span class="line">at java.lang.Class.privateGetMethodRecursive(Class.java:3048)</span><br><span class="line">at java.lang.Class.getMethod0(Class.java:3018)</span><br><span class="line">at java.lang.Class.getMethod(Class.java:1784)</span><br><span class="line">at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:544)</span><br><span class="line">at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:526)</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.fs.FSDataInputStream</span><br><span class="line">at java.net.URLClassLoader.findClass(URLClassLoader.java:381)</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:424)</span><br><span class="line">at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:357)</span><br><span class="line">... 7 more</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨hadoop freeç‰ˆæœ¬éƒ¨ç½²é‡åˆ°è¯¥é—®é¢˜ã€‚éœ€è¦åœ¨spark-env.shä¸­è®¾ç½®åŒ…å«hadoopçš„classpathã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_DIST_CLASSPATH=$(hadoop classpath)</span><br></pre></td></tr></table></figure><blockquote><p>å®˜æ–¹æ–‡æ¡£æœ‰æ˜ç¡®è¯´æ˜ï¼Œåªä¸è¿‡åˆæ¬¡é˜…è¯»å®¹æ˜“å¿½ç•¥ã€‚ä½ç½®å¦‚ä¸‹ï¼š<br><img src="/images/202502/hadoop-free-spark-env.png" alt="Spark Env"></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Spark </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sparkçš„åŸºæœ¬æ¦‚å¿µ</title>
      <link href="/2021/10/22/Spark%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
      <url>/2021/10/22/Spark%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¼–ç¨‹æ¥å£"><a href="#ç¼–ç¨‹æ¥å£" class="headerlink" title="ç¼–ç¨‹æ¥å£"></a>ç¼–ç¨‹æ¥å£</h1><ul><li>RDDï¼šå¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†ï¼ˆResilient Distributed Dataset ï¼‰ã€‚Spark2.0ä¹‹å‰çš„ç¼–ç¨‹æ¥å£ã€‚Spark2.0ä¹‹åä»¥ä¸å†æ¨èä½¿ç”¨ï¼Œè€Œæ˜¯è¢«Datasetæ›¿ä»£ã€‚</li><li>Datasetï¼šSpark2.0ä¹‹åçš„ç¼–ç¨‹æ¥å£ï¼Œç”¨æ¥æ›¿ä»£RDDã€‚ä¸RDDä¸åŒDatasetæ˜¯å¼ºæ•°æ®ç±»å‹çš„ï¼Œä½†æ˜¯è¿™ä¸€ç‚¹ä¸é€‚ç”¨ä¸pysparkï¼Œå› ä¸ºPythonæ˜¯å¼±ç±»å‹çš„ã€‚Sparkå¼•æ“é’ˆå¯¹Datasetåšäº†æ›´ä¸°å¯Œçš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æ¯”RDDæœ‰æ›´é«˜çš„æ€§èƒ½ã€‚</li><li>Dataframeï¼šåœ¨Pythonï¼ˆPandasï¼‰å’ŒRä¸­Datasetçš„ç»„ç»‡å½¢å¼ï¼›åœ¨Scalaä¸­æ²¡æœ‰è¿™ä¸ªæ¦‚å¿µã€‚</li></ul><h1 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h1><p><img src="/images/202502/spark-cluster-overview.png" alt="Spark Cluster Overview"></p><ul><li>Applicationï¼šåŸºäºSparkæ„å»ºçš„ç”¨æˆ·ç¨‹åºã€‚åŒ…å«é©±åŠ¨ç¨‹åºå’Œæ‰§è¡Œå™¨ã€‚</li><li>Application jarï¼šç”¨æˆ·ç¨‹åºJaråŒ…ã€‚</li><li>Driver programï¼šé©±åŠ¨ç¨‹åºã€‚ç”¨æˆ·ç¨‹åºä¸­è¿è¡Œmain()æ–¹æ³•åŠåˆ›å»ºSparkContextçš„è¿›ç¨‹ã€‚</li><li>Cluster managerï¼šé›†ç¾¤ç®¡ç†è€…ã€‚ç®¡ç†é›†ç¾¤èµ„æºçš„å¤–éƒ¨æœåŠ¡ã€‚å¦‚ï¼šstandalone manager, Mesos, YARN, Kubernetesã€‚</li><li>Deploy modeï¼šç”¨æ¥æŒ‡æ˜é©±åŠ¨ç¨‹åºè¿è¡Œä½ç½®ã€‚é›†ç¾¤æ¨¡å¼ä¸‹æ¡†æ¶åœ¨é›†ç¾¤ä¸­è°ƒèµ·é©±åŠ¨ç¨‹åºï¼›å®¢æˆ·ç«¯æ¨¡å¼ä¸‹åœ¨é›†ç¾¤ä¹‹å¤–çš„ç¨‹åºæäº¤è€…è°ƒèµ·é©±åŠ¨ç¨‹åºã€‚</li><li>Worker nodeï¼šé›†ç¾¤ä¸­è¿è¡Œåº”ç”¨ç¨‹åºçš„èŠ‚ç‚¹ã€‚</li><li>Executorï¼šWorkerèŠ‚ç‚¹ä¸Šè°ƒèµ·çš„ä¸ºç”¨æˆ·åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ï¼Œè¿è¡Œä»»åŠ¡å¹¶åœ¨å†…å­˜ä¸­æˆ–ç£ç›˜æ˜¯è¡Œä¿æŒæ•°æ®ã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„Executorã€‚</li><li>Taskï¼šå‘é€åˆ°Executorçš„å·¥ä½œå•å…ƒã€‚</li><li>Jobï¼šç”±å¤šä¸ªä»»åŠ¡ç»„æˆçš„å¹¶è¡Œè®¡ç®—ï¼Œè¿™äº›ä»»åŠ¡å“åº”Sparkæ“ä½œï¼ˆä¾‹å¦‚ä¿å­˜ã€æ”¶é›†ï¼‰è€Œç”Ÿæˆï¼›æ‚¨å°†åœ¨é©±åŠ¨ç¨‹åºæ—¥å¿—ä¸­çœ‹åˆ°è¿™ä¸ªæœ¯è¯­ã€‚</li><li>Stageï¼šæ¯ä¸ªä½œä¸šè¢«åˆ’åˆ†ä¸ºæ›´å°çš„ä»»åŠ¡é›†ï¼Œç§°ä¸ºç›¸äº’ä¾èµ–çš„é˜¶æ®µï¼ˆç±»ä¼¼äºMapReduceä¸­çš„mapå’Œreduceé˜¶æ®µï¼‰ï¼›æ‚¨å°†åœ¨é©±åŠ¨ç¨‹åºæ—¥å¿—ä¸­çœ‹åˆ°è¿™ä¸ªæœ¯è¯­ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Spark </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JConsoleè¿œç¨‹è¿æ¥é”™è¯¯è§£å†³</title>
      <link href="/2021/09/07/JConsole%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/"/>
      <url>/2021/09/07/JConsole%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>ç¨‹åºå¯åŠ¨å‘½ä»¤åŠå‚æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -Dcom.sent.jmxremote.ssl=false -jar math-game.jar</span><br></pre></td></tr></table></figure><p>é˜²ç«å¢™å·²ç»æ”¾å¼€30000ç«¯å£è®¿é—®ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">telnet 192.168.72.156 30000</span></span><br><span class="line">Trying 192.168.72.156...</span><br><span class="line">Connected to 192.168.72.156.</span><br><span class="line">Escape character is &#x27;^]&#x27;.</span><br></pre></td></tr></table></figure><p>å¼‚å¸¸ç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="/images/202502/jconsole_security_failed.png" alt="å®‰å…¨è¿æ¥å¤±è´¥"></p><p>ç‚¹å‡»â€œä¸å®‰å…¨çš„è¿æ¥â€å¼‚å¸¸ç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="/images/202502/jconsole_not_security_failed.png" alt="éå®‰å…¨è¿æ¥å¤±è´¥"></p><p>æœ€ç»ˆè¿˜æ˜¯é˜²ç«å¢™çš„é—®é¢˜ã€‚ç½‘ä¸Šå¤§éƒ½æ˜¯ç›´æ¥å…³é—­äº†é˜²ç«å¢™ï¼Œæ‰€ä»¥é—®é¢˜å¯ä»¥è§£å†³ã€‚ä½†å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œç›´æ¥å…³é—­é˜²ç«å¢™æ˜¯å­˜åœ¨æ¯”è¾ƒå¤§å®‰å…¨éšæ‚£çš„ï¼Œå°¤å…¶æ˜¯æš´éœ²åœ¨å…¬ç½‘ä¸Šçš„æœåŠ¡å™¨ã€‚ç”¨netstatæŸ¥çœ‹è¿›ç¨‹ç›‘å¬çš„æ‰€æœ‰ç«¯å£ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">netstat -ntlp | grep 30000</span></span><br><span class="line">tcp6       0      0 :::30000                :::*                    LISTEN      24488/java</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">netstat -ntlp | grep 24488</span></span><br><span class="line">tcp6       0      0 :::24605                :::*                    LISTEN      24488/java          </span><br><span class="line">tcp6       0      0 :::19170                :::*                    LISTEN      24488/java          </span><br><span class="line">tcp6       0      0 :::30000                :::*                    LISTEN      24488/java</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¯åŠ¨çš„åº”ç”¨ç¨‹åºå…±ç›‘å¬äº†3ä¸ªç«¯å£ã€‚æ”¾å¼€3ä¸ªç«¯å£çš„è®¿é—®ï¼Œå†æ¬¡è¿æ¥æˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hue Dockeré•œåƒæ„å»ºå¼‚å¸¸ï¼šgnutls_handshake() failed</title>
      <link href="/2021/09/03/Hue-Docker%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E5%BC%82%E5%B8%B8%EF%BC%9Agnutls-handshake-failed/"/>
      <url>/2021/09/03/Hue-Docker%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E5%BC%82%E5%B8%B8%EF%BC%9Agnutls-handshake-failed/</url>
      
        <content type="html"><![CDATA[<p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  Cloning https://github.com/gethue/PyHive to /tmp/pip-req-build-86w_hwe4</span><br><span class="line">  Running command git clone -q https://github.com/gethue/PyHive /tmp/pip-req-build-86w_hwe4</span><br><span class="line">  fatal: unable to access &#x27;https://github.com/gethue/PyHive/&#x27;: gnutls_handshake() failed: The TLS connection was non-properly terminated.</span><br><span class="line">WARNING: Discarding git+https://github.com/gethue/PyHive. Command errored out with exit status 128: git clone -q https://github.com/gethue/PyHive /tmp/pip-req-build-86w_hwe4 Check the logs for full command output.</span><br><span class="line">ERROR: Command errored out with exit status 128: git clone -q https://github.com/gethue/PyHive /tmp/pip-req-build-86w_hwe4 Check the logs for full command output.</span><br><span class="line">The command &#x27;/bin/sh -c ./build/env/bin/pip install --no-cache-dir   psycopg2-binary   django_redis==4.11.0   flower   git+https://github.com/gethue/PyHive   git+https://github.com/bryanyang0528/ksql-python   pydruid   pybigquery   elasticsearch-dbapi   pyasn1==0.4.1   python-snappy==0.5.4   threadloop   sqlalchemy-clickhouse   infi.clickhouse_orm==1.0.4&#x27; returned a non-zero code: 1</span><br></pre></td></tr></table></figure><p>ç½‘ä¸Šå¤§éƒ½æ˜¯è¯´å› ä¸ºä»£ç†çš„é—®é¢˜ï¼Œå¯¹æˆ‘è¿™ä¸ªåœºæ™¯æ²¡ç”¨ã€‚é€šè¿‡æœç´¢æ‰¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„ä»£ç†ï¼š<a href="https://mirror.ghproxy.com/">https://mirror.ghproxy.com</a></p><p><code>desktop/core/requirements.txt</code>ä¸­ä»¥ä¸‹ä½ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git+https://github.com/gethue/django-babel.git</span><br><span class="line">git+https://github.com/gethue/django-mako.git</span><br></pre></td></tr></table></figure><p>æ”¹ä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git+https://mirror.ghproxy.com/https://github.com/gethue/django-babel.git</span><br><span class="line">git+https://mirror.ghproxy.com/https://github.com/gethue/django-mako.git</span><br></pre></td></tr></table></figure><p>tools&#x2F;docker&#x2F;hue&#x2F;Dockerfileä¸­ä»¥ä¸‹ä½ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git+https://github.com/gethue/PyHive \</span><br><span class="line"># pyhive \</span><br><span class="line">#ksql \</span><br><span class="line">git+https://github.com/bryanyang0528/ksql-python \</span><br></pre></td></tr></table></figure><p>æ”¹ä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git+https://mirror.ghproxy.com/https://github.com/gethue/PyHive \</span><br><span class="line"># pyhive \</span><br><span class="line">#ksql \</span><br><span class="line">git+https://mirror.ghproxy.com/https://github.com/bryanyang0528/ksql-python \</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®æ¢ç´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Git </tag>
            
            <tag> Hue </tag>
            
            <tag> GitHub </tag>
            
            <tag> æ•°æ®æ¢ç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>viå¿½ç•¥å¤§å°å†™æœç´¢</title>
      <link href="/2021/08/27/vi%E5%BF%BD%E7%95%A5%E5%A4%A7%E5%B0%8F%E5%86%99%E6%90%9C%E7%B4%A2/"/>
      <url>/2021/08/27/vi%E5%BF%BD%E7%95%A5%E5%A4%A7%E5%B0%8F%E5%86%99%E6%90%9C%E7%B4%A2/</url>
      
        <content type="html"><![CDATA[<p>å…ˆset ignorecaseï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202501/setIgnorecase.png" alt="set ignorecase"></p><p>ç„¶åå†è¿›è¡Œæœç´¢ï¼š</p><p><img src="/images/202501/search.png" alt="search"></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVMå¯ç”¨çš„åƒåœ¾å›æ”¶å™¨</title>
      <link href="/2021/08/27/JVM%E5%8F%AF%E7%94%A8%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/"/>
      <url>/2021/08/27/JVM%E5%8F%AF%E7%94%A8%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="åƒåœ¾æ”¶é›†å™¨åˆ†ç±»"><a href="#åƒåœ¾æ”¶é›†å™¨åˆ†ç±»" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨åˆ†ç±»"></a>åƒåœ¾æ”¶é›†å™¨åˆ†ç±»</h1><p>Java HotSpot VMæœ‰ä¸‰ç§ä¸åŒç±»å‹çš„æ”¶é›†å™¨ï¼Œæ¯ç§æ”¶é›†å™¨å…·æœ‰ä¸åŒçš„æ€§èƒ½ç‰¹å¾ã€‚</p><ul><li>ä¸²è¡Œæ”¶é›†å™¨ä½¿ç”¨å•ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ‰€æœ‰åƒåœ¾æ”¶é›†å·¥ä½œï¼Œè¿™ä½¿å¾—å®ƒç›¸å¯¹é«˜æ•ˆï¼Œå› ä¸ºçº¿ç¨‹ä¹‹é—´æ²¡æœ‰é€šä¿¡å¼€é”€ã€‚å®ƒæœ€é€‚åˆå•å¤„ç†å™¨æœºå™¨ï¼Œå› ä¸ºå®ƒä¸èƒ½åˆ©ç”¨å¤šå¤„ç†å™¨ç¡¬ä»¶ï¼Œå°½ç®¡å®ƒå¯¹äºå…·æœ‰å°æ•°æ®é›†ï¼ˆæœ€å¤šçº¦100MBï¼‰çš„åº”ç”¨ç¨‹åºåœ¨å¤šå¤„ç†å™¨ä¸Šå¾ˆæœ‰ç”¨ã€‚åœ¨æŸäº›ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿé…ç½®ä¸Šé»˜è®¤é€‰æ‹©ä¸²è¡Œæ”¶é›†å™¨ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨é€‰é¡¹æ˜¾å¼å¯ç”¨-XX:+UseSerialGCã€‚</li><li>å¹¶è¡Œæ”¶é›†å™¨ï¼ˆä¹Ÿç§°ä¸ºååé‡æ”¶é›†å™¨ï¼‰å¹¶è¡Œæ‰§è¡Œæ¬¡è¦æ”¶é›†ï¼Œè¿™å¯ä»¥æ˜¾è‘—å‡å°‘åƒåœ¾æ”¶é›†å¼€é”€ã€‚å®ƒé€‚ç”¨äºåœ¨å¤šå¤„ç†å™¨æˆ–å¤šçº¿ç¨‹ç¡¬ä»¶ä¸Šè¿è¡Œçš„å…·æœ‰ä¸­å‹åˆ°å¤§å‹æ•°æ®é›†çš„åº”ç”¨ç¨‹åºã€‚å¹¶è¡Œæ”¶é›†å™¨åœ¨æŸäº›ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿé…ç½®ä¸Šé»˜è®¤é€‰æ‹©ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨é€‰é¡¹æ˜¾å¼å¯ç”¨-XX:+UseParallelGCã€‚å¹¶è¡Œå‹ç¼©æ˜¯ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒä½¿å¹¶è¡Œæ”¶é›†å™¨èƒ½å¤Ÿå¹¶è¡Œæ‰§è¡Œä¸»è¦æ”¶é›†ã€‚å¦‚æœæ²¡æœ‰å¹¶è¡Œå‹ç¼©ï¼Œä¸»è¦æ”¶é›†æ˜¯ä½¿ç”¨å•ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ï¼Œè¿™ä¼šæ˜¾ç€é™åˆ¶å¯ä¼¸ç¼©æ€§ã€‚å¦‚æœ-XX:+UseParallelGCå·²æŒ‡å®šè¯¥é€‰é¡¹ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹å¯ç”¨å¹¶è¡Œå‹ç¼©ã€‚å…³é—­å®ƒçš„é€‰é¡¹æ˜¯-XX:-UseParallelOldGCã€‚</li><li>å¤§å¤šæ•°å¹¶å‘æ”¶é›†å™¨å¹¶å‘åœ°æ‰§è¡Œå…¶å¤§éƒ¨åˆ†å·¥ä½œï¼ˆä¾‹å¦‚ï¼Œå½“åº”ç”¨ç¨‹åºä»åœ¨è¿è¡Œæ—¶ï¼‰ä»¥ä¿æŒåƒåœ¾æ”¶é›†æš‚åœè¾ƒçŸ­ã€‚å®ƒä¸“ä¸ºå…·æœ‰ä¸­å‹åˆ°å¤§å‹æ•°æ®é›†çš„åº”ç”¨ç¨‹åºè€Œè®¾è®¡ï¼Œå…¶ä¸­å“åº”æ—¶é—´æ¯”æ€»ååé‡æ›´é‡è¦ï¼Œå› ä¸ºç”¨äºæœ€å°åŒ–æš‚åœçš„æŠ€æœ¯ä¼šé™ä½åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚Java HotSpot VMæä¾›äº†ä¸¤ä¸ªä¸»è¦å¹¶å‘æ”¶é›†å™¨ä¹‹é—´çš„é€‰æ‹©ï¼›è¯·å‚é˜…<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/concurrent.html#mostly_concurrent">ä¸»è¦çš„å¹¶å‘æ”¶é›†å™¨</a>ã€‚ä½¿ç”¨è¯¥é€‰é¡¹-XX:+UseConcMarkSweepGCå¯ç”¨CMSæ”¶é›†å™¨æˆ–-XX:+UseG1GCå¯ç”¨G1æ”¶é›†å™¨ã€‚</li></ul><h1 id="é€‰æ‹©åƒåœ¾æ”¶é›†å™¨"><a href="#é€‰æ‹©åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="é€‰æ‹©åƒåœ¾æ”¶é›†å™¨"></a>é€‰æ‹©åƒåœ¾æ”¶é›†å™¨</h1><p>é™¤éæ‚¨çš„åº”ç”¨ç¨‹åºå¯¹æš‚åœæ—¶é—´æœ‰ç›¸å½“ä¸¥æ ¼çš„è¦æ±‚ï¼Œå¦åˆ™é¦–å…ˆè¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åºå¹¶å…è®¸VMé€‰æ‹©åƒåœ¾æ”¶é›†å™¨ã€‚å¦‚æœ‰å¿…è¦ï¼Œè°ƒæ•´å †å¤§å°ä»¥æé«˜æ€§èƒ½ã€‚å¦‚æœæ€§èƒ½ä»ä¸èƒ½æ»¡è¶³æ‚¨çš„ç›®æ ‡ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æŒ‡å—ä½œä¸ºé€‰æ‹©æ”¶é›†å™¨çš„èµ·ç‚¹ã€‚</p><ul><li>å¦‚æœåº”ç”¨ç¨‹åºçš„æ•°æ®é›†å¾ˆå°ï¼ˆæœ€å¤šå¤§çº¦100MBï¼‰ï¼Œåˆ™ä½¿ç”¨-XX:+UseSerialGCé€‰é¡¹é€‰æ‹©ä¸²è¡Œæ”¶é›†å™¨ã€‚</li><li>å¦‚æœåº”ç”¨ç¨‹åºå°†åœ¨å•ä¸ªå¤„ç†å™¨ä¸Šè¿è¡Œå¹¶ä¸”æ²¡æœ‰æš‚åœæ—¶é—´è¦æ±‚ï¼Œé‚£ä¹ˆè®©VMé€‰æ‹©æ”¶é›†å™¨ï¼Œæˆ–è€…ä½¿ç”¨-XX:+UseSerialGCé€‰é¡¹é€‰æ‹©ä¸²è¡Œæ”¶é›†å™¨ã€‚</li><li>å¦‚æœåŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ç‚¹ï¼Œé‚£ä¹ˆè®©VMé€‰æ‹©æ”¶é›†å™¨ï¼Œæˆ–è€…ä½¿ç”¨-XX:+UseParallelGCé€‰é¡¹é€‰æ‹©å¹¶è¡Œæ”¶é›†å™¨ã€‚<ul><li>ä½¿åº”ç”¨ç¨‹åºè¾¾åˆ°æœ€é«˜çš„æ€§èƒ½æ˜¯ç¬¬ä¸€ä¼˜å…ˆçº§</li><li>æ²¡æœ‰æš‚åœæ—¶é—´è¦æ±‚æˆ–1ç§’åŠæ›´é•¿çš„æš‚åœæ˜¯å¯ä»¥æ¥å—çš„</li></ul></li><li>å¦‚æœå“åº”æ—¶é—´æ¯”æ€»ååé‡æ›´é‡è¦å¹¶ä¸”åƒåœ¾æ”¶é›†æš‚åœå¿…é¡»ä¿æŒçŸ­äºå¤§çº¦1ç§’ï¼Œåˆ™ä½¿ç”¨-XX:+UseConcMarkSweepGCæˆ–-XX:+UseG1GCé€‰é¡¹é€‰æ‹©å¹¶å‘æ”¶é›†å™¨ã€‚</li></ul><p>è¿™äº›æŒ‡å—ä»…æä¾›äº†é€‰æ‹©æ”¶é›†å™¨çš„èµ·ç‚¹ï¼Œå› ä¸ºæ€§èƒ½å–å†³äºå †çš„å¤§å°ã€åº”ç”¨ç¨‹åºç»´æŠ¤çš„å®æ—¶æ•°æ®é‡ä»¥åŠå¯ç”¨å¤„ç†å™¨çš„æ•°é‡å’Œé€Ÿåº¦ã€‚æš‚åœæ—¶é—´å¯¹è¿™äº›å› ç´ ç‰¹åˆ«æ•æ„Ÿï¼Œå› æ­¤å‰é¢æåˆ°çš„1ç§’é˜ˆå€¼åªæ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼šå¹¶è¡Œæ”¶é›†å™¨åœ¨å¾ˆå¤šæ•°æ®å¤§å°å’Œç¡¬ä»¶ç»„åˆä¸Šä¼šé‡åˆ°è¶…è¿‡1ç§’çš„æš‚åœæ—¶é—´ï¼›ç›¸åï¼Œå¹¶å‘æ”¶é›†å™¨å¯èƒ½æ— æ³•åœ¨æŸäº›ç¡¬ä»¶ç»„åˆä¸Šä¿æŒçŸ­äº1ç§’çš„æš‚åœã€‚</p><p>å¦‚æœæ¨èçš„æ”¶é›†å™¨æ²¡æœ‰è¾¾åˆ°æ‰€éœ€çš„æ€§èƒ½ï¼Œé¦–å…ˆå°è¯•è°ƒæ•´å †å’Œä»£å¤§å°ä»¥æ»¡è¶³æ‰€éœ€çš„ç›®æ ‡ã€‚å¦‚æœæ€§èƒ½ä»ç„¶ä¸è¶³ï¼Œåˆ™å°è¯•ä¸åŒçš„æ”¶é›†å™¨ï¼šä½¿ç”¨å¹¶å‘æ”¶é›†å™¨å‡å°‘æš‚åœæ—¶é—´å¹¶ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨å¢åŠ å¤šå¤„ç†å™¨ç¡¬ä»¶ä¸Šçš„æ€»ä½“ååé‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JVM </tag>
            
            <tag> åƒåœ¾å›æ”¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java.lang.AssertionError: Output column number expected to be 0 when isRepeating</title>
      <link href="/2021/08/25/java-lang-AssertionError-Output-column-number-expected-to-be-0-when-isRepeating/"/>
      <url>/2021/08/25/java-lang-AssertionError-Output-column-number-expected-to-be-0-when-isRepeating/</url>
      
        <content type="html"><![CDATA[<p>å®Œæ•´å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line">2021-08-25 14:37:24,329 [INFO] [Dispatcher thread &#123;Central&#125;] |HistoryEventHandler.criticalEvents|: [HISTORY][DAG:dag_1612602874723_344108_1][Event:TASK_ATTEMPT_FINISHED]: vertexName=Map 1, taskAttemptId=attempt_1612602874723_344108_1_00_000004_0, creationTime=1629873439340, allocationTime=1629873440827, startTime=1629873442059, finishTime=1629873444322, timeTaken=2263, status=FAILED, taskFailureType=FATAL, errorEnum=APPLICATION_ERROR, diagnostics=Error: Error while running task ( failure ) : java.lang.RuntimeException: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:101)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.pushRecord(MapRecordSource.java:76)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.run(MapRecordProcessor.java:419)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:267)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:250)</span><br><span class="line">at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:381)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:82)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:69)</span><br><span class="line">at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">at javax.security.auth.Subject.doAs(Subject.java:422)</span><br><span class="line">at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1762)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:69)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:39)</span><br><span class="line">at org.apache.tez.common.CallableWithNdc.call(CallableWithNdc.java:36)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)</span><br><span class="line">at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Caused by: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.BytesColumnVector.setElement(BytesColumnVector.java:492)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorUDFMapIndexBaseScalar.evaluate(VectorUDFMapIndexBaseScalar.java:84)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorCoalesce.evaluate(VectorCoalesce.java:60)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.gen.FilterStringGroupColNotEqualStringGroupScalarBase.evaluate(FilterStringGroupColNotEqualStringGroupScalarBase.java:64)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.FilterExprAndExpr.evaluate(FilterExprAndExpr.java:42)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorFilterOperator.process(VectorFilterOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.vectorForward(Operator.java:966)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:939)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.deliverVectorizedRowBatch(VectorMapOperator.java:812)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.process(VectorMapOperator.java:845)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:92)</span><br><span class="line">... 19 more</span><br><span class="line">, errorMessage=Cannot recover from this error:java.lang.RuntimeException: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:101)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.pushRecord(MapRecordSource.java:76)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.run(MapRecordProcessor.java:419)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:267)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:250)</span><br><span class="line">at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:381)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:82)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:69)</span><br><span class="line">at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">at javax.security.auth.Subject.doAs(Subject.java:422)</span><br><span class="line">at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1762)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:69)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:39)</span><br><span class="line">at org.apache.tez.common.CallableWithNdc.call(CallableWithNdc.java:36)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)</span><br><span class="line">at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Caused by: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.BytesColumnVector.setElement(BytesColumnVector.java:492)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorUDFMapIndexBaseScalar.evaluate(VectorUDFMapIndexBaseScalar.java:84)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorCoalesce.evaluate(VectorCoalesce.java:60)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.gen.FilterStringGroupColNotEqualStringGroupScalarBase.evaluate(FilterStringGroupColNotEqualStringGroupScalarBase.java:64)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.FilterExprAndExpr.evaluate(FilterExprAndExpr.java:42)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorFilterOperator.process(VectorFilterOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.vectorForward(Operator.java:966)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:939)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.deliverVectorizedRowBatch(VectorMapOperator.java:812)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.process(VectorMapOperator.java:845)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:92)</span><br><span class="line">... 19 more</span><br><span class="line">, nodeHttpAddress=datanode143-ysten3:8042, counters=Counters: 15, File System Counters, HDFS_BYTES_READ=216088, HDFS_BYTES_WRITTEN=3, HDFS_READ_OPS=3, HDFS_LARGE_READ_OPS=0, HDFS_WRITE_OPS=1, org.apache.tez.common.counters.TaskCounter, GC_TIME_MILLIS=136, CPU_MILLISECONDS=7620, WALL_CLOCK_MILLISECONDS=2160, PHYSICAL_MEMORY_BYTES=1120403456, VIRTUAL_MEMORY_BYTES=3798720512, COMMITTED_HEAP_BYTES=1120403456, INPUT_RECORDS_PROCESSED=26, INPUT_SPLIT_LENGTH_BYTES=10128027, OUTPUT_RECORDS=0, HIVE, CREATED_FILES=1</span><br><span class="line">2021-08-25 14:37:24,332 [INFO] [Dispatcher thread &#123;Central&#125;] |impl.TaskImpl|: Failing task: task_1612602874723_344108_1_00_000004 due to FATAL error reported by TaskAttempt. CurrentFailedAttempts=1</span><br><span class="line">2021-08-25 14:37:24,334 [INFO] [Dispatcher thread &#123;Central&#125;] |HistoryEventHandler.criticalEvents|: [HISTORY][DAG:dag_1612602874723_344108_1][Event:TASK_FINISHED]: vertexName=Map 1, taskId=task_1612602874723_344108_1_00_000004, startTime=1629873442059, finishTime=1629873444333, timeTaken=2274, status=FAILED, successfulAttemptID=null, diagnostics=TaskAttempt 0 failed, info=[Error: Error while running task ( failure ) : java.lang.RuntimeException: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:101)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.pushRecord(MapRecordSource.java:76)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.run(MapRecordProcessor.java:419)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:267)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:250)</span><br><span class="line">at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:381)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:82)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:69)</span><br><span class="line">at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">at javax.security.auth.Subject.doAs(Subject.java:422)</span><br><span class="line">at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1762)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:69)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:39)</span><br><span class="line">at org.apache.tez.common.CallableWithNdc.call(CallableWithNdc.java:36)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)</span><br><span class="line">at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Caused by: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.BytesColumnVector.setElement(BytesColumnVector.java:492)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorUDFMapIndexBaseScalar.evaluate(VectorUDFMapIndexBaseScalar.java:84)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorCoalesce.evaluate(VectorCoalesce.java:60)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.gen.FilterStringGroupColNotEqualStringGroupScalarBase.evaluate(FilterStringGroupColNotEqualStringGroupScalarBase.java:64)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.FilterExprAndExpr.evaluate(FilterExprAndExpr.java:42)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorFilterOperator.process(VectorFilterOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.vectorForward(Operator.java:966)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:939)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.deliverVectorizedRowBatch(VectorMapOperator.java:812)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.process(VectorMapOperator.java:845)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:92)</span><br><span class="line">... 19 more</span><br><span class="line">, errorMessage=Cannot recover from this error:java.lang.RuntimeException: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:101)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.pushRecord(MapRecordSource.java:76)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.run(MapRecordProcessor.java:419)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:267)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:250)</span><br><span class="line">at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:381)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:82)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable$1.run(TaskRunner2Callable.java:69)</span><br><span class="line">at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">at javax.security.auth.Subject.doAs(Subject.java:422)</span><br><span class="line">at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1762)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:69)</span><br><span class="line">at org.apache.tez.runtime.task.TaskRunner2Callable.callInternal(TaskRunner2Callable.java:39)</span><br><span class="line">at org.apache.tez.common.CallableWithNdc.call(CallableWithNdc.java:36)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)</span><br><span class="line">at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)</span><br><span class="line">at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Caused by: java.lang.AssertionError: Output column number expected to be 0 when isRepeating</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.BytesColumnVector.setElement(BytesColumnVector.java:492)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorUDFMapIndexBaseScalar.evaluate(VectorUDFMapIndexBaseScalar.java:84)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorCoalesce.evaluate(VectorCoalesce.java:60)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.VectorExpression.evaluateChildren(VectorExpression.java:271)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.gen.FilterStringGroupColNotEqualStringGroupScalarBase.evaluate(FilterStringGroupColNotEqualStringGroupScalarBase.java:64)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.expressions.FilterExprAndExpr.evaluate(FilterExprAndExpr.java:42)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorFilterOperator.process(VectorFilterOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.vectorForward(Operator.java:966)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:939)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:125)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.deliverVectorizedRowBatch(VectorMapOperator.java:812)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.process(VectorMapOperator.java:845)</span><br><span class="line">at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:92)</span><br><span class="line">... 19 more</span><br><span class="line">], counters=Counters: 0</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯åœ¨hive-site.xmlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.vectorized.execution.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://issues.apache.org/jira/browse/HIVE-20990?jql=project%20=%20HIVE%20AND%20component%20=%20Vectorization">https://issues.apache.org/jira/browse/HIVE-20990?jql=project%20%3D%20HIVE%20AND%20component%20%3D%20Vectorization</a></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®ä»“åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
            <tag> æ•°æ®ä»“åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tez 0.10.1å®‰è£…</title>
      <link href="/2021/08/18/Tez-0-10-1%E5%AE%89%E8%A3%85/"/>
      <url>/2021/08/18/Tez-0-10-1%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>å…·ä½“å®‰è£…æ­¥éª¤å‚ç…§å®˜ç½‘å®‰è£…æ‰‹å†Œå³å¯ã€‚æ­¤å¤„åªå¯¹å®˜ç½‘æ‰‹å†Œè¿›è¡Œè¡¥å……ã€‚</p><p>ä»å®˜ç½‘ä¸‹è½½apache-tez-0.10.1-bin.tar.gzè¿›è¡Œå®‰è£…æœªæˆåŠŸï¼Œå‡ºç°ä¸‹é¢çš„å¼‚å¸¸ã€‚æœ€ç»ˆæŒ‰ç…§å®˜ç½‘æºä»£ç ç¼–è¯‘çš„æ–¹å¼å®‰è£…æµ‹è¯•æˆåŠŸã€‚</p><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul><li>Hadoop 3.2.2</li><li>Tez 0.10.1</li></ul><h1 id="äºŒè¿›åˆ¶åŒ…å®‰è£…å¼‚å¸¸"><a href="#äºŒè¿›åˆ¶åŒ…å®‰è£…å¼‚å¸¸" class="headerlink" title="äºŒè¿›åˆ¶åŒ…å®‰è£…å¼‚å¸¸"></a>äºŒè¿›åˆ¶åŒ…å®‰è£…å¼‚å¸¸</h1><ul><li>å¼‚å¸¸1ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">2021-08-18 18:51:15,362 [INFO] [main] |service.AbstractService|: Service org.apache.tez.dag.app.DAGAppMaster failed in state STARTED</span><br><span class="line">org.apache.hadoop.service.ServiceStateException: java.lang.NoClassDefFoundError: org/eclipse/jetty/servlet/ServletContextHandler</span><br><span class="line">  at org.apache.hadoop.service.ServiceStateException.convert(ServiceStateException.java:105)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.startServices(DAGAppMaster.java:1879)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.serviceStart(DAGAppMaster.java:1943)</span><br><span class="line">  at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster$9.run(DAGAppMaster.java:2626)</span><br><span class="line">  at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">  at javax.security.auth.Subject.doAs(Subject.java:422)</span><br><span class="line">  at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1762)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.initAndStartAppMaster(DAGAppMaster.java:2622)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.main(DAGAppMaster.java:2409)</span><br><span class="line">Caused by: java.lang.NoClassDefFoundError: org/eclipse/jetty/servlet/ServletContextHandler</span><br><span class="line">  at org.apache.hadoop.yarn.webapp.WebApps.$for(WebApps.java:515)</span><br><span class="line">  at org.apache.hadoop.yarn.webapp.WebApps.$for(WebApps.java:521)</span><br><span class="line">  at org.apache.hadoop.yarn.webapp.WebApps.$for(WebApps.java:526)</span><br><span class="line">  at org.apache.tez.dag.app.web.WebUIService.serviceStart(WebUIService.java:92)</span><br><span class="line">  at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster$ServiceWithDependency.start(DAGAppMaster.java:1800)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster$ServiceThread.run(DAGAppMaster.java:1821)</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.servlet.ServletContextHandler</span><br><span class="line">  at java.net.URLClassLoader.findClass(URLClassLoader.java:381)</span><br><span class="line">  at java.lang.ClassLoader.loadClass(ClassLoader.java:424)</span><br><span class="line">  at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)</span><br><span class="line">  at java.lang.ClassLoader.loadClass(ClassLoader.java:357)</span><br><span class="line">  ... 7 more</span><br></pre></td></tr></table></figure><ul><li>å¼‚å¸¸2ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">2021-08-18 16:18:36,244 [INFO] [main] |service.AbstractService|: Service org.apache.tez.dag.app.DAGAppMaster failed in state STARTED</span><br><span class="line">org.apache.hadoop.service.ServiceStateException: java.lang.NoSuchMethodError: org.eclipse.jetty.server.session.SessionHandler.getSessionManager()Lorg/eclipse/jetty/server/SessionManager;</span><br><span class="line">  at org.apache.hadoop.service.ServiceStateException.convert(ServiceStateException.java:105)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.startServices(DAGAppMaster.java:1879)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.serviceStart(DAGAppMaster.java:1943)</span><br><span class="line">  at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster$9.run(DAGAppMaster.java:2626)</span><br><span class="line">  at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">  at javax.security.auth.Subject.doAs(Subject.java:422)</span><br><span class="line">  at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.initAndStartAppMaster(DAGAppMaster.java:2622)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster.main(DAGAppMaster.java:2409)</span><br><span class="line">Caused by: java.lang.NoSuchMethodError: org.eclipse.jetty.server.session.SessionHandler.getSessionManager()Lorg/eclipse/jetty/server/SessionManager;</span><br><span class="line">  at org.apache.hadoop.http.HttpServer2.initializeWebServer(HttpServer2.java:569)</span><br><span class="line">  at org.apache.hadoop.http.HttpServer2.&lt;init&gt;(HttpServer2.java:550)</span><br><span class="line">  at org.apache.hadoop.http.HttpServer2.&lt;init&gt;(HttpServer2.java:117)</span><br><span class="line">  at org.apache.hadoop.http.HttpServer2$Builder.build(HttpServer2.java:425)</span><br><span class="line">  at org.apache.hadoop.yarn.webapp.WebApps$Builder.build(WebApps.java:341)</span><br><span class="line">  at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:432)</span><br><span class="line">  at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:428)</span><br><span class="line">  at org.apache.tez.dag.app.web.WebUIService.serviceStart(WebUIService.java:94)</span><br><span class="line">  at org.apache.hadoop.service.AbstractService.start(AbstractService.java:194)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster$ServiceWithDependency.start(DAGAppMaster.java:1800)</span><br><span class="line">  at org.apache.tez.dag.app.DAGAppMaster$ServiceThread.run(DAGAppMaster.java:1821)</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…è¯´æ˜"><a href="#å®‰è£…è¯´æ˜" class="headerlink" title="å®‰è£…è¯´æ˜"></a>å®‰è£…è¯´æ˜</h1><h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><p>ä¿®æ”¹ä»¥ä¸‹é…ç½®ä¸ä½¿ç”¨çš„Hadoopç‰ˆæœ¬ä¸€è‡´ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hadoop.version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">hadoop.version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä»¥ä¸‹é…ç½®ä¸<code>$&#123;HADOOP_HOME&#125;/share/hadoop/common/lib/guava-27.0-jre.jar</code>ç‰ˆæœ¬ä¸€è‡´ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">guava.version</span>&gt;</span>27.0-jre<span class="tag">&lt;/<span class="name">guava.version</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tez-site-xml"><a href="#tez-site-xml" class="headerlink" title="tez-site.xml"></a>tez-site.xml</h2><p>éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p><ul><li>ä¸å®˜ç½‘ä¸åŒï¼Œ<code>tez.use.cluster.hadoop-libs</code>é…ç½®ä¸ºtrueã€‚</li><li>è¯¥é…ç½®æ–‡ä»¶éœ€è¦åˆ†å‘åˆ°Hadoopé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ä½ç½®ï¼š<code>$&#123;HADOOP_HOME&#125;/etc/hadoop</code>ç›®å½•ä¸‹ã€‚</li></ul><p>å®Œæ•´å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> standalone=<span class="string">&quot;no&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>tez.lib.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>$&#123;fs.defaultFS&#125;/lib/tez/tez-0.10.1.tar.gz<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>string<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>tez.use.cluster.hadoop-libs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> å¸¸ç”¨ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Tez </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pentaho-aggdesigner-algorithm-5.1.5-jhyde.jar</title>
      <link href="/2021/08/17/pentaho-aggdesigner-algorithm-5-1-5-jhyde-jar/"/>
      <url>/2021/08/17/pentaho-aggdesigner-algorithm-5-1-5-jhyde-jar/</url>
      
        <content type="html"><![CDATA[<p>Mavenç¼–è¯‘æ—¶æ— æ³•è‡ªåŠ¨ä¸‹è½½<a href="/images/202502/pentaho-aggdesigner-algorithm-5.1.5-jhyde.jar">pentaho-aggdesigner-algorithm-5.1.5-jhyde.jar</a>ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½å¹¶å®‰è£…åˆ°æœ¬åœ°ä»“åº“ã€‚å®‰è£…å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn install:install-file -Dfile=./pentaho-aggdesigner-algorithm-5.1.5-jhyde.jar -DgroupId=org.pentaho -DartifactId=pentaho-aggdesigner-algorithm -Dversion=5.1.5-jhyde -Dpackaging=jar</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹åŸºäºrootæŒ‡å®šç”¨æˆ·æ‰§è¡Œå‘½ä»¤çš„æ–¹æ³•</title>
      <link href="/2021/08/16/Linux%E4%B8%8B%E5%9F%BA%E4%BA%8Eroot%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E7%9A%84%E6%96%B9%E6%B3%95/"/>
      <url>/2021/08/16/Linux%E4%B8%8B%E5%9F%BA%E4%BA%8Eroot%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>Dockeråœ¨æ„å»ºé•œåƒé˜¶æ®µæ— æ³•é…ç½®å…å¯†ç sudoã€‚ä½†æ˜¯åœ¨å®é™…éœ€æ±‚åœºæ™¯ä¸­ä¼šé‡åˆ°éœ€è¦ä½¿ç”¨sudoçš„åœºæ™¯ã€‚æ‰€ä»¥ï¼Œæˆ‘çš„è§£å†³æ€è·¯æ˜¯é•œåƒæ„å»ºåŠCMDä½¿ç”¨rootï¼Œåœ¨CMDçš„è„šæœ¬ä¸­æ‰§è¡Œéœ€è¦sudoçš„éƒ¨åˆ†ï¼Œç„¶åä½¿ç”¨æ™®é€šç”¨æˆ·å¯åŠ¨æœåŠ¡è¿›ç¨‹ã€‚</p><p>å½“ç„¶ï¼ŒåŸºäºrootä½¿ç”¨æ™®é€šç”¨æˆ·å¯åŠ¨è¿›ç¨‹å¯ä»¥é€‰æ‹©suæˆ–è€…runuserã€‚æˆ‘ä½¿ç”¨çš„æ˜¯suï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">cd `dirname $0`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;RANGER_HOME&#125;/enable-hive-plugin.sh</span></span><br><span class="line">if [ $? -ne 0 ];then</span><br><span class="line">    echo &quot;å¯ç”¨ranger pluginé”™è¯¯ï¼&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">su -mp -c &#x27;/opt/hive/bin/hiveserver2&#x27; hive</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<code>-mp</code>æ˜¯ä¿ç•™rootè®¾ç½®çš„ç¯å¢ƒå˜é‡ã€‚å¦‚æœä¸éœ€è¦ä¿ç•™è¿™äº›å˜é‡åˆ™å¯ä»¥ä½¿ç”¨<code>-l</code>é€‰é¡¹ã€‚ä½¿ç”¨manå‘½ä»¤æŸ¥çœ‹suå®Œæ•´çš„æ‰‹å†Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduceè¿œç¨‹è°ƒè¯•</title>
      <link href="/2021/08/05/MapReduce%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"/>
      <url>/2021/08/05/MapReduce%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>MRçš„è¿œç¨‹è°ƒè¯•åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li>MapReduce Taskè¿œç¨‹è°ƒè¯•</li><li>AMï¼ˆApplication Masterï¼‰è¿œç¨‹è°ƒè¯•</li></ul><h1 id="MapReduce-Taskè¿œç¨‹è°ƒè¯•"><a href="#MapReduce-Taskè¿œç¨‹è°ƒè¯•" class="headerlink" title="MapReduce Taskè¿œç¨‹è°ƒè¯•"></a>MapReduce Taskè¿œç¨‹è°ƒè¯•</h1><h2 id="Map-Taskè¿œç¨‹è°ƒè¯•"><a href="#Map-Taskè¿œç¨‹è°ƒè¯•" class="headerlink" title="Map Taskè¿œç¨‹è°ƒè¯•"></a>Map Taskè¿œç¨‹è°ƒè¯•</h2><p>ä¿®æ”¹<code>mapred-site.xml</code>ä¸­çš„é…ç½®é¡¹ï¼š</p><ul><li>mapreduce.map.java.optsï¼šMap Task JVMå‚æ•°è®¾ç½®ã€‚æ­¤å¤„è®¾ç½®ä¸ºï¼š-Xdebug -Xrunjdwp:transport&#x3D;dt_socket,address&#x3D;9091,server&#x3D;y,suspend&#x3D;yã€‚</li><li>mapreduce.map.maxattemptsï¼šMap Taskå¤±è´¥é‡è¯•çš„æœ€å¤§æ¬¡æ•°ã€‚æ­¤å¤„è®¾ç½®ä¸º1ã€‚</li><li>mapreduce.task.timeoutï¼šä¸€ä¸ªTaskæ—¢æ²¡æœ‰è¯»å†™æ•°æ®ä¹Ÿæ²¡æœ‰çŠ¶æ€å˜åŒ–å¯æŒç»­çš„æ¯«ç§’æ•°ã€‚é»˜è®¤ä¸º600000æ¯«ç§’ï¼Œè®¾ç½®ä¸º0ç¦ç”¨è¶…æ—¶ã€‚è¿œç¨‹è°ƒè¯•æ—¶é€šå¸¸éœ€è¦æŒç»­çš„æ—¶é—´æ¯”è¾ƒä¹…ï¼Œæ‰€ä»¥æ­¤å¤„è®¾ç½®ä¸º0ã€‚</li></ul><h2 id="Reduce-Taskè¿œç¨‹è°ƒè¯•"><a href="#Reduce-Taskè¿œç¨‹è°ƒè¯•" class="headerlink" title="Reduce Taskè¿œç¨‹è°ƒè¯•"></a>Reduce Taskè¿œç¨‹è°ƒè¯•</h2><p>ä¿®æ”¹mapred-site.xmlä¸­çš„é…ç½®é¡¹ï¼š</p><ul><li>mapreduce.reduce.java.optsï¼šMap Task JVMå‚æ•°è®¾ç½®ã€‚æ­¤å¤„è®¾ç½®ä¸ºï¼š-Xdebug -Xrunjdwp:transport&#x3D;dt_socket,address&#x3D;9091,server&#x3D;y,suspend&#x3D;yã€‚</li><li>mapreduce.reduce.maxattemptsï¼šMap Taskå¤±è´¥é‡è¯•çš„æœ€å¤§æ¬¡æ•°ã€‚æ­¤å¤„è®¾ç½®ä¸º1ã€‚</li><li>mapreduce.task.timeoutï¼šä¸€ä¸ªTaskæ—¢æ²¡æœ‰è¯»å†™æ•°æ®ä¹Ÿæ²¡æœ‰çŠ¶æ€å˜åŒ–å¯æŒç»­çš„æ¯«ç§’æ•°ã€‚é»˜è®¤ä¸º600000æ¯«ç§’ï¼Œè®¾ç½®ä¸º0ç¦ç”¨è¶…æ—¶ã€‚è¿œç¨‹è°ƒè¯•æ—¶é€šå¸¸éœ€è¦æŒç»­çš„æ—¶é—´æ¯”è¾ƒä¹…ï¼Œæ‰€ä»¥æ­¤å¤„è®¾ç½®ä¸º0ã€‚</li></ul><h2 id="virtual-memoryé”™è¯¯"><a href="#virtual-memoryé”™è¯¯" class="headerlink" title="virtual memoryé”™è¯¯"></a>virtual memoryé”™è¯¯</h2><p>åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>AMç®¡ç†è¿›ç¨‹virtual memory beyondé”™è¯¯</li><li>Task Container virtual memory beyondé”™è¯¯</li></ul><h3 id="AM"><a href="#AM" class="headerlink" title="AM"></a>AM</h3><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">21/08/09 16:38:37 INFO mapreduce.Job: Job job_1593052953461_29983110 failed with state FAILED due to: Application application_1593052953461_29983110 failed 2 times due to AM Container for appattempt_1593052953461_29983110_000002 exited with  exitCode: -103</span><br><span class="line">For more detailed output, check application tracking page:http://ycluster-resourcemanager1:50030/cluster/app/application_1593052953461_29983110Then, click on links to logs of each attempt.</span><br><span class="line">Diagnostics: Container [pid=4359,containerID=container_e32_1593052953461_29983110_02_000001] is running beyond virtual memory limits. Current usage: 121.7 MB of 2 GB physical memory used; 16.4 GB of 6.2 GB virtual memory used. Killing container.</span><br><span class="line">Dump of the process-tree for container_e32_1593052953461_29983110_02_000001 :</span><br><span class="line">|- PID PPID PGRPID SESSID CMD_NAME USER_MODE_TIME(MILLIS) SYSTEM_TIME(MILLIS) VMEM_USAGE(BYTES) RSSMEM_USAGE(PAGES) FULL_CMD_LINE</span><br><span class="line">|- 4598 4359 4359 4359 (java) 232 18 17444765696 30784 /opt/java/bin/java -Djava.io.tmpdir=/data5/hadoop/yarn/data/usercache/data-platform/appcache/application_1593052953461_29983110/container_e32_1593052953461_29983110_02_000001/tmp -Dlog4j.configuration=container-log4j.properties -Dyarn.app.container.log.dir=/data1/hadoop/yarn/log/application_1593052953461_29983110/container_e32_1593052953461_29983110_02_000001 -Dyarn.app.container.log.filesize=0 -Dhadoop.root.logger=INFO,CLA -Dhadoop.root.logfile=syslog -Xmx14336m org.apache.hadoop.mapreduce.v2.app.MRAppMaster </span><br><span class="line">|- 4359 4355 4359 4359 (bash) 3 3 115908608 359 /bin/bash -c /opt/java/bin/java -Djava.io.tmpdir=/data5/hadoop/yarn/data/usercache/data-platform/appcache/application_1593052953461_29983110/container_e32_1593052953461_29983110_02_000001/tmp -Dlog4j.configuration=container-log4j.properties -Dyarn.app.container.log.dir=/data1/hadoop/yarn/log/application_1593052953461_29983110/container_e32_1593052953461_29983110_02_000001 -Dyarn.app.container.log.filesize=0 -Dhadoop.root.logger=INFO,CLA -Dhadoop.root.logfile=syslog  -Xmx14336m org.apache.hadoop.mapreduce.v2.app.MRAppMaster 1&gt;/data1/hadoop/yarn/log/application_1593052953461_29983110/container_e32_1593052953461_29983110_02_000001/stdout 2&gt;/data1/hadoop/yarn/log/application_1593052953461_29983110/container_e32_1593052953461_29983110_02_000001/stderr  </span><br><span class="line"></span><br><span class="line">Container killed on request. Exit code is 143</span><br><span class="line">Container exited with a non-zero exit code 143</span><br><span class="line">Failing this attempt. Failing the application.</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>yarn-site.xml</code>ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.resource.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>14336<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Task-Container"><a href="#Task-Container" class="headerlink" title="Task Container"></a>Task Container</h3><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2021-08-09 16:45:28,899 INFO [AsyncDispatcher event handler] org.apache.hadoop.mapreduce.v2.app.job.impl.TaskAttemptImpl: Diagnostics report from attempt_1593052953461_29983142_m_000000_0: Container [pid=188730,containerID=container_e32_1593052953461_29983142_01_000002] is running beyond virtual memory limits. Current usage: 25.3 MB of 4 GB physical memory used; 32.9 GB of 12.4 GB virtual memory used. Killing container.</span><br><span class="line">Dump of the process-tree for container_e32_1593052953461_29983142_01_000002 :</span><br><span class="line">|- PID PPID PGRPID SESSID CMD_NAME USER_MODE_TIME(MILLIS) SYSTEM_TIME(MILLIS) VMEM_USAGE(BYTES) RSSMEM_USAGE(PAGES) FULL_CMD_LINE</span><br><span class="line">|- 188965 188730 188730 188730 (java) 8 2 35216101376 6116 /opt/java/bin/java -Djava.net.preferIPv4Stack=true -Dhadoop.metrics.log.level=WARN -Xdebug -Xrunjdwp:transport=dt_socket,address=9091,server=y,suspend=y -Djava.io.tmpdir=/data0/hadoop/yarn/data/usercache/data-platform/appcache/application_1593052953461_29983142/container_e32_1593052953461_29983142_01_000002/tmp -Dlog4j.configuration=container-log4j.properties -Dyarn.app.container.log.dir=/data3/hadoop/yarn/log/application_1593052953461_29983142/container_e32_1593052953461_29983142_01_000002 -Dyarn.app.container.log.filesize=0 -Dhadoop.root.logger=INFO,CLA -Dhadoop.root.logfile=syslog org.apache.hadoop.mapred.YarnChild 192.168.72.33 32492 attempt_1593052953461_29983142_m_000000_0 35184372088834 </span><br><span class="line">|- 188730 188728 188730 188730 (bash) 2 4 115855360 358 /bin/bash -c /opt/java/bin/java -Djava.net.preferIPv4Stack=true -Dhadoop.metrics.log.level=WARN  -Xdebug -Xrunjdwp:transport=dt_socket,address=9091,server=y,suspend=y -Djava.io.tmpdir=/data0/hadoop/yarn/data/usercache/data-platform/appcache/application_1593052953461_29983142/container_e32_1593052953461_29983142_01_000002/tmp -Dlog4j.configuration=container-log4j.properties -Dyarn.app.container.log.dir=/data3/hadoop/yarn/log/application_1593052953461_29983142/container_e32_1593052953461_29983142_01_000002 -Dyarn.app.container.log.filesize=0 -Dhadoop.root.logger=INFO,CLA -Dhadoop.root.logfile=syslog org.apache.hadoop.mapred.YarnChild 192.168.72.33 32492 attempt_1593052953461_29983142_m_000000_0 35184372088834 1&gt;/data3/hadoop/yarn/log/application_1593052953461_29983142/container_e32_1593052953461_29983142_01_000002/stdout 2&gt;/data3/hadoop/yarn/log/application_1593052953461_29983142/container_e32_1593052953461_29983142_01_000002/stderr  </span><br><span class="line"></span><br><span class="line">Container killed on request. Exit code is 143</span><br><span class="line">Container exited with a non-zero exit code 143</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>yarn-site.xml</code>ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.memory.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>14336<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.memory.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>14336<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ­¤å¤„æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç–‘é—®ï¼šä¸ºä»€ä¹ˆç‰©ç†å†…å­˜å ç”¨å¾ˆå°ï¼Œä½†è™šæ‹Ÿå†…å­˜å ç”¨ä¼šè¿™ä¹ˆå¤§ï¼Ÿè¿™ä¸ªé—®é¢˜ç›®å‰è¿˜æœªææ‡‚(&gt;ï¹&lt;)<br>é—®é¢˜è§£å†³çš„å…³é”®æ˜¯Containeråˆ†é…ç‰©ç†å†…å­˜çš„å€¼ä¹˜ä»¥â€œyarn.nodemanager.vmem-pmem-ratioâ€çš„å€¼å¤§äºå¼‚å¸¸ä¿¡æ¯ä¸­çš„æ•°æ®ï¼›å¦å¤–ä¸€ç§æ€è·¯æ˜¯ç¦ç”¨è™šæ‹Ÿå†…å­˜çš„æ£€æŸ¥ï¼Œè¿™ç§æ–¹æ³•æˆ‘æ²¡æœ‰å®é™…éªŒè¯ã€‚</p></blockquote><h2 id="å®šä½"><a href="#å®šä½" class="headerlink" title="å®šä½"></a>å®šä½</h2><p>æ‰“å¼€track urlåœ°å€ï¼ŒæŸ¥æ‰¾åˆ°Taskæ‰€åœ¨çš„æœåŠ¡å™¨ã€‚å¦‚ä¸‹ï¼š</p><p><img src="/images/202502/track-url.png" alt="track url"></p><p><img src="/images/202502/job-info.png" alt="job info"></p><p><img src="/images/202502/task-position.png" alt="task position"></p><h1 id="AMï¼ˆApplication-Masterï¼‰è¿œç¨‹è°ƒè¯•"><a href="#AMï¼ˆApplication-Masterï¼‰è¿œç¨‹è°ƒè¯•" class="headerlink" title="AMï¼ˆApplication Masterï¼‰è¿œç¨‹è°ƒè¯•"></a>AMï¼ˆApplication Masterï¼‰è¿œç¨‹è°ƒè¯•</h1><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä¿®æ”¹<code>mapred-site.xml</code>ä¸­çš„é…ç½®é¡¹ï¼š</p><ul><li>yarn.app.mapreduce.am.command-optsï¼šAM JVMå‚æ•°è®¾ç½®ã€‚å¯èƒ½å‡ºç°çš„virtual memoryå¼‚å¸¸è§£å†³æ–¹æ³•åŒä¸Šã€‚æ­¤å¤„è®¾ç½®ä¸ºï¼š-Xdebug -Xrunjdwp:transport&#x3D;dt_socket,address&#x3D;9091,server&#x3D;y,suspend&#x3D;yã€‚</li><li>mapreduce.am.max-attemptsï¼šApplicationé‡è¯•æ¬¡æ•°ã€‚æ­¤å¤„è®¾ç½®ä¸º1ã€‚</li></ul><h2 id="å®šä½-1"><a href="#å®šä½-1" class="headerlink" title="å®šä½"></a>å®šä½</h2><p>åœ¨ResourceManagerä¸Šæ ¹æ®æäº¤çš„Application IDæŸ¥æ‰¾AMæ‰€åœ¨çš„æœåŠ¡å™¨ã€‚å¦‚ä¸‹ï¼š</p><p><img src="/images/202502/yarn-apps.png" alt="ResourceManager"></p><p><img src="/images/202502/am.png" alt="AM"></p><h1 id="Eclipseé…ç½®"><a href="#Eclipseé…ç½®" class="headerlink" title="Eclipseé…ç½®"></a>Eclipseé…ç½®</h1><p>è¿œç¨‹è°ƒè¯•é…ç½®éƒ½ä¸€æ ·ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202502/eclipse.png" alt="Eclipseè¿œç¨‹è°ƒè¯•"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Java </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
            <tag> Eclipse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ranger 2.1.0 Adminå®‰è£…</title>
      <link href="/2021/07/02/Ranger-2-1-0-Admin%E5%AE%89%E8%A3%85/"/>
      <url>/2021/07/02/Ranger-2-1-0-Admin%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="Creating-MySQL-user-ranger2-failed"><a href="#Creating-MySQL-user-ranger2-failed" class="headerlink" title="Creating MySQL user ranger2 failed"></a>Creating MySQL user ranger2 failed</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2021-07-01 18:44:53,480  [E] Creating MySQL user ranger2 failed..</span><br><span class="line">2021-07-01 18:44:53,496  [E] DB schema setup failed! Please contact Administrator.</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯Rangerå®‰è£…ç¨‹åºé»˜è®¤ä¼šä½¿ç”¨MySQLçš„rootè´¦å·åˆ›å»ºæ‰€éœ€è¦çš„è´¦å·ï¼Œä¹Ÿå°±æ˜¯DBAè¿‡ç¨‹ã€‚å¦‚æœä¸éœ€è¦å®‰è£…ç¨‹åºè‡ªåŠ¨åˆ›å»ºï¼Œåˆ™å°†<code>install.properties</code>ä¸­çš„ä»¥ä¸‹é…ç½®å‰çš„#å·å»æ‰ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setup_mode=SeparateDBA</span><br></pre></td></tr></table></figure><h1 id="Specified-key-was-too-long-max-key-length-is-767-bytes"><a href="#Specified-key-was-too-long-max-key-length-is-767-bytes" class="headerlink" title="Specified key was too long; max key length is 767 bytes"></a>Specified key was too long; max key length is 767 bytes</h1><ul><li>ç¬¬ä¸€ç§æŠ¥é”™ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Error executing: CREATE TABLE `x_portal_user` (   `id` bigint(20) NOT NULL AUTO_INCREMENT,   `create_time` datetime DEFAULT NULL,   `update_time` datetime DEFAULT NULL,   `added_by_id` bigint(20) DEFAULT NULL,   `upd_by_id` bigint(20) DEFAULT NULL,   `first_name` varchar(1022) DEFAULT NULL,   `last_name` varchar(1022) DEFAULT NULL,   `pub_scr_name` varchar(2048) DEFAULT NULL,   `login_id` varchar(767) DEFAULT NULL,   `password` varchar(512) NOT NULL,   `email` varchar(512) DEFAULT NULL,   `status` int(11) NOT NULL DEFAULT &#x27;0&#x27;,   `user_src` int(11) NOT NULL DEFAULT &#x27;0&#x27;,   `notes` varchar(4000) DEFAULT NULL,   `other_attributes` varchar(4000) DEFAULT NULL,   PRIMARY KEY (`id`),   UNIQUE KEY `x_portal_user_UK_login_id` (`login_id`),   UNIQUE KEY `x_portal_user_UK_email` (`email`),   KEY `x_portal_user_FK_added_by_id` (`added_by_id`),   KEY `x_portal_user_FK_upd_by_id` (`upd_by_id`),   KEY `x_portal_user_cr_time` (`create_time`),   KEY `x_portal_user_up_time` (`update_time`),   KEY `x_portal_user_name` (`first_name`(767)),   KEY `x_portal_user_email` (`email`),   CONSTRAINT `x_portal_user_FK_added_by_id` FOREIGN KEY (`added_by_id`) REFERENCES `x_portal_user` (`id`),   CONSTRAINT `x_portal_user_FK_upd_by_id` FOREIGN KEY (`upd_by_id`) REFERENCES`x_portal_user` (`id`) ) ROW_FORMAT=DYNAMIC;</span><br><span class="line">java.sql.SQLSyntaxErrorException: Specified key was too long; max key length is 767 bytes</span><br><span class="line">SQLException : SQL state: 42000 java.sql.SQLSyntaxErrorException: Specified key was too long; max key length is 767 bytes ErrorCode: 1071</span><br><span class="line">2021-07-02 10:44:54,411  [E] ranger_core_db_mysql.sql file import failed!</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¯¹åº”å­—æ®µçš„é•¿åº¦å¯ä»¥è§£å†³ã€‚æ³¨æ„<code>UTF8</code>æ¯ä¸ªå­—ç¬¦4ä¸ªå­—èŠ‚ã€‚</p><ul><li>ç¬¬äºŒç§æŠ¥é”™ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Error executing: CREATE TABLE `x_portal_user` (   `id` bigint(20) NOT NULL AUTO_INCREMENT,   `create_time` datetime DEFAULT NULL,   `update_time` datetime DEFAULT NULL,   `added_by_id` bigint(20) DEFAULT NULL,   `upd_by_id` bigint(20) DEFAULT NULL,   `first_name` varchar(128) DEFAULT NULL,   `last_name` varchar(1022) DEFAULT NULL,   `pub_scr_name` varchar(2048) DEFAULT NULL,  `login_id` varchar(128) DEFAULT NULL,   `password` varchar(512) NOT NULL,   `email` varchar(128) DEFAULT NULL,   `status` int(11) NOT NULL DEFAULT &#x27;0&#x27;,   `user_src` int(11) NOT NULL DEFAULT &#x27;0&#x27;,   `notes` varchar(4000) DEFAULT NULL,   `other_attributes` varchar(4000) DEFAULT NULL,   PRIMARY KEY (`id`),   UNIQUE KEY `x_portal_user_UK_login_id` (`login_id`),   UNIQUE KEY `x_portal_user_UK_email` (`email`),   KEY `x_portal_user_FK_added_by_id` (`added_by_id`),   KEY `x_portal_user_FK_upd_by_id` (`upd_by_id`),   KEY `x_portal_user_cr_time` (`create_time`),   KEY `x_portal_user_up_time` (`update_time`),   KEY `x_portal_user_name` (`first_name`(767)),   KEY `x_portal_user_email` (`email`),   CONSTRAINT `x_portal_user_FK_added_by_id` FOREIGN KEY (`added_by_id`) REFERENCES `x_portal_user` (`id`),   CONSTRAINT `x_portal_user_FK_upd_by_id` FOREIGN KEY (`upd_by_id`) REFERENCES `x_portal_user` (`id`) ) ROW_FORMAT=DYNAMIC;</span><br><span class="line">java.sql.SQLException: Incorrect prefix key; the used key part isn&#x27;t a string, the used length is longer than the key part, or the storage engine doesn&#x27;t support unique prefix keys</span><br><span class="line">SQLException : SQL state: HY000 java.sql.SQLException: Incorrect prefix key; the used key part isn&#x27;t a string, the used length is longer than the key part, or the storage engine doesn&#x27;t support unique prefix keys ErrorCode: 1089</span><br><span class="line">2021-07-02 11:51:23,763  [E] ranger_core_db_mysql.sql file import failed!</span><br></pre></td></tr></table></figure><p>å»æ‰<code>prefix key</code>çš„å®šä¹‰å³å¯ã€‚</p><p>ä¿®æ”¹åçš„å»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `x_portal_user` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `create_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `update_time` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `added_by_id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `upd_by_id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `first_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `last_name` <span class="type">varchar</span>(<span class="number">1022</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `pub_scr_name` <span class="type">varchar</span>(<span class="number">2048</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `login_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">  `user_src` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">  `notes` <span class="type">varchar</span>(<span class="number">4000</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `other_attributes` <span class="type">varchar</span>(<span class="number">4000</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `x_portal_user_UK_login_id` (`login_id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `x_portal_user_UK_email` (`email`),</span><br><span class="line">  KEY `x_portal_user_FK_added_by_id` (`added_by_id`),</span><br><span class="line">  KEY `x_portal_user_FK_upd_by_id` (`upd_by_id`),</span><br><span class="line">  KEY `x_portal_user_cr_time` (`create_time`),</span><br><span class="line">  KEY `x_portal_user_up_time` (`update_time`),</span><br><span class="line">  KEY `x_portal_user_name` (`first_name`),</span><br><span class="line">  KEY `x_portal_user_email` (`email`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `x_portal_user_FK_added_by_id` <span class="keyword">FOREIGN</span> KEY (`added_by_id`) <span class="keyword">REFERENCES</span> `x_portal_user` (`id`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `x_portal_user_FK_upd_by_id` <span class="keyword">FOREIGN</span> KEY (`upd_by_id`) <span class="keyword">REFERENCES</span> `x_portal_user` (`id`)</span><br><span class="line">) ROW_FORMAT<span class="operator">=</span><span class="keyword">DYNAMIC</span>;</span><br></pre></td></tr></table></figure><blockquote><p>å¯¹æ•´ä¸ªå»ºè¡¨è„šæœ¬ä¸­çš„SQLéƒ½éœ€è¦å¯¹åº”çš„ä¿®æ”¹ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Ranger </tag>
            
            <tag> æ•°æ®å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 20.04å®‰è£…Protocol Buffers 2.5.0</title>
      <link href="/2021/07/01/Ubuntu-20-04%E5%AE%89%E8%A3%85Protocol-Buffers-2-5-0/"/>
      <url>/2021/07/01/Ubuntu-20-04%E5%AE%89%E8%A3%85Protocol-Buffers-2-5-0/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h1><p>Protocol Buffers 2.5.0æºç ä¸‹è½½ï¼š<a href="https://github.com/protocolbuffers/protobuf/tree/v2.5.0">https://github.com/protocolbuffers/protobuf/tree/v2.5.0</a>ã€‚ä¸‹è½½å¹¶è§£å‹ã€‚</p><p>å°†autogen.shæ–‡ä»¶ä¸­ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl http://googletest.googlecode.com/files/gtest-1.5.0.tar.bz2 | tar jx</span><br><span class="line">mv gtest-1.5.0 gtest</span><br></pre></td></tr></table></figure><p>æ›¿æ¢ä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/google/googletest/archive/release-1.5.0.tar.gz</span><br><span class="line">tar xzvf release-1.5.0.tar.gz</span><br><span class="line">mv googletest-release-1.5.0 gtest</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./autogen.sh</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make check</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…é—®é¢˜"><a href="#å®‰è£…é—®é¢˜" class="headerlink" title="å®‰è£…é—®é¢˜"></a>å®‰è£…é—®é¢˜</h1><h2 id="é—®é¢˜ä¸€"><a href="#é—®é¢˜ä¸€" class="headerlink" title="é—®é¢˜ä¸€"></a>é—®é¢˜ä¸€</h2><h3 id="é—®é¢˜ç°è±¡"><a href="#é—®é¢˜ç°è±¡" class="headerlink" title="é—®é¢˜ç°è±¡"></a>é—®é¢˜ç°è±¡</h3><p>æ‰§è¡Œ autogen.sh æ—¶å‡ºç°ä¸€ä¸‹é”™è¯¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">configure.ac:29: error: possibly undefined macro: AC_PROG_LIBTOOL</span><br><span class="line">      If this token and others are legitimate, please use m4_pattern_allow.</span><br><span class="line">      See the Autoconf documentation.</span><br><span class="line">autoreconf: /usr/bin/autoconf failed with exit status: 1</span><br></pre></td></tr></table></figure><h3 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h3><p>å®‰è£… libtoolï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libtool</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜äºŒ"><a href="#é—®é¢˜äºŒ" class="headerlink" title="é—®é¢˜äºŒ"></a>é—®é¢˜äºŒ</h2><h3 id="é—®é¢˜ç°è±¡-1"><a href="#é—®é¢˜ç°è±¡-1" class="headerlink" title="é—®é¢˜ç°è±¡"></a>é—®é¢˜ç°è±¡</h3><p>å®‰è£…å®ŒæˆåéªŒè¯å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">protoc --version</span></span><br><span class="line">protoc: error while loading shared libraries: libprotoc.so.8: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure><h3 id="é—®é¢˜è§£å†³-1"><a href="#é—®é¢˜è§£å†³-1" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h3><ul><li>ä½¿ç”¨findå‘½ä»¤æ‰¾åˆ°libprotoc.so.8æ–‡ä»¶ä½ç½®ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> /usr/local/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find . -name libprotoc.so.8</span></span><br><span class="line">./lib/libprotoc.so.8</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»º<code>/etc/ld.so.conf.d/libprotobuf.conf</code>æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/lib</span><br></pre></td></tr></table></figure><ul><li>æ‰§è¡Œå‘½ä»¤ï¼š<code>sudo ldconfig</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> å¸¸ç”¨ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sedå˜é‡ä¸­ç‰¹æ®Šå­—ç¬¦/å¤„ç†æ–¹å¼</title>
      <link href="/2021/04/26/sed%E5%8F%98%E9%87%8F%E4%B8%AD%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6-%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F/"/>
      <url>/2021/04/26/sed%E5%8F%98%E9%87%8F%E4%B8%AD%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6-%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœå˜é‡å€¼ä¸­åŒ…å«æ–œæ ï¼ˆ&#x2F;ï¼‰ç‰¹æ®Šå­—ç¬¦ï¼Œåœ¨ä½¿ç”¨sedå‘½ä»¤çš„åšè¡Œå†…å­—ç¬¦ä¸²æ›¿æ¢æ—¶å¯ä»¥ä½¿ç”¨äº•å·ï¼ˆ#ï¼‰åšä¸ºsedè¯­æ³•åˆ†éš”ç¬¦ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GITLAB_PROJECT_CLONE_URL=ssh://git@192.168.1.10:50022/test/Documentation.git</span><br><span class="line">sed -i &quot;11s#GITLAB_PROJECT_CLONE_URL#$GITLAB_PROJECT_CLONE_URL#&quot; config.xml</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell -c</title>
      <link href="/2020/12/03/shell-c/"/>
      <url>/2020/12/03/shell-c/</url>
      
        <content type="html"><![CDATA[<p><code>shell -c &#123;string&#125;</code>ï¼šè¡¨ç¤ºå‘½ä»¤ä»<code>-c</code>åçš„å­—ç¬¦ä¸²è¯»å–ã€‚åœ¨éœ€è¦ä½¿ç”¨ç®¡é“æˆ–è€…é‡å®šå‘éœ€è¦sudoæ—¶å¾ˆæœ‰ç”¨ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> find ../*/exportFiles -mtime +15 -name <span class="string">&quot;*&quot;</span> | xargs -I &#123;&#125; <span class="built_in">rm</span> -rf &#123;&#125;</span></span><br><span class="line">rm: cannot remove `i_20201108_CONTENTINFO_xy_001.dat&#x27;: Permission denied</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å¤„ç†å³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> sh -c <span class="string">&#x27;find ../*/exportFiles -mtime +15 -name &quot;*&quot; | xargs -I &#123;&#125; rm -rf &#123;&#125;&#x27;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ranger Hive Serviceè¿æ¥æµ‹è¯•å¤±è´¥é—®é¢˜è§£å†³</title>
      <link href="/2020/12/02/Ranger-Hive-Service%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2020/12/02/Ranger-Hive-Service%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">org.apache.ranger.plugin.client.HadoopException: Unable to connect to Hive Thrift Server instance..</span><br><span class="line">Unable to connect to Hive Thrift Server instance..</span><br><span class="line">Could not open client transport with JDBC Uri: jdbc:hive2://192.168.72.212:10000: Could not establish connection to jdbc:hive2://192.168.72.212:10000: Required field &#x27;client_protocol&#x27; is unset! Struct:TOpenSessionReq(client_protocol:null, configuration:&#123;set:hiveconf:hive.server2.thrift.resultset.default.fetch.size=1000, use:database=default&#125;).</span><br><span class="line">Could not establish connection to jdbc:hive2://192.168.72.212:10000: Required field &#x27;client_protocol&#x27; is unset! Struct:TOpenSessionReq(client_protocol:null, configuration:&#123;set:hiveconf:hive.server2.thrift.resultset.default.fetch.size=1000, use:database=default&#125;).</span><br><span class="line">Required field &#x27;client_protocol&#x27; is unset! Struct:TOpenSessionReq(client_protocol:null, configuration:&#123;set:hiveconf:hive.server2.thrift.resultset.default.fetch.size=1000, use:database=default&#125;). </span><br></pre></td></tr></table></figure><p>ç™¾åº¦åæ˜¯å› ä¸ºHiveç‰ˆæœ¬ä¸åŒ¹é…å¯¼è‡´çš„ã€‚æˆ‘çš„æµ‹è¯•ç¯å¢ƒHiveç‰ˆæœ¬æ˜¯2.1.1ï¼Œé€šè¿‡ä¸‹é¢çš„å‘½ä»¤å‘ç°ç¡®å®ç‰ˆæœ¬ä¸ä¸€è‡´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find . -name &quot;*hive*&quot;</span></span><br><span class="line">./ews/webapp/WEB-INF/classes/ranger-plugins/hive</span><br><span class="line">./ews/webapp/WEB-INF/classes/ranger-plugins/hive/ranger-hive-plugin-1.2.0.jar</span><br><span class="line">./ews/webapp/WEB-INF/classes/ranger-plugins/hive/hive-common-2.3.2.jar</span><br><span class="line">./ews/webapp/WEB-INF/classes/ranger-plugins/hive/hive-service-2.3.2.jar</span><br><span class="line">./ews/webapp/WEB-INF/classes/ranger-plugins/hive/hive-exec-2.3.2.jar</span><br><span class="line">./ews/webapp/WEB-INF/classes/ranger-plugins/hive/hive-metastore-2.3.2.jar</span><br><span class="line">./ews/webapp/WEB-INF/classes/ranger-plugins/hive/hive-jdbc-2.3.2.jar</span><br></pre></td></tr></table></figure><p>é—®é¢˜è§£å†³æ–¹æ³•å°±æ˜¾è€Œæ˜“è§äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
            <tag> Ranger </tag>
            
            <tag> æ•°æ®å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ranger Adminå®‰è£…MySQLåˆå§‹åŒ–é—®é¢˜è§£å†³</title>
      <link href="/2020/12/01/Ranger-Admin%E5%AE%89%E8%A3%85MySQL%E5%88%9D%E5%A7%8B%E5%8C%96%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2020/12/01/Ranger-Admin%E5%AE%89%E8%A3%85MySQL%E5%88%9D%E5%A7%8B%E5%8C%96%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>å‘Šè­¦ä¿¡æ¯åŠå¦‚ä½•è§£å†³è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ï¼š<a href="https://www.zhangjc.com/2020/11/27/MySQL-JDBC-%E8%BF%9E%E6%8E%A5%E5%BC%82%E5%B8%B8%EF%BC%9Ajavax-net-ssl-SSLException-closing-inbound-before-receiving-peer-s-close-notify/">MySQL JDBCè¿æ¥å¼‚å¸¸ï¼šjavax.net.ssl.SSLException: closing inbound before receiving peerâ€™s close_notify</a></p><p>ä½†æ˜¯Rangerçš„å®‰è£…é…ç½®<code>install.properties</code>ä¸­æœªå¯ç”¨sslï¼Œé…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#SSL config</span><br><span class="line">db_ssl_enabled=false</span><br><span class="line">db_ssl_required=false</span><br><span class="line">db_ssl_verifyServerCertificate=false</span><br><span class="line">#db_ssl_auth_type=1-way|2-way, where 1-way represents standard one way ssl authentication and 2-way represents mutual ssl authentication</span><br><span class="line">db_ssl_auth_type=2-way</span><br><span class="line">javax_net_ssl_keyStore=</span><br><span class="line">javax_net_ssl_keyStorePassword=</span><br><span class="line">javax_net_ssl_trustStore=</span><br><span class="line">javax_net_ssl_trustStorePassword=</span><br></pre></td></tr></table></figure><p>è·Ÿè¸ªæºä»£ç å‘ç°å®‰è£…è¿‡ç¨‹åªå¤„ç†äº†å¯ç”¨sslçš„æƒ…å†µï¼Œä½†æ˜¯æ–°ç‰ˆæœ¬çš„mysqlé»˜è®¤æ˜¯éœ€è¦å¯ç”¨sslçš„ã€‚ä¿®æ”¹Rangerå®‰è£…æºä»£ç ï¼ˆapache-ranger-1.2.0&#x2F;security-admin&#x2F;scripts&#x2F;db_setup.pyï¼‰å¢åŠ ä¸‹é¢ä»£ç ä¸­çš„221ã€222è¡Œï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">210</span>    <span class="keyword">def</span> <span class="title function_">get_jisql_cmd</span>(<span class="params">self, user, password ,db_name</span>):</span><br><span class="line"><span class="number">211</span>        path = RANGER_ADMIN_HOME</span><br><span class="line"><span class="number">212</span>        db_ssl_param=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="number">213</span>        db_ssl_cert_param=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="number">214</span>        <span class="keyword">if</span> <span class="variable language_">self</span>.db_ssl_enabled == <span class="string">&#x27;true&#x27;</span>:</span><br><span class="line"><span class="number">215</span>            db_ssl_param=<span class="string">&quot;?useSSL=%s&amp;requireSSL=%s&amp;verifyServerCertificate=%s&quot;</span> %(<span class="variable language_">self</span>.db_ssl_enabled,<span class="variable language_">self</span>.db_ssl_required,<span class="variable language_">self</span>.db_ssl_verifyServerCertificate)</span><br><span class="line"><span class="number">216</span>            <span class="keyword">if</span> <span class="variable language_">self</span>.db_ssl_verifyServerCertificate == <span class="string">&#x27;true&#x27;</span>:</span><br><span class="line"><span class="number">217</span>                <span class="keyword">if</span> <span class="variable language_">self</span>.db_ssl_auth_type == <span class="string">&#x27;1-way&#x27;</span>:</span><br><span class="line"><span class="number">218</span>                    db_ssl_cert_param=<span class="string">&quot; -Djavax.net.ssl.trustStore=%s -Djavax.net.ssl.trustStorePassword=%s &quot;</span> %(<span class="variable language_">self</span>.javax_net_ssl_trustStore,<span class="variable language_">self</span>.javax_net_ssl_trustStorePassword)</span><br><span class="line"><span class="number">219</span>                <span class="keyword">else</span>:</span><br><span class="line"><span class="number">220</span>                    db_ssl_cert_param=<span class="string">&quot; -Djavax.net.ssl.keyStore=%s -Djavax.net.ssl.keyStorePassword=%s -Djavax.net.ssl.trustStore=%s -Djavax.net.ssl.trustStorePassword=%s &quot;</span> %(<span class="variable language_">self</span>.javax_net_ssl_keyStore,<span class="variable language_">self</span>.javax_net_ssl_keyStorePassword,<span class="variable language_">self</span>.javax_net_ssl_trustStore,<span class="variable language_">self</span>.javax_net_ssl_trustStorePassword)</span><br><span class="line"><span class="number">221</span>        <span class="keyword">else</span>:</span><br><span class="line"><span class="number">222</span>            db_ssl_param=<span class="string">&#x27;?useSSL=false&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
            <tag> Ranger </tag>
            
            <tag> æ•°æ®å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux Iptablesç¤ºä¾‹ä¸€åˆ™</title>
      <link href="/2020/11/30/Linux-Iptables-%E7%A4%BA%E4%BE%8B%E4%B8%80%E5%88%99/"/>
      <url>/2020/11/30/Linux-Iptables-%E7%A4%BA%E4%BE%8B%E4%B8%80%E5%88%99/</url>
      
        <content type="html"><![CDATA[<p>å…³äºIptablesçš„ä»‹ç»ä¸ªäººå¼ºçƒˆæ¨èï¼š<a href="http://www.zsythink.net/archives/tag/iptables/page/2/">http://www.zsythink.net/archives/tag/iptables/page/2/</a>ã€‚è¿™ä½å…„å¼Ÿä»‹ç»çš„å¾ˆè¯¦ç»†ã€‚</p><p>æˆ‘ä¸ªäººçš„éœ€æ±‚æ˜¯åœ¨åŒä¸€ä¸ªç½‘ç»œå†…ä»ç½‘ç»œä¸ŠæŠŠæµ‹è¯•ä¸»æœºä¸æ­£å¼ç¯å¢ƒä¸»æœºé—´çš„ç½‘ç»œè¿›è¡Œéš”ç¦»ã€‚æˆ‘çš„æ€è·¯æ˜¯é‡‡ç”¨OUTPUT filterè¡¨ï¼Œé‡‡ç”¨é»‘åå•æ–¹å¼ç¦ç”¨æ­£å¼ç¯å¢ƒç½‘ç»œçš„è®¿é—®ã€‚å¦‚æœç¡®å®éœ€è¦è®¿é—®æ­£å¼ç¯å¢ƒçš„æŸä¸ªIPå’Œç«¯å£ï¼Œåˆ™æ·»åŠ ç‰¹æ®Šè§„åˆ™æ”¾è¡Œã€‚æ ¹æ®Iptablesçš„è§„åˆ™åŒ¹é…é¡ºåºåŸåˆ™ï¼Œæ”¾è¡Œç‰¹å®šIPå’Œç«¯å£çš„è§„åˆ™è¦åœ¨ç½‘æ®µç¦ç”¨è§„åˆ™ä¹‹å‰ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„ååˆ—åˆ—è¡¨ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -P OUTPUT ACCEPT</span><br><span class="line">iptables -F OUTPUT</span><br><span class="line">iptables -t filter -I OUTPUT -d 192.168.72.0/24 -j DROP</span><br><span class="line">iptables -t filter -I OUTPUT -d 192.168.72.1/32 -j ACCEPT</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure><ol><li>ç¬¬ä¸€æ¡å‘½ä»¤æ˜¯ä¿®æ”¹OUTPUTé“¾çš„é»˜è®¤ç­–ç•¥ä¸ºACCEPTï¼Œè¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯æ–¹ä¾¿é€šè¿‡yumå®‰è£…è½¯ä»¶æ—¶ä¸éœ€è¦è®¾ç½®ä¸€å †æ”¾è¡Œè§„åˆ™ï¼Œå½“ç„¶ç½‘ç»œå…¥å£çš„é˜²ç«å¢™éœ€è¦åšå¥½å®‰å…¨é˜²æŠ¤ã€‚</li><li>ç¬¬äºŒæ¡å‘½ä»¤æ˜¯æƒ…å†µOUTPUTé“¾çš„æ‰€æœ‰è§„åˆ™ï¼Œé‡æ–°è¿›è¡Œé…ç½®ã€‚</li><li>ç¬¬ä¸‰æ¡å‘½ä»¤æ˜¯æ’å…¥ä¸€æ¡filterè§„åˆ™ï¼Œç¦ç”¨å½“å‰æœåŠ¡å™¨å¯¹192.168.72ç½‘æ®µçš„è®¿é—®ã€‚</li><li>ç¬¬å››æ¡å‘½ä»¤æ˜¯åœ¨filterè¡¨æ’å…¥æ”¾è¡Œè§„åˆ™ï¼Œå…è®¸å½“å‰æœåŠ¡å™¨è®¿é—®ç½‘å…³192.168.72.1ã€‚</li></ol><p>æ³¨æ„ï¼Œå› ä¸ºfilterè§„åˆ™æ·»åŠ é‡‡ç”¨çš„æ˜¯<code>-I</code>æ’å…¥æ¨¡å¼ï¼Œæ¯æ¬¡éƒ½æ˜¯åœ¨è¡¨çš„æœ€å‰åæ’å…¥ï¼Œæ‰€æœ‰ç¬¬ä¸‰ã€å››çš„é¡ºåºä¸èƒ½é¢ å€’ã€‚å¦‚æœé‡‡ç”¨çš„æ˜¯<code>-A</code>è¿½åŠ æ¨¡å¼ï¼Œåˆ™ç¬¬ä¸‰ã€å››å‘½ä»¤éœ€è¦é¢ å€’ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Iptables </tag>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntuç»ˆç«¯CTRL+Sè¢«é”å®šåè§£é”å¿«æ·é”®</title>
      <link href="/2020/11/30/Ubuntu-%E7%BB%88%E7%AB%AF-CTRL-S-%E8%A2%AB%E9%94%81%E5%AE%9A%E5%90%8E%E8%A7%A3%E9%94%81%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>/2020/11/30/Ubuntu-%E7%BB%88%E7%AB%AF-CTRL-S-%E8%A2%AB%E9%94%81%E5%AE%9A%E5%90%8E%E8%A7%A3%E9%94%81%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<p><code>CTRL + S</code>è¡¨ç¤ºæš‚åœç»ˆç«¯çš„ä½œç”¨ï¼Œåœæ­¢ç»ˆç«¯è¾“å…¥ã€‚ä½¿ç”¨å¿«æ·é”®<code>CTRL + Q</code>æ¢å¤ï¼Œå¯ä»¥ç»§ç»­å‘ç»ˆç«¯è¾“å…¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL JDBCè¿æ¥å¼‚å¸¸ï¼šjavax.net.ssl.SSLException: closing inbound before receiving peer&#39;s close_notify</title>
      <link href="/2020/11/27/MySQL-JDBC-%E8%BF%9E%E6%8E%A5%E5%BC%82%E5%B8%B8%EF%BC%9Ajavax-net-ssl-SSLException-closing-inbound-before-receiving-peer-s-close-notify/"/>
      <url>/2020/11/27/MySQL-JDBC-%E8%BF%9E%E6%8E%A5%E5%BC%82%E5%B8%B8%EF%BC%9Ajavax-net-ssl-SSLException-closing-inbound-before-receiving-peer-s-close-notify/</url>
      
        <content type="html"><![CDATA[<p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">Thu Nov 26 23:54:22 CST 2020 WARN: Establishing SSL connection without server&#x27;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#x27;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#x27;false&#x27;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.</span><br><span class="line">Thu Nov 26 23:54:23 CST 2020 WARN: Caught while disconnecting...</span><br><span class="line"></span><br><span class="line">EXCEPTION STACK TRACE:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">** BEGIN NESTED EXCEPTION ** </span><br><span class="line"></span><br><span class="line">javax.net.ssl.SSLException</span><br><span class="line">MESSAGE: closing inbound before receiving peer&#x27;s close_notify</span><br><span class="line"></span><br><span class="line">STACKTRACE:</span><br><span class="line"></span><br><span class="line">javax.net.ssl.SSLException: closing inbound before receiving peer&#x27;s close_notify</span><br><span class="line">at sun.security.ssl.Alert.createSSLException(Alert.java:133)</span><br><span class="line">at sun.security.ssl.Alert.createSSLException(Alert.java:117)</span><br><span class="line">at sun.security.ssl.TransportContext.fatal(TransportContext.java:314)</span><br><span class="line">at sun.security.ssl.TransportContext.fatal(TransportContext.java:270)</span><br><span class="line">at sun.security.ssl.TransportContext.fatal(TransportContext.java:261)</span><br><span class="line">at sun.security.ssl.SSLSocketImpl.shutdownInput(SSLSocketImpl.java:656)</span><br><span class="line">at sun.security.ssl.SSLSocketImpl.shutdownInput(SSLSocketImpl.java:635)</span><br><span class="line">at com.mysql.jdbc.MysqlIO.quit(MysqlIO.java:2246)</span><br><span class="line">at com.mysql.jdbc.ConnectionImpl.realClose(ConnectionImpl.java:4201)</span><br><span class="line">at com.mysql.jdbc.ConnectionImpl.close(ConnectionImpl.java:1472)</span><br><span class="line">at com.jolbox.bonecp.BoneCP.obtainRawInternalConnection(BoneCP.java:353)</span><br><span class="line">at com.jolbox.bonecp.BoneCP.&lt;init&gt;(BoneCP.java:416)</span><br><span class="line">at com.jolbox.bonecp.BoneCPDataSource.getConnection(BoneCPDataSource.java:120)</span><br><span class="line">at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:483)</span><br><span class="line">at org.datanucleus.store.rdbms.RDBMSStoreManager.&lt;init&gt;(RDBMSStoreManager.java:296)</span><br><span class="line">at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)</span><br><span class="line">at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</span><br><span class="line">at java.lang.reflect.Constructor.newInstance(Constructor.java:423)</span><br><span class="line">at org.datanucleus.plugin.NonManagedPluginRegistry.createExecutableExtension(NonManagedPluginRegistry.java:606)</span><br><span class="line">at org.datanucleus.plugin.PluginManager.createExecutableExtension(PluginManager.java:301)</span><br><span class="line">at org.datanucleus.NucleusContextHelper.createStoreManagerForProperties(NucleusContextHelper.java:133)</span><br><span class="line">at org.datanucleus.PersistenceNucleusContextImpl.initialise(PersistenceNucleusContextImpl.java:420)</span><br><span class="line">at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.freezeConfiguration(JDOPersistenceManagerFactory.java:821)</span><br><span class="line">at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:338)</span><br><span class="line">at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:217)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">at javax.jdo.JDOHelper$16.run(JDOHelper.java:1965)</span><br><span class="line">at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">at javax.jdo.JDOHelper.invoke(JDOHelper.java:1960)</span><br><span class="line">at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1166)</span><br><span class="line">at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)</span><br><span class="line">at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:701)</span><br><span class="line">at org.apache.hadoop.hive.metastore.ObjectStore.getPMF(ObjectStore.java:515)</span><br><span class="line">at org.apache.hadoop.hive.metastore.ObjectStore.getPersistenceManager(ObjectStore.java:544)</span><br><span class="line">at org.apache.hadoop.hive.metastore.ObjectStore.initializeHelper(ObjectStore.java:399)</span><br><span class="line">at org.apache.hadoop.hive.metastore.ObjectStore.initialize(ObjectStore.java:336)</span><br><span class="line">at org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:297)</span><br><span class="line">at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:76)</span><br><span class="line">at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:136)</span><br><span class="line">at org.apache.hadoop.hive.metastore.RawStoreProxy.&lt;init&gt;(RawStoreProxy.java:58)</span><br><span class="line">at org.apache.hadoop.hive.metastore.RawStoreProxy.getProxy(RawStoreProxy.java:67)</span><br><span class="line">at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newRawStore(HiveMetaStore.java:599)</span><br><span class="line">at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:564)</span><br><span class="line">at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:626)</span><br><span class="line">at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:416)</span><br><span class="line">at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:78)</span><br><span class="line">at org.apache.hadoop.hive.metastore.RetryingHMSHandler.getProxy(RetryingHMSHandler.java:84)</span><br><span class="line">at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:6490)</span><br><span class="line">at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.&lt;init&gt;(HiveMetaStoreClient.java:238)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient.&lt;init&gt;(SessionHiveMetaStoreClient.java:70)</span><br><span class="line">at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)</span><br><span class="line">at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</span><br><span class="line">at java.lang.reflect.Constructor.newInstance(Constructor.java:423)</span><br><span class="line">at org.apache.hadoop.hive.metastore.MetaStoreUtils.newInstance(MetaStoreUtils.java:1652)</span><br><span class="line">at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.&lt;init&gt;(RetryingMetaStoreClient.java:80)</span><br><span class="line">at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(RetryingMetaStoreClient.java:130)</span><br><span class="line">at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(RetryingMetaStoreClient.java:101)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.createMetaStoreClient(Hive.java:3367)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:3406)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:3386)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.getAllFunctions(Hive.java:3640)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.reloadFunctions(Hive.java:236)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.registerAllFunctionsOnce(Hive.java:221)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.&lt;init&gt;(Hive.java:366)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.create(Hive.java:310)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.getInternal(Hive.java:290)</span><br><span class="line">at org.apache.hadoop.hive.ql.metadata.Hive.get(Hive.java:266)</span><br><span class="line">at org.apache.hadoop.hive.ql.session.SessionState.start(SessionState.java:558)</span><br><span class="line">at org.apache.hadoop.hive.ql.session.SessionState.beginStart(SessionState.java:531)</span><br><span class="line">at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:705)</span><br><span class="line">at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:641)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">at org.apache.hadoop.util.RunJar.run(RunJar.java:221)</span><br><span class="line">at org.apache.hadoop.util.RunJar.main(RunJar.java:136)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">** END NESTED EXCEPTION **</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼šåœ¨JDBCè¿æ¥ä¸²ä¸­æ·»åŠ <code>useSSL=false</code>é…ç½®ï¼Œå¦‚ï¼š<code>jdbc:mysql://192.168.72.212/hive?createDatabaseIfNotExist=true&amp;amp;characterEncoding=utf-8&amp;amp;useSSL=false</code></p><p>æ³¨æ„ï¼ŒXMLä¸­çš„&amp;éœ€è¦æ”¹å†™ä¸ºï¼š&amp;amp;</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shellå­—ç¬¦ä¸²æˆªå–æŠ€å·§</title>
      <link href="/2020/11/26/Shell-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96%E6%8A%80%E5%B7%A7/"/>
      <url>/2020/11/26/Shell-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<ul><li># å·æˆªå–ï¼šåˆ é™¤å·¦è¾¹å­—ç¬¦ï¼Œä¿ç•™å³è¾¹å­—ç¬¦ã€‚</li><li>## å·æˆªå–ï¼šåˆ é™¤å·¦è¾¹å­—ç¬¦ï¼Œä¿ç•™å³è¾¹å­—ç¬¦ã€‚</li><li>%å·æˆªå–ï¼šåˆ é™¤å³è¾¹å­—ç¬¦ï¼Œä¿ç•™å·¦è¾¹å­—ç¬¦</li><li>%% å·æˆªå–ï¼šåˆ é™¤å³è¾¹å­—ç¬¦ï¼Œä¿ç•™å·¦è¾¹å­—ç¬¦</li></ul><p>ç¤ºä¾‹ä¸€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">var=<span class="string">&#x27;abcbd&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;var#*b&#125;</span></span></span><br><span class="line">cbd</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;var##*b&#125;</span></span></span><br><span class="line">d</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;var%b*&#125;</span></span></span><br><span class="line">abc</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$&#123;var%%b*&#125;</span></span></span><br><span class="line">a</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹äºŒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="keyword">for</span> line <span class="keyword">in</span> `<span class="built_in">cat</span> /etc/passwd`; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$&#123;line%%:*&#125;</span>; <span class="keyword">done</span></span></span><br><span class="line">root</span><br><span class="line">daemon</span><br><span class="line">bin</span><br><span class="line">sys</span><br><span class="line">sync</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven: Too many files with unapproved license</title>
      <link href="/2020/11/25/Maven-Too-many-files-with-unapproved-license/"/>
      <url>/2020/11/25/Maven-Too-many-files-with-unapproved-license/</url>
      
        <content type="html"><![CDATA[<p>å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.rat:apache-rat-plugin:0.11:check (default) on project ranger: Too many files with unapproved license: 1 See RAT report in: /home/zhangjc/ysten/git/apache-ranger-1.2.0/target/rat.txt -&gt; [Help 1]</span><br><span class="line">org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.rat:apache-rat-plugin:0.11:check (default) on project ranger: Too many files with unapproved license: 1 See RAT report in: /home/zhangjc/ysten/git/apache-ranger-1.2.0/target/rat.txt</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)</span><br><span class="line">    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">    at java.lang.reflect.Method.invoke (Method.java:498)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼šå¢åŠ <code>-Drat.skip=true</code>å‚æ•° ï¼Œè·³è¿‡licensingæ£€æŸ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hue Load Balanceé…ç½®</title>
      <link href="/2020/11/18/Hue-Load-Balance%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/11/18/Hue-Load-Balance%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>ç›´æ¥ä¸Šé…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  server_name 192.168.72.31;</span><br><span class="line">  listen 8001;</span><br><span class="line">  </span><br><span class="line">  charset utf-8;</span><br><span class="line">  </span><br><span class="line">  proxy_connect_timeout 600s;</span><br><span class="line">  proxy_read_timeout 600s;</span><br><span class="line">  proxy_send_timeout 600s;</span><br><span class="line">  </span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_set_header Host $http_x_forwarded_for;</span><br><span class="line">    proxy_set_header X-Forwarded-For $http_x_forwarded_for;</span><br><span class="line">    </span><br><span class="line">    proxy_pass http://hue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream hue &#123;</span><br><span class="line">  hash $cookie_sessionid;</span><br><span class="line">  </span><br><span class="line">  server 192.168.72.22:8888 max_fails=3;</span><br><span class="line">  server 192.168.72.31:8888 max_fails=3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡ç‚¹æ˜¯è°ƒæ•´<code>upstream hash</code>çš„ç­–ç•¥ã€‚å› ä¸ºHueæ˜¯éœ€è¦ä¿æŒsessionçš„ï¼ŒåŒä¸€ä¸ªsessionçš„è¯·æ±‚éœ€è¦å‘é€åˆ°åŒä¸€å°åç«¯æœåŠ¡å™¨ä¸Šã€‚ç®€å•çš„å¯ä»¥é‡‡ç”¨ip_hashç­–ç•¥ï¼Œè¿™ä¸ªç­–ç•¥å­˜åœ¨ä¸¤ä¸ªé‡è¦çš„é—®é¢˜ï¼š</p><ul><li>å¯¹éšè—åœ¨å±€åŸŸç½‘åçš„ç”¨æˆ·ä¸èµ·ä½œç”¨ã€‚</li><li>ip_hashåªå–IPV4çš„å‰ä¸‰æ®µå€¼åšHashï¼Œåœ¨éå…¬ç½‘å¤§å¹¶å‘åœºæ™¯ä¸‹ä¼šå‡ºç°è´Ÿè½½éå¸¸ä¸å‡è¡¡çš„æƒ…å†µã€‚å‚è§ï¼š<a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash">http://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash</a></li></ul><p>åŸºäºä»¥ä¸Šä¸¤ç‚¹ä¿®æ”¹äº†Nginxçš„é…ç½®é‡‡ç”¨<code>$cookie_sessionid</code>åšä¸ºhashå€¼ï¼Œè¾¾åˆ°sessionçº§åˆ«çš„è´Ÿè½½å‡è¡¡ã€‚</p><p>ä¸»è¦çš„é—®é¢˜å…¶å®æ˜¯è¿™ç§æ–¹å¼æœªåšåˆ°æŒ‰ç…§åç«¯æœåŠ¡å™¨å®é™…è´Ÿè½½å†æŒ‰ç…§sessionçº§åˆ«æ¥åˆ†é…è¯·æ±‚ã€‚åç»­æ‰“ç®—ç ”ç©¶HAProxyæ˜¯å¦å¯ä»¥åšåˆ°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®æ¢ç´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hue </tag>
            
            <tag> æ•°æ®æ¢ç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hue UIå±•ç¤ºä¸­æ–‡</title>
      <link href="/2020/09/17/Hue-UI-%E5%B1%95%E7%A4%BA%E4%B8%AD%E6%96%87/"/>
      <url>/2020/09/17/Hue-UI-%E5%B1%95%E7%A4%BA%E4%B8%AD%E6%96%87/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½¿ç”¨å¼€å‘åˆ†æ”¯ä»£ç å¦‚masteråˆ†æ”¯ï¼‰ç¼–è¯‘å®‰è£…ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘è¯­è¨€æ–‡ä»¶ã€‚ä¾‹å¦‚Hueå®‰è£…ç›®å½•ä¸ºâ€œ&#x2F;opt&#x2F;hueâ€ï¼Œåˆ™å®‰è£…åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /opt/hue</span><br><span class="line">$ make locales</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦åˆ™é‡å¯Hueå³å¯ã€‚æ˜¯å¦éœ€è¦é‡å¯æˆ‘æ²¡æœ‰éªŒè¯ï¼šï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®æ¢ç´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hue </tag>
            
            <tag> æ•°æ®æ¢ç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hue ç¼–è¯‘å¼‚å¸¸ï¼šImportError: cannot import name &#39;six&#39; from &#39;urllib3.packages&#39;</title>
      <link href="/2020/06/23/Hue-%E7%BC%96%E8%AF%91%E5%BC%82%E5%B8%B8%EF%BC%9AImportError-cannot-import-name-six-from-urllib3-packages/"/>
      <url>/2020/06/23/Hue-%E7%BC%96%E8%AF%91%E5%BC%82%E5%B8%B8%EF%BC%9AImportError-cannot-import-name-six-from-urllib3-packages/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç¼–è¯‘Hueçš„æ—¶å€™å‡ºç°é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Running &#x27;/home/zhangjc/ysten/git/ysten-hue/build/env/bin/hue makemigrations --noinput&#x27; with None</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/build/env/bin/hue&quot;, line 33, in &lt;module&gt;</span><br><span class="line">    sys.exit(load_entry_point(&#x27;desktop&#x27;, &#x27;console_scripts&#x27;, &#x27;hue&#x27;)())</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/manage_entry.py&quot;, line 225, in entry</span><br><span class="line">    execute_from_command_line(sys.argv)</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/build/env/lib/python3.7/site-packages/django/core/management/__init__.py&quot;, line 364, in execute_from_command_line</span><br><span class="line">    utility.execute()</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/build/env/lib/python3.7/site-packages/django/core/management/__init__.py&quot;, line 338, in execute</span><br><span class="line">    django.setup()</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/build/env/lib/python3.7/site-packages/django/__init__.py&quot;, line 27, in setup</span><br><span class="line">    apps.populate(settings.INSTALLED_APPS)</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/build/env/lib/python3.7/site-packages/django/apps/registry.py&quot;, line 108, in populate</span><br><span class="line">    app_config.import_models()</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/build/env/lib/python3.7/site-packages/django/apps/config.py&quot;, line 202, in import_models</span><br><span class="line">    self.models_module = import_module(models_module_name)</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/build/env/lib/python3.7/importlib/__init__.py&quot;, line 127, in import_module</span><br><span class="line">    return _bootstrap._gcd_import(name[level:], package, level)</span><br><span class="line">  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1006, in _gcd_import</span><br><span class="line">  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 983, in _find_and_load</span><br><span class="line">  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 967, in _find_and_load_unlocked</span><br><span class="line">  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 677, in _load_unlocked</span><br><span class="line">  File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 728, in exec_module</span><br><span class="line">  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 219, in _call_with_frames_removed</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/models.py&quot;, line 47, in &lt;module&gt;</span><br><span class="line">    from useradmin.models import User, Group, get_organization</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/apps/useradmin/src/useradmin/models.py&quot;, line 56, in &lt;module&gt;</span><br><span class="line">    from desktop.lib.connectors.models import _get_installed_connectors, Connector</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/lib/connectors/models.py&quot;, line 29, in &lt;module&gt;</span><br><span class="line">    from desktop.lib.connectors.types import get_connectors_types</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/lib/connectors/types.py&quot;, line 24, in &lt;module&gt;</span><br><span class="line">    from desktop.lib.exceptions_renderable import PopupException</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/lib/exceptions_renderable.py&quot;, line 31, in &lt;module&gt;</span><br><span class="line">    import desktop.lib.django_util</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/lib/django_util.py&quot;, line 42, in &lt;module&gt;</span><br><span class="line">    import desktop.lib.thrift_util</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/lib/thrift_util.py&quot;, line 49, in &lt;module&gt;</span><br><span class="line">    from desktop.lib.thrift_.http_client import THttpClient</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/lib/thrift_/http_client.py&quot;, line 26, in &lt;module&gt;</span><br><span class="line">    from desktop.lib.rest.http_client import HttpClient</span><br><span class="line">  File &quot;/home/zhangjc/ysten/git/ysten-hue/desktop/core/src/desktop/lib/rest/http_client.py&quot;, line 32, in &lt;module&gt;</span><br><span class="line">    from urllib3.contrib import pyopenssl</span><br><span class="line">  File &quot;/usr/lib/python3/dist-packages/urllib3/contrib/pyopenssl.py&quot;, line 62, in &lt;module&gt;</span><br><span class="line">    from ..packages import six</span><br><span class="line">ImportError: cannot import name &#x27;six&#x27; from &#x27;urllib3.packages&#x27; (/usr/lib/python3/dist-packages/urllib3/packages/__init__.py)</span><br></pre></td></tr></table></figure><p>é”™è¯¯åŸå› ï¼šæ ¹æ®é”™è¯¯ä¿¡æ¯å¯ä»¥çœ‹åˆ°æ˜¯â€œ&#x2F;usr&#x2F;lib&#x2F;python3&#x2F;dist-packages&#x2F;urllib3â€è¿™ä¸ªåŒ…çš„é—®é¢˜ã€‚æ­£ç¡®çš„åº”è¯¥æ˜¯å¼•ç”¨â€œbuild&#x2F;env&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;â€ä¸‹çš„åŒ…ã€‚æŸ¥çœ‹â€&#x2F;usr&#x2F;lib&#x2F;python3&#x2F;dist-packages&#x2F;urllib3â€ä¸‹çš„åŒ…ä¿¡æ¯ï¼Œå‘ç°åŒ…ç‰ˆæœ¬æ¯”è¾ƒä½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -l /usr/lib/python3/dist-packages/</span><br><span class="line">drwxr-xr-x  6 root root   4096 1æœˆ  13 17:07 urllib3</span><br><span class="line">drwxr-xr-x  2 root root   4096 1æœˆ  13 17:06 urllib3-1.22.egg-info</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼šåˆ é™¤æœ‰é—®é¢˜çš„åŒ…åå†è¯•æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/lib/python3/dist-packages/urllib3*</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹â€œbuild&#x2F;env&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;â€ä¸‹çš„urllib3åŒ…ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -l build/env/lib/python3.7/site-packages/|grep urllib3</span><br><span class="line">drwxr-xr-x  6 zhangjc zhangjc   4096 6æœˆ  23 17:06 urllib3</span><br><span class="line">drwxr-xr-x  2 zhangjc zhangjc   4096 6æœˆ  23 17:06 urllib3-1.25.9.dist-info</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®æ¢ç´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hue </tag>
            
            <tag> æ•°æ®æ¢ç´¢ </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3å‘½ä»¤è¡Œäº¤äº’ä¸èƒ½ä½¿ç”¨æ–¹å‘é”®</title>
      <link href="/2019/12/21/Python3-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BA%A4%E4%BA%92%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E6%96%B9%E5%90%91%E9%94%AE/"/>
      <url>/2019/12/21/Python3-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BA%A4%E4%BA%92%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E6%96%B9%E5%90%91%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<p>è‡ªå®šä¹‰å®‰è£…Python3ååœ¨å‘½ä»¤è¡Œä½¿ç”¨æ–¹å‘é”®æ—¶å‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ python3</span><br><span class="line">Python <span class="number">3.7</span><span class="number">.4</span> (default, Dec <span class="number">11</span> <span class="number">2019</span>, <span class="number">17</span>:<span class="number">40</span>:08) </span><br><span class="line">[GCC <span class="number">7.4</span><span class="number">.0</span>] on linux</span><br><span class="line"><span class="type">Type</span> <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> <span class="keyword">or</span> <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>^[[A^[[B^[[C^[[D</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯å®‰è£…readlineï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install readline</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3 ImportError: cannot import name &#39;XXX&#39; from &#39;XXX&#39;</title>
      <link href="/2019/12/11/Python3-ImportError-cannot-import-name-XXX-from-XXX/"/>
      <url>/2019/12/11/Python3-ImportError-cannot-import-name-XXX-from-XXX/</url>
      
        <content type="html"><![CDATA[<p>ä¾‹å¦‚å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ python3 git.py </span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;git.py&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> git <span class="keyword">import</span> Repo</span><br><span class="line">  File <span class="string">&quot;/home/a/git.py&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> git <span class="keyword">import</span> Repo</span><br><span class="line">ImportError: cannot <span class="keyword">import</span> name <span class="string">&#x27;Repo&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;git&#x27;</span> (/home/a/git.py)</span><br></pre></td></tr></table></figure><p>è¿™ç§é”™è¯¯åŸºæœ¬éƒ½æ˜¯å› ä¸ºPythonè„šæœ¬çš„åç§°ä¸æ¨¡å—çš„åç§°é‡å¤å¯¼è‡´çš„ã€‚åƒæˆ‘è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯å› ä¸º<code>git.py</code>ä¸<code>GitPython</code>æ¨¡å—ä¸­çš„æ–‡ä»¶åä¸€æ ·å¯¼è‡´çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>no matching cipher foundé—®é¢˜ä¸€æ¬¡è§£å†³ç»å†</title>
      <link href="/2019/12/10/no-matching-cipher-found-%E9%97%AE%E9%A2%98%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E7%BB%8F%E5%8E%86/"/>
      <url>/2019/12/10/no-matching-cipher-found-%E9%97%AE%E9%A2%98%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E7%BB%8F%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ¬¡é—®é¢˜è§£å†³çº¯å±è’™å¯¹äº†ï¼ŒåŸç†ä¸æ¸…æ¥šã€‚</p><p>å½“æˆ‘ä»ä¸€å°CentOS 7.3çš„æœåŠ¡å™¨é€šè¿‡sshç™»å½•å¦å¤–ä¸€å°CentOS 6.8çš„æœåŠ¡å™¨æ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@192-168-72-75 .ssh]# ssh -p65522 bddev@192.168.72.208</span><br><span class="line">no matching cipher found: client arcfour server chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯åœ¨â€œ192-168-72-75â€æœåŠ¡å™¨ä¸Šä¿®æ”¹<code>/etc/ssh/ssh_config</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line"> GSSAPIAuthentication yes</span><br><span class="line">     Ciphers aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc</span><br><span class="line">     MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå†…å®¹åœ¨åŸé…ç½®æ–‡ä»¶ä¸­æœ¬æ¥å°±æœ‰ï¼Œå¯èƒ½åªæ˜¯æ³¨é‡Šæ‰äº†ï¼Œä¿®æ”¹çš„æ—¶å€™ä»”ç»†æ ¸å¯¹ä¸‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ThinkPad E480å®‰è£…Ubuntu 18.04æ— çº¿ç½‘å¡é©±åŠ¨</title>
      <link href="/2019/10/23/ThinkPad-E480-%E5%AE%89%E8%A3%85-Ubuntu-18-04-%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8/"/>
      <url>/2019/10/23/ThinkPad-E480-%E5%AE%89%E8%A3%85-Ubuntu-18-04-%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>é—æ†¾çš„æ˜¯è™½ç„¶ä¸‹é¢çš„æ–¹æ³•å¯ä»¥è§£å†³ï¼Œä½†æ˜¯å†…æ ¸å‡çº§åéœ€è¦é‡æ–°å®‰è£…ã€‚</p><h1 id="åŸºæœ¬ä¿¡æ¯"><a href="#åŸºæœ¬ä¿¡æ¯" class="headerlink" title="åŸºæœ¬ä¿¡æ¯"></a>åŸºæœ¬ä¿¡æ¯</h1><ul><li>Ubuntu 18.04</li><li>ThinkPad E480</li><li>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ Linux å†…æ ¸ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">uname</span> -r</span><br><span class="line">5.0.0-32-generic</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç½‘å¡å‹å·ä¿¡æ¯ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> lshw -C network</span><br><span class="line">  *-network UNCLAIMED</span><br><span class="line">       description: Network controller</span><br><span class="line">       product: RTL8821CE 802.11ac PCIe Wireless Network Adapter</span><br><span class="line">       vendor: Realtek Semiconductor Co., Ltd.</span><br><span class="line">       physical <span class="built_in">id</span>: 0</span><br><span class="line">       bus info: pci@0000:05:00.0</span><br><span class="line">       version: 00</span><br><span class="line">       width: 64 bits</span><br><span class="line">       clock: 33MHz</span><br><span class="line">       capabilities: pm msi pciexpress cap_list</span><br><span class="line">       configuration: latency=0</span><br><span class="line">       resources: ioport:b000(size=256) memory:f2100000-f210ffff</span><br></pre></td></tr></table></figure><p>è®©äººå¤´ç–¼çš„å°±æ˜¯è¿™æ¬¾ç½‘å¡RTL8821CEï¼ï¼è¿™æ¬¾ç½‘å¡åœ¨Linuxçš„å†…æ ¸ä¸­è¿˜æœªæ”¯æŒï¼Œåªèƒ½è‡ªè¡Œç¼–è¯‘å®‰è£…ã€‚</p><h1 id="å‚è€ƒç½‘å€"><a href="#å‚è€ƒç½‘å€" class="headerlink" title="å‚è€ƒç½‘å€"></a>å‚è€ƒç½‘å€</h1><ul><li><a href="https://blog.csdn.net/fljhm/article/details/79281655">https://blog.csdn.net/fljhm/article/details/79281655</a></li><li><a href="https://unix.stackexchange.com/questions/379049/realtek-rtl8821ce-wifi-driver-problem-in-linux-mint-18-2">https://unix.stackexchange.com/questions/379049/realtek-rtl8821ce-wifi-driver-problem-in-linux-mint-18-2</a></li></ul><h1 id="é©±åŠ¨æºç ä¸‹è½½"><a href="#é©±åŠ¨æºç ä¸‹è½½" class="headerlink" title="é©±åŠ¨æºç ä¸‹è½½"></a>é©±åŠ¨æºç ä¸‹è½½</h1><p>ä»¥ä¸‹æºä»£ç æ˜¯æˆ‘ä¿®æ”¹è¿‡ä¹‹åï¼Œå¯ä»¥æˆåŠŸç¼–è¯‘ã€‚åŸå§‹çš„ä»£ç ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šæœ‰ä¸å°‘å¼‚å¸¸ï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„ç½‘å€è§£å†³ä¸€éƒ¨åˆ†ï¼Œå¯¹äºå¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„æŒ‰ç…§æç¤ºå°†ç¼ºå°‘çš„å¤´æ–‡ä»¶æ‹·è´åˆ°å¯¹åº”çš„ä½ç½®å³å¯ã€‚</p><p>æºç ä¸‹è½½ï¼š<a href="/images/202501/rtl8821ce.zip">rtl8821ce.zip</a></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual Studio Codeä¿®æ”¹terminalå­—ä½“</title>
      <link href="/2019/10/17/Visual-Studio-Code-%E4%BF%AE%E6%94%B9-terminal-%E5%AD%97%E4%BD%93/"/>
      <url>/2019/10/17/Visual-Studio-Code-%E4%BF%AE%E6%94%B9-terminal-%E5%AD%97%E4%BD%93/</url>
      
        <content type="html"><![CDATA[<p>é»˜è®¤æ‰“å¼€ä¸­æ–­åå­—ä½“æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="/images/202501/vs-code-terminal.png" alt="VS å­—ä½“è®¾ç½®å‰æ•ˆæœ"></p><p>æ‰“å¼€è®¾ç½®ï¼Œæœç´¢é…ç½®é¡¹<code>terminal.integrated.fontFamily</code>ï¼Œä¿®æ”¹é…ç½®ä¸º<code>monospace</code>ã€‚ä¿®æ”¹åæ•ˆæœå¦‚ä¸‹ï¼š<img src="/images/202501/vs-code-terminal-font.png" alt="VS å­—ä½“è®¾ç½®åæ•ˆæœ"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> VS Code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VS Code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ImportError: libffi.so.5: cannot open shared object file: No such file or directory</title>
      <link href="/2019/10/10/ImportError-libffi-so-5-cannot-open-shared-object-file-No-such-file-or-directory/"/>
      <url>/2019/10/10/ImportError-libffi-so-5-cannot-open-shared-object-file-No-such-file-or-directory/</url>
      
        <content type="html"><![CDATA[<p>åœ¨CentOS7.4ä¸­é€šè¿‡æºç çš„æ–¹å¼å®‰è£…Requestsæ—¶ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip3 install .</span></span><br><span class="line">Processing /data/setup/psf-requests-fab1fd1</span><br><span class="line">    ERROR: Command errored out with <span class="built_in">exit</span> status 1:</span><br><span class="line">     <span class="built_in">command</span>: /opt/Python-3.7.2/bin/python3.7 -c <span class="string">&#x27;import sys, setuptools, tokenize; sys.argv[0] = &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;/tmp/pip-req-build-nuwyypgj/setup.py&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;; __file__=&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;/tmp/pip-req-build-nuwyypgj/setup.py&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;;f=getattr(tokenize, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;open&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;, open)(__file__);code=f.read().replace(&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;\r\n&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;\n&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;);f.close();exec(compile(code, __file__, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;exec&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;))&#x27;</span> egg_info --egg-base pip-egg-info</span><br><span class="line">         cwd: /tmp/pip-req-build-nuwyypgj/</span><br><span class="line">    Complete output (11 lines):</span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">      File <span class="string">&quot;&lt;string&gt;&quot;</span>, line 1, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      File <span class="string">&quot;/opt/Python-3.7.2/lib/python3.7/site-packages/setuptools/__init__.py&quot;</span>, line 18, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">        from setuptools.dist import Distribution, Feature</span><br><span class="line">      File <span class="string">&quot;/opt/Python-3.7.2/lib/python3.7/site-packages/setuptools/dist.py&quot;</span>, line 31, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">        from setuptools import windows_support</span><br><span class="line">      File <span class="string">&quot;/opt/Python-3.7.2/lib/python3.7/site-packages/setuptools/windows_support.py&quot;</span>, line 2, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">        import ctypes</span><br><span class="line">      File <span class="string">&quot;/opt/Python-3.7.2/lib/python3.7/ctypes/__init__.py&quot;</span>, line 7, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">        from _ctypes import Union, Structure, Array</span><br><span class="line">    ImportError: libffi.so.5: cannot open shared object file: No such file or directory</span><br><span class="line">    ----------------------------------------</span><br><span class="line">ERROR: Command errored out with <span class="built_in">exit</span> status 1: python setup.py egg_info Check the logs <span class="keyword">for</span> full <span class="built_in">command</span> output.</span><br></pre></td></tr></table></figure><p>å…¶å®åœ¨CentOS7.4ä¸‹å·²ç»å­˜åœ¨libffi.so.6ï¼Œè§£å†³æ–¹æ³•æ˜¯åˆ›å»ºè½¯è¿æ¥ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /usr/lib64</span></span><br><span class="line"><span class="comment"># ln -s libffi.so.6 libffi.so.5</span></span><br><span class="line"><span class="comment"># ln -s libffi.so.6.0.1 libffi.so.5.0.1</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Requests </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Python </tag>
            
            <tag> Requests </tag>
            
            <tag> ç½‘ç»œçˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 18.04å®‰è£…Emacs 26.2é—®é¢˜è§£å†³</title>
      <link href="/2019/06/04/Ubuntu-18-04-%E5%AE%89%E8%A3%85-Emacs-26-2-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2019/06/04/Ubuntu-18-04-%E5%AE%89%E8%A3%85-Emacs-26-2-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="no-X-development-libraries-were-found"><a href="#no-X-development-libraries-were-found" class="headerlink" title="no X development libraries were found"></a>no X development libraries were found</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">checking for X... no</span><br><span class="line">checking for X... true</span><br><span class="line">configure: error: You seem to be running X, but no X development libraries</span><br><span class="line">were found.  You should install the relevant development files for X</span><br><span class="line">and for the toolkit you want, such as Gtk+ or Motif.  Also make</span><br><span class="line">sure you have development files for image handling, i.e.</span><br><span class="line">tiff, gif, jpeg, png and xpm.</span><br><span class="line">If you are sure you want Emacs compiled without X window support, pass</span><br><span class="line">  --without-x</span><br><span class="line">to configure.</span><br></pre></td></tr></table></figure><p>å®‰è£…libgtkå¼€å‘åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt-get install libgtk2.0-dev</span><br></pre></td></tr></table></figure><h1 id="libXpm-libjpeg-libgif-libungif-libtiff-gnutls-were-not-found"><a href="#libXpm-libjpeg-libgif-libungif-libtiff-gnutls-were-not-found" class="headerlink" title="libXpm libjpeg libgif&#x2F;libungif libtiff gnutls were not found"></a>libXpm libjpeg libgif&#x2F;libungif libtiff gnutls were not found</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">configure: error: The following required libraries were not found:</span><br><span class="line">    libXpm libjpeg libgif/libungif libtiff gnutls</span><br><span class="line">Maybe some development libraries/packages are missing?</span><br><span class="line">If you don&#x27;t want to link with them give</span><br><span class="line">    --with-xpm=no --with-jpeg=no --with-gif=no --with-tiff=no --with-gnutls=no</span><br><span class="line">as options to configure</span><br><span class="line">````</span><br><span class="line"></span><br><span class="line">å®‰è£…å¯¹åº”çš„åŒ…ï¼š</span><br><span class="line"></span><br><span class="line">````Bash</span><br><span class="line">sudo apt-get install libxpm-dev</span><br><span class="line">sudo apt-get install libjpeg62-dev</span><br><span class="line">sudo apt-get install libgif-dev</span><br><span class="line">sudo apt-get install libtiff5-dev</span><br><span class="line">sudo apt-get install libgnutls28-dev</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Emacs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Emacs </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lftpçš„sftpä½¿ç”¨æ—¶é‡åˆ°çš„å‘</title>
      <link href="/2019/05/07/lftp-%E7%9A%84-sftp-%E4%BD%BF%E7%94%A8%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
      <url>/2019/05/07/lftp-%E7%9A%84-sftp-%E4%BD%BF%E7%94%A8%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ä½¿ç”¨lftpçš„sftpæ—¶å€™ä¸€ç›´å¤„äºconnectingçŠ¶æ€ï¼Œå¹¶ä¸”æ²¡æœ‰å…¶ä»–æç¤ºä¿¡æ¯ã€‚çŠ¶æ€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/202502/lftp-sftp.png" alt="lftp sftp"></p><p>å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼Œåœ¨sftpç¬¬ä¸€æ¬¡è¿æ¥æœåŠ¡å™¨çš„æ—¶å€™éœ€è¦æ¥æ”¶æœåŠ¡ç«¯æœåŠ¡å™¨çš„fingerprintï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦ç”¨æˆ·é€šè¿‡è¾“å…¥è¿›è¡Œç¡®è®¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä½†æ˜¯è¿™äº›æç¤ºä¿¡æ¯è¢«lftpæ©ç›–äº†ï¼Œæ‰€ä»¥connectingçŠ¶æ€å…¶å®æ˜¯sftpä¸€ç›´åœ¨ç­‰å¾…ç”¨æˆ·çš„è¾“å…¥ã€‚è§£å†³æ–¹æ³•æ˜¯å…ˆåœ¨å‘½ä»¤è¡Œä½¿ç”¨sftpè¿æ¥ä¸€æ¬¡æœåŠ¡å™¨ï¼Œç„¶åå†ä½¿ç”¨lftpã€‚</p><p><img src="/images/202502/continue-connecting.png" alt="Are you sure you want to continue connecting"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduce è¯»å– Hive ORC ArrayIndexOutOfBoundsException: 1024 å¼‚å¸¸è§£å†³</title>
      <link href="/2019/05/07/MapReduce-%E8%AF%BB%E5%8F%96-Hive-ORC-ArrayIndexOutOfBoundsException-1024-%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3/"/>
      <url>/2019/05/07/MapReduce-%E8%AF%BB%E5%8F%96-Hive-ORC-ArrayIndexOutOfBoundsException-1024-%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>åœ¨MRå¤„ç†ORCçš„æ—¶å€™é‡åˆ°å¦‚ä¸‹å¼‚å¸¸ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 1024</span><br><span class="line">at org.apache.orc.impl.RunLengthIntegerReaderV2.nextVector    (RunLengthIntegerReaderV2.java:369)</span><br><span class="line">at org.apache.orc.impl.TreeReaderFactory$BytesColumnVectorUtil.commonReadByteArrays    (TreeReaderFactory.java:1231)</span><br><span class="line">at org.apache.orc.impl.TreeReaderFactory$BytesColumnVectorUtil.readOrcByteArrays    (TreeReaderFactory.java:1268)</span><br><span class="line">at org.apache.orc.impl.TreeReaderFactory$StringDirectTreeReader.nextVector    (TreeReaderFactory.java:1368)</span><br><span class="line">at org.apache.orc.impl.TreeReaderFactory$StringTreeReader.nextVector    (TreeReaderFactory.java:1212)</span><br><span class="line">at org.apache.orc.impl.TreeReaderFactory$ListTreeReader.nextVector    (TreeReaderFactory.java:1902)</span><br><span class="line">at org.apache.orc.impl.TreeReaderFactory$StructTreeReader.nextBatch    (TreeReaderFactory.java:1737)</span><br><span class="line">at org.apache.orc.impl.RecordReaderImpl.nextBatch(RecordReaderImpl.java:1045)</span><br><span class="line">at org.apache.hadoop.hive.ql.io.orc.RecordReaderImpl.ensureBatch(RecordReaderImpl.java:77)</span><br><span class="line">at org.apache.hadoop.hive.ql.io.orc.RecordReaderImpl.hasNext(RecordReaderImpl.java:89)</span><br></pre></td></tr></table></figure><p>é€šè¿‡æœç´¢å‘ç°è¿™ä¸ªBugåœ¨Hive 2.1.1ç‰ˆæœ¬ä¸­å·²ç»ä¿®å¤ã€‚æˆ‘ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªç‰ˆæœ¬ï¼Œæ£€æŸ¥å¯¹åº”çš„æºä»£ç å‘ç°ä»£ç æ˜¯å·²ç»æŒ‰ç…§ä¸‹é¢çš„Patchä¿®å¤è¿‡å¾—ï¼š<a href="https://issues.apache.org/jira/browse/HIVE-14483">https://issues.apache.org/jira/browse/HIVE-14483</a></p><p>é€šè¿‡åç¼–è¯‘å‘ç°æˆ‘æœ€ç»ˆæ‰“åŒ…åçš„ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯æœªä¿®å¤Bugçš„ä»£ç ç‰ˆæœ¬ã€‚é€šè¿‡ä¾èµ–åŒ…å‘ç°ä¾èµ–çš„ä»¥ä¸‹æ¨¡å—ä¸­ä¹ŸåŒ…å«ORCçš„Jarï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.orc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>orc-mapreduce<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯å°†<code>orc-mapreduce</code>åŒ…å‡çº§åˆ°1.1.2ç‰ˆæœ¬ï¼Œä¾èµ–é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.orc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>orc-mapreduce<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> åˆ†å¸ƒå¼å­˜å‚¨ </tag>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³HTTP POSTè¯·æ±‚Nginxé™æ€å†…å®¹405é”™è¯¯</title>
      <link href="/2019/04/04/%E8%A7%A3%E5%86%B3-HTTP-POST-%E8%AF%B7%E6%B1%82-Nginx-%E9%9D%99%E6%80%81%E5%86%85%E5%AE%B9-405-%E9%94%99%E8%AF%AF/"/>
      <url>/2019/04/04/%E8%A7%A3%E5%86%B3-HTTP-POST-%E8%AF%B7%E6%B1%82-Nginx-%E9%9D%99%E6%80%81%E5%86%85%E5%AE%B9-405-%E9%94%99%E8%AF%AF/</url>
      
        <content type="html"><![CDATA[<p>Nginxæ˜¯ä¸æ”¯æŒPOSTè¯·æ±‚é™æ€å†…å®¹çš„ï¼Œé€šè¿‡POSTè¯·æ±‚æ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -d &quot;a=b&quot; &quot;http://192.16.36.15:11013/upgrade&quot;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;&lt;title&gt;405 Not Allowed&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body bgcolor=<span class="string">&quot;white&quot;</span>&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;405 Not Allowed&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx/1.14.2&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯åœ¨Nginxé…ç½®ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error_page 405 =200 $uri;</span><br></pre></td></tr></table></figure><p>å®Œæ•´é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    location /upgrade &#123;</span><br><span class="line">        empty_gif;</span><br><span class="line">        access_log /data/nginx/upgrade.log;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page 405 =200 $uri;</span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 6.5ç¼–è¯‘Rsyslog 8.1903.0</title>
      <link href="/2019/04/03/CentOS-6-5-%E7%BC%96%E8%AF%91-Rsyslog-8-1903-0/"/>
      <url>/2019/04/03/CentOS-6-5-%E7%BC%96%E8%AF%91-Rsyslog-8-1903-0/</url>
      
        <content type="html"><![CDATA[<p>æºç ä¸‹è½½å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç‰‡åšæ–‡ï¼š<a href="https://www.zhangjc.com/2019/04/03/CentOS-7-3-%E7%BC%96%E8%AF%91-Rsyslog-8-1903-0/">CentOS 7.3 ç¼–è¯‘ Rsyslog 8.1903.0</a>ã€‚</p><p>æœ¬ç¯‡åšæ–‡ä»åˆ›å»ºæ„å»ºç¯å¢ƒå¼€å§‹å¡«å‘&#x2F;(ã„’oã„’)&#x2F;~~ã€‚é€šè¿‡ä¸Šä¸€ç¯‡åšæ–‡å¯ä»¥è§£å†³çš„é—®é¢˜æ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><p>æ‰§è¡Œé…ç½®æ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./configure --enable-omhttp</span></span><br><span class="line">configure: error: cannot find install-sh or install.sh <span class="keyword">in</span> <span class="string">&quot;.&quot;</span> <span class="string">&quot;./..&quot;</span> <span class="string">&quot;./../..&quot;</span></span><br></pre></td></tr></table></figure><p>å…ˆæ‰§è¡Œ<code>autogen.sh</code>å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sh autogen.sh</span></span><br><span class="line">checking <span class="keyword">for</span> LIBESTR... configure: error: Package requirements (libestr &gt;= 0.1.9) were not met:</span><br><span class="line">No package <span class="string">&#x27;libestr&#x27;</span> found</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ²¡æœ‰å®‰è£…libestråº“ï¼Œæ‰€ä»¥é‡æ–°å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install libestr libestr-devel</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œ<code>autogen.sh</code>é—®é¢˜ä¾æ—§o(â•¯â–¡â•°)oã€‚éœ€è¦ç¼–è¯‘å®‰è£…libestrã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://libestr.adiscon.com/files/download/libestr-0.1.9.tar.gz</span></span><br><span class="line"><span class="comment"># tar xzvf libestr-0.1.9.tar.gz</span></span><br><span class="line"><span class="comment"># ./configure CC=&quot;gcc -m64&quot; --prefix=/usr --libdir=/usr/lib64</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># make install</span></span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåé‡æ–°æ‰§è¡Œ<code>autogen.sh</code>é—®é¢˜è§£å†³ã€‚</p><p>é—®é¢˜é€ä¸€è§£å†³åæ‰§è¡Œè‡ªåŠ¨é…ç½®æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># autoreconf -fvi</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œé…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./configure --enable-omhttp</span></span><br></pre></td></tr></table></figure><p>é…ç½®è¿‡ç¨‹ä¸­å‡ºç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">make[3]: Entering directory `/data/kafka/rsyslog-8.1903.0/grammar&#x27;</span><br><span class="line">  LEX    lexer.c</span><br><span class="line">make[3]: *** [lexer.c] é”™è¯¯ 1</span><br><span class="line">make[3]: Leaving directory `/data/kafka/rsyslog-8.1903.0/grammar&#x27;</span><br><span class="line">make[2]: *** [all] é”™è¯¯ 2</span><br><span class="line">make[2]: Leaving directory `/data/kafka/rsyslog-8.1903.0/grammar&#x27;</span><br><span class="line">make[1]: *** [all-recursive] é”™è¯¯ 1</span><br><span class="line">make[1]: Leaving directory `/data/kafka/rsyslog-8.1903.0&#x27;</span><br><span class="line">make: *** [all] é”™è¯¯ 2</span><br></pre></td></tr></table></figure><p>å®‰è£…flexï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install flex</span><br></pre></td></tr></table></figure><p>å®‰è£…åæ‰§è¡Œ<code>autogen.sh</code>ï¼Œå†æ¬¡æ‰§è¡Œconfigureï¼Œç„¶åæ‰§è¡ŒmakeæˆåŠŸã€‚è¿›å…¥omhttpç›®å½•æ‰§è¡Œmakeå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd contrib/omhttp</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line">  CC     omhttp_la-omhttp.lo</span><br><span class="line">omhttp.c: åœ¨å‡½æ•°â€˜curlPostSetupâ€™ä¸­:</span><br><span class="line">omhttp.c:1554: é”™è¯¯ï¼šâ€˜CURLOPT_TCP_KEEPALIVEâ€™æœªå£°æ˜(åœ¨æ­¤å‡½æ•°å†…ç¬¬ä¸€æ¬¡ä½¿ç”¨)</span><br><span class="line">omhttp.c:1554: é”™è¯¯ï¼š(å³ä½¿åœ¨ä¸€ä¸ªå‡½æ•°å†…å¤šæ¬¡å‡ºç°ï¼Œæ¯ä¸ªæœªå£°æ˜çš„æ ‡è¯†ç¬¦åœ¨å…¶</span><br><span class="line">omhttp.c:1554: é”™è¯¯ï¼šæ‰€åœ¨çš„å‡½æ•°å†…ä¹ŸåªæŠ¥å‘Šä¸€æ¬¡ã€‚)</span><br><span class="line">omhttp.c:1554: è­¦å‘Šï¼šåœ¨â€˜_curl_optâ€™çš„å£°æ˜ä¸­ï¼Œç±»å‹é»˜è®¤ä¸ºâ€˜intâ€™</span><br><span class="line">omhttp.c:1558: é”™è¯¯ï¼šâ€˜CURLOPT_TCP_KEEPIDLEâ€™æœªå£°æ˜(åœ¨æ­¤å‡½æ•°å†…ç¬¬ä¸€æ¬¡ä½¿ç”¨)</span><br><span class="line">omhttp.c:1558: è­¦å‘Šï¼šåœ¨â€˜_curl_optâ€™çš„å£°æ˜ä¸­ï¼Œç±»å‹é»˜è®¤ä¸ºâ€˜intâ€™</span><br><span class="line">omhttp.c:1562: é”™è¯¯ï¼šâ€˜CURLOPT_TCP_KEEPINTVLâ€™æœªå£°æ˜(åœ¨æ­¤å‡½æ•°å†…ç¬¬ä¸€æ¬¡ä½¿ç”¨)</span><br><span class="line">omhttp.c:1562: è­¦å‘Šï¼šåœ¨â€˜_curl_optâ€™çš„å£°æ˜ä¸­ï¼Œç±»å‹é»˜è®¤ä¸ºâ€˜intâ€™</span><br><span class="line">make: *** [omhttp_la-omhttp.lo] é”™è¯¯ 1</span><br></pre></td></tr></table></figure><p>ç»è¿‡Googleåå‘ç°CURLOPT_TCP_KEEPALIVEæ˜¯åœ¨<code>libcurl 7.25.0</code>ä¹‹åæ‰å®šä¹‰çš„ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ç³»ç»Ÿå½“å‰libcurlç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -q libcurl</span></span><br><span class="line">    </span><br><span class="line">libcurl-7.19.7-52.el6.x86_64</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥éœ€è¦å‡çº§curlç‰ˆæœ¬ï¼Œå‚è€ƒï¼š<a href="https://www.jianshu.com/p/14f5f145453e">https://www.jianshu.com/p/14f5f145453e</a>ã€‚å‡çº§å®Œæˆååˆ›å»ºä»¥ä¸‹è½¯è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ln -s /usr/local/curl/include/curl/ /usr/include/curl</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œç¼–è¯‘omhttpï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">make[2]: Entering directory `/data/kafka/rsyslog-8.1903.0/contrib/omhttp&#x27;</span><br><span class="line">  CC     omhttp_la-omhttp.lo</span><br><span class="line">omhttp.c: åœ¨å‡½æ•°â€˜checkConnâ€™ä¸­:</span><br><span class="line">omhttp.c:470: è­¦å‘Šï¼šæ­¤å‡½æ•°ä¸­çš„â€˜healthUrlâ€™åœ¨ä½¿ç”¨å‰å¯èƒ½æœªåˆå§‹åŒ–</span><br><span class="line">  CCLD   omhttp.la</span><br><span class="line">/usr/bin/ld: cannot find -lcurl</span><br><span class="line">collect2: ld returned 1 exit status</span><br><span class="line">make[2]: *** [omhttp.la] é”™è¯¯ 1</span><br><span class="line">make[2]: Leaving directory `/data/kafka/rsyslog-8.1903.0/contrib/omhttp&#x27;</span><br><span class="line">make[1]: *** [all-recursive] é”™è¯¯ 1</span><br><span class="line">make[1]: Leaving directory `/data/kafka/rsyslog-8.1903.0&#x27;</span><br><span class="line">make: *** [all] é”™è¯¯ 2</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä»¥ä¸‹è½¯è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /lib64</span><br><span class="line"><span class="comment"># ln -s /usr/local/curl/lib/libcurl.so.4.5.0 libcurl.so</span></span><br><span class="line"><span class="comment"># ln -s /usr/local/curl/lib/libcurl.so.4.5.0 libcurl.so.4</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡ç¼–è¯‘omhttpæˆåŠŸï¼ï¼ç»ˆäºå¤§åŠŸå‘ŠæˆO(âˆ©_âˆ©)Oå“ˆå“ˆ~</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Rsyslog </tag>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7.3ç¼–è¯‘Rsyslog 8.1903.0</title>
      <link href="/2019/04/03/CentOS-7-3-%E7%BC%96%E8%AF%91-Rsyslog-8-1903-0/"/>
      <url>/2019/04/03/CentOS-7-3-%E7%BC%96%E8%AF%91-Rsyslog-8-1903-0/</url>
      
        <content type="html"><![CDATA[<p>æºç ä¸‹è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://github.com/rsyslog/rsyslog/archive/v8.1903.0.tar.gz</span></span><br><span class="line"><span class="comment"># tar xzvf v8.1903.0.tar.gz</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ„å»ºç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># autoreconf -fvi</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºè¿‡ç¨‹ä¸­å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">configure.ac:46: error: possibly undefined macro: AC_DISABLE_STATIC</span><br><span class="line">      If this token and others are legitimate, please use m4_pattern_allow.</span><br><span class="line">      See the Autoconf documentation.</span><br><span class="line">configure.ac:49: error: possibly undefined macro: AC_LIBTOOL_DLOPEN</span><br><span class="line">configure.ac:52: error: possibly undefined macro: AC_PROG_LIBTOOL</span><br><span class="line">autoreconf: /usr/bin/autoconf failed with exit status: 1</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯ç¼ºå°‘libtoolï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install libtool</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œé…ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰é€‰é¡¹ï¼Œæˆ‘æ˜¯å› ä¸ºè¦ç¼–è¯‘omhttpæ¨¡å—ï¼Œæ‰€ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./configure --enable-omhttp</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¿‡ç¨‹æ±‡æ€»å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">checking for LIBESTR... no</span><br><span class="line">configure: error: Package requirements (libestr &gt;= 0.1.9) were not met:</span><br><span class="line"></span><br><span class="line">No package &#x27;libestr&#x27; found</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -q libestr</span></span><br><span class="line">libestr-0.1.9-2.el7.x86_64</span><br></pre></td></tr></table></figure><p>å®‰è£…å¼€å‘åŒ…åè§£å†³ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install libestr-devel</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œé…ç½®å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">checking for LIBFASTJSON... no</span><br><span class="line">configure: error: Package requirements (libfastjson &gt;= 0.99.8) were not met:</span><br><span class="line"></span><br><span class="line">No package &#x27;libfastjson&#x27; found</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥ç³»ç»Ÿå®‰è£…çš„åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -q libfastjson</span></span><br><span class="line">libfastjson-0.99.4-3.el7.x86_64</span><br></pre></td></tr></table></figure><p>å®‰è£…æ–°ç‰ˆæœ¬ã€‚æºç ä¸‹è½½ï¼š<a href="http://download.rsyslog.com/libfastjson/">http://download.rsyslog.com/libfastjson/</a>ã€‚ä¸‹è½½<code>libfastjson-0.99.8.tar.gz</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://download.rsyslog.com/libfastjson/libfastjson-0.99.8.tar.gz</span></span><br><span class="line"><span class="comment"># tar xzvf libfastjson-0.99.8.tar.gz</span></span><br><span class="line"><span class="comment"># cd libfastjson-0.99.8/</span></span><br><span class="line"><span class="comment"># ./configure --prefix=/usr CC=&quot;gcc -m64&quot; PKG_CONFIG_PATH=&quot;/usr/lib64/pkgconfig&quot; --libdir=/usr/lib64</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># make install</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œé…ç½®å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">checking for LIBUUID... no</span><br><span class="line">configure: error: Package requirements (uuid) were not met:</span><br><span class="line"></span><br><span class="line">No package &#x27;uuid&#x27; found</span><br></pre></td></tr></table></figure><p>å®‰è£…libuuidï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install libuuid libuuid-devel</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œé…ç½®å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: error: in `/data/rsyslog/rsyslog-8.1903.0&#x27;:</span><br><span class="line">configure: error: libgcrypt-config not found in PATH</span><br></pre></td></tr></table></figure><p>å®‰è£…libgcryptæ¨¡å—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install libgcrypt libgcrypt-devel</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œé…ç½®æˆåŠŸã€‚^_^</p><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># make</span></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘è¿‡ç¨‹å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">make[2]: è¿›å…¥ç›®å½•â€œ/data/rsyslog/rsyslog-8.1903.0/grammarâ€</span><br><span class="line">  YACC     grammar.c</span><br><span class="line">../ylwrap:è¡Œ178: yacc: æœªæ‰¾åˆ°å‘½ä»¤</span><br><span class="line">make[2]: *** [grammar.c] é”™è¯¯ 127</span><br><span class="line">make[2]: ç¦»å¼€ç›®å½•â€œ/data/rsyslog/rsyslog-8.1903.0/grammarâ€</span><br><span class="line">make[1]: *** [all-recursive] é”™è¯¯ 1</span><br><span class="line">make[1]: ç¦»å¼€ç›®å½•â€œ/data/rsyslog/rsyslog-8.1903.0â€</span><br><span class="line">make: *** [all] é”™è¯¯ 2</span><br></pre></td></tr></table></figure><p>å®‰è£…byaccï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install byacc</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡ç¼–è¯‘å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">make  all-am</span><br><span class="line">make[3]: è¿›å…¥ç›®å½•â€œ/data/rsyslog/rsyslog-8.1903.0/grammarâ€</span><br><span class="line">  CC       libgrammar_la-grammar.lo</span><br><span class="line">  LEX      lexer.c</span><br><span class="line">  CC       libgrammar_la-lexer.lo</span><br><span class="line">gcc: error: ./lexer.c: No such file or directory</span><br><span class="line">gcc: fatal error: no input files</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºåœ¨makeå‰éœ€è¦æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sh autogen.sh</span></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘omhttpæ¨¡å—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># contrib/omhttp</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line">    CC       omhttp_la-omhttp.lo</span><br><span class="line">    CCLD     omhttp.la</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæˆåå†æ¬¡makeï¼Œç”Ÿæˆçš„<code>omhttp.so</code>æ–‡ä»¶åœ¨<code>contrib/omhttp/.libs</code>ç›®å½•ä¸‹ã€‚</p><p>è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼ï¼O(âˆ©_âˆ©)Oå“ˆå“ˆ~</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Rsyslog </tag>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rsyslog omhttpï¼ˆHTTPè¾“å‡ºæ¨¡å—ï¼‰</title>
      <link href="/2019/04/01/Rsyslog-omhttp%EF%BC%88HTTP-%E8%BE%93%E5%87%BA%E6%A8%A1%E5%9D%97%EF%BC%89/"/>
      <url>/2019/04/01/Rsyslog-omhttp%EF%BC%88HTTP-%E8%BE%93%E5%87%BA%E6%A8%A1%E5%9D%97%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨Rsyslogçš„omhttpæ¨¡å—å¯ä»¥å°†æ”¶é›†çš„æ—¥å¿—æ•°æ®ä»¥HTTPè¯·æ±‚çš„æ–¹å¼è¾“å‡ºã€‚è¯¥æ¨¡å—æ”¯æŒå•æ¡&#x2F;æ‰¹é‡å‘é€æ•°æ®ï¼Œæ”¯æŒGZIPå‹ç¼©ï¼Œæ”¯æŒHTTPSã€‚</p><p>Rsyslogé»˜è®¤æœªåŒ…å«omhttpæ¨¡å—ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘ã€‚ç¼–è¯‘è¿‡ç¨‹å‚è€ƒæˆ‘çš„å¦å¤–ä¸¤ç¯‡åšæ–‡ï¼š</p><ul><li><a href="https://www.zhangjc.com/2019/04/03/CentOS-7-3-%E7%BC%96%E8%AF%91-Rsyslog-8-1903-0/">CentOS 7.3 ç¼–è¯‘ Rsyslog 8.1903.0</a></li><li><a href="https://www.zhangjc.com/2019/04/03/CentOS-6-5-%E7%BC%96%E8%AF%91-Rsyslog-8-1903-0/">CentOS 6.5 ç¼–è¯‘ Rsyslog 8.1903.0</a></li></ul><p>CentOS 6.5ç³»ç»Ÿä¸‹ç¼–è¯‘æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥ä¸‹è½½æˆ‘ç¼–è¯‘åçš„soæ–‡ä»¶ï¼š<a href="https://www.zhangjc.com/images/202502/omhttp.so">CentOS 6.5ç¼–è¯‘omhttp.soä¸‹è½½</a></p><p>ä¸€ä¸ªç®€å•çš„é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module(load=&quot;omhttp&quot;)</span><br><span class="line">template(name=&quot;tpl1&quot; type=&quot;string&quot; string=&quot;&#123;\&quot;type\&quot;:\&quot;syslog\&quot;, \&quot;host\&quot;:\&quot;%HOSTNAME%\&quot;&#125;&quot;)</span><br><span class="line">action(</span><br><span class="line">    type=&quot;omhttp&quot;</span><br><span class="line">    server=&quot;127.0.0.1&quot;</span><br><span class="line">    serverport=&quot;8080&quot;</span><br><span class="line">    restpath=&quot;events&quot;</span><br><span class="line">    template=&quot;tpl1&quot;</span><br><span class="line">    action.resumeRetryCount=&quot;3&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rsyslog </tag>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 6.8 å®‰è£… Nginx</title>
      <link href="/2019/03/27/CentOS-6-8-%E5%AE%89%E8%A3%85-Nginx/"/>
      <url>/2019/03/27/CentOS-6-8-%E5%AE%89%E8%A3%85-Nginx/</url>
      
        <content type="html"><![CDATA[<p>æå‰å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sudo yum install yum-utils</span></span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªå·¥å…·ç³»ç»Ÿå·²ç»å®‰è£…ã€‚</p><p>åˆ›å»ºæ–‡ä»¶&#x2F;etc&#x2F;yum.repos.d&#x2F;nginx.repoï¼Œè¾“å…¥å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[nginx-stable]</span><br><span class="line">name=nginx stable repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/$releasever/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br><span class="line"></span><br><span class="line">[nginx-mainline]</span><br><span class="line">name=nginx mainline repo</span><br><span class="line">baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæ ¹æ®è‡ªå·±æœåŠ¡å™¨çš„æƒ…å†µæ›¿æ¢å‚æ•°<code>$releasever</code>å’Œ<code>$basearch</code>ã€‚</p><p>ä¸€èˆ¬é»˜è®¤ä½¿ç”¨ç¨³å®šå®‰è£…åŒ…ã€‚å¦‚æœæƒ³ä½¿ç”¨ä¸»çº¿å®‰è£…åŒ…åˆ™è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sudo yum-config-manager --enable nginx-mainline</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…Nginxï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sudo yum install nginx</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDBæ•°æ®å¯¼å‡ºå·¥å…·mongoexport</title>
      <link href="/2019/03/27/MongoDB-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E5%B7%A5%E5%85%B7-mongoexport/"/>
      <url>/2019/03/27/MongoDB-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E5%B7%A5%E5%85%B7-mongoexport/</url>
      
        <content type="html"><![CDATA[<p>å¯¼å‡ºç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mongoexport --host 192.168.72.60 --db realtime_statistic_backup --collection all_play_stats_summary --fields <span class="string">&quot;_id.timestamp,total_uv&quot;</span> --<span class="built_in">type</span> csv --out uv.csv --<span class="built_in">sort</span> <span class="string">&quot;&#123;&#x27;_id.timestamp&#x27;: -1&#125;&quot;</span> --query <span class="string">&quot;&#123;&#x27;_id.province_id&#x27;:&#x27;sc&#x27;,&#x27;_id.city_id&#x27;:&#x27;all&#x27;, &#x27;_id.display_name&#x27;: &#x27;all&#x27;&#125;&quot;</span></span></span><br></pre></td></tr></table></figure><ul><li>3.4.6ç‰ˆæœ¬åæ”¯æŒ<code>--uri</code>æ–¹å¼è¿æ¥MongoDB</li><li><code>--fields</code>æŒ‡å®šè¦å¯¼å‡ºçš„fieldï¼Œå¦‚æœæ˜¯åµŒå¥—çš„jsonï¼Œå¯ä»¥é€šè¿‡ç‚¹ï¼ˆ.ï¼‰æ“ä½œæŒ‡å®šå†…å±‚çš„field</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins protoc: command not found</title>
      <link href="/2019/03/20/Jenkins-protoc-command-not-found/"/>
      <url>/2019/03/20/Jenkins-protoc-command-not-found/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨Jenkinsç¼–è¯‘Hadoop3.1.2æ—¶æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[INFO] --- hadoop-maven-plugins:3.1.2:protoc (compile-protoc) @ hadoop-common ---</span><br><span class="line">[WARNING] [protoc, --version] failed: java.io.IOException: Cannot run program &quot;protoc&quot;: error=13, æƒé™ä¸å¤Ÿ</span><br><span class="line">[ERROR] stdout: []</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯Jenkinsä¸­æ‰¾ä¸åˆ°protocå‘½ä»¤ã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨Jenkinsä¸­é…ç½®ç¯å¢ƒå˜é‡PATHæŒ‡å®šprotocè·¯å¾„ã€‚</p><p><img src="/images/202502/jenkins-path.png" alt="jenkins path"></p><p>å†æ¬¡æ‰§è¡Œå‘ç°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protoc: error while loading shared libraries: libprotobuf.so.8: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•è·ŸPATHé…ç½®ä¸€æ ·é“ç†ï¼Œé…ç½®ä¸€ä¸ªæ–°çš„ç¯å¢ƒå˜é‡LD_LIBRARY_PATHï¼š</p><p><img src="/images/202502/jenkins-LD_LIBRARY_PATH.png" alt="jenkins LD_LIBRARY_PATH"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pipå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…</title>
      <link href="/2019/03/19/pip-%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%85/"/>
      <url>/2019/03/19/pip-%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip install pyspark==2.3.3</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinsé‡å¯åMavençš„ProjectåŠ è½½å¤±è´¥</title>
      <link href="/2019/03/19/Jenkins-%E9%87%8D%E5%90%AF%E5%90%8E-Maven-%E7%9A%84-Project-%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5/"/>
      <url>/2019/03/19/Jenkins-%E9%87%8D%E5%90%AF%E5%90%8E-Maven-%E7%9A%84-Project-%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5/</url>
      
        <content type="html"><![CDATA[<p>Jenkinsé‡å¯åå‘ç°Mavençš„é¡¹ç›®éƒ½æ²¡æœ‰æ­£å¸¸åŠ è½½ã€‚æ£€æŸ¥Jenkinsçš„å¯åŠ¨æ—¥å¿—å‘ç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code class="Text">java.io.IOException: Unable to read /home/jenkins/.jenkins/jobs/test-maven/config.xml    at hudson.XmlFile.read(XmlFile.java:149)    at hudson.model.Items.load(Items.java:371)    at jenkins.model.Jenkins$14.run(Jenkins.java:3128)    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:169)    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:296)    at jenkins.model.Jenkins$5.runTask(Jenkins.java:1069)    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:214)    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:117)    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)    at java.lang.Thread.run(Thread.java:748)Caused by: com.thoughtworks.xstream.mapper.CannotResolveClassException: maven2-moduleset    at com.thoughtworks.xstream.mapper.DefaultMapper.realClass(DefaultMapper.java:79)    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)    at com.thoughtworks.xstream.mapper.DynamicProxyMapper.realClass(DynamicProxyMapper.java:55)    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)    at com.thoughtworks.xstream.mapper.PackageAliasingMapper.realClass(PackageAliasingMapper.java:88)    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)</code></pre><p>å°†Maven Integration pluginé‡è£…å¹¶é‡å¯Jenkinsåæ¢å¤æ­£å¸¸ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Java </tag>
            
            <tag> CI/CD </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Rsyslogå°†Nginx Access Logå†™å…¥Kafka</title>
      <link href="/2019/03/15/%E4%BD%BF%E7%94%A8-Rsyslog-%E5%B0%86-Nginx-Access-Log-%E5%86%99%E5%85%A5-Kafka/"/>
      <url>/2019/03/15/%E4%BD%BF%E7%94%A8-Rsyslog-%E5%B0%86-Nginx-Access-Log-%E5%86%99%E5%85%A5-Kafka/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒè¯´æ˜"><a href="#ç¯å¢ƒè¯´æ˜" class="headerlink" title="ç¯å¢ƒè¯´æ˜"></a>ç¯å¢ƒè¯´æ˜</h1><ul><li>CentOS Linux release 7.3.1611</li><li>kafka_2.12-0.10.2.2</li><li>nginx&#x2F;1.12.2</li><li>rsyslog-8.24.0-34.el7.x86_64.rpm</li></ul><h1 id="åˆ›å»ºæµ‹è¯•Topic"><a href="#åˆ›å»ºæµ‹è¯•Topic" class="headerlink" title="åˆ›å»ºæµ‹è¯•Topic"></a>åˆ›å»ºæµ‹è¯•Topic</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./kafka-topics.sh --zookeeper 192.168.72.25:2181/kafka --create --topic develop-test-topic --partitions 10 --replication-factor 3</span><br></pre></td></tr></table></figure><h1 id="RSyslogå®‰è£…"><a href="#RSyslogå®‰è£…" class="headerlink" title="RSyslogå®‰è£…"></a>RSyslogå®‰è£…</h1><p>ä¸€èˆ¬ç³»ç»Ÿè‡ªå¸¦RSyslogæœåŠ¡æ— éœ€å¦å¤–å®‰è£…ã€‚ä½†æ˜¯å› ä¸ºæ•°æ®éœ€è¦é€šè¿‡RSyslogçš„omkafkaæ¨¡å—å†™å…¥åˆ°Kafkaï¼Œè€Œomkafkaåœ¨RSyslogçš„v8.7.0+ç‰ˆæœ¬æ‰æ”¯æŒï¼Œæ‰€ä»¥è¦çœ‹å½“å‰ç³»ç»Ÿä¸­RSyslogçš„ç‰ˆæœ¬æ˜¯å¦éœ€è¦å‡çº§ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rsyslogd -v</span></span><br><span class="line">rsyslogd 7.4.7, compiled with:</span><br><span class="line">FEATURE_REGEXP:Yes</span><br><span class="line">FEATURE_LARGEFILE:No</span><br><span class="line">GSSAPI Kerberos 5 support:Yes</span><br><span class="line">FEATURE_DEBUG (debug build, slow code):No</span><br><span class="line">32bit Atomic operations supported:Yes</span><br><span class="line">64bit Atomic operations supported:Yes</span><br><span class="line">Runtime Instrumentation (slow code):No</span><br><span class="line">uuid support:Yes</span><br><span class="line"></span><br><span class="line">See http://www.rsyslog.com <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sudo yum install rsyslog</span></span><br></pre></td></tr></table></figure><p>å®‰è£…ä¾èµ–å…³ç³»å¦‚ä¸‹ï¼š<img src="/images/202501/RSyslog%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB.png"></p><h1 id="æ·»åŠ omkafkaæ¨¡å—"><a href="#æ·»åŠ omkafkaæ¨¡å—" class="headerlink" title="æ·»åŠ omkafkaæ¨¡å—"></a>æ·»åŠ omkafkaæ¨¡å—</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install rsyslog-kafka</span></span><br></pre></td></tr></table></figure><h1 id="RSyslog-Client-Nginxé…ç½®"><a href="#RSyslog-Client-Nginxé…ç½®" class="headerlink" title="RSyslog Client Nginxé…ç½®"></a>RSyslog Client Nginxé…ç½®</h1><p>æ³¨æ„ï¼ŒNginx 1.7.1ä¹‹åæ‰æ”¯æŒsyslogçš„æ–¹å¼å¤„ç†æ—¥å¿—ã€‚å…·ä½“é…ç½®é¡¹å‚è§å®˜ç½‘æ–‡æ¡£<a href="https://nginx.org/en/docs/syslog.html">Logging to syslog</a>ã€‚</p><p>Nginxé…ç½®ä¸»è¦æ˜¯æ—¥å¿—æ ¼å¼å’ŒAccess Logé…ç½®é¡¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 11000;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://10.16.0.144:11000;</span><br><span class="line">        access_log syslog:server=localhost,facility=local7,tag=nginx11000Root,severity=info main;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="RSyslog-Serverç«¯é…ç½®"><a href="#RSyslog-Serverç«¯é…ç½®" class="headerlink" title="RSyslog Serverç«¯é…ç½®"></a>RSyslog Serverç«¯é…ç½®</h1><p>RSyslogçš„ä¸»é…ç½®æ–‡ä»¶<code>/etc/rsyslog.conf</code>ï¼Œå…¶ä¸­ä¼šåŒ…å«å¼•å…¥<code>/etc/rsyslog.d</code>ä¸‹æ‰©å±•åä¸º<code>conf</code>çš„é…ç½®æ–‡ä»¶ã€‚</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/etc/rsyslog.conf</code>å°†ä¸‹é¢ä¸¤è¡Œå‰é¢çš„æ³¨é‡Šå»æ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ModLoad imudp</span><br><span class="line">$ UDPServerRun 514</span><br></pre></td></tr></table></figure><p>åœ¨<code>/etc/rsyslog.d</code>ç›®å½•ä¸‹åˆ›å»º<code>rsyslog_nginx_kafka_cluster.conf</code>ï¼Œé…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">module(load=&quot;imudp&quot;)</span><br><span class="line">input(type=&quot;imudp&quot; port=&quot;514&quot;)</span><br><span class="line"></span><br><span class="line"># nginx access log ==&gt; rsyslog server(local) ==&gt; kafka</span><br><span class="line">module(load=&quot;omkafka&quot;)</span><br><span class="line"></span><br><span class="line">template(name=&quot;nginx-11000-root&quot; type=&quot;string&quot; string=&quot;%msg%&quot;)</span><br><span class="line"></span><br><span class="line">if $inputname == &quot;imudp&quot; then &#123;</span><br><span class="line">    if ($programname == &quot;nginx11000Root&quot;) then</span><br><span class="line">        action(type=&quot;omkafka&quot;</span><br><span class="line">            template=&quot;nginx-11000-root&quot;</span><br><span class="line">            broker=[&quot;192.168.72.10:9092&quot;,&quot;192.168.72.20:9092&quot;,&quot;192.168.72.25:9092&quot;,&quot;192.168.72.26:9092&quot;,&quot;192.168.72.27:9092&quot;,&quot;192.168.72.48:9092&quot;,&quot;192.168.72.55:9092&quot;,&quot;192.168.72.80:9092&quot;,&quot;192.168.72.81:9092&quot;,&quot;192.168.72.97:9092&quot;]</span><br><span class="line">            topic=&quot;develop-test-topic&quot;</span><br><span class="line">            partitions.auto=&quot;on&quot;</span><br><span class="line">            confParam=[</span><br><span class="line">                &quot;socket.keepalive.enable=true&quot;</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:rawmsg, contains, &quot;nginx11000Root&quot; ~</span><br></pre></td></tr></table></figure><h1 id="è”è°ƒæµ‹è¯•"><a href="#è”è°ƒæµ‹è¯•" class="headerlink" title="è”è°ƒæµ‹è¯•"></a>è”è°ƒæµ‹è¯•</h1><p>å¯åŠ¨RSyslogæœåŠ¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># service rsyslog start</span><br><span class="line">Redirecting to /bin/systemctl start  rsyslog.service</span><br></pre></td></tr></table></figure><h1 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h1><h2 id="syslog-tag-åªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­—"><a href="#syslog-tag-åªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­—" class="headerlink" title="syslog tag åªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­—"></a>syslog tag åªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># nginx -t</span><br><span class="line">nginx: [emerg] syslog &quot;tag&quot; only allows alphanumeric characters and underscore in     /etc/nginx/conf.d/jx-11000-jenkins149-36-144.conf:7</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test failed</span><br></pre></td></tr></table></figure><h2 id="â€˜omkafkaâ€™-is-unknown"><a href="#â€˜omkafkaâ€™-is-unknown" class="headerlink" title="â€˜omkafkaâ€™ is unknown"></a>â€˜omkafkaâ€™ is unknown</h2><p>RSyslogä¸­æ²¡æœ‰åŒ…å«omkafkaæ¨¡å—ï¼Œéœ€è¦å¦å¤–å®‰è£…ã€‚æŸ¥çœ‹<code>/var/log/messages</code>æ—¥å¿—ä¿¡æ¯ä¼šæœ‰ä»¥ä¸‹æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tail -f messages</span></span><br><span class="line">Mar 15 15:13:40 192-168-72-29 systemd: Started System Logging Service.</span><br><span class="line">Mar 15 15:13:40 192-168-72-29 rsyslogd: could not load module <span class="string">&#x27;/usr/lib64/rsyslog/omkafka.so&#x27;</span>, dlopen:     /usr/lib64/rsyslog/omkafka.so: cannot open shared object file: No such file or directory  [v8.24.0-34.el7 try     http://www.rsyslog.com/e/2066 ]</span><br><span class="line">Mar 15 15:13:40 192-168-72-29 rsyslogd: could not load module <span class="string">&#x27;/usr/lib64/rsyslog/omkafka.so&#x27;</span>, dlopen:     /usr/lib64/rsyslog/omkafka.so: cannot open shared object file: No such file or directory  [v8.24.0-34.el7 try     http://www.rsyslog.com/e/2066 ]</span><br><span class="line">Mar 15 15:13:40 192-168-72-29 rsyslogd: module name <span class="string">&#x27;omkafka&#x27;</span> is unknown [v8.24.0-34.el7 try     http://www.rsyslog.com/e/2209 ]</span><br><span class="line">Mar 15 15:13:40 192-168-72-29 rsyslogd: module name <span class="string">&#x27;omkafka&#x27;</span> is unknown [v8.24.0-34.el7 try     http://www.rsyslog.com/e/2209 ]</span><br></pre></td></tr></table></figure><h2 id="CentOS-6-5å‡çº§Rsyslog"><a href="#CentOS-6-5å‡çº§Rsyslog" class="headerlink" title="CentOS 6.5å‡çº§Rsyslog"></a>CentOS 6.5å‡çº§Rsyslog</h2><p>CentOS 6.5è‡ªå¸¦çš„RSyslogç‰ˆæœ¬æ˜¯<code>rsyslogd 5.8.10</code>ã€‚æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å®‰è£…æ–°ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line"><span class="comment"># wget http://rpms.adiscon.com/v8-stable/rsyslog.repo</span></span><br><span class="line"><span class="comment"># yum install rsyslog</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rsyslog </tag>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
            <tag> Nginx </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitLab + Jenkins + Nginx + Lua å®ç°ä»£ç è‡ªåŠ¨åˆ†å‘</title>
      <link href="/2019/03/13/GitLab-Jenkins-Nginx-Lua-%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E5%88%86%E5%8F%91/"/>
      <url>/2019/03/13/GitLab-Jenkins-Nginx-Lua-%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E5%88%86%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å¤§æ•°æ®Hiveæ•°æ®ä»“åº“çš„å¼€å‘ä¸­ï¼Œä¸»è¦æ˜¯shell + HQLçš„è„šæœ¬å¼€å‘ã€‚è„šæœ¬çš„æµ‹è¯•éœ€è¦æ”¾åˆ°é€‚å½“çš„å¤§æ•°æ®ç¯å¢ƒä¸­è¿›è¡Œã€‚å¦‚æœå¤§å®¶å…±ç”¨GitLabé¡¹ç›®ä¸Šçš„åŒä¸€ä¸ªBranchè¿›è¡Œæµ‹è¯•éœ€è¦ä»£ç é¢‘ç¹åˆå¹¶ï¼Œå½±å“æ•ˆç‡ã€‚æˆ‘çš„æ€è·¯æ˜¯æ¯ä¸ªDeveloperåœ¨è‡ªå·±çš„Branchå¼€å‘å¹¶ç»è¿‡æµ‹è¯•åå‘èµ·Merge Requestã€‚  </p><p>åœ¨æˆ‘çš„å¼€å‘åœºæ™¯ä¸­GitLabåœ¨å†…ç½‘ä¸­é€šè¿‡ç«¯å£æ˜ å°„åå…è®¸ä»å¤–ç½‘è®¿é—®ï¼ŒGitLabä¸­çš„IPéƒ½æ˜¯å†…ç½‘çš„ï¼ŒGitLabä¸Šçš„é¡¹ç›®é“¾æ¥åœ°å€éƒ½æ˜¯å†…ç½‘çš„ï¼Œå¦‚ï¼ˆssh:&#x2F;&#x2F;<a href="mailto:&#103;&#105;&#x74;&#64;&#49;&#x39;&#50;&#x2e;&#x31;&#x36;&#56;&#x2e;&#49;&#46;&#x31;&#48;">&#103;&#105;&#x74;&#64;&#49;&#x39;&#50;&#x2e;&#x31;&#x36;&#56;&#x2e;&#49;&#46;&#x31;&#48;</a>:50022&#x2F;test&#x2F;test.gitï¼‰ã€‚å¹¶ä¸”æˆ‘çš„Jenkinsä¹Ÿæ˜¯åœ¨å†…ç½‘ä¸­çš„ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä¸€å±‚ä»£ç†æ¥æ”¶å¤–éƒ¨çš„REST APIè¯·æ±‚ã€‚è¿™ä¸€ç‚¹ç»™æœ€ç»ˆçš„å®ç°å¸¦æ¥ä¸€äº›éš¾ç‚¹ã€‚</p><h1 id="ç³»ç»Ÿæ¶æ„"><a href="#ç³»ç»Ÿæ¶æ„" class="headerlink" title="ç³»ç»Ÿæ¶æ„"></a>ç³»ç»Ÿæ¶æ„</h1><p><img src="/images/202501/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E5%BC%80%E5%8F%91%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81%E5%88%86%E5%8F%91%E6%B5%81%E7%A8%8B.png" alt="æ•°æ®ä»“åº“å¼€å‘æµ‹è¯•ä»£ç åˆ†å‘æµç¨‹"></p><h1 id="GitLab-é¡¹ç›®é…ç½®"><a href="#GitLab-é¡¹ç›®é…ç½®" class="headerlink" title="GitLab é¡¹ç›®é…ç½®"></a>GitLab é¡¹ç›®é…ç½®</h1><p>åœ¨GitLabé¡¹ç›®ä¸Šé…ç½®WebHookï¼š<img src="/images/202501/GitLabWebHook.png" alt="GitLabWebHook"><br>è¿™æ ·æ¯æ¬¡é¡¹ç›®çš„pushæ“ä½œéƒ½ä¼šå‘è¿™ä¸ªé…ç½®çš„URLå‘é€ä¸€ä¸ªPostè¯·æ±‚ã€‚æ¯æ¬¡WebHookçš„æ‰§è¡Œæƒ…å†µå¯ä»¥ç‚¹å‡»WebHookåé¢çš„EditæŒ‰é’®åœ¨ç¼–è¾‘é¡µé¢ä¸­æŸ¥çœ‹ã€‚</p><h1 id="Nginx-Lua"><a href="#Nginx-Lua" class="headerlink" title="Nginx + Lua"></a>Nginx + Lua</h1><h2 id="OpenRestyå®‰è£…"><a href="#OpenRestyå®‰è£…" class="headerlink" title="OpenRestyå®‰è£…"></a>OpenRestyå®‰è£…</h2><p>ç›´æ¥ä½¿ç”¨æ¨èçš„é¢„ç¼–è¯‘OpenRestyå®‰è£…ã€‚Centos 7.3æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install yum-utils</span><br><span class="line"><span class="built_in">sudo</span> yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo</span><br><span class="line"><span class="built_in">sudo</span> yum install openresty</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…OpenResty-Lua-HTTPå®¢æˆ·ç«¯æ¨¡å—"><a href="#å®‰è£…OpenResty-Lua-HTTPå®¢æˆ·ç«¯æ¨¡å—" class="headerlink" title="å®‰è£…OpenResty Lua HTTPå®¢æˆ·ç«¯æ¨¡å—"></a>å®‰è£…OpenResty Lua HTTPå®¢æˆ·ç«¯æ¨¡å—</h2><p>ä¸‹è½½GitHubé¡¹ç›®ä»£ç ï¼š<a href="https://github.com/ledgetech/lua-resty-http">lua-resty-http</a><br>å°†lib&#x2F;restyç›®å½•ä¸‹çš„ä¸¤ä¸ªæ–‡ä»¶http.luaå’Œhttp_headers.luaæ”¾åˆ°OpenRestyå®‰è£…å¯¹åº”çš„ç›®å½•ä¸‹ï¼ˆå¦‚ï¼š&#x2F;usr&#x2F;local&#x2F;openresty&#x2F;lualib&#x2F;restyï¼‰ã€‚</p><h2 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h2><p>nginx.confé…ç½®å†…å®¹å¦‚ä¸‹ã€‚ä¸»è¦æ˜¯ä½¿ç”¨Luaè§£æä»GitLab WebHookå‘é€æ¥çš„æ•°æ®ï¼Œå¹¶è§£æéœ€è¦çš„å‚æ•°åé€šè¿‡Jenkinsçš„REST APIå‘é€ç»™Jenkinsã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       8080;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line"></span><br><span class="line">    #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        content_by_lua_block &#123;</span><br><span class="line">            local cjson = require &quot;cjson&quot;</span><br><span class="line">            local http = require &quot;resty.http&quot;</span><br><span class="line">            local httpc = http.new()</span><br><span class="line"></span><br><span class="line">            ngx.req.read_body()</span><br><span class="line">            local data = ngx.req.get_body_data()</span><br><span class="line">            local json = cjson.decode(data)</span><br><span class="line">            local after = json[&quot;after&quot;]</span><br><span class="line">            if ( after == &quot;0000000000000000000000000000000000000000&quot; )</span><br><span class="line">            then</span><br><span class="line">                ngx.status = 200</span><br><span class="line">                ngx.say(&quot;delete branch do not need build&quot;)</span><br><span class="line">                return</span><br><span class="line">            end</span><br><span class="line"></span><br><span class="line">            local projectName = json[&quot;project&quot;][&quot;name&quot;]</span><br><span class="line">            local userName = json[&quot;user_name&quot;]</span><br><span class="line">            local ref = json[&quot;ref&quot;]</span><br><span class="line">            local branchName = string.sub(ref, 12)</span><br><span class="line">            if ( branchName == &quot;master&quot; )</span><br><span class="line">            then</span><br><span class="line">                ngx.status = 200</span><br><span class="line">                ngx.say(&quot;master branch do not need build&quot;)</span><br><span class="line">                return</span><br><span class="line">            end</span><br><span class="line"></span><br><span class="line">            local uri = &quot;http://172.16.72.200:8080/job/DataWarehouse/buildWithParameters?userName=&quot;</span><br><span class="line">            uri = uri..userName..&quot;&amp;branchName=&quot;..branchName..&quot;&amp;projectName=&quot;..projectName</span><br><span class="line">            local res, err = httpc:request_uri(uri, &#123;</span><br><span class="line">                method = &quot;POST&quot;</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            ngx.status = res.status</span><br><span class="line">            ngx.say(res.body)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Jenkinsé¡¹ç›®é…ç½®"><a href="#Jenkinsé¡¹ç›®é…ç½®" class="headerlink" title="Jenkinsé¡¹ç›®é…ç½®"></a>Jenkinsé¡¹ç›®é…ç½®</h1><h2 id="é…ç½®å‚æ•°åŒ–æ„å»ºçš„é¡¹ç›®"><a href="#é…ç½®å‚æ•°åŒ–æ„å»ºçš„é¡¹ç›®" class="headerlink" title="é…ç½®å‚æ•°åŒ–æ„å»ºçš„é¡¹ç›®"></a>é…ç½®å‚æ•°åŒ–æ„å»ºçš„é¡¹ç›®</h2><p>æ³¨æ„å‚æ•°åç§°ä¸Luaå‘é€è¯·æ±‚çš„å‚æ•°åç§°è¦å¯¹åº”ï¼Œå¦‚ä¸‹å›¾ï¼š<img src="/images/202501/JenkinsProject1.png"></p><h2 id="ä»£å‘åˆ†å‘é€»è¾‘"><a href="#ä»£å‘åˆ†å‘é€»è¾‘" class="headerlink" title="ä»£å‘åˆ†å‘é€»è¾‘"></a>ä»£å‘åˆ†å‘é€»è¾‘</h2><p>åœ¨æ„å»ºçš„Shellä¸­å®ç°ä»£ç åˆ†å‘åˆ°å¯¹åº”Developerçš„ä¸ªäººç›®å½•ä¸‹ï¼š<img src="/images/202501/JenkinsProject2.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿæ¶æ„ </category>
          
          <category> CI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> GitLab </tag>
            
            <tag> Jenkins </tag>
            
            <tag> Lua </tag>
            
            <tag> OpenResty </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx é…ç½®æ”¯æŒ HTTPS ä»£ç†</title>
      <link href="/2019/03/12/Nginx-%E9%85%8D%E7%BD%AE%E6%94%AF%E6%8C%81-HTTPS-%E4%BB%A3%E7%90%86/"/>
      <url>/2019/03/12/Nginx-%E9%85%8D%E7%BD%AE%E6%94%AF%E6%8C%81-HTTPS-%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡æè¿°çš„æ˜¯Nginx HTTPSåå‘ä»£ç†çš„æƒ…å†µï¼ˆå³åç«¯æœåŠ¡æ˜¯HTTPçš„ï¼‰ã€‚</p><h1 id="ä½¿ç”¨opensslé…ç½®sslè¯ä¹¦"><a href="#ä½¿ç”¨opensslé…ç½®sslè¯ä¹¦" class="headerlink" title="ä½¿ç”¨opensslé…ç½®sslè¯ä¹¦"></a>ä½¿ç”¨opensslé…ç½®sslè¯ä¹¦</h1><h2 id="ç”ŸæˆæœåŠ¡å™¨ç«¯çš„ç§é’¥ï¼ˆkey-æ–‡ä»¶ï¼‰ï¼š"><a href="#ç”ŸæˆæœåŠ¡å™¨ç«¯çš„ç§é’¥ï¼ˆkey-æ–‡ä»¶ï¼‰ï¼š" class="headerlink" title="ç”ŸæˆæœåŠ¡å™¨ç«¯çš„ç§é’¥ï¼ˆkey æ–‡ä»¶ï¼‰ï¼š"></a>ç”ŸæˆæœåŠ¡å™¨ç«¯çš„ç§é’¥ï¼ˆkey æ–‡ä»¶ï¼‰ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openssl genrsa -des3 -out server.key 2048</span></span><br><span class="line">Generating RSA private key, 2048 bit long modulus</span><br><span class="line">.............+++</span><br><span class="line">..........+++</span><br><span class="line">e is 65537 (0x10001)</span><br><span class="line">Enter pass phrase <span class="keyword">for</span> server.key:</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä¸¤æ¬¡å¯†ç åkeyæ–‡ä»¶ç”Ÿæˆå®Œæ¯•ã€‚</p><h2 id="ç”ŸæˆCSRï¼ˆCertificate-Signing-Requestï¼‰æ–‡ä»¶ï¼š"><a href="#ç”ŸæˆCSRï¼ˆCertificate-Signing-Requestï¼‰æ–‡ä»¶ï¼š" class="headerlink" title="ç”ŸæˆCSRï¼ˆCertificate Signing Requestï¼‰æ–‡ä»¶ï¼š"></a>ç”ŸæˆCSRï¼ˆCertificate Signing Requestï¼‰æ–‡ä»¶ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openssl req -new -key server.key -out server.crs</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºè¾“å…¥éœ€è¦çš„ä¿¡æ¯åCSRæ–‡ä»¶ç”Ÿæˆå®Œæ¯•ã€‚</p><h2 id="ç”Ÿæˆè‡ªç­¾åçš„CAæ–‡ä»¶ï¼š"><a href="#ç”Ÿæˆè‡ªç­¾åçš„CAæ–‡ä»¶ï¼š" class="headerlink" title="ç”Ÿæˆè‡ªç­¾åçš„CAæ–‡ä»¶ï¼š"></a>ç”Ÿæˆè‡ªç­¾åçš„CAæ–‡ä»¶ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openssl x509 -req -days 3650 -in server.crs -signkey server.key -out ca.crt</span></span><br><span class="line">Signature ok</span><br><span class="line">subject=/C=cn/ST=beijing/L=beijing/O=<span class="built_in">test</span>/OU=<span class="built_in">test</span>/CN=<span class="built_in">test</span>/emailAddress=<span class="built_in">test</span>@test.com</span><br><span class="line">Getting Private key</span><br><span class="line">Enter pass phrase <span class="keyword">for</span> server.key:</span><br></pre></td></tr></table></figure><p>è¾“å…¥keyæ–‡ä»¶çš„å¯†ç åCAæ–‡ä»¶ç”Ÿæˆå®Œæ¯•ã€‚</p><h1 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443;</span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate ca.crt;</span><br><span class="line">    ssl_certificate_key server.key;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://192.168.36.144:11000;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½Nginxé…ç½®æ–‡ä»¶åï¼Œå‘ç°Nginxä»£ç†çš„443ç«¯å£æœªæ­£å¸¸å¯åŠ¨ã€‚æŸ¥çœ‹Nginx erroræ—¥å¿—å‘ç°ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2019/03/12 16:49:26 [emerg] 85175#0: SSL_CTX_use_PrivateKey_file(&quot;/etc/nginx/server.key&quot;) failed (SSL: error:0906406D:PEM routines:PEM_def_callback:problems getting password error:0906A068:PEM routines:PEM_do_header:bad password read error:140B0009:SSL routines:SSL_CTX_use_PrivateKey_file:PEM lib)</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mv server.key server.key.org</span></span><br><span class="line"><span class="comment"># openssl rsa -in server.key.org -out server.key</span></span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½Nginxé…ç½®æ–‡ä»¶ã€‚æ­¤æ—¶ä¹Ÿä¸éœ€è¦å†è¾“å…¥keyæ–‡ä»¶çš„å¯†ç äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> HTTPS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinså®‰è£…æ’ä»¶ç½‘ç»œé”™è¯¯é—®é¢˜è§£å†³</title>
      <link href="/2019/03/01/Jenkins-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E7%BD%91%E7%BB%9C%E9%94%99%E8%AF%AF%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2019/03/01/Jenkins-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E7%BD%91%E7%BB%9C%E9%94%99%E8%AF%AF%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>Jenkinså®‰è£…æ’ä»¶æ—¶æŠ¥ç½‘ç»œä¸é€šçš„é”™è¯¯ï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯çœ‹æ˜¯è¿æ¥<a href="https://www.google.com/">https://www.google.com</a>ç½‘ç»œä¸é€šã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯ä¿®æ”¹â€œUpdate Siteâ€çš„URLåœ°å€ï¼Œå°†é»˜è®¤åœ°å€ç”±httpsæ”¹ä¸ºhttpã€‚<br>â€œUpdate Siteâ€é…ç½®é¡¹ä½ç½®åœ¨â€œæ’ä»¶ç®¡ç†-&gt;Advancedâ€ä¸­ï¼Œä¿®æ”¹åå¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/202502/jenkinsUpdateSite.png" alt="Jenkins Update Site"></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</title>
      <link href="/2019/01/13/Python3-%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"/>
      <url>/2019/01/13/Python3-%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<p>Pythonè™šæ‹Ÿç¯å¢ƒä¸»è¦æ˜¯ä¸ºäº†è§£å†³Pythonå¤šç‰ˆæœ¬åŠæ¨¡å—é—´ç‰ˆæœ¬å…¼å®¹çš„é—®é¢˜ã€‚åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„æ–¹æ³•å¾ˆç®€å•ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv PySparkEnv</span><br></pre></td></tr></table></figure><p>PySparkEnvå³è™šæ‹Ÿç¯å¢ƒçš„ä¸»ç›®å½•ã€‚å¦‚æœè¦å¯ç”¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒçš„è¯ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source PySparkEnv/<span class="built_in">bin</span>/activate</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sqoopæºç ä¿®æ”¹ï¼šå¢åŠ è½åœ°HDFSæ–‡ä»¶æ•°ä¸MapTaskæ•°é‡ä¸€è‡´æ€§æ£€æŸ¥</title>
      <link href="/2018/12/30/Sqoop-%E6%BA%90%E7%A0%81%E4%BF%AE%E6%94%B9%EF%BC%9A%E5%A2%9E%E5%8A%A0%E8%90%BD%E5%9C%B0-HDFS-%E6%96%87%E4%BB%B6%E6%95%B0%E4%B8%8E-MapTask-%E6%95%B0%E9%87%8F%E4%B8%80%E8%87%B4%E6%80%A7%E6%A3%80%E6%9F%A5/"/>
      <url>/2018/12/30/Sqoop-%E6%BA%90%E7%A0%81%E4%BF%AE%E6%94%B9%EF%BC%9A%E5%A2%9E%E5%8A%A0%E8%90%BD%E5%9C%B0-HDFS-%E6%96%87%E4%BB%B6%E6%95%B0%E4%B8%8E-MapTask-%E6%95%B0%E9%87%8F%E4%B8%80%E8%87%B4%E6%80%A7%E6%A3%80%E6%9F%A5/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡æ˜¯å¯¹<a href="https://www.zhangjc.com/2018/12/11/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1-Sqoop-%E4%BB%8E-MySQL-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0-Hive-%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%92%E6%9F%A5%E7%BB%8F%E8%BF%87/">è®°å½•ä¸€æ¬¡Sqoopä»MySQLå¯¼å…¥æ•°æ®åˆ°Hiveé—®é¢˜çš„æ’æŸ¥ç»è¿‡</a>çš„è¡¥å……ã€‚</p><p>Sqoopå‘½ä»¤é€šè¿‡binä¸‹é¢çš„è„šæœ¬è°ƒç”¨ï¼Œè°ƒç”¨å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exec</span> <span class="variable">$&#123;HADOOP_COMMON_HOME&#125;</span>/bin/hadoop org.apache.sqoop.Sqoop <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br></pre></td></tr></table></figure><p><code>org.apache.sqoop.Sqoop</code>æ˜¯Sqoopçš„å…¥å£ç±»ï¼Œåœ¨æ­¤ä¸»è¦æ˜¯è§£æå‚æ•°åŠåˆå§‹åŒ–å·¥å…·ç±»ï¼Œç„¶åé€šè¿‡<code>org.apache.hadoop.util.ToolRunner</code>ç±»è°ƒç”¨å¯¹åº”çš„å·¥å…·å®Œæˆæ“ä½œã€‚Sqoopçš„Importæ“ä½œå¯¹åº”çš„æ˜¯<code>org.apache.sqoop.tool.ImportTool</code>ç±»ã€‚</p><p>åœ¨ImportToolç±»çš„returnä»£ç å‰å¢åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">numMappers</span> <span class="operator">=</span> options.getNumMappers();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">hDbName</span> <span class="operator">=</span> options.getHCatDatabaseName();</span><br><span class="line"><span class="type">String</span> <span class="variable">hTableName</span> <span class="operator">=</span> options.getHCatTableName();</span><br><span class="line"><span class="type">String</span> <span class="variable">hPartKeys</span> <span class="operator">=</span> options.getHCatalogPartitionKeys();</span><br><span class="line"><span class="type">String</span> <span class="variable">hPartVals</span> <span class="operator">=</span> options.getHCatalogPartitionValues();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isStringNotEmpty(hDbName) &amp;&amp; isStringNotEmpty(hTableName) &amp;&amp; isStringNotEmpty(hPartKeys) &amp;&amp;     isStringNotEmpty(hPartVals)) &#123;</span><br><span class="line">  String[] partKeys = hPartKeys.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">  String[] partVals = hPartVals.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="type">String</span> <span class="variable">partPathStr</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span>(partKeys.length &gt; <span class="number">0</span> &amp;&amp; partVals.length == partKeys.length) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; partKeys.length; i++) &#123;</span><br><span class="line">      partPathStr += partKeys[i] + <span class="string">&quot;=&quot;</span> + partVals[i] + <span class="string">&quot;/&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="type">String</span> <span class="variable">targetDir</span> <span class="operator">=</span> <span class="string">&quot;/user/hive/warehouse/&quot;</span> + hDbName + <span class="string">&quot;.db/&quot;</span> + hTableName + <span class="string">&quot;/&quot;</span> + partPathStr;</span><br><span class="line">  targetDir = targetDir.toLowerCase();</span><br><span class="line">  LOG.info(<span class="string">&quot;---------targetDir=&quot;</span> + targetDir);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">FileSystem</span> <span class="variable">fs</span> <span class="operator">=</span> FileSystem.get(options.getConf());</span><br><span class="line">    RemoteIterator&lt;LocatedFileStatus&gt; rIter = fs.listFiles(<span class="keyword">new</span> <span class="title class_">Path</span>(targetDir), <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">fileCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(rIter.hasNext()) &#123;</span><br><span class="line">      fileCount++;</span><br><span class="line">      rIter.next();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    LOG.info(<span class="string">&quot;---------------fileCount=&quot;</span> + fileCount);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(numMappers != fileCount) &#123;</span><br><span class="line">      LOG.error(<span class="string">&quot;files number in hdfs not equals mapper task number !&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    LOG.error(<span class="string">&quot;count files number from hdfs error !&quot;</span>);</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¹åŠ¨åªé’ˆå¯¹Sqoopé›†æˆHCatalogæ–¹å¼å¯¼å…¥ORCæ ¼å¼çš„æƒ…å†µã€‚å› ä¸ºæˆ‘ä»¬çš„æ•°æ®ä»“åº“ä¸­éƒ½é‡‡ç”¨çš„æ˜¯è¿™ç§æ–¹å¼ã€‚</p><blockquote><p>ä¼˜åŒ–ï¼šå½“MySQLä¸­è®°å½•æ•°ç‰¹åˆ«å°‘æ—¶ï¼Œå¦‚å°‘äº4æ¡è®°å½•ï¼Œåˆ™é»˜è®¤Sqoopçš„MapTaskæ•°é‡ä¸º4ä½†å…¶å®é™…æ‰§è¡Œæ—¶å› ä¸ºåŸå§‹è®°å½•æ•°ä¸å¤Ÿåˆ™å®é™…æ‰§è¡Œçš„MapTaskæ•°é‡ä¼šè·Ÿå®é™…çš„è®°å½•æ•°ä¸€è‡´ï¼Œæ­¤æ—¶splitæ•°é‡è·Ÿè½åœ°HDFSçš„æ–‡ä»¶æ•°é‡ä¸€è‡´ã€‚æ‰€ä»¥ï¼Œå¯ä»¥æ ¹æ®Sqoopå¯¹åº”MRçš„å®é™…splitæ•°é‡è¿›è¡Œåˆ¤æ–­æ–‡ä»¶æ•°é‡ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Sqoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå‘½ä»¤è¡Œå¯¼å‡ºEmacs ORGæ–‡æ¡£ä¸ºHTML</title>
      <link href="/2018/12/28/Linux-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AF%BC%E5%87%BA-Emacs-ORG-%E6%96%87%E6%A1%A3%E4%B8%BA-HTML/"/>
      <url>/2018/12/28/Linux-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AF%BC%E5%87%BA-Emacs-ORG-%E6%96%87%E6%A1%A3%E4%B8%BA-HTML/</url>
      
        <content type="html"><![CDATA[<p>Emacsç‰ˆæœ¬25.2ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†orgæ–‡æ¡£å¯¼å‡ºhtmlï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emacs &#123;orgFile&#125; --batch --<span class="built_in">eval</span> <span class="string">&quot;(require &#x27;ox)&quot;</span> --<span class="built_in">eval</span> <span class="string">&quot;(org-html-export-to-html)&quot;</span></span><br></pre></td></tr></table></figure><p>æ‰¹é‡å¯¼å‡ºç›®å½•ä¸‹çš„orgæ–‡æ¡£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for orgFile in `ls *.org`</span><br><span class="line">do</span><br><span class="line">    emacs $&#123;orgFile&#125; --batch --eval &quot;(require &#x27;ox)&quot; --eval &quot;(org-html-export-to-html)&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Emacs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Emacs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sqoopæ”¯æŒORCæ–‡ä»¶æ ¼å¼</title>
      <link href="/2018/12/28/Sqoop-%E6%94%AF%E6%8C%81-ORC-%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/"/>
      <url>/2018/12/28/Sqoop-%E6%94%AF%E6%8C%81-ORC-%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="ORCä»‹ç»"><a href="#ORCä»‹ç»" class="headerlink" title="ORCä»‹ç»"></a>ORCä»‹ç»</h1><p>ORCæ–‡ä»¶æ ¼å¼æ˜¯Hive 0.11.0ç‰ˆæœ¬å¼•å…¥çš„ä¸€ç§æ–‡ä»¶æ ¼å¼ã€‚ORCçš„å¼•å…¥æ˜¯ä¸ºäº†è§£å†³å…¶ä»–Hiveæ–‡ä»¶æ ¼å¼çš„å±€é™æ€§ã€‚ä½¿ç”¨ORCæ–‡ä»¶æ ¼å¼æå‡Hiveè¯»å–ã€å†™å…¥åŠå¤„ç†æ•°æ®çš„æ€§èƒ½ã€‚</p><p>ä¸RCFileå¯¹æ¯”ï¼ŒORCæ–‡ä»¶æ ¼å¼æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼š</p><ul><li>æ¯ä¸ªTaskåªè¾“å‡ºä¸€ä¸ªæ–‡ä»¶ï¼Œé™ä½NameNodeçš„è´Ÿè½½ã€‚</li><li>Hiveæ•°æ®ç±»å‹æ”¯æŒï¼ŒåŒ…æ‹¬ï¼šdatetimeã€decimalä»¥åŠå¤æ‚æ•°æ®ç±»å‹ï¼ˆstructã€listã€mapã€unionï¼‰ã€‚</li><li>æ–‡ä»¶ä¸­å­˜å‚¨è½»é‡çº§çš„ç´¢å¼•ï¼š<ul><li>è·³è¿‡ä¸é€šè¿‡è°“è¯­è¿‡æ»¤çš„è¡Œç»„</li><li>è·³è½¬åˆ°æŒ‡å®šçš„è¡Œ</li></ul></li><li>åŸºäºæ•°æ®ç±»å‹çš„å—æ¨¡å¼å‹ç¼©ï¼š<ul><li>æ•´å‹æ•°æ®åˆ—é‡‡ç”¨è¡Œç¨‹é•¿åº¦ç¼–ç ï¼ˆrun-length encodingï¼‰</li><li>å­—ç¬¦ä¸²æ•°æ®åˆ—é‡‡ç”¨è¯å…¸ç¼–ç ï¼ˆdictionary encodingï¼‰</li></ul></li><li>ä½¿ç”¨ç‹¬ç«‹çš„RecordReaderå¹¶å‘è¯»å–ç›¸åŒçš„æ–‡ä»¶</li><li>æ— éœ€æ‰«æmarkerså°±å¯ä»¥åˆ†å‰²æ–‡ä»¶çš„èƒ½åŠ›</li><li>ç»‘å®šè¯»å†™éœ€è¦çš„å†…å­˜é‡</li><li>ä½¿ç”¨Protocol Bufferå­˜å‚¨å…ƒæ•°æ®ï¼Œå…è®¸æ·»åŠ ã€ç§»é™¤å­—æ®µ</li></ul><p>Hiveå®˜ç½‘ä»‹ç»ï¼š<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+ORC">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+ORC</a></p><h1 id="Sqoopæ”¯æŒORC"><a href="#Sqoopæ”¯æŒORC" class="headerlink" title="Sqoopæ”¯æŒORC"></a>Sqoopæ”¯æŒORC</h1><p>é€šè¿‡Sqoop-HCatalogé›†æˆè§£å†³Sqoopä¸æ”¯æŒORCçš„é—®é¢˜ã€‚</p><h2 id="HCatalogèƒŒæ™¯"><a href="#HCatalogèƒŒæ™¯" class="headerlink" title="HCatalogèƒŒæ™¯"></a>HCatalogèƒŒæ™¯</h2><p>HCatalogæ˜¯Hadoopçš„ä¸€ä¸ªtableä¸å­˜å‚¨ç®¡ç†çš„ä¸€ä¸ªæœåŠ¡ï¼Œç”¨æˆ·å¯ä»¥æ›´å®¹æ˜“åœ°ä½¿ç”¨ä¸åŒçš„æ•°æ®å¤„ç†å·¥å…·Pigã€MapReduceå’ŒHiveè¯»å†™æ•°æ®ã€‚HCatalogè¡¨çš„æŠ½è±¡å‘ˆç°ç»™ç”¨æˆ·ä¸€ä¸ªHDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰ä¸­çš„å…³ç³»è§†å›¾ï¼Œç”¨æˆ·ä¸éœ€è¦æ‹…å¿ƒæ•°æ®å­˜å‚¨åœ¨å“ªé‡ŒåŠæ•°æ®çš„å­˜å‚¨æ ¼å¼ï¼šRCFileæ ¼å¼ã€textæ–‡ä»¶ã€æˆ–è€…SequenceFileã€‚</p><p>HCatalogæ”¯æŒè¯»å†™ä»»ä½•å®ç°äº†Hive SerDeï¼ˆserializer-deserializerï¼‰çš„æ–‡ä»¶æ ¼å¼ã€‚é»˜è®¤çš„ï¼ŒHCatalogæ”¯æŒRCFileã€CSVã€JSONå’ŒSequenceFileã€‚è¦ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰æ ¼å¼ï¼Œå¿…é¡»æä¾›InputFormatå’ŒOutputFormatåŠSerDeã€‚</p><p>Sqoopä½¿ç”¨HCatalogæŠ½è±¡ä¸åŒå­˜å‚¨æ ¼å¼çš„èƒ½åŠ›æ¥æ”¯æŒRCFileï¼ˆä»¥åŠæœªæ¥çš„æ–‡ä»¶ç±»å‹ï¼‰ã€‚</p><h2 id="é›†æˆHCatalogåæ–°å¢çš„å‚æ•°"><a href="#é›†æˆHCatalogåæ–°å¢çš„å‚æ•°" class="headerlink" title="é›†æˆHCatalogåæ–°å¢çš„å‚æ•°"></a>é›†æˆHCatalogåæ–°å¢çš„å‚æ•°</h2><p>è§Sqoopå®˜æ–¹æ–‡æ¡£ï¼š<a href="http://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html#_sqoop_hcatalog_integration">http://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html#_sqoop_hcatalog_integration</a></p><h2 id="å®šåˆ¶Sqoopæ”¹é€ "><a href="#å®šåˆ¶Sqoopæ”¹é€ " class="headerlink" title="å®šåˆ¶Sqoopæ”¹é€ "></a>å®šåˆ¶Sqoopæ”¹é€ </h2><p>ä¿®æ”¹<code>bin/sqoop</code>å‘½ä»¤è„šæœ¬ï¼šä¸ºimportæ“ä½œå¢åŠ Hive Tableåˆ†åŒºæ•°æ®åˆ é™¤é€»è¾‘ï¼Œåœ¨æ‰§è¡Œå¯¼å…¥å‰ä¸éœ€è¦å¦è¡Œæ¸…ç†æ•°æ®ï¼Œä»è€Œç®€åŒ–Sqoop importè„šæœ¬çš„å¼€å‘å·¥ä½œã€‚</p><h2 id="Sqoopå¯¼å…¥ORCå®ä¾‹"><a href="#Sqoopå¯¼å…¥ORCå®ä¾‹" class="headerlink" title="Sqoopå¯¼å…¥ORCå®ä¾‹"></a>Sqoopå¯¼å…¥ORCå®ä¾‹</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºHiveè¡¨"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºHiveè¡¨" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºHiveè¡¨"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºHiveè¡¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `dev.bims_device`(</span><br><span class="line">  `code` string,</span><br><span class="line">  `mac` string,</span><br><span class="line">  `wifi_mac` string,</span><br><span class="line">  `create_date` string,</span><br><span class="line">  `activate_date` string,</span><br><span class="line">  `state` string,</span><br><span class="line">  `area_id` <span class="type">bigint</span>,</span><br><span class="line">  `city_id` <span class="type">bigint</span>,</span><br><span class="line">  `sp_define_id` <span class="type">bigint</span>)</span><br><span class="line">PARTITIONED <span class="keyword">BY</span> (</span><br><span class="line">  `dt` string)</span><br><span class="line">stored <span class="keyword">as</span> orc;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥ï¼šSqoop-import"><a href="#ç¬¬äºŒæ­¥ï¼šSqoop-import" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šSqoop import"></a>ç¬¬äºŒæ­¥ï¼šSqoop import</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">  <span class="comment">--hcatalog-database dev \</span></span><br><span class="line">  <span class="comment">--hcatalog-table bims_device \</span></span><br><span class="line">  <span class="comment">--hcatalog-partition-keys dt \</span></span><br><span class="line">  <span class="comment">--hcatalog-partition-values $&#123;dt&#125; \</span></span><br><span class="line">  <span class="comment">--connect jdbc:mysql://$&#123;host&#125;:$&#123;port&#125;/bims \</span></span><br><span class="line">  <span class="comment">--username &quot;$&#123;userName&#125;&quot; \</span></span><br><span class="line">  <span class="comment">--password &quot;$&#123;password&#125;&quot; \</span></span><br><span class="line">  <span class="comment">--table bims_device \</span></span><br><span class="line">  <span class="comment">--columns &quot;code,mac,wifi_mac,create_date,activate_date,state,area_id,city_id,sp_define_id&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Sqoopå¯¼å‡ºORCå®ä¾‹"><a href="#Sqoopå¯¼å‡ºORCå®ä¾‹" class="headerlink" title="Sqoopå¯¼å‡ºORCå®ä¾‹"></a>Sqoopå¯¼å‡ºORCå®ä¾‹</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºMySQLæ•°æ®è¡¨"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºMySQLæ•°æ®è¡¨" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºMySQLæ•°æ®è¡¨"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºMySQLæ•°æ®è¡¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `test`.`bims_device`(</span><br><span class="line">  `code` <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  `mac` <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  `wifi_mac` <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  `create_date` <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  `activate_date` <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  `state` <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  `area_id` <span class="type">bigint</span>,</span><br><span class="line">  `city_id` <span class="type">bigint</span>,</span><br><span class="line">  `sp_define_id` <span class="type">bigint</span>);</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥ï¼šSqoop-export"><a href="#ç¬¬äºŒæ­¥ï¼šSqoop-export" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šSqoop export"></a>ç¬¬äºŒæ­¥ï¼šSqoop export</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">  <span class="comment">--hcatalog-database dev \</span></span><br><span class="line">  <span class="comment">--hcatalog-table bims_device \</span></span><br><span class="line">  <span class="comment">--hcatalog-partition-keys dt \</span></span><br><span class="line">  <span class="comment">--hcatalog-partition-values $&#123;dt&#125; \</span></span><br><span class="line">  <span class="comment">--connect jdbc:mysql://$&#123;host&#125;:$&#123;port&#125;/test?useCompression=true \</span></span><br><span class="line">  <span class="comment">--username $&#123;userName&#125; \</span></span><br><span class="line">  <span class="comment">--password $&#123;password&#125; \</span></span><br><span class="line">  <span class="comment">--table bims_device</span></span><br></pre></td></tr></table></figure><h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><ul><li>MySQLè¡¨å­—æ®µåç§°å¿…é¡»ä¸Hiveä»“åº“ä¸­çš„è¡¨å­—æ®µåç§°ä¸€è‡´</li><li>Sqoop ORCå¯¼å‡ºæ—¶ï¼Œæ•°æ®ç±»å‹éœ€è¦è½¬æ¢æ—¶å¦‚æœå­˜åœ¨è„æ•°æ®ä¼šå¯¼è‡´å¯¼å‡ºå¤±è´¥ã€‚ä¾‹å¦‚ï¼Œé•¿åº¦ä¸º0çš„Stringå¦‚æœå¯¼å‡ºä¸ºintæ—¶ã€‚</li><li>å¯¼å‡ºæ—¶éœ€è¦æå‰æ¸…ç†MySQLä¸­ä¹‹å‰å¯¼å‡ºçš„æ•°æ®ï¼Œé¿å…é‡å¤è¿è¡Œæ—¶é€ æˆæ•°æ®é‡å¤ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Hive </tag>
            
            <tag> ORC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•ä¸€æ¬¡Sqoopä»MySQLå¯¼å…¥æ•°æ®åˆ°Hiveé—®é¢˜çš„æ’æŸ¥ç»è¿‡</title>
      <link href="/2018/12/11/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1-Sqoop-%E4%BB%8E-MySQL-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0-Hive-%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%92%E6%9F%A5%E7%BB%8F%E8%BF%87/"/>
      <url>/2018/12/11/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1-Sqoop-%E4%BB%8E-MySQL-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0-Hive-%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%92%E6%9F%A5%E7%BB%8F%E8%BF%87/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>MySQLä¸­åŸå§‹æ•°æ®æœ‰790W+çš„è®°å½•æ•°ï¼Œåœ¨SqoopæŠ½å–ä½œä¸šæˆåŠŸçš„æƒ…å†µä¸‹åœ¨Hiveä¸­åªæœ‰500Wå·¦å³çš„è®°å½•æ•°ã€‚</p><h1 id="æ’æŸ¥è¿‡ç¨‹"><a href="#æ’æŸ¥è¿‡ç¨‹" class="headerlink" title="æ’æŸ¥è¿‡ç¨‹"></a>æ’æŸ¥è¿‡ç¨‹</h1><h2 id="æ•°æ®å¯¼å…¥è„šæœ¬Log"><a href="#æ•°æ®å¯¼å…¥è„šæœ¬Log" class="headerlink" title="æ•°æ®å¯¼å…¥è„šæœ¬Log"></a>æ•°æ®å¯¼å…¥è„šæœ¬Log</h2><p>é€šè¿‡Logå¯ä»¥å‘ç°ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ol><li>è¯¥Sqoopä»»åŠ¡è¢«åˆ†è§£ä¸º4ä¸ªMapTaskã€‚</li><li>MapTaskæ‰§è¡ŒæœŸé—´æœ‰å¼‚å¸¸ï¼Œæ˜¯ç½‘ç»œå¼‚å¸¸å¯¼è‡´MySQLè¿æ¥ä¸æˆåŠŸã€‚</li><li>Sqoopä»»åŠ¡å¯¹åº”çš„MRæ‰§è¡Œè¿‡ç¨‹ä¸­æ€»çš„è¢«è°ƒèµ·9ä¸ªMapTaskï¼Œå…¶ä¸­3ä¸ªå¤±è´¥ã€2ä¸ªè¢«killï¼Œç†è®ºä¸Šå‰©ä½™çš„4ä¸ªMapTaskæ˜¯æˆåŠŸæ‰§è¡Œçš„ã€‚</li><li>Sqoopå¯¼å…¥å¯¹åº”çš„MRåªæœ‰MapTaskï¼Œä¸”MapTaskçš„æ•°æ®è®°å½•æ•°ä¸º790W+ã€‚æ‰€ä»¥ï¼Œå•çº¯çœ‹MRçš„è¾“å‡ºæ˜¯æ­£å¸¸çš„ã€‚</li><li>Sqoopå¯¼å…¥å®Œæˆåï¼Œç´§è·Ÿç€æœ‰ä¸€ä¸ªè¯»å–Sqoopç›®æ ‡è¡¨æ•°æ®çš„<code>insert overwrite</code>çš„æ“ä½œã€‚è¯¥æ“ä½œåªè¢«åˆ†è§£ä¸º2ä¸ªMapTaskï¼Œè¯´æ˜åŸæ•°æ®æ–‡ä»¶åªæœ‰ä¸¤ä¸ªå—ã€‚</li><li>æ ¹æ®ä»¥ä¸Šä¿¡æ¯è¯´æ˜Sqoopä¹‹åç¡®å®åªç”Ÿæˆäº†2ä¸ªæ•°æ®æ–‡ä»¶ï¼Œæœ‰ä¸¤ä¸ªæ–‡ä»¶ä¸¢å¤±äº†ã€‚</li></ol><p>è¯¦ç»†åŸå§‹Logä¿¡æ¯è§é™„ä»¶ï¼š<a href="/images/202501/sqoop.txt">Sqoopæ‰§è¡Œæ—¥å¿—</a></p><h2 id="æŸ¥çœ‹Sqoopä»»åŠ¡å¯¹åº”MRçš„æ‰§è¡Œæ—¥å¿—"><a href="#æŸ¥çœ‹Sqoopä»»åŠ¡å¯¹åº”MRçš„æ‰§è¡Œæ—¥å¿—" class="headerlink" title="æŸ¥çœ‹Sqoopä»»åŠ¡å¯¹åº”MRçš„æ‰§è¡Œæ—¥å¿—"></a>æŸ¥çœ‹Sqoopä»»åŠ¡å¯¹åº”MRçš„æ‰§è¡Œæ—¥å¿—</h2><p>æ ¹æ®ä¸Šé¢çš„Logä¸­çš„ä¿¡æ¯ï¼Œä»HDFSä¸ŠæŸ¥æ‰¾å¯¹åº”çš„æ—¥å¿—ã€‚Yarnæ‰€æœ‰çš„åº”ç”¨æ‰§è¡Œæ—¥å¿—åœ¨HDFSçš„<code>/data/hadoop/yarn-logs/hadoop/logs/</code>ç›®å½•ä¸‹ã€‚ä»è¯¥ç›®å½•ä¸‹æŸ¥æ‰¾åº”ç”¨ç¨‹åºapplication_1533196506314_4460157 çš„æ—¥å¿—ã€‚æ—¥å¿—ä¼šåŒ…å«MRåœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œçš„ä¿¡æ¯ã€‚</p><p>ä»Logä¸­å‘ç°ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018-12-10 00:42:30,595 FATAL [IPC Server handler 17 on 8046] org.apache.hadoop.mapred.TaskAttemptListenerImpl: Task: attempt_1533196506314_4460157_m_000001_0 - exited : org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException): No lease on /user/hive/warehouse/ods.db/bss_customer_fj/_SCRATCH0.3130352759450352/dt=20181209/_temporary/1/_temporary/attempt_1533196506314_4460157_m_000001_0/part-m-00001 (inode 761544109): File does not exist. Holder DFSClient_attempt_1533196506314_4460157_m_000001_0_-1729942809_1 does not have any open files.</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œæ€€ç–‘æ˜¯MRåœ¨æ‰§è¡Œç»“æŸæ—¶ï¼Œå°†ä¸´æ—¶æ–‡ä»¶ç§»åŠ¨åˆ°æ­£å¼ç›®å½•æ—¶å‘ç”Ÿé”™è¯¯ã€‚</p><p>åŸå§‹Logæ–‡ä»¶è§ç›®å½•ï¼š</p><ul><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-12_27463.txt">192-168-72-12_27463</a>  </li><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-24_16310.txt">192-168-72-24_16310</a>  </li><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-84_13498.txt">192-168-72-84_13498</a>  </li><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-93_53778.txt">192-168-72-93_53778</a></li><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-23_18284.txt">192-168-72-23_18284</a>  </li><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-73_2363.txt">192-168-72-73_2363</a>  </li><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-88_24481.txt">192-168-72-88_24481</a>  </li><li><a href="/images/202501/application_1533196506314_4460157/192-168-72-94_54353.txt">192-168-72-94_54353</a></li></ul><h2 id="æŸ¥çœ‹DN-Logä¿¡æ¯"><a href="#æŸ¥çœ‹DN-Logä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹DN Logä¿¡æ¯"></a>æŸ¥çœ‹DN Logä¿¡æ¯</h2><p>æ ¹æ®ä¸Šé¢çš„Logä¿¡æ¯ï¼Œå‘ç°DNèŠ‚ç‚¹192-168-72-24ä¸Šçš„MapTaskæœ‰ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ã€‚</p><p>192-168-72-24å¼‚å¸¸ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018-12-10 00:42:34,410 WARN [main] org.apache.hadoop.mapred.YarnChild: Exception running child : org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException): No lease on /user/hive/warehouse/ods.db/bss_customer_fj/_SCRATCH0.3130352759450352/dt=20181209/_temporary/1/_temporary/attempt_1533196506314_4460157_m_000000_0/part-m-00000 (inode 761544157): File does not exist. Holder DFSClient_attempt_1533196506314_4460157_m_000000_0_798513081_1 does not have any open files.</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æ€€ç–‘æ˜¯MapTaskçš„æœ€åé˜¶æ®µå†™æ–‡ä»¶çš„æ—¶å€™æœªæˆåŠŸã€‚æ£€æŸ¥è¯¥DNèŠ‚ç‚¹çš„Logå‘ç°ä»¥ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">2018-12-10 00:42:32,643 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: BlockSender.sendChunks() exception:</span><br><span class="line">java.io.IOException: æ–­å¼€çš„ç®¡é“</span><br><span class="line">        at sun.nio.ch.FileChannelImpl.transferTo0(Native Method)</span><br><span class="line">        at sun.nio.ch.FileChannelImpl.transferToDirectlyInternal(FileChannelImpl.java:428)</span><br><span class="line">        at sun.nio.ch.FileChannelImpl.transferToDirectly(FileChannelImpl.java:493)</span><br><span class="line">        at sun.nio.ch.FileChannelImpl.transferTo(FileChannelImpl.java:608)</span><br><span class="line">        at org.apache.hadoop.net.SocketOutputStream.transferToFully(SocketOutputStream.java:223)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.datanode.BlockSender.sendPacket(BlockSender.java:583)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.datanode.BlockSender.doSendBlock(BlockSender.java:763)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.datanode.BlockSender.sendBlock(BlockSender.java:710)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.readBlock(DataXceiver.java:552)</span><br><span class="line">        at org.apache.hadoop.hdfs.protocol.datatransfer.Receiver.opReadBlock(Receiver.java:116)</span><br><span class="line">        at org.apache.hadoop.hdfs.protocol.datatransfer.Receiver.processOp(Receiver.java:71)</span><br><span class="line">        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.run(DataXceiver.java:253)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure><p>ç™¾åº¦ä¹‹åå‘ç°è¯¥å¼‚å¸¸ä¿¡æ¯è·ŸDNçš„ä¸€ä¸ªé…ç½®æœ‰å…³ç³»ï¼Œå…·ä½“é…ç½®é¡¹æ˜¯DNå¯ä»¥åŒæ—¶å¤„ç†çš„æ–‡ä»¶ä¸Šé™ã€‚å¯¹äºè€ç‰ˆæœ¬é…ç½®é¡¹åç§°ä¸ºâ€œdfs.datanode.max.xcieversâ€ï¼Œå¯¹äºæ–°ç‰ˆæœ¬é…ç½®é¡¹åç§°æ”¹ä¸ºâ€œdfs.datanode.max.transfer.threadsâ€ã€‚è¯¥å‚æ•°çš„é»˜è®¤å€¼ä¸º4096ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸º8192ã€‚</p><h2 id="æŸ¥çœ‹NN-Logä¿¡æ¯"><a href="#æŸ¥çœ‹NN-Logä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹NN Logä¿¡æ¯"></a>æŸ¥çœ‹NN Logä¿¡æ¯</h2><p>é»˜è®¤çš„ï¼ŒLog4jè¾“å‡ºçš„NameNodeæ—¥å¿—æ–‡ä»¶åªä¿ç•™æœ€è¿‘çš„20ä¸ªæ–‡ä»¶ã€‚å› ä¸ºNNçš„Logä¿¡æ¯æ¯”è¾ƒå¤šï¼Œ20ä¸ªæ–‡ä»¶ä¿å­˜çš„æ—¥å¿—ä¸è¶³1å¤©ï¼Œå¼‚å¸¸æ—¶é—´çš„æ—¥å¿—å·²ç»è¢«å†²æ‰äº†ã€‚</p><p><img src="/images/202501/namenodeLogs.png" alt="NameNode Log"></p><h2 id="æŸ¥çœ‹NNä¿¡æ¯"><a href="#æŸ¥çœ‹NNä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹NNä¿¡æ¯"></a>æŸ¥çœ‹NNä¿¡æ¯</h2><p>é€šè¿‡NN WebUIæŸ¥çœ‹å‘ç°NNå†…å­˜çš„ä½¿ç”¨å·²ç»70%å·¦å³ï¼Œè´Ÿè½½å·²ç»æ¯”è¾ƒé«˜ã€‚</p><p><img src="/images/202501/namenodeInfo.png" alt="NameNode Info"></p><h2 id="å¤„ç†æªæ–½"><a href="#å¤„ç†æªæ–½" class="headerlink" title="å¤„ç†æªæ–½"></a>å¤„ç†æªæ–½</h2><p>ç»¼åˆä»¥ä¸Šä¿¡æ¯ï¼Œå…¶å®é—®é¢˜å‘ç”Ÿçš„æ ¹æœ¬åŸå› æœªèƒ½æŸ¥æ˜ã€‚åŸºäºå¯¹Hadoopäº†è§£çš„æ·±åº¦ã€ç²¾åŠ›åŠå¯¹æ•…éšœæ¢å¤çš„å®¹å¿ç¨‹åº¦çš„è€ƒè™‘ï¼Œå¾…å®šä½æ ¹æœ¬åŸå› å†è§£å†³é—®é¢˜çš„æ–¹æ¡ˆä¸å¯æ§ã€‚æ‰€ä»¥ï¼Œé‡‡å–ä»¥ä¸‹æ”¹è¿›æªæ–½ï¼š</p><p>ï¼ˆ1ï¼‰ä¿®æ”¹DNæœ€å¤§å¤„ç†æ–‡ä»¶æ•°é‡ä¸Šé™è‡³8192ã€‚<br>ï¼ˆ2ï¼‰å°†NNå†…å­˜æ‰©å±•åˆ°100Gã€‚<br>ï¼ˆ3ï¼‰ä¿®æ”¹Sqoopæºä»£ç ï¼Œå½“è½åœ°åˆ°ç›®æ ‡HDFSç›®å½•ä¸‹çš„æ–‡ä»¶æ•°é‡ä¸MapTaskæ•°é‡ä¸ä¸€è‡´æ—¶è¿”å›é”™è¯¯çŠ¶æ€ï¼Œå¹¶ç”±è°ƒåº¦ç³»ç»Ÿè¿›è¡Œé‡æ–°æŠ½å–ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Hive </tag>
            
            <tag> MySQL </tag>
            
            <tag> Sqoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3æ“ä½œMongoDBæ‰¹é‡upsert</title>
      <link href="/2018/11/19/Python3-%E6%93%8D%E4%BD%9C-MongoDB-%E6%89%B9%E9%87%8F-upsert/"/>
      <url>/2018/11/19/Python3-%E6%93%8D%E4%BD%9C-MongoDB-%E6%89%B9%E9%87%8F-upsert/</url>
      
        <content type="html"><![CDATA[<p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mongoClient = MongoClient(<span class="string">&#x27;mongodb://172.16.72.213:27017/&#x27;</span>)</span><br><span class="line">opsDb = mongoClient.ops</span><br><span class="line">azScheduled = opsDb.azScheduledFlow</span><br><span class="line"></span><br><span class="line">bulkOpers = []</span><br><span class="line"><span class="keyword">for</span> flow <span class="keyword">in</span> scheduledFlows.values():</span><br><span class="line">    bulkOpers.append(UpdateOne(&#123;<span class="string">&#x27;opsDt&#x27;</span>: opsDt, <span class="string">&#x27;projectId&#x27;</span>: flow[<span class="string">&#x27;projectId&#x27;</span>], <span class="string">&#x27;projectName&#x27;</span>: flow[<span class="string">&#x27;projectName&#x27;</span>], <span class="string">&#x27;flowName&#x27;</span>: flow[<span class="string">&#x27;flowName&#x27;</span>]&#125;, &#123;<span class="string">&#x27;$set&#x27;</span>: &#123;<span class="string">&#x27;opsDateTime&#x27;</span>: opsDtStr, <span class="string">&#x27;status&#x27;</span>: flow[<span class="string">&#x27;status&#x27;</span>], <span class="string">&#x27;startTime&#x27;</span>: flow[<span class="string">&#x27;startTime&#x27;</span>], <span class="string">&#x27;endTime&#x27;</span>: flow[<span class="string">&#x27;endTime&#x27;</span>], <span class="string">&#x27;elapsed&#x27;</span>: flow[<span class="string">&#x27;elapsed&#x27;</span>]&#125;&#125;, upsert=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line">azScheduled.bulk_write(bulkOpers)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3è¿æ¥MongoDBå¹¶å†™å…¥æ•°æ®</title>
      <link href="/2018/11/15/Python3%E8%BF%9E%E6%8E%A5MongoDB%E5%B9%B6%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE/"/>
      <url>/2018/11/15/Python3%E8%BF%9E%E6%8E%A5MongoDB%E5%B9%B6%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…PyMongo"><a href="#å®‰è£…PyMongo" class="headerlink" title="å®‰è£…PyMongo"></a>å®‰è£…PyMongo</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install pymongo</span><br><span class="line">Successfully installed pymongo-3.7.2</span><br></pre></td></tr></table></figure><h1 id="è¿æ¥MongoDBå¹¶ä¸”æ‰¹é‡æ’å…¥æ“ä½œ"><a href="#è¿æ¥MongoDBå¹¶ä¸”æ‰¹é‡æ’å…¥æ“ä½œ" class="headerlink" title="è¿æ¥MongoDBå¹¶ä¸”æ‰¹é‡æ’å…¥æ“ä½œ"></a>è¿æ¥MongoDBå¹¶ä¸”æ‰¹é‡æ’å…¥æ“ä½œ</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">opsDateTime = datetime.now().isoformat(timespec=<span class="string">&#x27;seconds&#x27;</span>)</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;roHive&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;hive@bigdata!23&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;host&#x27;</span>: <span class="string">&#x27;172.16.72.22&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;database&#x27;</span>: <span class="string">&#x27;azkaban3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;raise_on_warnings&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">&#x27;charset&#x27;</span>: <span class="string">&#x27;latin1&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cnx = mysql.connector.connect(**config)</span><br><span class="line">cursor = cnx.cursor()</span><br><span class="line">query = (<span class="string">&quot;SELECT trigger_id, data FROM azkaban3.triggers&quot;</span>)</span><br><span class="line">cursor.execute(query)</span><br><span class="line"></span><br><span class="line">scheduledList = []</span><br><span class="line"><span class="keyword">for</span> (triggerId, triggerData) <span class="keyword">in</span> cursor:</span><br><span class="line">    triggerJson = json.loads(gzip.decompress(<span class="built_in">bytes</span>(triggerData, encoding=<span class="string">&#x27;latin1&#x27;</span>)))</span><br><span class="line">    actionJson = triggerJson[<span class="string">&#x27;actions&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;actionJson&#x27;</span>]</span><br><span class="line">    projectName = actionJson[<span class="string">&#x27;projectName&#x27;</span>]</span><br><span class="line">    flowName = actionJson[<span class="string">&#x27;flowName&#x27;</span>]</span><br><span class="line">    scheduledFlow = &#123;<span class="string">&#x27;opsDateTime&#x27;</span>: opsDateTime, <span class="string">&#x27;projectName&#x27;</span>: projectName, <span class="string">&#x27;flowName&#x27;</span>: flowName&#125;</span><br><span class="line">    scheduledList.append(scheduledFlow)</span><br><span class="line"></span><br><span class="line">cursor.close()</span><br><span class="line">cnx.close()</span><br><span class="line"></span><br><span class="line">mongoClient = MongoClient(<span class="string">&#x27;mongodb://172.16.72.213:27017/&#x27;</span>)</span><br><span class="line">opsDb = mongoClient.ops</span><br><span class="line">azScheduled = opsDb.azScheduledFlow</span><br><span class="line">azScheduled.insert_many(scheduledList)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3è¿æ¥MySQLå¹¶ä¸”è¯»å–Blobå­—æ®µä¿¡æ¯</title>
      <link href="/2018/11/15/Python3-%E8%BF%9E%E6%8E%A5-MySQL-%E5%B9%B6%E4%B8%94%E8%AF%BB%E5%8F%96-Blob-%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF/"/>
      <url>/2018/11/15/Python3-%E8%BF%9E%E6%8E%A5-MySQL-%E5%B9%B6%E4%B8%94%E8%AF%BB%E5%8F%96-Blob-%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…é©±åŠ¨"><a href="#å®‰è£…é©±åŠ¨" class="headerlink" title="å®‰è£…é©±åŠ¨"></a>å®‰è£…é©±åŠ¨</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install mysql-connector-python</span><br><span class="line">Command <span class="string">&#x27;pip3&#x27;</span> <span class="keyword">not</span> found, but can be installed <span class="keyword">with</span>:</span><br><span class="line">sudo apt install python3-pip</span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºä¿¡æ¯å®‰è£…pip3ã€‚</p><p>æ ¹æ®MySQLå®˜ç½‘å»ºè®®åº”è¯¥å®‰è£…8.0çš„é©±åŠ¨ã€‚æˆ‘çš„å®‰è£…ï¼šmysql-connector-python-8.0.13ã€protobuf-3.6.1ã€setuptools-40.6.2ã€six-1.11.0ã€‚</p><h1 id="è¯»å–MySQLæ•°æ®"><a href="#è¯»å–MySQLæ•°æ®" class="headerlink" title="è¯»å–MySQLæ•°æ®"></a>è¯»å–MySQLæ•°æ®</h1><p>ä»¥è¯»å–Azkabanä¸­çš„triggersè¡¨æ•°æ®ä¸ºä¾‹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;roHive&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;hive@bigdata!23&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;host&#x27;</span>: <span class="string">&#x27;172.16.72.22&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;database&#x27;</span>: <span class="string">&#x27;azkaban3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;raise_on_warnings&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">&#x27;charset&#x27;</span>: <span class="string">&#x27;latin1&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cnx = mysql.connector.connect(**config)</span><br><span class="line">cursor = cnx.cursor()</span><br><span class="line">query = (<span class="string">&quot;SELECT trigger_id, data FROM azkaban3.triggers&quot;</span>)</span><br><span class="line">cursor.execute(query)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (triggerId, triggerData) <span class="keyword">in</span> cursor:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;triggerId=<span class="subst">&#123;triggerId&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cursor.close()</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure><p>Azkabançš„triggersè¡¨ä¸­çš„dataå­—æ®µæ˜¯BLOBç±»å‹ã€‚å› ä¸ºæˆ‘çš„Azkaban MySQLåº“é‡‡ç”¨çš„æ˜¯latin1ç¼–ç ï¼Œå¦‚æœè¿æ¥æ—¶ä¸è®¾ç½®å­—ç¬¦é›†åœ¨è¯»å–dataå­—æ®µæ•°æ®æ—¶åœ¨è¯»å–BLOBç±»å‹å­—æ®µæ—¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UnicodeDecodeError: &#x27;utf-8&#x27; codec can&#x27;t decode byte 0x8b in position 1: invalid start byte</span><br></pre></td></tr></table></figure><p>å› ä¸ºdataå­—æ®µæ˜¯é‡‡ç”¨gzipå‹ç¼©çš„ï¼Œæ‰€ä»¥éœ€è¦è§£å‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (triggerId, triggerData) <span class="keyword">in</span> cursor:</span><br><span class="line">    <span class="built_in">print</span>(gzip.decompress(<span class="built_in">bytes</span>(triggerData, encoding=<span class="string">&#x27;latin1&#x27;</span>)))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
            <tag> Azkaban </tag>
            
            <tag> è°ƒåº¦ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLä¿®æ”¹max_allowed_packet</title>
      <link href="/2018/10/12/MySQL-%E4%BF%AE%E6%94%B9-max-allowed-packet/"/>
      <url>/2018/10/12/MySQL-%E4%BF%AE%E6%94%B9-max-allowed-packet/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡globalå‚æ•°è®¾ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global max_allowed_packet = 32*1024*1024;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯ä¸æ­£ç¡®çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global max_allowed_packet = 32m;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦é‡å¯ä¹Ÿç”Ÿæ•ˆçš„è¯ï¼Œåœ¨<code>my.cnf</code>ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max_allowed_packet=32m</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDBï¼šlistDatabases failed : not master and slaveOk=false</title>
      <link href="/2018/09/27/MongoDB%EF%BC%9AlistDatabases-failed-not-master-and-slaveOk-false/"/>
      <url>/2018/09/27/MongoDB%EF%BC%9AlistDatabases-failed-not-master-and-slaveOk-false/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼‚å¸¸æè¿°"><a href="#å¼‚å¸¸æè¿°" class="headerlink" title="å¼‚å¸¸æè¿°"></a>å¼‚å¸¸æè¿°</h1><p>å¦‚æœåœ¨MongoDBçš„SECONDARYä¸ŠæŸ¥è¯¢æ•°æ®æ—¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; show databases;</span><br><span class="line">2018-09-20T17:40:55.377+0800 E QUERY [thread1] Error: listDatabases failed:&#123; <span class="string">&quot;ok&quot;</span> : 0, <span class="string">&quot;errmsg&quot;</span> : <span class="string">&quot;not master and slaveOk=false&quot;</span>, <span class="string">&quot;code&quot;</span> : 13435 &#125; :</span><br><span class="line">_getErrorWithCode@src/mongo/shell/utils.js:25:13</span><br><span class="line">Mongo.prototype.getDBs@src/mongo/shell/mongo.js:62:1</span><br><span class="line">shellHelper.show@src/mongo/shell/utils.js:781:19</span><br><span class="line">shellHelper@src/mongo/shell/utils.js:671:15</span><br><span class="line">@(shellhelp2):1:1</span><br></pre></td></tr></table></figure><h1 id="Mongo-Shellè®¾ç½®"><a href="#Mongo-Shellè®¾ç½®" class="headerlink" title="Mongo Shellè®¾ç½®"></a>Mongo Shellè®¾ç½®</h1><p>å¦‚æœåœ¨Mongo Shellä¸­å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å…è®¸ä»SECONDARYä¸ŠæŸ¥è¯¢æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; rs.slaveOk();</span><br></pre></td></tr></table></figure><h1 id="JDBCè®¾ç½®"><a href="#JDBCè®¾ç½®" class="headerlink" title="JDBCè®¾ç½®"></a>JDBCè®¾ç½®</h1><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MongoClientOptions opts = (new MongoClientOptions.Builder().readPreference(ReadPreference.secondary())).build();</span><br><span class="line">MongoClient mongoClient = new MongoClient($&#123;host&#125;, opts);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè¯»å–Propertiesæ–‡ä»¶çš„æ–¹æ³•</title>
      <link href="/2017/09/28/Java-%E8%AF%BB%E5%8F%96-Properties-%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95/"/>
      <url>/2017/09/28/Java-%E8%AF%BB%E5%8F%96-Properties-%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>Javaè¯»å–Propertiesæ–‡ä»¶æœ‰ä¸¤ç§ç®€å•æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ClassLoaderä¸­çš„èµ„æºè¯»å–æ–¹æ³•ã€‚</p><ul><li>public InputStream getResourceAsStream(String name)<br>  è¯¥æ–¹æ³•æ˜¯éé™æ€æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨é™æ€ä»£ç ä¸­ä½¿ç”¨ã€‚</li><li>public static InputStream getSystemResourceAsStream(String name)<br>  è¯¥æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œå¯ä»¥åœ¨é™æ€ä»£ç ä¸­ä½¿ç”¨ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>org.apache.kafka.common.errors.TimeoutException</title>
      <link href="/2017/08/24/org-apache-kafka-common-errors-TimeoutException/"/>
      <url>/2017/08/24/org-apache-kafka-common-errors-TimeoutException/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨<code>kafka-console-producer.sh</code>å‘è¿œç«¯Kafkaå†™å…¥æ•°æ®æ—¶é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ bin/kafka-console-producer.sh --broker-list 172.16.72.202:9092 --topic <span class="built_in">test</span></span><br><span class="line">This is a message</span><br><span class="line">[2017-08-24 11:47:48,286] ERROR Error when sending message to topic <span class="built_in">test</span> with key: null, value: 17 bytes with error: (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback)</span><br><span class="line">org.apache.kafka.common.errors.TimeoutException: Expiring 1 record(s) <span class="keyword">for</span> test-0: 1523 ms has passed since batch creation plus linger time</span><br><span class="line">å…«æœˆ 24, 2017 11:50:55 ä¸Šåˆ sun.rmi.transport.tcp.TCPTransport<span class="variable">$AcceptLoop</span> executeAcceptLoop</span><br><span class="line">è­¦å‘Š: RMI TCP Accept-0: accept loop <span class="keyword">for</span> ServerSocket[addr=0.0.0.0/0.0.0.0,localport=38175] throws</span><br><span class="line">java.io.IOException: The server sockets created using the LocalRMIServerSocketFactory only accept connections from clients running on the host <span class="built_in">where</span> the RMI remote objects have been exported.</span><br><span class="line">at sun.management.jmxremote.LocalRMIServerSocketFactory<span class="variable">$1</span>.accept(LocalRMIServerSocketFactory.java:114)</span><br><span class="line">at sun.rmi.transport.tcp.TCPTransport<span class="variable">$AcceptLoop</span>.executeAcceptLoop(TCPTransport.java:400)</span><br><span class="line">at sun.rmi.transport.tcp.TCPTransport<span class="variable">$AcceptLoop</span>.run(TCPTransport.java:372)</span><br><span class="line"> at java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure><p>åœ¨æ²¡æœ‰é…ç½®<code>advertised.host.name</code>çš„æƒ…å†µä¸‹ï¼ŒKafkaå¹¶æ²¡æœ‰å¹¿æ’­æˆ‘ä»¬é…ç½®çš„<code>host.name</code>ï¼Œè€Œæ˜¯å¹¿æ’­äº†ä¸»æœºé…ç½®çš„hostnameã€‚è¿œç«¯çš„å®¢æˆ·ç«¯å¹¶æ²¡æœ‰é…ç½®hostsï¼Œæ‰€ä»¥è‡ªç„¶æ˜¯è¿æ¥ä¸ä¸Šè¿™ä¸ªhostnameçš„ï¼Œæ‰€ä»¥åœ¨è¿œç«¯å®¢æˆ·ç«¯é…ç½®hostsã€‚åœ¨å®¢æˆ·ç«¯<code>/etc/hosts</code>ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹åé—®é¢˜è§£å†³ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">172.16.72.202 172-16-72-202</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> å®æ—¶è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
            <tag> æ¶ˆæ¯é˜Ÿåˆ— </tag>
            
            <tag> å®æ—¶è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kafka RecordTooLargeExceptioné—®é¢˜è§£å†³</title>
      <link href="/2017/08/17/Kafka-RecordTooLargeException-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2017/08/17/Kafka-RecordTooLargeException-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>Producerå‘Kafkaå†™å…¥æ•°æ®æ—¶é‡åˆ°å¼‚å¸¸ï¼šorg.apache.kafka.common.errors.RecordTooLargeExceptionã€‚è¯¥å¼‚å¸¸æ˜¯å› ä¸ºå•æ¡æ¶ˆæ¯å¤§å°è¶…è¿‡é™åˆ¶å¯¼è‡´çš„ã€‚è§£å†³æ–¹æ³•æ˜¯å°†é™åˆ¶å‚æ•°è°ƒå¤§ï¼š</p><p>ï¼ˆ1ï¼‰serverç«¯ï¼šserver.properties<br>    <code>message.max.bytes</code>å‚æ•°é»˜è®¤å€¼ä¸º1000012ï¼Œè°ƒæ•´ä¸ºé€‚åˆçš„å€¼ï¼Œå¦‚10485760ã€‚</p><p>ï¼ˆ2ï¼‰producerç«¯ï¼š<br>    è®¾ç½®Producerçš„å‚æ•°<code>max.request.size</code>çš„å€¼ä¸serverç«¯çš„<code>message.max.bytes</code>å€¼ä¸€è‡´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> å®æ—¶è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Kafka </tag>
            
            <tag> æ¶ˆæ¯é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sqoopå¯¼å…¥MySQLä¸­å«æœ‰å›è½¦æ¢è¡Œç¬¦çš„æ•°æ®</title>
      <link href="/2017/07/05/Sqoop-%E5%AF%BC%E5%85%A5-MySQL-%E4%B8%AD%E5%90%AB%E6%9C%89%E5%9B%9E%E8%BD%A6%E6%8D%A2%E8%A1%8C%E7%AC%A6%E7%9A%84%E6%95%B0%E6%8D%AE/"/>
      <url>/2017/07/05/Sqoop-%E5%AF%BC%E5%85%A5-MySQL-%E4%B8%AD%E5%90%AB%E6%9C%89%E5%9B%9E%E8%BD%A6%E6%8D%A2%E8%A1%8C%E7%AC%A6%E7%9A%84%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>MySQLä¸­çš„æ•°æ®å¦‚ä¸‹å›¾ï¼š<img src="/images/202502/mysql-data.png" alt="MySQLä¸­å¸¦å›è½¦æ¢è¡Œç¬¦çš„æ•°æ®"></p><p>æ£€æŸ¥HDFSä¸Šçš„ç›®æ ‡æ–‡ä»¶å†…å®¹å¯ä»¥çœ‹å‡ºï¼Œå›è½¦æ¢è¡Œç¬¦ä½ç½®çš„æ•°æ®è¢«æˆªæ–­äº†ï¼Œå¯¼è‡´æ•°æ®åˆ—é”™ä½ã€‚<img src="/images/202502/hdfs-data.png" alt="HDFSé—®é¢˜æ•°æ®"></p><p>Sqoopæä¾›äº†é…ç½®å‚æ•°ï¼Œåœ¨å¯¼å…¥æ—¶ä¸¢å¼ƒæ‰æ•°æ®çš„åˆ†éš”ç¬¦ï¼ˆ\nï¼Œ\rï¼Œ\01ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--hive-drop-import-delims : Drops \n, \r, and \01 from string fields when importing to Hive. </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> æ•°æ®é‡‡é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®é‡‡é›† </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hive </tag>
            
            <tag> MySQL </tag>
            
            <tag> Sqoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 16.04ç”¨APTå®‰è£…MySQL</title>
      <link href="/2017/06/11/Ubuntu-16-04-%E7%94%A8-APT-%E5%AE%89%E8%A3%85-MySQL/"/>
      <url>/2017/06/11/Ubuntu-16-04-%E7%94%A8-APT-%E5%AE%89%E8%A3%85-MySQL/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h1><p>ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…MySQL:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install mysql-server</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šå®‰è£…MySQLæœåŠ¡å™¨ã€å®¢æˆ·ç«¯å’Œå…¬å…±æ–‡ä»¶ã€‚å®‰è£…è¿‡ç¨‹ä¼šå‡ºç°ä¸¤ä¸ªè¦æ±‚è¾“å…¥çš„å¯¹è¯æ¡†ï¼š</p><ul><li>è¾“å…¥MySQL rootç”¨æˆ·çš„å¯†ç ã€‚</li><li>æŒ‡æ˜æ˜¯å¦åˆ›å»ºtestæ•°æ®åº“ã€‚</li></ul><h1 id="å¯åŠ¨-åœæ­¢MySQL"><a href="#å¯åŠ¨-åœæ­¢MySQL" class="headerlink" title="å¯åŠ¨&#x2F;åœæ­¢MySQL"></a>å¯åŠ¨&#x2F;åœæ­¢MySQL</h1><p>å®‰è£…ä¹‹åï¼ŒMySQLæœåŠ¡å™¨ä¼šè‡ªåŠ¨å¯åŠ¨ã€‚ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æŸ¥MySQLæœåŠ¡å™¨çŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> service mysql status</span><br><span class="line">â— mysql.service - MySQL Community Server</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since æ—¥ 2017-06-11 17:05:11 CST; 14min ago</span><br><span class="line"> Main PID: 11970 (mysqld)</span><br><span class="line">   CGroup: /system.slice/mysql.service</span><br><span class="line">           â””â”€11970 /usr/sbin/mysqld</span><br><span class="line"></span><br><span class="line">6æœˆ 11 17:05:09 frin systemd[1]: Starting MySQL Community Server...</span><br><span class="line">6æœˆ 11 17:05:11 frin systemd[1]: Started MySQL Community Server.</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åœæ­¢MySQLï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service mysql stop</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨MySQLï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service mysql start</span><br></pre></td></tr></table></figure><h1 id="è¿æ¥-æ–­å¼€MySQLæœåŠ¡å™¨ï¼š"><a href="#è¿æ¥-æ–­å¼€MySQLæœåŠ¡å™¨ï¼š" class="headerlink" title="è¿æ¥&#x2F;æ–­å¼€MySQLæœåŠ¡å™¨ï¼š"></a>è¿æ¥&#x2F;æ–­å¼€MySQLæœåŠ¡å™¨ï¼š</h1><p>ä½¿ç”¨rootç”¨æˆ·è¿æ¥MySQLæœåŠ¡å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -h 127.0.0.1 -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 4</span><br><span class="line">Server version: 5.7.18-0ubuntu0.16.04.1 (Ubuntu)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–­å¼€è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; quit</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h1><p>åˆ›å»ºHiveå…ƒæ•°æ®ä½¿ç”¨çš„æ•°æ®åº“hiveã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE DATABASE hive;</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ‡æ¢åˆ°hiveæ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use hive;</span><br><span class="line">Database changed</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºç”¨æˆ·hiveï¼Œå¹¶æˆæƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE USER <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;hive@mysql123&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP ON hive.* TO <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE USER <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;hive@mysql123&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; GRANT ALL ON hive.* TO <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeperé›†ç¾¤æ­å»º</title>
      <link href="/2017/04/01/Zookeeper-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
      <url>/2017/04/01/Zookeeper-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="hostsé…ç½®"><a href="#hostsé…ç½®" class="headerlink" title="hostsé…ç½®"></a>hostsé…ç½®</h1><p>åœ¨<code>/etc/hosts</code>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10.142.165.40 frin-zookeeper1</span><br><span class="line">10.142.165.41 frin-zookeeper2</span><br><span class="line">10.142.165.44 frin-zookeeper3</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºç”¨æˆ·åŠç›®å½•"><a href="#åˆ›å»ºç”¨æˆ·åŠç›®å½•" class="headerlink" title="åˆ›å»ºç”¨æˆ·åŠç›®å½•"></a>åˆ›å»ºç”¨æˆ·åŠç›®å½•</h1><ul><li>åˆ›å»ºzookeeperç”¨æˆ·ï¼Œç”¨æ¥å¯åŠ¨zookeeperè¿›ç¨‹ã€‚</li><li>åˆ›å»º<code>/frin/zookeeper</code>ç›®å½•ä½œä¸ºzookeeperçš„homeç›®å½•ã€‚ä¿®æ”¹è¯¥ç›®å½•çš„å±ä¸»ä¸ç»„ä¸ºzookeeperã€‚</li></ul><h1 id="ä¸‹è½½zookeeperå¹¶è§£å‹"><a href="#ä¸‹è½½zookeeperå¹¶è§£å‹" class="headerlink" title="ä¸‹è½½zookeeperå¹¶è§£å‹"></a>ä¸‹è½½zookeeperå¹¶è§£å‹</h1><p>å½“å‰æœ€æ–°ç¨³å®šç‰ˆæœ¬æ˜¯zookeeper-3.4.10.tar.gzï¼Œä¸‹è½½åœ°å€ï¼š<a href="http://www.apache.org/dyn/closer.cgi/zookeeper/">http://www.apache.org/dyn/closer.cgi/zookeeper/</a>ã€‚ä¸‹è½½å¹¶è§£å‹åˆ°<code>/frin/zookeeper</code>ç›®å½•ä¸‹ã€‚</p><p>åˆ›å»ºè½¯è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /frin/zookeeper/zookeeper-3.4.10 /usr/local/zookeeper-3.4.10</span><br></pre></td></tr></table></figure><h1 id="Java-heapè®¾ç½®"><a href="#Java-heapè®¾ç½®" class="headerlink" title="Java heapè®¾ç½®"></a>Java heapè®¾ç½®</h1><p>è®¾ç½®Java heapå¤§å°ï¼Œé¿å…å†…å­˜ä¸ç£ç›˜ç©ºé—´çš„äº¤æ¢ï¼Œèƒ½å¤Ÿå¤§å¤§æå‡ZKçš„æ€§èƒ½ï¼Œè®¾ç½®åˆç†çš„heapå¤§å°åˆ™èƒ½æœ‰æ•ˆé¿å…æ­¤ç±»ç©ºé—´äº¤æ¢çš„è§¦å‘ã€‚åœ¨æ­£å¼å‘å¸ƒä¸Šçº¿ä¹‹å‰ï¼Œå»ºè®®æ˜¯é’ˆå¯¹ä½¿ç”¨åœºæ™¯è¿›è¡Œä¸€äº›å‹åŠ›æµ‹è¯•ï¼Œç¡®ä¿æ­£å¸¸è¿è¡Œåå†…å­˜çš„ä½¿ç”¨ä¸ä¼šè§¦å‘æ­¤ç±»äº¤æ¢ã€‚é€šå¸¸åœ¨ä¸€ä¸ªç‰©ç†å†…å­˜ä¸º4Gçš„æœºå™¨ä¸Šï¼Œæœ€å¤šè®¾ç½®-Xmxä¸º3Gã€‚</p><p>å› ä¸ºå­˜å‚¨æ•°æ®é‡å¾ˆå°ï¼Œæ­¤å¤„ä½¿ç”¨é»˜è®¤å€¼ã€‚</p><h1 id="zookeeperé…ç½®"><a href="#zookeeperé…ç½®" class="headerlink" title="zookeeperé…ç½®"></a>zookeeperé…ç½®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> conf</span><br><span class="line"><span class="built_in">cp</span> zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure><p>åœ¨zoo.cfgä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tickTime=2000</span><br><span class="line">initLimit=10</span><br><span class="line">syncLimit=5</span><br><span class="line">dataDir=/data/zookeeper</span><br><span class="line">clientPort=2181</span><br><span class="line">server.1=frin-zookeeper1:2888:3888</span><br><span class="line">server.2=frin-zookeeper2:2888:3888</span><br><span class="line">server.3=frin-zookeeper3:2888:3888</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ•°æ®ç›®å½•ï¼š&#x2F;data&#x2F;zookeeper</p><h1 id="åˆ›å»ºmyidæ–‡ä»¶"><a href="#åˆ›å»ºmyidæ–‡ä»¶" class="headerlink" title="åˆ›å»ºmyidæ–‡ä»¶"></a>åˆ›å»ºmyidæ–‡ä»¶</h1><p>myidæ–‡ä»¶ä¸­åªæœ‰ä¸€ä¸ªæ•°å­—ï¼Œå³ä¸€ä¸ªServer IDã€‚ä¾‹å¦‚ï¼Œserver.1çš„myidæ–‡ä»¶å†…å®¹å°±æ˜¯â€œ1â€ã€‚æ³¨æ„ï¼Œè¯·ç¡®ä¿æ¯ä¸ªserverçš„myidæ–‡ä»¶ä¸­idæ•°å­—ä¸åŒï¼Œå¹¶ä¸”å’Œserver.id&#x3D;host:port:portä¸­çš„idä¸€è‡´ã€‚å¦å¤–ï¼Œidçš„èŒƒå›´æ˜¯1~255ã€‚</p><p>åˆ†åˆ«åœ¨ä¸‰å°æœºå™¨ä¸Šçš„<code>/data/zookeeper</code>ç›®å½•ä¸‹åˆ›å»ºmyidæ–‡ä»¶ï¼Œå¹¶è®¾ç½®ç›¸åº”çš„å€¼ã€‚</p><h1 id="å¯åŠ¨zookeeper"><a href="#å¯åŠ¨zookeeper" class="headerlink" title="å¯åŠ¨zookeeper"></a>å¯åŠ¨zookeeper</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/zkServer.sh start</span><br></pre></td></tr></table></figure><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/zkCli.sh -server frin-zookeeper1:2181</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> å¸¸ç”¨ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeperå•æœºæ“ä½œ</title>
      <link href="/2017/03/29/Zookeeper-%E5%8D%95%E6%9C%BA%E6%93%8D%E4%BD%9C/"/>
      <url>/2017/03/29/Zookeeper-%E5%8D%95%E6%9C%BA%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h1><p>ä»Apacheä¸‹è½½é•œåƒç«™ç‚¹ä¸‹è½½å½“å‰ç¨³å®š<a href="http://zookeeper.apache.org/releases.html">å‘å¸ƒç‰ˆ</a>ã€‚</p><h1 id="å•æœºæ“ä½œ"><a href="#å•æœºæ“ä½œ" class="headerlink" title="å•æœºæ“ä½œ"></a>å•æœºæ“ä½œ</h1><p>å®‰è£…å•æœºæ¨¡å¼çš„ZookeeperæœåŠ¡å™¨æ˜¯ç®€å•æ˜äº†çš„ã€‚æœåŠ¡å™¨åŒ…å«åœ¨ä¸€ä¸ªå•ç‹¬çš„JARæ–‡ä»¶ä¸­ï¼Œå› æ­¤å®‰è£…åŒ…å«åˆ›å»ºé…ç½®ã€‚</p><p>ä¸‹è½½ç¨³å®šçš„ZooKeeperå‘å¸ƒç‰ˆåï¼Œè§£å‹å¹¶åˆ‡æ¢åˆ°åŒ…çš„æ ¹ç›®å½•ã€‚</p><p>å¯åŠ¨ZooKeeperå‰éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œåˆ›å»º<code>conf/zoo.cfg</code>ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># The number of milliseconds of each tick</span><br><span class="line">tickTime=2000</span><br><span class="line"># The number of ticks that the initial </span><br><span class="line"># synchronization phase can take</span><br><span class="line">initLimit=10</span><br><span class="line"># The number of ticks that can pass between </span><br><span class="line"># sending a request and getting an acknowledgement</span><br><span class="line">syncLimit=5</span><br><span class="line"># the directory where the snapshot is stored.</span><br><span class="line"># do not use /tmp for storage, /tmp here is just </span><br><span class="line"># example sakes.</span><br><span class="line">dataDir=/data/zookeeper</span><br><span class="line"># the port at which the clients will connect</span><br><span class="line">clientPort=2181</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥å«ä»»æ„åå­—ï¼Œåœ¨æ­¤æˆ‘ä»¬å«å®ƒ<code>conf/zoo.cfg</code>ã€‚åˆ›å»ºç›®å½•<code>/data/zookeeper</code>ï¼Œå¹¶ä¿®æ”¹dataDirä¸ºè¯¥ç›®å½•ã€‚</p><p><strong>tickTime</strong></p><p>Zookeeperä½¿ç”¨çš„å•ä½ä¸ºæ¯«ç§’çš„åŸºæœ¬æ—¶é—´ã€‚ç”¨æ¥åšå¿ƒè·³ï¼Œä¼šè¯è¶…æ—¶çš„æœ€å°æ—¶é—´æ˜¯ä¸¤æ¬¡tickTimeã€‚</p><p><strong>dataDir</strong></p><p>ç›®å½•ä½ç½®ç”¨æ¥ä¿å­˜å†…å­˜æ•°æ®åº“å¿«ç…§åŠæ•°æ®åº“æ›´æ–°çš„äº‹åŠ¡æ—¥å¿—ï¼Œé™¤éå¦æœ‰è§„å®šã€‚</p><p><strong>clientPort</strong></p><p>ç›‘å¬å®¢æˆ·ç«¯è¿æ¥çš„ç«¯å£å·ã€‚</p><p>åˆ›å»ºé…ç½®æ–‡ä»¶åå°±å¯ä»¥å¯åŠ¨ZooKeeperäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/zkServer.sh start</span><br></pre></td></tr></table></figure><p>ZooKeeperç”¨log4jè®°å½•æ—¥å¿—æ¶ˆæ¯ â€“ å¯ä»¥åœ¨ç¨‹åºå‘˜æŒ‡å¯¼æ‰‹å†Œä¸­çš„<a href="http://zookeeper.apache.org/doc/trunk/zookeeperProgrammers.html#Logging">Logging</a> ä¸€èŠ‚è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚å¯ä»¥ä»æ§åˆ¶å°ï¼ˆé»˜è®¤ï¼‰å¹¶ä¸”&#x2F;æˆ–è€…çœ‹åˆ°æ—¥å¿—ä¿¡æ¯ï¼Œè¿™ä¾èµ–log4jçš„é…ç½®ã€‚</p><p>è¿™é‡Œåˆ—å‡ºçš„æ­¥éª¤æ˜¯è¿è¡Œå•æœºæ¨¡å¼ZooKeeperçš„ã€‚å•æœºæ¨¡å¼æ²¡æœ‰å‰¯æœ¬ï¼Œå› æ­¤ï¼Œå¦‚æœZooKeeperè¿›ç¨‹å¤±è´¥ï¼Œåˆ™æœåŠ¡å°±ä¼šå®•æ‰ã€‚è¿™å¯¹äºå¤§å¤šæ•°å¼€å‘åœºæ™¯æ˜¯æ²¡é—®é¢˜çš„ï¼Œè¿è¡Œå‰¯æœ¬æ¨¡å¼çš„ZooKeeperï¼Œè¯·å‚è§<a href="http://zookeeper.apache.org/doc/trunk/zookeeperStarted.html#sc_RunningReplicatedZooKeeper">è¿è¡Œå‰¯æœ¬æ¨¡å¼çš„Zookeeper</a>ã€‚</p><h1 id="ç®¡ç†ZooKeeperå­˜å‚¨"><a href="#ç®¡ç†ZooKeeperå­˜å‚¨" class="headerlink" title="ç®¡ç†ZooKeeperå­˜å‚¨"></a>ç®¡ç†ZooKeeperå­˜å‚¨</h1><p>å¯¹äºé•¿æœŸè¿è¡Œçš„ç”Ÿäº§ç³»ç»Ÿï¼ŒZooKeeperå­˜å‚¨å¿…é¡»ä»å¤–éƒ¨è¿›è¡Œç®¡ç†ï¼ˆdataDirå’Œlogsï¼‰ã€‚å‚è§åœ¨ <a href="http://zookeeper.apache.org/doc/trunk/zookeeperAdmin.html#sc_maintenance">maintenance</a> ä¸­çš„ç« èŠ‚è·å–æ›´å¤šä¿¡æ¯ã€‚</p><h1 id="è¿æ¥åˆ°ZooKeeper"><a href="#è¿æ¥åˆ°ZooKeeper" class="headerlink" title="è¿æ¥åˆ°ZooKeeper"></a>è¿æ¥åˆ°ZooKeeper</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/zkCli.sh -server 127.0.0.1:2181</span><br></pre></td></tr></table></figure><p>è¿™ä½¿ä½ å¯ä»¥æ‰§è¡Œç®€å•çš„ã€åƒæ–‡ä»¶ä¸€æ ·çš„æ“ä½œã€‚</p><p>å½“å»ºç«‹äº†è¿æ¥ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°åƒä¸‹é¢çš„ä¸€äº›ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Connecting to localhost:2181</span><br><span class="line">log4j:WARN No appenders could be found for logger (org.apache.zookeeper.ZooKeeper).</span><br><span class="line">log4j:WARN Please initialize the log4j system properly.</span><br><span class="line">Welcome to ZooKeeper!</span><br><span class="line">JLine support is enabled</span><br><span class="line">[zkshell: 0]</span><br></pre></td></tr></table></figure><p>åœ¨shellä¸­ï¼Œè¾“å…¥helpè·å–å¯ä»¥ä»å®¢æˆ·ç«¯æ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ï¼Œåƒä¸‹é¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span></span><br><span class="line">ZooKeeper -server host:port cmd args</span><br><span class="line">        connect host:port</span><br><span class="line">        get path [watch]</span><br><span class="line">        <span class="built_in">ls</span> path [watch]</span><br><span class="line">        <span class="built_in">set</span> path data [version]</span><br><span class="line">        rmr path</span><br><span class="line">        delquota [-n|-b] path</span><br><span class="line">        quit </span><br><span class="line">        printwatches on|off</span><br><span class="line">        create [-s] [-e] path data acl</span><br><span class="line">        <span class="built_in">stat</span> path [watch]</span><br><span class="line">        close </span><br><span class="line">        ls2 path [watch]</span><br><span class="line">        <span class="built_in">history</span> </span><br><span class="line">        listquota path</span><br><span class="line">        setAcl path acl</span><br><span class="line">        getAcl path</span><br><span class="line">        <span class="built_in">sync</span> path</span><br><span class="line">        redo cmdno</span><br><span class="line">        addauth scheme auth</span><br><span class="line">        delete path [version]</span><br><span class="line">        setquota -n|-b val path</span><br></pre></td></tr></table></figure><p>ä»è¿™é‡Œï¼Œå¯ä»¥å°è¯•å‡ ä¸ªç®€å•çš„å‘½ä»¤æ¥ä½“éªŒç®€å•çš„å‘½ä»¤è¡Œæ¥å£ã€‚é¦–å…ˆï¼Œä»å‘½ä»¤åˆ—è¡¨å¼€å§‹ï¼Œåƒlsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 1] <span class="built_in">ls</span> /</span><br><span class="line">[zookeeper]</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡è¿è¡Œ<code>create /zk_test my_data</code>åˆ›å»ºä¸€ä¸ªæ–°çš„znodeã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„znodeå¹¶ä¸è¿™ä¸ªèŠ‚ç‚¹å…³è”å­—ç¬¦ä¸²â€œmy_dataâ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 2] create /zk_test my_data</span><br><span class="line">Created /zk_test</span><br></pre></td></tr></table></figure><p>è¾“å…¥<code>ls /</code>å‘½ä»¤æŸ¥çœ‹ç›®å½•ç»“æ„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 3] <span class="built_in">ls</span> /</span><br><span class="line">[zookeeper, zk_test]</span><br></pre></td></tr></table></figure><p>ç°åœ¨zk_testç›®å½•è¢«åˆ›å»ºäº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡getå‘½ä»¤ç¡®è®¤æ•°æ®å·²ç»ä¸znodeå…³è”ï¼Œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 4] get /zk_test</span><br><span class="line">my_data</span><br><span class="line">cZxid = 0x2</span><br><span class="line">ctime = Tue Mar 28 23:37:16 CST 2017</span><br><span class="line">mZxid = 0x2</span><br><span class="line">mtime = Tue Mar 28 23:37:16 CST 2017</span><br><span class="line">pZxid = 0x2</span><br><span class="line">cversion = 0</span><br><span class="line">dataVersion = 0</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 7</span><br><span class="line">numChildren = 0</span><br></pre></td></tr></table></figure><p>å¯ä»¥è¾“å…¥setå‘½ä»¤ä¿®æ”¹ä¸zk_testå…³è”çš„æ•°æ®ï¼Œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 5] <span class="built_in">set</span> /zk_test junk</span><br><span class="line">cZxid = 0x2</span><br><span class="line">ctime = Tue Mar 28 23:37:16 CST 2017</span><br><span class="line">mZxid = 0x3</span><br><span class="line">mtime = Tue Mar 28 23:46:12 CST 2017</span><br><span class="line">pZxid = 0x2</span><br><span class="line">cversion = 0</span><br><span class="line">dataVersion = 1</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 4</span><br><span class="line">numChildren = 0</span><br><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 6] get /zk_test</span><br><span class="line">junk</span><br><span class="line">cZxid = 0x2</span><br><span class="line">ctime = Tue Mar 28 23:37:16 CST 2017</span><br><span class="line">mZxid = 0x3</span><br><span class="line">mtime = Tue Mar 28 23:46:12 CST 2017</span><br><span class="line">pZxid = 0x2</span><br><span class="line">cversion = 0</span><br><span class="line">dataVersion = 1</span><br><span class="line">aclVersion = 0</span><br><span class="line">ephemeralOwner = 0x0</span><br><span class="line">dataLength = 4</span><br><span class="line">numChildren = 0</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ é™¤èŠ‚ç‚¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 7] delete /zk_test</span><br><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 8] <span class="built_in">ls</span> /</span><br><span class="line">[zookeeper]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> å¸¸ç”¨ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxè¿œç¨‹killè¿›ç¨‹åŠ$å¤„ç†</title>
      <link href="/2017/03/14/Linux-%E8%BF%9C%E7%A8%8B-kill-%E8%BF%9B%E7%A8%8B%E5%8F%8A-%E5%A4%84%E7%90%86/"/>
      <url>/2017/03/14/Linux-%E8%BF%9C%E7%A8%8B-kill-%E8%BF%9B%E7%A8%8B%E5%8F%8A-%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿œç¨‹æ‰§è¡Œçš„å‘½ä»¤ä¸­å¦‚æœåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆ$ï¼‰æ—¶éœ€è¦è½¬ä¹‰ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@remote_host <span class="string">&quot;ps -ef|grep process_name | grep -v &#x27;grep &#x27; | awk &#x27;&#123;print <span class="variable">$2</span>&#125;&#x27;&quot;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šè¯­å¥çš„æœ¬æ„æ˜¯å¾—åˆ°è¿›ç¨‹çš„IDï¼Œä½†å®é™…è¾“å‡ºä¼šæ˜¯è¿›ç¨‹çš„ä¿¡æ¯ã€‚åº”è¯¥ä½¿ç”¨å¦‚ä¸‹å½¢å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@remote_host <span class="string">&quot;ps -ef|grep process_name | grep -v &#x27;grep &#x27; | awk &#x27;&#123;print \$2&#125;&#x27;&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœè¿œç¨‹æ‰§è¡Œå‘½ä»¤æ˜¯åœ¨è„šæœ¬æ–‡ä»¶ä¸­ï¼Œåˆ™éœ€è¦å¤šé‡è½¬ä¹‰ã€‚å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sh exec.sh <span class="string">&quot;ps -ef|grep process_name | grep -v &#x27;grep &#x27; | awk &#x27;&#123;print \\\\\$2&#125;&#x27;&quot;</span>  </span><br><span class="line">exec.sh å†…å®¹å¦‚ä¸‹ï¼š  </span><br><span class="line">ssh root@remote_host &lt;&lt; <span class="string">EOF  </span></span><br><span class="line"><span class="string">  eval &quot;$&#123;command&#125;&quot;  </span></span><br><span class="line"><span class="string">  exit  </span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></blockquote><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥è¿œç¨‹killè¿›ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@remote_host <span class="string">&quot;ps -ef|grep process_name | grep -v &#x27;grep &#x27; | awk &#x27;&#123;print \$2&#125;&#x27; | xargs kill -9&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>REDUCE capability required is more than the supported max container capability in the cluster</title>
      <link href="/2017/03/03/REDUCE-capability-required-is-more-than-the-supported-max-container-capability-in-the-cluster/"/>
      <url>/2017/03/03/REDUCE-capability-required-is-more-than-the-supported-max-container-capability-in-the-cluster/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨è¿è¡ŒMRç¨‹åºæ—¶é‡åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">17/03/03 10:09:45 INFO mapreduce.Job: Job job_1488363995041_0002 failed with state KILLED due to: REDUCE capability required is more than the supported max container capability in the cluster. Killing the Job. reduceResourceRequest: &lt;memory:4096, vCores:1&gt; maxContainerCapability:&lt;memory:3096, vCores:8&gt;</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯Reduce Taskåœ¨ç”³è¯·èµ„æºæ—¶è¶…è¿‡äº†è®¾ç½®çš„æœ€å¤§å¯ç”³è¯·å†…å®¹é‡ã€‚æ£€æŸ¥<code>yarn-site.xml</code>ä¸­çš„é…ç½®é¡¹<code>yarn.scheduler.maximum-allocation-mb</code>ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.maximum-allocation-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>3096<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®ä¸º8192ï¼ˆé»˜è®¤é…ç½®ä¹Ÿæ˜¯8192ï¼‰ï¼Œåˆ†å‘é…ç½®ï¼Œå¹¶é‡å¯ResourceManagerã€‚å†æ¬¡è¿è¡ŒMRæˆåŠŸã€‚</p><p><strong>yarn.scheduler.minimum-allocation-mb &#x2F; yarn.scheduler.maximum-allocation-mb</strong></p><p>å‚æ•°è§£é‡Šï¼šå•ä¸ªå¯ç”³è¯·çš„æœ€å°&#x2F;æœ€å¤§å†…å­˜èµ„æºé‡ã€‚æ¯”å¦‚è®¾ç½®ä¸º1024å’Œ3072ï¼Œåˆ™è¿è¡ŒMapRedceä½œä¸šæ—¶ï¼Œæ¯ä¸ªTaskæœ€å°‘å¯ç”³è¯·1024MBå†…å­˜ï¼Œæœ€å¤šå¯ç”³è¯·3072MBå†…å­˜ã€‚</p><p>é»˜è®¤å€¼ï¼š1024 &#x2F; 8192</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> è°ƒåº¦ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> è°ƒåº¦ç³»ç»Ÿ </tag>
            
            <tag> Yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spacemacs gnuplot</title>
      <link href="/2017/02/27/spacemacs-gnuplot/"/>
      <url>/2017/02/27/spacemacs-gnuplot/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul><li>Ubuntu 16.10</li><li>Emacs 24</li></ul><h1 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h1><h2 id="spacemacså®‰è£…"><a href="#spacemacså®‰è£…" class="headerlink" title="spacemacså®‰è£…"></a>spacemacså®‰è£…</h2><ol><li>å®‰è£…Emacs</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install emacs</span><br></pre></td></tr></table></figure><ol start="2"><li>å®‰è£…spacemacs</li></ol><p>ï¼ˆ1ï¼‰å¦‚æœå·²ç»å­˜åœ¨Emacsé…ç½®æ–‡ä»¶ï¼Œé¦–å…ˆå¤‡ä»½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mv</span> .emacs.d .emacs.d.bak</span><br><span class="line"><span class="built_in">mv</span> .emacs .emacs.bak</span><br></pre></td></tr></table></figure><p>ä¸è¦å¿˜è®°å¤‡ä»½å¹¶ç§»åŠ¨<code>~/.emacs</code>æ–‡ä»¶ï¼Œå¦åˆ™Spacemacså°†ä¸èƒ½åŠ è½½ï¼Œå› ä¸ºè¿™ä¸ªæ–‡ä»¶é˜»æ­¢ä»é€‚å½“çš„åˆå§‹åŒ–æ–‡ä»¶åŠ è½½ã€‚</p><p>ï¼ˆ2ï¼‰cloneé…ç½®ä»“åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/syl20bnr/spacemacs ~/.emacs.d</span><br></pre></td></tr></table></figure><p>masteråˆ†æ”¯æ˜¯ç¨³å®šä¸èƒ½ä¿®æ”¹çš„åˆ†æ”¯ï¼Œä¸è¦åšä»»ä½•ä¿®æ”¹ï¼Œå¦åˆ™ä¼šç ´åæ›´æ–°æœºåˆ¶ã€‚ä½¿ç”¨developåˆ†æ”¯å¯ä»¥å®‰å…¨çš„æ‰‹åŠ¨å¤„ç†æ›´æ–°ã€‚</p><p>ï¼ˆ3ï¼‰ã€å¯é€‰ã€‘å®‰è£…<a href="https://github.com/adobe-fonts/source-code-pro">Source Code Pro</a> å­—ä½“ï¼š</p><p>å³ä½¿åœ¨ç»ˆç«¯è¿è¡Œä¹Ÿéœ€è¦æ”¹å˜ç»ˆç«¯å­—ä½“è®¾ç½®ã€‚</p><p>ï¼ˆ4ï¼‰å¯åŠ¨Emacsã€‚Spacemacsä¼šè‡ªåŠ¨å®‰è£…å®ƒéœ€è¦çš„åŒ…ã€‚å¦‚æœçœ‹åˆ°è·ŸåŒ…ä¸‹è½½ç›¸å…³çš„é”™è¯¯ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨emacsç¦ç”¨HTTPSåè®®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emacs --insecure</span><br></pre></td></tr></table></figure><p>æˆ–è€…å¯ä»¥è®¾ç½®éšè—æ–‡ä»¶ä¸­çš„dotspacemacs-elpa-httpsä¸ºnilï¼Œè¿™æ ·å¯åŠ¨emacsçš„æ—¶å€™å°±ä¸éœ€è¦<code>--insecure</code>å‚æ•°äº†ã€‚å¯ä»¥æ¸…ç†<code>.emacs.d/elpa</code>ç›®å½•ï¼Œè¿™æ ·ä»»ä½•å·²ç»ä¸‹è½½çš„å¯èƒ½å¼•èµ·é”™è¯¯çš„åŒ…ä¼šé‡æ–°å®‰è£…ã€‚</p><p>ï¼ˆ5ï¼‰é‡æ–°å¯åŠ¨emacså®Œæˆå®‰è£…ã€‚</p><h2 id="spacemacså®‰è£…é•œåƒ"><a href="#spacemacså®‰è£…é•œåƒ" class="headerlink" title="spacemacså®‰è£…é•œåƒ"></a>spacemacså®‰è£…é•œåƒ</h2><p>å¦‚æœä¸ä½¿ç”¨é•œåƒspacemacså®‰è£…ä¼šå¾ˆæ…¢ï¼Œç”šè‡³å¡æ­»ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯<a href="http://www.4gamers.cn/">ELPAé•œåƒ</a>ã€‚</p><h2 id="å®‰è£…gnuplot"><a href="#å®‰è£…gnuplot" class="headerlink" title="å®‰è£…gnuplot"></a>å®‰è£…gnuplot</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install gnuplot</span><br></pre></td></tr></table></figure><h1 id="gnuplotæµ‹è¯•"><a href="#gnuplotæµ‹è¯•" class="headerlink" title="gnuplotæµ‹è¯•"></a>gnuplotæµ‹è¯•</h1><p>ç¼–è¾‘orgæ–‡ä»¶ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#+PLOT: title:&quot;Citas&quot; ind:1 deps:(3) type:2d with:histograms set:&quot;yrange [0:]&quot;</span><br><span class="line">     | Sede      | Max cites | H-index |</span><br><span class="line">     |-----------+-----------+---------|</span><br><span class="line">     | Chile     |    257.72 |   21.39 |</span><br><span class="line">     | Leeds     |    165.77 |   19.68 |</span><br><span class="line">     | Sao Paolo |     71.00 |   11.50 |</span><br><span class="line">     | Stockholm |    134.19 |   14.33 |</span><br><span class="line">     | Morelia   |    257.56 |   17.67 |</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘½ä»¤<code>M-x org-plot/gnuplot</code></p><blockquote><p>å¦‚æœå‘½ä»¤è¿è¡ŒæŠ¥é”™ï¼šcannot open load file no such file or directory, gnuplotã€‚åŸå› æ˜¯æ²¡æœ‰å®‰è£…<code>gnuplot.el</code>ã€‚è¿è¡Œå‘½ä»¤<code>M-x package-install RET gnuplot RET</code><br>å‚è€ƒç½‘å€ï¼š<a href="https://github.com/bruceravel/gnuplot-mode">https://github.com/bruceravel/gnuplot-mode</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Emacs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Emacs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows7ä¸Šæ„å»ºå¹¶å®‰è£…Hadoop 2.7.3</title>
      <link href="/2017/02/11/Windows7-%E4%B8%8A%E6%9E%84%E5%BB%BA%E5%B9%B6%E5%AE%89%E8%A3%85-Hadoop-2-7-3/"/>
      <url>/2017/02/11/Windows7-%E4%B8%8A%E6%9E%84%E5%BB%BA%E5%B9%B6%E5%AE%89%E8%A3%85-Hadoop-2-7-3/</url>
      
        <content type="html"><![CDATA[<h1 id="æ„å»ºHadoop-Windowsç‰ˆæœ¬"><a href="#æ„å»ºHadoop-Windowsç‰ˆæœ¬" class="headerlink" title="æ„å»ºHadoop Windowsç‰ˆæœ¬"></a>æ„å»ºHadoop Windowsç‰ˆæœ¬</h1><p>ä¸è¦å°è¯•ä»Cygwinä¸­è¿è¡Œå®‰è£…ã€‚Cygwinæ—¢ä¸æ˜¯å¿…é¡»çš„ä¹Ÿä¸è¢«æ”¯æŒçš„ã€‚</p><h2 id="é€‰æ‹©Javaç‰ˆæœ¬å¹¶è®¾ç½®JAVA-HOME"><a href="#é€‰æ‹©Javaç‰ˆæœ¬å¹¶è®¾ç½®JAVA-HOME" class="headerlink" title="é€‰æ‹©Javaç‰ˆæœ¬å¹¶è®¾ç½®JAVA_HOME"></a>é€‰æ‹©Javaç‰ˆæœ¬å¹¶è®¾ç½®JAVA_HOME</h2><p>Hadoopå¼€å‘è€…å·²ç»æµ‹è¯•äº†Oracle JDK 1.7å’Œ1.6ï¼Œå¹¶ä¸”å·²çŸ¥å¯ä»¥æ­£å¸¸å·¥ä½œçš„ç‰ˆæœ¬ã€‚</p><p>ç¡®ä¿è®¾ç½®äº†JAVA_HOMEï¼Œå¹¶ä¸”ä¸åŒ…å«ä»»ä½•ç©ºå­—ç¬¦ã€‚</p><h2 id="è·å–Hadoopæºä»£ç "><a href="#è·å–Hadoopæºä»£ç " class="headerlink" title="è·å–Hadoopæºä»£ç "></a>è·å–Hadoopæºä»£ç </h2><p>ä¸‹è½½Hadoop 2.7.3æºä»£ç ã€‚ä¸‹è½½åœ°å€ï¼š<a href="http://hadoop.apache.org/releases.html">http://hadoop.apache.org/releases.html</a></p><h2 id="å®‰è£…ä¾èµ–å¹¶é…ç½®æ„å»ºç¯å¢ƒ"><a href="#å®‰è£…ä¾èµ–å¹¶é…ç½®æ„å»ºç¯å¢ƒ" class="headerlink" title="å®‰è£…ä¾èµ–å¹¶é…ç½®æ„å»ºç¯å¢ƒ"></a>å®‰è£…ä¾èµ–å¹¶é…ç½®æ„å»ºç¯å¢ƒ</h2><p>è¯·é˜…è¯»æˆ‘çš„å¦å¤–ä¸€ç¯‡åšæ–‡ï¼š<a href="https://www.zhangjc.com/2017/02/11/Windows7-%E6%90%AD%E5%BB%BA-Hadoop-2-7-3-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8/">Windows7æ­å»ºHadoop-2.7.3æºç é˜…è¯»ç¯å¢ƒé—®é¢˜è§£å†³åˆ—è¡¨</a>ã€‚æˆ‘ç¯å¢ƒåŠä¾èµ–åˆ—è¡¨å¦‚ä¸‹ï¼š</p><ul><li>Windows 7</li><li>java version 1.7.0_80</li><li>Apache Maven 3.2.3</li><li>ProtocolBuffer 2.5.0</li><li>cmake version 3.7.2 win64 x64</li><li>Windows SDK 7.1</li></ul><h2 id="æ„å»ºå¹¶æ‹·è´æ‰“åŒ…æ–‡ä»¶"><a href="#æ„å»ºå¹¶æ‹·è´æ‰“åŒ…æ–‡ä»¶" class="headerlink" title="æ„å»ºå¹¶æ‹·è´æ‰“åŒ…æ–‡ä»¶"></a>æ„å»ºå¹¶æ‹·è´æ‰“åŒ…æ–‡ä»¶</h2><p>åœ¨æºä»£ç æ ¹ç›®å½•ä¸‹è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ„å»ºäºŒè¿›åˆ¶å‘å¸ƒä»£ç ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn package -Pdist,native-win -DskipTests -Dtar</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™ä¸ªå‘½ä»¤åƒ<code>BUILDING.txt</code>æ–‡æ¡£ä¸­è¦æ±‚çš„å¿…é¡»ä»Windows SDK command promptçª—å£è¿è¡Œã€‚æˆåŠŸæ„å»ºåä¼šåœ¨<code>hadoop-dist\target\</code>ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª<code>hadoop.tar.gz</code>äºŒè¿›åˆ¶åŒ…ã€‚</p><p>Hadoopç‰ˆæœ¬å·ä¼šå‡ºç°åœ¨åŒ…æ–‡ä»¶åä¸­ã€‚æ„å»ºä¸åŒçš„ç‰ˆæœ¬åˆ™æŠ¥åä¹Ÿä¼šä¸ä¸€æ ·ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>é€‰æ‹©ä¸€ä¸ªå®‰è£…çš„ç›®æ ‡ç›®å½•ã€‚ç”¨<code>c:\deploy</code>ä½œä¸ºç¤ºä¾‹ã€‚è§£å‹<code>tar.gz</code>æ–‡ä»¶ï¼ˆhadoop-2.7.3.tar.gzï¼‰åˆ°<code>c:\deploy</code>ä¸‹ã€‚è¿™å°†ç”Ÿæˆä¸€ä¸ªå¦‚ä¸‹ç»“æ„çš„ç›®å½•ã€‚å¦‚æœå®‰è£…ä¸€ä¸ªå¤šèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œé‚£ä¹ˆåœ¨æ¯å°èŠ‚ç‚¹ä¸Šé‡å¤è¯¥æ­¥éª¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">C:\deploy&gt;<span class="built_in">dir</span></span><br><span class="line"> Volume <span class="keyword">in</span> drive C has no label.</span><br><span class="line"> Volume Serial Number is 9D1F-7BAC</span><br><span class="line"></span><br><span class="line"> Directory of C:\deploy</span><br><span class="line"></span><br><span class="line">01/18/2014  08:11 AM    &lt;DIR&gt;          .</span><br><span class="line">01/18/2014  08:11 AM    &lt;DIR&gt;          ..</span><br><span class="line">01/18/2014  08:28 AM    &lt;DIR&gt;          bin</span><br><span class="line">01/18/2014  08:28 AM    &lt;DIR&gt;          etc</span><br><span class="line">01/18/2014  08:28 AM    &lt;DIR&gt;          include</span><br><span class="line">01/18/2014  08:28 AM    &lt;DIR&gt;          libexec</span><br><span class="line">01/18/2014  08:28 AM    &lt;DIR&gt;          sbin</span><br><span class="line">01/18/2014  08:28 AM    &lt;DIR&gt;          share</span><br><span class="line">               0 File(s)              0 bytes</span><br></pre></td></tr></table></figure><h1 id="å¯åŠ¨ä¸€ä¸ªå•èŠ‚ç‚¹ï¼ˆä¼ªåˆ†å¸ƒå¼ï¼‰é›†ç¾¤"><a href="#å¯åŠ¨ä¸€ä¸ªå•èŠ‚ç‚¹ï¼ˆä¼ªåˆ†å¸ƒå¼ï¼‰é›†ç¾¤" class="headerlink" title="å¯åŠ¨ä¸€ä¸ªå•èŠ‚ç‚¹ï¼ˆä¼ªåˆ†å¸ƒå¼ï¼‰é›†ç¾¤"></a>å¯åŠ¨ä¸€ä¸ªå•èŠ‚ç‚¹ï¼ˆä¼ªåˆ†å¸ƒå¼ï¼‰é›†ç¾¤</h1><h2 id="HDFSé…ç½®ç¤ºä¾‹"><a href="#HDFSé…ç½®ç¤ºä¾‹" class="headerlink" title="HDFSé…ç½®ç¤ºä¾‹"></a>HDFSé…ç½®ç¤ºä¾‹</h2><p>åœ¨å¯ä»¥å¯åŠ¨Hadoopå®ˆæŠ¤è¿›ç¨‹ä¹‹å‰ï¼Œéœ€è¦ç¼–è¾‘å‡ ä¸ªé…ç½®æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶æ¨¡æ¿å¯ä»¥åœ¨<code>c:\deploy\etc\hadoop</code>ä¸‹æ‰¾åˆ°ï¼Œå‡è®¾ä½ çš„å®‰è£…ç›®å½•æ˜¯<code>c:\deploy</code>ã€‚</p><p>é¦–å…ˆç¼–è¾‘æ–‡ä»¶<code>hadoop-env.cmd</code>ï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> HADOOP_PREFIX=c:\deploy</span><br><span class="line"><span class="built_in">set</span> HADOOP_CONF_DIR=%HADOOP_PREFIX%\etc\hadoop</span><br><span class="line"><span class="built_in">set</span> YARN_CONF_DIR=%HADOOP_CONF_DIR%</span><br><span class="line"><span class="built_in">set</span> PATH=%PATH%;%HADOOP_PREFIX%\bin</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘æˆ–åˆ›å»ºæ–‡ä»¶<code>core-site.xml</code>ï¼Œå¹¶ç¡®ä¿æ–‡ä»¶æœ‰ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://0.0.0.0:19000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–è¾‘æˆ–åˆ›å»ºæ–‡ä»¶<code>hdfs-site.xml</code>ï¼Œå¹¶æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œç¼–è¾‘æˆ–åˆ›å»ºæ–‡ä»¶slavesï¼Œå¹¶ç¡®ä¿æœ‰ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§é»˜è®¤é…ç½®HDFSå…ƒæ•°æ®åŠæ•°æ®æ–‡ä»¶æ”¾åœ¨å½“å‰ç£ç›˜çš„<code>\tmp</code>ç›®å½•ä¸‹ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­è¿™ä¸ªç›®å½•æ˜¯<code>c:\tmp</code>ã€‚ä½œä¸ºç¬¬ä¸€æ¬¡æµ‹è¯•å®‰è£…å¯ä»¥ä¿ç•™é»˜è®¤é…ç½®ã€‚</p><h2 id="YARNé…ç½®ç¤ºä¾‹"><a href="#YARNé…ç½®ç¤ºä¾‹" class="headerlink" title="YARNé…ç½®ç¤ºä¾‹"></a>YARNé…ç½®ç¤ºä¾‹</h2><p>ç¼–è¾‘æˆ–åˆ›å»º<code>%HADOOP_PREFIX%\etc\hadoop</code>ä¸‹çš„æ–‡ä»¶<code>mapred-site.xml</code>ï¼Œå¹¶æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼Œç”¨ä½ çš„Windowsç”¨æˆ·åæ›¿æ¢<code>%USERNAME%</code>ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.job.user.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>%USERNAME%<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.apps.stagingDir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/%USERNAME%/staging<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobtracker.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>local<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œç¼–è¾‘æˆ–åˆ›å»ºæ–‡ä»¶<code>yarn-site.xml</code>ï¼Œå¹¶æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.server.resourcemanager.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.server.resourcemanager.application.expiry.interval<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>60000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.server.nodemanager.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0:45454<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.server.nodemanager.remote-app-log-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/app-logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.log-dirs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/dep/logs/userlogs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.server.mapreduce-appmanager.attempt-listener.bindAddress<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.server.mapreduce-appmanager.client-service.bindAddress<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.application.classpath<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>%HADOOP_CONF_DIR%,%HADOOP_COMMON_HOME%/share/hadoop/common/*,%HADOOP_COMMON_HOME%/share/hadoop/common/lib/*,%HADOOP_HDFS_HOME%/share/hadoop/hdfs/*,%HADOOP_HDFS_HOME%/share/hadoop/hdfs/lib/*,%HADOOP_MAPRED_HOME%/share/hadoop/mapreduce/*,%HADOOP_MAPRED_HOME%/share/hadoop/mapreduce/lib/*,%HADOOP_YARN_HOME%/share/hadoop/yarn/*,%HADOOP_YARN_HOME%/share/hadoop/yarn/lib/*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–ç¯å¢ƒå˜é‡"><a href="#åˆå§‹åŒ–ç¯å¢ƒå˜é‡" class="headerlink" title="åˆå§‹åŒ–ç¯å¢ƒå˜é‡"></a>åˆå§‹åŒ–ç¯å¢ƒå˜é‡</h2><p>è¿è¡Œ<code>c:\deploy\etc\hadoop\hadoop-env.cmd</code>è®¾ç½®å¯åŠ¨è„šæœ¬åŠå®ˆæŠ¤è¿›ç¨‹ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚</p><h2 id="æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ"></a>æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ</h2><p>ç”¨ä¸‹é¢çš„å‘½ä»¤æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%HADOOP_PREFIX%\bin\hdfs namenode -format</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†æ‰“å°æ–‡ä»¶ç³»ç»Ÿçš„å‚æ•°ã€‚æŸ¥æ‰¾ä¸‹é¢çš„ä¸¤ä¸ªå­—ç¬¦ä¸²ç¡®ä¿æ ¼å¼åŒ–åç§°æ‰§è¡ŒæˆåŠŸã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">14/01/18 08:36:23 INFO namenode.FSImage: Saving image file \tmp\hadoop-username\dfs\name\current\fsimage.ckpt_0000000000000000000 using no compression</span><br><span class="line">14/01/18 08:36:23 INFO namenode.FSImage: Image file \tmp\hadoop-username\dfs\name\current\fsimage.ckpt_0000000000000000000 of size 200 bytes saved in 0 seconds.</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨HDFSå®ˆæŠ¤è¿›ç¨‹"><a href="#å¯åŠ¨HDFSå®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="å¯åŠ¨HDFSå®ˆæŠ¤è¿›ç¨‹"></a>å¯åŠ¨HDFSå®ˆæŠ¤è¿›ç¨‹</h2><p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤åœ¨æœ¬æœºå¯åŠ¨NameNodeå’ŒDataNodeã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%HADOOP_PREFIX%\sbin\start-dfs.cmd</span><br></pre></td></tr></table></figure><p>ä¸ºäº†éªŒè¯HDFSå®ˆæŠ¤è¿›ç¨‹å·²ç»è¿è¡Œï¼Œè¯•ç€æ‹·è´ä¸€ä¸ªæ–‡ä»¶åˆ°HDFSã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\deploy&gt;%HADOOP_PREFIX%\bin\hdfs dfs -put myfile.txt /</span><br><span class="line"></span><br><span class="line">C:\deploy&gt;%HADOOP_PREFIX%\bin\hdfs dfs -<span class="built_in">ls</span> /</span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - username supergroup          4640 2014-01-18 08:40 /myfile.txt</span><br><span class="line"></span><br><span class="line">C:\deploy&gt;</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨YARNå®ˆæŠ¤è¿›ç¨‹å¹¶è¿è¡Œä¸€ä¸ªYARNä»»åŠ¡"><a href="#å¯åŠ¨YARNå®ˆæŠ¤è¿›ç¨‹å¹¶è¿è¡Œä¸€ä¸ªYARNä»»åŠ¡" class="headerlink" title="å¯åŠ¨YARNå®ˆæŠ¤è¿›ç¨‹å¹¶è¿è¡Œä¸€ä¸ªYARNä»»åŠ¡"></a>å¯åŠ¨YARNå®ˆæŠ¤è¿›ç¨‹å¹¶è¿è¡Œä¸€ä¸ªYARNä»»åŠ¡</h2><p>æœ€åï¼Œå¯åŠ¨YARNå®ˆæŠ¤è¿›ç¨‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%HADOOP_PREFIX%\sbin\start-yarn.cmd</span><br></pre></td></tr></table></figure><p>é›†ç¾¤åº”è¯¥å·²ç»å¯åŠ¨å¹¶è¿è¡Œäº†ã€‚ä¸ºäº†éªŒè¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆšæ‹·è´åˆ°HDFSä¸Šçš„æ–‡ä»¶ä¸Šè¿è¡Œä¸€ä¸ªwordcountçš„ç¤ºä¾‹ä»»åŠ¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%HADOOP_PREFIX%\bin\yarn jar %HADOOP_PREFIX%\share\hadoop\mapreduce\hadoop-mapreduce-examples-2.5.0.jar wordcount /myfile.txt /out</span><br></pre></td></tr></table></figure><h1 id="è¿œç¨‹è°ƒè¯•"><a href="#è¿œç¨‹è°ƒè¯•" class="headerlink" title="è¿œç¨‹è°ƒè¯•"></a>è¿œç¨‹è°ƒè¯•</h1><p>ç°åœ¨å¯ä»¥åœ¨è‡ªå·±çš„ä¸ªäººç”µè„‘ä¸Šè·Ÿè¸ªHadoopæºä»£ç ï¼Œå¹¶è¿œç¨‹è°ƒè¯•æœ¬æœºä¸Šçš„Hadoopã€‚å…·ä½“åšæ³•é˜…è¯»æˆ‘çš„å¦å¤–ä¸€ç¯‡åšæ–‡ï¼š<a href="https://www.zhangjc.com/2016/09/11/%E8%B0%83%E8%AF%95-Hadoop-%E6%BA%90%E4%BB%A3%E7%A0%81/">è°ƒè¯•Hadoopæºä»£ç </a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows7æ­å»ºHadoop-2.7.3æºç é˜…è¯»ç¯å¢ƒé—®é¢˜è§£å†³åˆ—è¡¨</title>
      <link href="/2017/02/11/Windows7-%E6%90%AD%E5%BB%BA-Hadoop-2-7-3-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8/"/>
      <url>/2017/02/11/Windows7-%E6%90%AD%E5%BB%BA-Hadoop-2-7-3-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒè¯´æ˜"><a href="#ç¯å¢ƒè¯´æ˜" class="headerlink" title="ç¯å¢ƒè¯´æ˜"></a>ç¯å¢ƒè¯´æ˜</h1><ul><li>Windows 7</li><li>java version â€œ1.7.0_80â€</li><li>Apache Maven 3.2.3</li><li>ProtocolBuffer 2.5.0</li><li>cmake version 3.7.2 win64 x64</li><li>Windows SDK 7.1</li></ul><p>æ„å»ºè¿‡ç¨‹å‚ç…§æºä»£ç ç›®å½•ä¸‹<code>BUILDING.txt</code>è¯´æ˜æ–‡ä»¶ä¸­çš„â€œBuilding on Windowsâ€ä¸­çš„å†…å®¹ï¼›ä»¥åŠæˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://www.zhangjc.com/2016/08/29/%E6%90%AD%E5%BB%BA-Hadoop-%E6%BA%90%E4%BB%A3%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83/">æ­å»ºHadoopæºä»£ç é˜…è¯»ç¯å¢ƒ</a>ã€‚</p><h1 id="LINK-fatal-error-LNK1123-è½¬æ¢åˆ°-COFF-æœŸé—´å¤±è´¥"><a href="#LINK-fatal-error-LNK1123-è½¬æ¢åˆ°-COFF-æœŸé—´å¤±è´¥" class="headerlink" title="LINK : fatal error LNK1123: è½¬æ¢åˆ° COFF æœŸé—´å¤±è´¥"></a>LINK : fatal error LNK1123: è½¬æ¢åˆ° COFF æœŸé—´å¤±è´¥</h1><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LINK : fatal error LNK1123: è½¬æ¢åˆ° COFF æœŸé—´å¤±è´¥: æ–‡ä»¶æ— æ•ˆæˆ–æŸå [C:\hadoop-2.7.3\hadoop-common-project\hadoop-common\src\main\winutils\winutils.vcxproj]</span><br></pre></td></tr></table></figure><p>å®‰è£…VS SP1åé‡ç°ç¼–è¯‘ã€‚VS SP1ä¸‹è½½åœ°å€ï¼š<a href="https://www.microsoft.com/en-us/download/details.aspx?id=23691">https://www.microsoft.com/en-us/download/details.aspx?id=23691</a></p><h1 id="fatal-error-C1083-Cannot-open-include-file-â€˜ammintrin-hâ€™"><a href="#fatal-error-C1083-Cannot-open-include-file-â€˜ammintrin-hâ€™" class="headerlink" title="fatal error C1083: Cannot open include file: â€˜ammintrin.hâ€™"></a>fatal error C1083: Cannot open include file: â€˜ammintrin.hâ€™</h1><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\intrin.h(26): fatal error C1083: Cannot open include file: &#x27;ammintrin.h&#x27;: No such file or directory [D:\hadoop-2.7.3\hadoop-common-project\hadoop-common\src\main\native\native.vcxproj]</span><br></pre></td></tr></table></figure><p>ä¸‹è½½<code>ammintrin.h</code>æ–‡ä»¶ï¼Œç„¶åæ”¾ç½®åˆ°ç›®å½•<code>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\</code>ä¸‹ï¼Œç„¶åé‡æ–°ç¼–è¯‘ã€‚ä¸‹è½½åœ°å€ï¼š<a href="http://wenku.baidu.com/link?url=a1MMc5tWY2SnczBiVLk0MiKFfnSpRWGRHKNIwS3vwCNCCAmTIT7fbyayzu1gJrjY4-0UCs7FLbXvMLItmLa-BPZOqHOQxy5cs--X_vSpYam">http://wenku.baidu.com/link?url=a1MMc5tWY2SnczBiVLk0MiKFfnSpRWGRHKNIwS3vwCNCCAmTIT7fbyayzu1gJrjY4-0UCs7FLbXvMLItmLa-BPZOqHOQxy5cs--X_vSpYam</a></p><h1 id="error-You-are-attempting-to-build-a-Win32-application-from-an-x64-environment"><a href="#error-You-are-attempting-to-build-a-Win32-application-from-an-x64-environment" class="headerlink" title="error : You are attempting to build a Win32 application from an x64 environment"></a>error : You are attempting to build a Win32 application from an x64 environment</h1><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\PlatformToolsets\Windows7.1SDK\Microsoft.Cpp.Win32.Windows7.1SDK.targets(20,5): error : You are attempting to build a Win32 application from an x64 environment. If using the Windows 7.1 SDK build environment, type setenv /x86 [D:\hadoop-2.7.3\hadoop-common-project\hadoop-common\src\main\winutils\libwinutils.vcxproj]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé”™è¯¯æ˜¯ç”±äºæ²¡æœ‰æŒ‰ç…§<code>BUILDING.txt</code>ä¸­çš„è¯´æ˜ç¼–è¯‘ä¹‹å‰å¿…é¡»è®¾ç½®å¹³å°ç¯å¢ƒå˜é‡å¯¼è‡´ã€‚ç¼–è¯‘å‰å…ˆç”¨ä¸‹é¢çš„å‘½ä»¤è®¾ç½®å¹³å°ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> Platform=x64 (when building on a 64-bit system)</span><br><span class="line"><span class="built_in">set</span> Platform=Win32 (when building on a 32-bit system)</span><br></pre></td></tr></table></figure><h1 id="CMake-Error"><a href="#CMake-Error" class="headerlink" title="CMake Error"></a>CMake Error</h1><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[exec] CMake Error: Could not create named generator Visual Studio 10 Win64</span><br></pre></td></tr></table></figure><p>æœ€å¼€å§‹æˆ‘å®‰è£…çš„æ˜¯<code>cmake 2.6.4</code>ï¼Œå› ä¸ºè¿™ä¸ªç‰ˆæœ¬æ²¡æœ‰win64çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥å‡ºé”™ã€‚å¸è½½é‡æ–°å®‰è£…cmake-3.7.2-win64-x64ç‰ˆæœ¬ï¼Œé‡æ–°ç¼–è¯‘æˆåŠŸã€‚cmakeå„ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼š<a href="https://cmake.org/files/">https://cmake.org/files/</a></p><blockquote><p>ç½‘ä¸Šä¹Ÿæœ‰ç±»ä¼¼é”™è¯¯æ˜¯å› ä¸ºç³»ç»Ÿä¸­è£…äº†cygwinï¼Œä¸”cygwin åœ¨ç¯å¢ƒå˜é‡pathä¸­çš„ä½ç½®åœ¨cmakeä¹‹å‰ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µåˆ™å°†cmakeç›®å½•è·¯å¾„åœ¨ç¯å¢ƒå˜é‡pathä¸­çš„ä½ç½®ç§»åˆ°cygwinå‰é¢å°±è§£å†³äº†ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå‘½ä»¤ååŒå‡å·ç¬¦ï¼ˆ--ï¼‰çš„å«ä¹‰</title>
      <link href="/2017/02/05/Linux-%E5%91%BD%E4%BB%A4%E5%90%8E-%E7%9A%84%E5%90%AB%E4%B9%89/"/>
      <url>/2017/02/05/Linux-%E5%91%BD%E4%BB%A4%E5%90%8E-%E7%9A%84%E5%90%AB%E4%B9%89/</url>
      
        <content type="html"><![CDATA[<p>Unix&#x2F;Linuxä¸‹å„ç§å‘½ä»¤çš„å‚æ•°ï¼Œéƒ½æ˜¯ä»¥å‡å·ç¬¦ï¼ˆ<code>-</code>ï¼‰åé¢è·Ÿå•å­—ç¬¦å‚æ•°ï¼Œæ¯”å¦‚<code>-r</code>ï¼‰æˆ–è€…åŒå‡å·ç¬¦ï¼ˆ<code>--</code>ï¼‰ï¼ˆåé¢ç´§è·Ÿå¤šå­—ç¬¦å‚æ•°ï¼Œæ¯”å¦‚<code>--recursive</code>ï¼‰æ¥è¡¨ç¤ºã€‚ åœ¨æ‰€æœ‰å‚æ•°åé¢æ˜¯æ–‡ä»¶åæˆ–è€…ç›®å½•ã€‚å¤§å¤šæƒ…å†µä¸‹ï¼ˆæ–‡ä»¶åç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯å‡å·ç¬¦ï¼ˆ<code>-</code>ï¼‰ï¼‰è¿™æ ·æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœæ–‡ä»¶åç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯-æ—¶ï¼ˆæ¯”å¦‚<code>-myfile</code>)ï¼Œå‘½ä»¤å°±æ— æ³•åŒºåˆ†æ­¤æ—¶<code>-myfile</code>åˆ°åº•æ˜¯æ–‡ä»¶åè¿˜æ˜¯å‚æ•°åã€‚æ­¤æ—¶è§£å†³æ–¹æ³•å°±æ˜¯ç”¨åŒå‡å·ç¬¦ï¼ˆ<code>--</code>ï¼‰æ¥è¡¨ç¤ºå‘½ä»¤å‚æ•°ç»“æŸäº†ï¼Œåé¢å“ªæ€•æ˜¯ä»¥å‡å·ç¬¦ï¼ˆ<code>-</code>ï¼‰å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿè¢«å½“æˆæ–‡ä»¶åå¤„ç†ã€‚</p><p>æ¯”å¦‚<code>rm -r -- -mydir</code>å°±ä¼šé€’å½’çš„ï¼ˆ<code>-r</code>ï¼‰åˆ é™¤<code>-mydir</code>è¿™ä¸ªç›®å½•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows7 Emacsè®¾ç½®åŠä¸­æ–‡ä¹±ç è§£å†³</title>
      <link href="/2017/01/08/Windows7-Emacs-%E8%AE%BE%E7%BD%AE%E5%8F%8A%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3/"/>
      <url>/2017/01/08/Windows7-Emacs-%E8%AE%BE%E7%BD%AE%E5%8F%8A%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒè¯´æ˜"><a href="#ç¯å¢ƒè¯´æ˜" class="headerlink" title="ç¯å¢ƒè¯´æ˜"></a>ç¯å¢ƒè¯´æ˜</h1><ul><li>Windows7</li><li>GNU Emacs 25.1.1</li><li>å®‰è£…è·¯å¾„ï¼šD:&#x2F;apps&#x2F;emacs&#x2F;</li></ul><h1 id="é…ç½®Emacs"><a href="#é…ç½®Emacs" class="headerlink" title="é…ç½®Emacs"></a>é…ç½®Emacs</h1><p>åœ¨Windows7ä¸‹å®‰è£…å®ŒEmacsåï¼Œé»˜è®¤æƒ…å†µä¸‹Emacsä¸ä¼šåœ¨ä¸€å¯åŠ¨çš„æ—¶å€™å°±ç”Ÿæˆ.emacsé…ç½®æ–‡ä»¶å’Œ.emacs.dç›®å½•ã€‚ä¸ºäº†ç”Ÿæˆé…ç½®æ–‡ä»¶éœ€è¦åšå¦‚ä¸‹æ“ä½œï¼š</p><ul><li>å¯åŠ¨Emacs</li><li>åœ¨Optionsèœå•ä¸­éšä¾¿æ›´æ”¹ä¸€ä¸‹è®¾ç½®ï¼Œå¦‚é€‰ä¸­â€œHighlight Matching Parenthesesâ€</li><li>ç‚¹Save Optionsä¿å­˜</li></ul><p>ç”Ÿæˆçš„.emacsç›®å½•è¿˜æ˜¯åœ¨<code>C:\Users\&lt;username&gt;\AppData\Roaming</code>ä¸‹ã€‚æ‰“å¼€<code>C:\Users\&lt;username&gt;\AppData\Roaming\.emacs</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(load-file &quot;D:/apps/emacs/.emacs&quot;)</span><br></pre></td></tr></table></figure><p>Emacsåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½<code>C:\Users\&lt;username&gt;\AppData\Roaming\.emacs</code>è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè€Œè¯¥æ–‡ä»¶åˆåŠ è½½<code>D:/apps/emacs/.emacs</code>é…ç½®æ–‡ä»¶ã€‚è¿™æ ·ä¸ç”¨è¿›å…¥<code>C:\Users\&lt;username&gt;\AppData\Roaming\.emacs</code>è¿™ä¸ªå†—çš„è·¯å¾„äº†ã€‚</p><p>ä½¿ç”¨ä»¥ä¸‹é…ç½®ä¿®æ”¹<code>HOME PATH</code>é…ç½®é¡¹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(setenv &quot;HOME&quot; &quot;D:/emacs-23.2&quot;)</span><br><span class="line">(setenv &quot;PATH&quot; &quot;D:/emacs-23.2&quot;)</span><br><span class="line">;;set the default file path</span><br><span class="line">(setq default-directory &quot;~/&quot;)</span><br><span class="line">(setq load-path (cons &quot;~/.emacs.d/elisp&quot; load-path))</span><br></pre></td></tr></table></figure><h1 id="è§£å†³ä¸­æ–‡ä¹±ç "><a href="#è§£å†³ä¸­æ–‡ä¹±ç " class="headerlink" title="è§£å†³ä¸­æ–‡ä¹±ç "></a>è§£å†³ä¸­æ–‡ä¹±ç </h1><p>åœ¨.emacsæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;; ç¼–ç è®¾ç½® begin</span></span><br><span class="line">(<span class="name">set-language-environment</span> &#x27;Chinese-GB)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; default-buffer-file-coding-systemå˜é‡åœ¨emacs23.2ä¹‹åå·²è¢«åºŸå¼ƒï¼Œä½¿ç”¨buffer-file-coding-systemä»£æ›¿</span></span><br><span class="line">(<span class="name">set-default</span> buffer-file-coding-system &#x27;utf-8-unix)</span><br><span class="line">(<span class="name">set-default-coding-systems</span> &#x27;utf-8-unix)</span><br><span class="line">(<span class="name">setq-default</span> pathname-coding-system &#x27;euc-cn)</span><br><span class="line">(<span class="name">setq</span> file-name-coding-system &#x27;euc-cn)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; å¦å¤–å»ºè®®æŒ‰ä¸‹é¢çš„å…ˆåé¡ºåºæ¥è®¾ç½®ä¸­æ–‡ç¼–ç è¯†åˆ«æ–¹å¼ã€‚</span></span><br><span class="line"><span class="comment">;; é‡è¦æç¤º:å†™åœ¨æœ€åä¸€è¡Œçš„ï¼Œå®é™…ä¸Šæœ€ä¼˜å…ˆä½¿ç”¨; æœ€å‰é¢ä¸€è¡Œï¼Œåè€Œæ”¾åˆ°æœ€åæ‰è¯†åˆ«ã€‚</span></span><br><span class="line"><span class="comment">;; utf-16le-with-signature ç›¸å½“äº Windows ä¸‹çš„ Unicode ç¼–ç ï¼Œè¿™é‡Œä¹Ÿå¯å†™æˆ</span></span><br><span class="line"><span class="comment">;; utf-16 (utf-16 å®é™…ä¸Šè¿˜ç»†åˆ†ä¸º utf-16le, utf-16be, utf-16le-with-signatureç­‰å¤šç§)</span></span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;cp950)</span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;gb2312)</span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;cp936)</span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;gb18030)</span><br><span class="line"></span><br><span class="line"><span class="comment">;(prefer-coding-system &#x27;utf-16le-with-signature)</span></span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;utf-16)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; æ–°å»ºæ–‡ä»¶ä½¿ç”¨utf-8-unixæ–¹å¼</span></span><br><span class="line"><span class="comment">;; å¦‚æœä¸å†™ä¸‹é¢ä¸¤å¥ï¼Œåªå†™</span></span><br><span class="line"><span class="comment">;; (prefer-coding-system &#x27;utf-8)</span></span><br><span class="line"><span class="comment">;; è¿™ä¸€å¥çš„è¯ï¼Œæ–°å»ºæ–‡ä»¶ä»¥utf-8ç¼–ç ï¼Œè¡Œæœ«ç»“æŸç¬¦å¹³å°ç›¸å…³</span></span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;utf-8-dos)</span><br><span class="line">(<span class="name">prefer-coding-system</span> &#x27;utf-8-unix)</span><br><span class="line"><span class="comment">;; ç¼–ç è®¾ç½® end</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Emacs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> Emacs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Socket.IOè´Ÿè½½å‡è¡¡</title>
      <link href="/2016/10/16/Socket-IO-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
      <url>/2016/10/16/Socket-IO-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h1><p><img src="/images/202502/socketio.png" alt="Socket.IOè´Ÿè½½å‡è¡¡æ¶æ„"></p><h1 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h1><p>ä¸ºäº†è´Ÿè½½å‡è¡¡æ—¶è¿æ¥ä¿è¯å§‹ç»ˆè¿åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨Nginxçš„ip_hashå®ç°session stickyï¼Œè®©å®¢æˆ·ç«¯å§‹ç»ˆè¿æ¥åˆ°é›†ç¾¤å†…ä¸€å°èŠ‚ç‚¹ä¸Šã€‚</p><p>åœ¨Nginxçš„<code>conf.d</code>ç›®å½•ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶<code>socket_io.conf</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">upstream nodejs_websocket &#123;</span><br><span class="line">  ip_hash;</span><br><span class="line">  server 192.168.1.100:3000;</span><br><span class="line">  server 192.168.1.101:3000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name 127.0.0.1 localhost;</span><br><span class="line">  access_log off;</span><br><span class="line">  add_header Content-Type &quot;text/html; charset=UTF-8&quot;;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://nodejs_websocket;</span><br><span class="line"></span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºNginxçš„åå‘ä»£ç†æœºåˆ¶å’ŒSocket.IOçš„è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œä¸Šè¿°æ¶æ„è¿˜å…·å¤‡é«˜å¯ç”¨çš„ç‰¹æ€§ï¼Œå³å½“æŸä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼ŒåŸå…ˆè¿æ¥åˆ°è¯¥èŠ‚ç‚¹ä¸Šçš„å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨é‡è¿è‡³å…¶å®ƒèŠ‚ç‚¹ä¸Šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Socket.IO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Socket.IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javap</title>
      <link href="/2016/10/16/javap/"/>
      <url>/2016/10/16/javap/</url>
      
        <content type="html"><![CDATA[<p>åç¼–è¯‘ä¸€ä¸ªæˆ–å¤šä¸ªclassæ–‡ä»¶ã€‚</p><h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p><strong>javap</strong> [<em>options</em>] <em>classfileâ€¦</em></p><h2 id="options"><a href="#options" class="headerlink" title="options"></a><em>options</em></h2><p>å‘½ä»¤è¡Œé€‰é¡¹ã€‚å…·ä½“é€‰é¡¹å‚è§â€œé€‰é¡¹â€ä¸€èŠ‚ã€‚</p><h2 id="classfile"><a href="#classfile" class="headerlink" title="classfile"></a><em>classfile</em></h2><p>ä¸€ä¸ªæˆ–å¤šä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„è¢«æ³¨é‡Šçš„ç±»ï¼Œä¾‹å¦‚ï¼š<code>DocFooter.class</code>ã€‚å¯ä»¥é€šè¿‡æ–‡ä»¶åæˆ–è€…URLï¼ˆå¦‚ï¼šfile:&#x2F;&#x2F;&#x2F;home&#x2F;user&#x2F;myproject&#x2F;src&#x2F;DocFooter.classï¼‰æŒ‡å®šä¸€ä¸ªåœ¨ç±»è·¯å¾„ä¸­çš„ç±»ã€‚</p><h1 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h1><p><em>javap</em> å‘½ä»¤åæ±‡ç¼–ä¸€ä¸ªæˆ–å¤šä¸ªç±»æ–‡ä»¶ã€‚è¾“å‡ºä¾èµ–äºä½¿ç”¨çš„é€‰é¡¹ã€‚å½“ä¸ä½¿ç”¨é€‰é¡¹æ—¶ï¼Œ<em>javap</em> å‘½ä»¤æ‰“å°ä¼ é€’ç»™å®ƒçš„ç±»çš„åŒ…ã€protectedå’Œpublicå±æ€§ã€æ–¹æ³•ã€‚<em>javap</em> å‘½ä»¤æ‰“å°è¾“å‡ºåˆ°æ ‡å‡†è¾“å…¥ã€‚</p><h1 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h1><h2 id="help-help"><a href="#help-help" class="headerlink" title="-help --help -?"></a>-help --help -?</h2><p>æ‰“å° <em>javap</em> å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚</p><h2 id="version"><a href="#version" class="headerlink" title="-version"></a>-version</h2><p>æ‰“å°å‘å¸ƒä¿¡æ¯ã€‚</p><h2 id="l"><a href="#l" class="headerlink" title="-l"></a>-l</h2><p>è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨ã€‚</p><h2 id="public"><a href="#public" class="headerlink" title="-public"></a>-public</h2><p>ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜ã€‚</p><h2 id="protected"><a href="#protected" class="headerlink" title="-protected"></a>-protected</h2><p>æ˜¾ç¤ºå—ä¿æŠ¤çš„&#x2F;å…¬å…±ç±»å’Œæˆå‘˜ã€‚</p><h2 id="private-p"><a href="#private-p" class="headerlink" title="-private -p"></a>-private -p</h2><p>æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜ã€‚</p><h2 id="Joption"><a href="#Joption" class="headerlink" title="-Joption"></a>-Joption</h2><p>ä¼ é€’æŒ‡å®šçš„é€‰é¡¹ç»™JVMã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javap -J-version</span><br><span class="line">javap -J-Djava.security.manager -J-Djava.security.policy=MyPolicy MyClassName</span><br></pre></td></tr></table></figure><p>å…³äºJVMé€‰é¡¹çš„æ›´å¤šä¿¡æ¯ï¼Œå‚è§ <a href="http://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html#CBBFHAJA">java</a> å‘½ä»¤æ–‡æ¡£ã€‚</p><h2 id="s"><a href="#s" class="headerlink" title="-s"></a>-s</h2><p>è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾åã€‚</p><h2 id="sysinfo"><a href="#sysinfo" class="headerlink" title="-sysinfo"></a>-sysinfo</h2><p>æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„ã€å¤§å°ã€æ—¥æœŸã€MD5 æ•£åˆ—)ã€‚</p><h2 id="constants"><a href="#constants" class="headerlink" title="-constants"></a>-constants</h2><p>æ˜¾ç¤ºé™æ€æœ€ç»ˆå¸¸é‡ã€‚</p><h2 id="c"><a href="#c" class="headerlink" title="-c"></a>-c</h2><p>å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–ã€‚</p><h2 id="verbose"><a href="#verbose" class="headerlink" title="-verbose"></a>-verbose</h2><p>æ‰“å°æ–¹æ³•å‚æ•°å’Œæœ¬åœ°å˜é‡çš„æ•°é‡ä»¥åŠæ ˆåŒºå¤§å°ã€‚</p><h2 id="classpath-path"><a href="#classpath-path" class="headerlink" title="-classpath path"></a>-classpath <em>path</em></h2><p>æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ã€‚å½“è®¾ç½®äº†è¿™ä¸ªå˜é‡å°†è¦†ç›–é»˜è®¤çš„æˆ– CLASSPATH ç¯å¢ƒå˜é‡ã€‚</p><h2 id="bootclasspath-path"><a href="#bootclasspath-path" class="headerlink" title="-bootclasspath path"></a>-bootclasspath <em>path</em></h2><p>è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®ã€‚é»˜è®¤çš„ï¼Œå¼•å¯¼ç±»æ˜¯é‚£äº›å®ç°äº†ä½äº jre&#x2F;lib&#x2F;rt.jar å’Œå…¶ä»–å‡ ä¸ª JAR æ–‡ä»¶çš„æ ¸å¿ƒ Java å¹³å°çš„ç±»ã€‚</p><h2 id="extdir-dirs"><a href="#extdir-dirs" class="headerlink" title="-extdir dirs"></a>-extdir <em>dirs</em></h2><p>æŒ‡å®šjavapæœç´¢å·²å®‰è£…çš„javaæ‰©å±•çš„ä½ç½®ï¼Œé»˜è®¤çš„javaæ‰©å±•çš„ä½ç½®ä¸º java.ext.dirs çš„å€¼ã€‚</p><h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><p>ç¼–è¯‘ä¸‹é¢çš„<code>HelloWorld.java</code>ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>javap HelloWorld.class</code>å‘½ä»¤çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Compiled from <span class="string">&quot;HelloWorld.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">HelloWorld</span><span class="params">()</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>javap -c HelloWorld.class</code>å‘½ä»¤çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Compiled from <span class="string">&quot;HelloWorld.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">HelloWorld</span><span class="params">()</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0       </span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span>        </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: getstatic     #<span class="number">2</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">       <span class="number">3</span>: ldc           #<span class="number">3</span>                  <span class="comment">// String Hello World!</span></span><br><span class="line">       <span class="number">5</span>: invokevirtual #<span class="number">4</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">       <span class="number">8</span>: <span class="keyword">return</span>        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shellæ–‡ä»¶åˆ¤æ–­æ¡ä»¶</title>
      <link href="/2016/09/11/Shell-%E6%96%87%E4%BB%B6%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6/"/>
      <url>/2016/09/11/Shell-%E6%96%87%E4%BB%B6%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<ol><li>-e filenameï¼šå¦‚æœ filename å­˜åœ¨ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-d filenameï¼šå¦‚æœ filename ä¸ºç›®å½•ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-f filenameï¼šå¦‚æœ filename ä¸ºå¸¸è§„æ–‡ä»¶ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-L filenameï¼šå¦‚æœ filename ä¸ºç¬¦å·é“¾æ¥ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-r filenameï¼šå¦‚æœ filename å¯è¯»ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-w filenameï¼šå¦‚æœ filename å¯å†™ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-x filenameï¼šå¦‚æœ filename å¯æ‰§è¡Œï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-s filenameï¼šå¦‚æœæ–‡ä»¶é•¿åº¦ä¸ä¸º 0ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>-h filenameï¼šå¦‚æœæ–‡ä»¶æ˜¯è½¯é“¾æ¥ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>filename1 -nt filename2ï¼šå¦‚æœ filename1 æ¯” filename2 æ–°ï¼Œåˆ™ä¸ºçœŸã€‚</li><li>filename1 -ot filename2ï¼šå¦‚æœ filename1 æ¯” filename2 æ—§ï¼Œåˆ™ä¸ºçœŸã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shellæ¡ä»¶å˜é‡æ›¿æ¢</title>
      <link href="/2016/09/11/Shell-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%E6%9B%BF%E6%8D%A2/"/>
      <url>/2016/09/11/Shell-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%E6%9B%BF%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<p>Bash Shellå¯ä»¥è¿›è¡Œå˜é‡çš„æ¡ä»¶æ›¿æ¢ï¼Œæ¡ä»¶æ”¾åœ¨<code>&#123;&#125;</code>ä¸­ï¼Œåªæœ‰æ¡ä»¶å‘ç”Ÿæ—¶æ‰è¿›è¡Œæ›¿æ¢ï¼š</p><ul><li>${v1:-$v2}</li></ul><p>å½“å˜é‡v1æœªå®šä¹‰æˆ–è€…å€¼ä¸ºç©ºæ—¶ï¼Œè¿”å›v2çš„å€¼ï¼Œå¦åˆ™è¿”å›v1çš„å€¼ã€‚</p><ul><li>${v1:&#x3D;$v2}</li></ul><p>è‹¥å˜é‡v1æœªå®šä¹‰æˆ–è€…å€¼ä¸ºç©ºæ—¶ï¼Œåœ¨è¿”å›v2çš„å€¼çš„åŒæ—¶å°†v2çš„å€¼ç»™v1ã€‚</p><ul><li>${v1:?message}</li></ul><p>è‹¥å˜é‡å·²èµ‹å€¼çš„è¯ï¼Œæ­£å¸¸æ›¿æ¢ã€‚å¦åˆ™å°†æ¶ˆæ¯messageé€åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º(è‹¥æ­¤æ›¿æ¢å‡ºç°åœ¨Shellç¨‹åºä¸­ï¼Œé‚£ä¹ˆè¯¥ç¨‹åºå°†ç»ˆæ­¢è¿è¡Œ)ã€‚</p><ul><li>${v1:+$v2}</li></ul><p>è‹¥å˜é‡å·²èµ‹å€¼çš„è¯ï¼Œå…¶å€¼æ‰ç”¨v2çš„å€¼æ›¿æ¢ï¼Œå¦åˆ™ä¸è¿›è¡Œä»»ä½•æ›¿æ¢ã€‚</p><ul><li>${v1:offset}ã€${v1:offset:length}</li></ul><p>ä»å˜é‡ä¸­æå–å­ä¸²ï¼Œè¿™é‡Œoffsetå’Œlengthå¯ä»¥æ˜¯ç®—æœ¯è¡¨è¾¾å¼ã€‚</p><ul><li>${&#35;v1}</li></ul><p>å˜é‡çš„å­—ç¬¦ä¸ªæ•°(å˜é‡çš„å­—ç¬¦ä¸ªæ•°ï¼Œå¹¶ä¸æ˜¯å˜é‡ä¸ªæ•°ï¼‰ã€‚</p><ul><li>${v1&#35;pattern}ã€${v1&#35;&#35;pattern}</li></ul><p>å»æ‰v1ä¸­ä¸patternç›¸åŒ¹é…çš„éƒ¨åˆ†ï¼Œæ¡ä»¶æ˜¯v1çš„å¼€å¤´ä¸patternç›¸åŒ¹é…ã€‚&#35;ä¸&#35;&#35;çš„åŒºåˆ«åœ¨äºä¸€ä¸ªæ˜¯æœ€çŸ­åŒ¹é…æ¨¡å¼ï¼Œä¸€ä¸ªæ˜¯æœ€é•¿åŒ¹é…æ¨¡å¼ã€‚</p><ul><li>${v1ï¼…pattern}ã€${v1ï¼…ï¼…pattern}</li></ul><p>ä¸ä¸Šä¸€æ¡è§„åˆ™ç±»ä¼¼ï¼Œåªæ˜¯ä»v1çš„å°¾éƒ¨ä¸patternç›¸åŒ¹é…ï¼Œï¼…ä¸ï¼…ï¼…çš„åŒºåˆ«ä¸&#35;ä¸&#35;&#35;ä¸€æ ·ã€‚</p><ul><li>${v1&#x2F;pattern&#x2F;string}ã€${v1&#x2F;&#x2F;pattern&#x2F;string}</li></ul><p>è¿›è¡Œå˜é‡å†…å®¹çš„æ›¿æ¢ï¼ŒæŠŠä¸patternåŒ¹é…çš„éƒ¨åˆ†æ›¿æ¢ä¸ºstringçš„å†…å®¹ï¼Œ&#x2F;ä¸&#x2F;&#x2F;çš„åŒºåˆ«ä¸ä¸ŠåŒã€‚</p><p>æ³¨æ„ï¼šä¸Šè¿°æ¡ä»¶å˜é‡æ›¿æ¢ä¸­ï¼Œé™¤ç¬¬2æ¡å¤–ï¼Œå…¶ä½™å‡ä¸å½±å“å˜é‡æœ¬èº«çš„å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°ƒè¯•Hadoopæºä»£ç </title>
      <link href="/2016/09/11/%E8%B0%83%E8%AF%95-Hadoop-%E6%BA%90%E4%BB%A3%E7%A0%81/"/>
      <url>/2016/09/11/%E8%B0%83%E8%AF%95-Hadoop-%E6%BA%90%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="Hadoopç‰ˆæœ¬"><a href="#Hadoopç‰ˆæœ¬" class="headerlink" title="Hadoopç‰ˆæœ¬"></a>Hadoopç‰ˆæœ¬</h1><p>Hadoop 2.7.3</p><h1 id="è°ƒè¯•æ¨¡å¼ä¸‹å¯åŠ¨Hadoop-NameNode"><a href="#è°ƒè¯•æ¨¡å¼ä¸‹å¯åŠ¨Hadoop-NameNode" class="headerlink" title="è°ƒè¯•æ¨¡å¼ä¸‹å¯åŠ¨Hadoop NameNode"></a>è°ƒè¯•æ¨¡å¼ä¸‹å¯åŠ¨Hadoop NameNode</h1><p>åœ¨<code>$&#123;HADOOP_HOME&#125;/etc/hadoop/hadoop-env.sh</code>ä¸­è®¾ç½®NameNodeå¯åŠ¨çš„JVMå‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export HADOOP_NAMENODE_OPTS=&quot;-Xdebug -Xrunjdwp:transport=dt_socket,address=8788,server=y,suspend=y&quot;</span><br><span class="line">export HADOOP_NAMENODE_OPTS=&quot;-Dhadoop.security.logger=$&#123;HADOOP_SECURITY_LOGGER:-INFO,RFAS&#125; -Dhdfs.audit.logger=$&#123;HDFS_AUDIT_LOGGER:-INFO,NullAppender&#125; $HADOOP_NAMENODE_OPTS&quot;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è„šæœ¬<code>$&#123;HADOOP_HOME&#125;/sbin/start-dfs.sh</code>å¯åŠ¨HDFSï¼Œå¦‚æœæœ‰ä»¥ä¸‹æç¤ºä¿¡æ¯åˆ™è¯´æ˜è°ƒè¯•æ¨¡å¼ä¸‹å¯åŠ¨NameNodeæˆåŠŸï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Listening for transport dt_socket at address: 8788</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå¦‚æœæ‰§è¡ŒjpsæŸ¥çœ‹javaè¿›ç¨‹ä¿¡æ¯ä¼šæœ‰ä»¥ä¸‹ä¿¡æ¯ï¼Œæ˜¯å› ä¸ºNameNodeè¿›ç¨‹è¢«æŒ‚èµ·å¹¶å¤„äºç›‘å¬çŠ¶æ€ï¼Œç›´åˆ°æ”¶åˆ°debugç¡®è®¤ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ jps</span><br><span class="line">10638 Jps</span><br><span class="line">10438 -- main class information unavailable</span><br><span class="line">2171 </span><br><span class="line">10508 DataNode</span><br></pre></td></tr></table></figure><h1 id="è®¾ç½®æ–­ç‚¹"><a href="#è®¾ç½®æ–­ç‚¹" class="headerlink" title="è®¾ç½®æ–­ç‚¹"></a>è®¾ç½®æ–­ç‚¹</h1><p>æ‰¾åˆ°<code>hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java</code>å¹¶åœ¨mainå‡½æ•°ä¸­è®¾ç½®æ–­ç‚¹ï¼Œå¦‚ä¸‹å›¾ï¼š<img src="/images/202501/namenode-breakpoints.png" alt="NameNode Breakpoints"></p><h1 id="åœ¨Eclipseä¸­è°ƒè¯•"><a href="#åœ¨Eclipseä¸­è°ƒè¯•" class="headerlink" title="åœ¨Eclipseä¸­è°ƒè¯•"></a>åœ¨Eclipseä¸­è°ƒè¯•</h1><p>åœ¨<code>NameNode.java</code>ä»£ç ä¸­ç‚¹å‡»å³é”®ï¼Œåœ¨å¼¹å‡ºçš„èœå•ä¸­é€‰æ‹©<code>Debug As -&gt; Debug Configurations...</code>ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­åŒå‡»<code>Remote Java Application</code>ï¼Œé…ç½®å†…å®¹å¦‚å›¾ï¼š<img src="/images/202501/remote-java-application-debug-conf.png" alt="Remote Java Application Debug Configuration"></p><p>é…ç½®å®Œæˆåç‚¹å‡»DebugæŒ‰é’®è¿›å…¥è°ƒè¯•ç•Œé¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
            <tag> Eclipse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shell $0</title>
      <link href="/2016/09/11/Shell-dollar0/"/>
      <url>/2016/09/11/Shell-dollar0/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬å·²ç»çŸ¥é“åœ¨Shellä¸­<code>$0</code>è¡¨ç¤ºShellè„šæœ¬çš„æ–‡ä»¶åï¼Œä½†åœ¨æœ‰è„šæœ¬è°ƒç”¨çš„æƒ…å½¢ä¸­ï¼Œå­è„šæœ¬ä¸­çš„<code>$0</code>ä¼šæ˜¯ä»€ä¹ˆå€¼å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å®ä¾‹æ¥çœ‹ã€‚</p><p>å·²æµ‹è¯•ç³»ç»Ÿåˆ—è¡¨ï¼š</p><ul><li>Mac OS X EI Capitan 10.11.6</li><li>Ubuntu 16.04 LTS (GNU&#x2F;Linux 4.4.0-28-generic x86_64)</li></ul><p>çˆ¶è„šæœ¬<code>a.sh</code>ï¼Œä½ç½®<code>test1/a.sh</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">!/usr/bin/env bash</span><br><span class="line"></span><br><span class="line">echo &quot;$0&quot;</span><br><span class="line">. ../test2/b.sh</span><br></pre></td></tr></table></figure><p>å­è„šæœ¬<code>b.sh</code>ï¼Œä½ç½®<code>test2/b.sh</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;the sub script is: $0&quot;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ‰§è¡Œçˆ¶è„šæœ¬è¾“å‡ºç»“æœæ˜¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh a.sh</span></span><br><span class="line">the main script is a.sh</span><br><span class="line">the sub script is: a.sh</span><br></pre></td></tr></table></figure><p>å¦‚æœçˆ¶è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;the main script is $0&quot;</span><br><span class="line">../test2/b.sh</span><br></pre></td></tr></table></figure><p>åˆ™è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh a.sh</span> </span><br><span class="line">the main script is a.sh</span><br><span class="line">the sub script is: ../test2/b.sh</span><br></pre></td></tr></table></figure><p>å¯è§ï¼Œåœ¨çˆ¶è„šæœ¬ä¸­è°ƒç”¨å­è„šæœ¬çš„ä¸åŒï¼Œåœ¨å­è„šæœ¬ä¸­<code>$0</code>çš„å€¼ä¹Ÿä¸åŒã€‚è‡³äºä¸ºä»€ä¹ˆä¼šè¿™æ ·æœ¬äººéœ€è¦ç»§ç»­å­¦ä¹ ä»¥æ‰¾åˆ°ç­”æ¡ˆã€‚</p><blockquote><p>æµ‹è¯•è¿‡ç¨‹ä¸­æ³¨æ„ç»™è„šæœ¬èµ‹å¯æ‰§è¡Œæƒé™ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºHadoopæºä»£ç é˜…è¯»ç¯å¢ƒ</title>
      <link href="/2016/08/29/%E6%90%AD%E5%BB%BA-Hadoop-%E6%BA%90%E4%BB%A3%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83/"/>
      <url>/2016/08/29/%E6%90%AD%E5%BB%BA-Hadoop-%E6%BA%90%E4%BB%A3%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul><li>Mac OS X EI Capitan 10.11.6</li><li>java version â€œ1.7.0_80â€</li><li>git version 2.7.4 (Apple Git-66)</li><li>Apache Maven 3.3.9</li></ul><h1 id="ä¸‹è½½æºä»£ç "><a href="#ä¸‹è½½æºä»£ç " class="headerlink" title="ä¸‹è½½æºä»£ç "></a>ä¸‹è½½æºä»£ç </h1><p>ä»Gitä¸Šä¸‹è½½æœ€æ–°æºä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git://git.apache.org/hadoop-common.git</span><br></pre></td></tr></table></figure><h1 id="æ„å»ºä»£ç "><a href="#æ„å»ºä»£ç " class="headerlink" title="æ„å»ºä»£ç "></a>æ„å»ºä»£ç </h1><p>æ„å»ºä»£ç ï¼Œä½¿é¡¹ç›®å¯ä»¥å¯¼å…¥åˆ°Eclipseä¸­ã€‚åˆ‡æ¢ç›®å½•åˆ°hadoop-commonï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mvn install -DskipTests</span><br><span class="line">$ mvn eclipse:eclipse -DdownloadSources=true -DdownloadJavadocs=true</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªè¿‡ç¨‹æ—¶é—´æ¯”è¾ƒä¹…ï¼Œæœ€å¥½æœ‰å†…éƒ¨çš„NexusæœåŠ¡å™¨ï¼Œä¸ç„¶å¯èƒ½ä¼šä¸å¤Ÿé¡ºç•…ã€‚</p></blockquote><h1 id="Hadoop-2-7-3æºç ç¯å¢ƒ"><a href="#Hadoop-2-7-3æºç ç¯å¢ƒ" class="headerlink" title="Hadoop 2.7.3æºç ç¯å¢ƒ"></a>Hadoop 2.7.3æºç ç¯å¢ƒ</h1><p>ä¸‹è½½åœ°å€ï¼š<a href="http://hadoop.apache.org/releases.html">http://hadoop.apache.org/releases.html</a>ã€‚ä¸‹è½½2.7.3æºä»£ç åŒ…åˆ°æœ¬åœ°ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§£å‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar xzvf hadoop-2.7.3-src.tar.gz</span><br></pre></td></tr></table></figure><blockquote><p>è§£å‹ç›®å½•ä¸‹çš„<code>hadoop-2.7.3-src/BUILDING.txt</code>æ–‡ä»¶æä¾›äº†å¾ˆå¤šä¿¡æ¯ã€‚</p></blockquote><p>æºç æ„å»ºæ–¹å¼åŒä¸Šã€‚</p><h1 id="Eclipseä¸­çš„æ“ä½œ"><a href="#Eclipseä¸­çš„æ“ä½œ" class="headerlink" title="Eclipseä¸­çš„æ“ä½œ"></a>Eclipseä¸­çš„æ“ä½œ</h1><h2 id="Common"><a href="#Common" class="headerlink" title="Common"></a>Common</h2><ul><li>File -&gt; Importâ€¦</li><li>Choose â€œExisting Projects into Workspaceâ€</li><li>Select the hadoop-common-project directory as the root directory</li><li>Select the hadoop-annotations, hadoop-auth, hadoop-auth-examples, hadoop-nfs and hadoop-common projects</li><li>Click â€œFinishâ€</li><li>File -&gt; Importâ€¦</li><li>Choose â€œExisting Projects into Workspaceâ€</li><li>Select the hadoop-assemblies directory as the root directory</li><li>Select the hadoop-assemblies project</li><li>Click â€œFinishâ€</li><li>To get the projects to build cleanly:<ul><li>Add target&#x2F;generated-test-sources&#x2F;java as a source directory for hadoop-common</li><li>You may have to add then remove the JRE System Library to avoid errors due to access restrictions</li></ul></li></ul><p>æœ€åä¸€ä¸ªæ“ä½œçš„æ­¥éª¤ï¼š</p><ol><li>Go to the Build Path settings in the project properties.</li><li>Remove the JRE System Library</li><li>Add it back; Select â€œAdd Libraryâ€ and select the JRE System Library. The default worked for me.</li></ol><h2 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h2><ul><li>File -&gt; Importâ€¦</li><li>Choose â€œExisting Projects into Workspaceâ€</li><li>Select the hadoop-hdfs-project directory as the root directory</li><li>Select the hadoop-hdfs project</li><li>Click â€œFinishâ€</li></ul><h2 id="YARN"><a href="#YARN" class="headerlink" title="YARN"></a>YARN</h2><ul><li>File -&gt; Importâ€¦</li><li>Choose â€œExisting Projects into Workspaceâ€</li><li>Select the hadoop-yarn-project directory as the root directory</li><li>Select the hadoop-yarn-project project</li><li>Click â€œFinishâ€</li></ul><h2 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h2><ul><li>File -&gt; Importâ€¦</li><li>Choose â€œExisting Projects into Workspaceâ€</li><li>Select the hadoop-mapreduce-project directory as the root directory</li><li>Select the hadoop-mapreduce-project project</li><li>Click â€œFinishâ€</li></ul><h1 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h1><h2 id="é”™è¯¯-ç¨‹åºåŒ…com-sun-javadocä¸å­˜åœ¨"><a href="#é”™è¯¯-ç¨‹åºåŒ…com-sun-javadocä¸å­˜åœ¨" class="headerlink" title="é”™è¯¯: ç¨‹åºåŒ…com.sun.javadocä¸å­˜åœ¨"></a>é”™è¯¯: ç¨‹åºåŒ…com.sun.javadocä¸å­˜åœ¨</h2><p>å¦‚æœä½¿ç”¨JDK8æ‰§è¡Œ<code>mvn install -DskipTests</code>çš„è¯ä¼šæŠ¥ä¸€ä¸‹é”™è¯¯ï¼Œéœ€è¦æ›¿æ¢ä¸ºJDK7åå†æ‰§è¡Œã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] COMPILATION ERROR :</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] /Users/ling/work/git/hadoop-common/hadoop-common-project/hadoop-annotations/src/main/java/org/apache/hadoop/classification/tools/ExcludePrivateAnnotationsStandardDoclet.java:[20,22] é”™è¯¯: ç¨‹åºåŒ…com.sun.javadocä¸å­˜åœ¨</span><br></pre></td></tr></table></figure><h2 id="â€˜protoc-â€“versionâ€™-did-not-return-a-version"><a href="#â€˜protoc-â€“versionâ€™-did-not-return-a-version" class="headerlink" title="â€˜protoc â€“versionâ€™ did not return a version"></a>â€˜protoc â€“versionâ€™ did not return a version</h2><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.hadoop:hadoop-maven-plugins:3.0.0-SNAPSHOT:protoc (compile-protoc) on project hadoop-common: org.apache.maven.plugin.MojoExecutionException: &#x27;protoc --version&#x27; did not return a version -&gt; [Help 1]</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…protocçš„ç¼˜æ•…ã€‚æˆ‘å®‰è£…äº†æœ€æ–°ç‰ˆçš„protoc3.0.0é‡æ–°æ‰§è¡ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.hadoop:hadoop-maven-plugins:3.0.0-SNAPSHOT:protoc (compile-protoc) on project hadoop-common: org.apache.maven.plugin.MojoExecutionException: protoc version is &#x27;libprotoc 3.0.0&#x27;, expected version is &#x27;2.5.0&#x27; -&gt; [Help 1]</span><br></pre></td></tr></table></figure><p>å®‰è£…protoc2.5.0ç‰ˆæœ¬åé‡æ–°æ‰§è¡ŒæˆåŠŸã€‚</p><h2 id="hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType-AvroRecord-cannot-be-resolved-to-a-type"><a href="#hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType-AvroRecord-cannot-be-resolved-to-a-type" class="headerlink" title="hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType AvroRecord cannot be resolved to a type"></a>hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType AvroRecord cannot be resolved to a type</h2><ul><li>ä¸‹è½½<a href="http://mirrors.cnnic.cn/apache/avro/avro-1.7.7/java/avro-tools-1.7.7.jar">avro-tools</a>æœ€æ–°ç‰ˆã€‚</li><li>è¿›å…¥æºç ç›®å½•<code>hadoop-2.7.3-src/hadoop-common-project/hadoop-common/src/test/avro</code>ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -jar &lt;æ‰€åœ¨ç›®å½•&gt;/avro-tools-1.7.7.jar compile schema avroRecord.avsc ../java/</span><br></pre></td></tr></table></figure><p>å…¶ä¸­avscæ–‡ä»¶æ˜¯avroçš„æ¨¡å¼æ–‡ä»¶ï¼Œä¸Šé¢å‘½ä»¤æ˜¯è¦é€šè¿‡æ¨¡å¼æ–‡ä»¶ç”Ÿæˆç›¸åº”çš„<code>.java</code>æ–‡ä»¶ã€‚</p><p>å³é”®å•å‡»eclipseä¸­çš„hadoop-commoné¡¹ç›®ï¼Œç„¶årefreshã€‚</p><blockquote><p>æ³¨æ„ï¼Œavro-toolsä¸è¦ä¸‹è½½æœ€æ–°ç‰ˆï¼Œè¦ä¸‹è½½1.7.7ç‰ˆæœ¬ï¼›æœ€æ–°1.8.1ç‰ˆæœ¬æµ‹è¯•å¤±è´¥ã€‚</p></blockquote><h2 id="hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType-EchoRequestProto-cannot-be-resolved"><a href="#hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType-EchoRequestProto-cannot-be-resolved" class="headerlink" title="hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType EchoRequestProto cannot be resolved"></a>hadoop-commonç¼–è¯‘é”™è¯¯ï¼šType EchoRequestProto cannot be resolved</h2><ul><li>è¿›å…¥æºç ç›®å½•<code>hadoop-2.7.3-src/hadoop-common-project/hadoop-common/src/test/proto</code>ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ protoc \-\-java_out=../java *.proto</span><br></pre></td></tr></table></figure><ul><li>å³é”®å•å‡»eclipseä¸­çš„hadoop-commonï¼Œç„¶årefreshã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
          <category> åˆ†å¸ƒå¼è®¡ç®— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Java </tag>
            
            <tag> Maven </tag>
            
            <tag> åˆ†å¸ƒå¼è®¡ç®— </tag>
            
            <tag> Eclipse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac OS JAVA_HOMEè®¾ç½®</title>
      <link href="/2016/08/28/Mac-OS-JAVA-HOME-%E8%AE%BE%E7%BD%AE/"/>
      <url>/2016/08/28/Mac-OS-JAVA-HOME-%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>åœ¨MacOSä¸Šä½¿ç”¨DMGæ–‡ä»¶å®‰è£…äº†<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Jdk8</a> ä¹‹åï¼Œåœ¨é»˜è®¤è·¯å¾„ä¸‹æ‰¾ä¸åˆ°JDKçš„HOMEè·¯å¾„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> java</span><br><span class="line">/usr/bin/java</span><br><span class="line">$ <span class="built_in">ls</span> -l /usr/bin/java</span><br><span class="line">lrwxr-xr-x  1 root  wheel  74 12  6  2015 /usr/bin/java -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java</span><br><span class="line">$ <span class="built_in">ls</span> -l /System/Library/Frameworks/JavaVM.framework/Versions</span><br><span class="line">total 8</span><br><span class="line">drwxr-xr-x  10 root  wheel  340  5  9 20:45 A</span><br><span class="line">lrwxr-xr-x   1 root  wheel    1 12  6  2015 Current -&gt; A</span><br><span class="line">$ <span class="built_in">ls</span> -l /System/Library/Frameworks/JavaVM.framework/Versions/A/</span><br><span class="line">total 80</span><br><span class="line">drwxr-xr-x  47 root  wheel    1598 10 18  2015 Commands</span><br><span class="line">drwxr-xr-x   4 root  wheel     136 10 18  2015 Frameworks</span><br><span class="line">drwxr-xr-x  14 root  wheel     476  8  2  2015 Headers</span><br><span class="line">drwxr-xr-x   3 root  wheel     102  8 23  2015 JavaPluginCocoa.bundle</span><br><span class="line">-rwxr-xr-x   1 root  wheel  109488 10 18  2015 JavaVM</span><br><span class="line">drwxr-xr-x   3 root  wheel     102  8  2  2015 Modules</span><br><span class="line">drwxr-xr-x  45 root  wheel    1530 10 18  2015 Resources</span><br><span class="line">drwxr-xr-x   3 root  wheel     102  8 23  2015 _CodeSignature</span><br></pre></td></tr></table></figure><p>åœ¨MacOSä¸‹å¯ä»¥ä½¿ç”¨<code>/usr/libexec/java_home</code>å‘½ä»¤æ¥å®šä½<code>JAVA_HOME</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ /usr/libexec/java_home</span><br><span class="line">/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home</span><br></pre></td></tr></table></figure><p>è®¾ç½®<code>JAVA_HOME</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=`/usr/libexec/java_home`</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥<code>JAVA_HOME</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$JAVA_HOME</span></span><br><span class="line">/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home</span><br></pre></td></tr></table></figure><p>å¦‚æœå®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„JDKï¼Œå¯ä»¥ä½¿ç”¨<code>-V</code>å‘½ä»¤é€‰é¡¹åˆ—å‡ºæ‰€æœ‰ç‰ˆæœ¬çš„<code>JAVA_HOME</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ /usr/libexec/java_home -V</span><br><span class="line">Matching Java Virtual Machines (1):</span><br><span class="line">    1.8.0_91, x86_64:<span class="string">&quot;Java SE 8&quot;</span>/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home</span><br><span class="line"></span><br><span class="line">/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Java </tag>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 16.04å®‰è£…Lua</title>
      <link href="/2016/07/23/Ubuntu-16-04-%E5%AE%89%E8%A3%85-Lua/"/>
      <url>/2016/07/23/Ubuntu-16-04-%E5%AE%89%E8%A3%85-Lua/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Linuxç³»ç»Ÿä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘å®‰è£…Luaï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -R -O http://www.lua.org/ftp/lua-5.3.3.tar.gz</span><br><span class="line">tar zxf lua-5.3.3.tar.gz</span><br><span class="line"><span class="built_in">cd</span> lua-5.3.3</span><br><span class="line">make linux <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h1 id="å®‰è£…make"><a href="#å®‰è£…make" class="headerlink" title="å®‰è£…make"></a>å®‰è£…make</h1><p>ç¼–è¯‘è¿‡ç¨‹å¦‚æœæç¤ºä»¥ä¸‹ä¿¡æ¯åˆ™éœ€è¦å…ˆå®‰è£…makeï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># make linux test</span></span><br><span class="line">The program <span class="string">&#x27;make&#x27;</span> can be found <span class="keyword">in</span> the following packages:</span><br><span class="line"> * make</span><br><span class="line"> * make-guile</span><br><span class="line">Try: apt install &lt;selected package&gt;</span><br></pre></td></tr></table></figure><p>å®‰è£…make</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install make</span></span><br></pre></td></tr></table></figure><h1 id="å®‰è£…gcc"><a href="#å®‰è£…gcc" class="headerlink" title="å®‰è£…gcc"></a>å®‰è£…gcc</h1><p>ç¼–è¯‘è¿‡ç¨‹æç¤ºä»¥ä¸‹ä¿¡æ¯åˆ™éœ€è¦å®‰è£…gccï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># make linux test</span></span><br><span class="line"><span class="built_in">cd</span> src &amp;&amp; make linux</span><br><span class="line">make[1]: Entering directory <span class="string">&#x27;/root/lua/lua-5.3.3/src&#x27;</span></span><br><span class="line">make all SYSCFLAGS=<span class="string">&quot;-DLUA_USE_LINUX&quot;</span> SYSLIBS=<span class="string">&quot;-Wl,-E -ldl -lreadline&quot;</span></span><br><span class="line">make[2]: Entering directory <span class="string">&#x27;/root/lua/lua-5.3.3/src&#x27;</span></span><br><span class="line">gcc -std=gnu99 -O2 -Wall -Wextra -DLUA_COMPAT_5_2 -DLUA_USE_LINUX    -c -o lapi.o lapi.c</span><br><span class="line">make[2]: gcc: Command not found</span><br><span class="line">&lt;<span class="built_in">builtin</span>&gt;: recipe <span class="keyword">for</span> target <span class="string">&#x27;lapi.o&#x27;</span> failed</span><br><span class="line">make[2]: *** [lapi.o] Error 127</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/root/lua/lua-5.3.3/src&#x27;</span></span><br><span class="line">Makefile:110: recipe <span class="keyword">for</span> target <span class="string">&#x27;linux&#x27;</span> failed</span><br><span class="line">make[1]: *** [linux] Error 2</span><br><span class="line">make[1]: Leaving directory <span class="string">&#x27;/root/lua/lua-5.3.3/src&#x27;</span></span><br><span class="line">Makefile:55: recipe <span class="keyword">for</span> target <span class="string">&#x27;linux&#x27;</span> failed</span><br><span class="line">make: *** [linux] Error 2</span><br></pre></td></tr></table></figure><p>å®‰è£…gccï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install gcc</span></span><br></pre></td></tr></table></figure><p>å®‰è£…gccè¿‡ç¨‹æç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/pool/main/b/binutils/binutils_2.26.1-1ubuntu1~16.04_amd64.deb  404  Not Found [IP: 115.28.122.210 80]</span><br><span class="line">E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?</span><br></pre></td></tr></table></figure><p>å…ˆæ›´æ–°å®‰è£…æºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get update</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡å®‰è£…gccæˆåŠŸã€‚</p><h1 id="å®‰è£…libreadline-dev"><a href="#å®‰è£…libreadline-dev" class="headerlink" title="å®‰è£…libreadline-dev"></a>å®‰è£…libreadline-dev</h1><p>ç¼–è¯‘è¿‡ç¨‹æç¤ºä»¥ä¸‹ä¿¡æ¯åˆ™éœ€è¦å®‰è£…libreadline-devï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lua.c:80:31: fatal error: readline/readline.h: No such file or directory</span><br><span class="line">compilation terminated.</span><br></pre></td></tr></table></figure><p>å®‰è£…libreadline-devï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install libreadline-dev</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡ç¼–è¯‘æˆåŠŸã€‚</p><h1 id="æ£€æŸ¥å®‰è£…"><a href="#æ£€æŸ¥å®‰è£…" class="headerlink" title="æ£€æŸ¥å®‰è£…"></a>æ£€æŸ¥å®‰è£…</h1><p>ç”¨ä»¥ä¸‹æ–¹æ³•æ£€æŸ¥å®‰è£…ï¼Œå¦‚æœå®‰è£…æˆåŠŸä¼šæœ‰ç‰ˆæœ¬ä¿¡æ¯æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># src/lua -v</span></span><br><span class="line">Lua 5.3.3  Copyright (C) 1994-2016 Lua.org, PUC-Rio</span><br></pre></td></tr></table></figure><h1 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># make linux install</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹è¯­è¨€ </category>
          
          <category> Lua </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Lua </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOSå®‰è£…Emacs</title>
      <link href="/2016/07/17/Mac-OS-%E5%AE%89%E8%A3%85-Emacs/"/>
      <url>/2016/07/17/Mac-OS-%E5%AE%89%E8%A3%85-Emacs/</url>
      
        <content type="html"><![CDATA[<p>åœ¨MacOS Xä¸Šå¯ä»¥ä½¿ç”¨<a href="http://brew.sh/">Homebrew</a> å®‰è£…Emacsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install emacs --with-cocoa</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç”¨<a href="https://www.macports.org/">MacPorts</a>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> port install emacs-app</span><br></pre></td></tr></table></figure><p><a href="https://emacsformacosx.com/">OSX Emacs</a> ç½‘ç«™æä¾›äº†é€šç”¨çš„äºŒè¿›åˆ¶åŒ…ã€‚</p><blockquote><p>å‰ä¸¤ç§æ–¹æ³•å®‰è£…ååªèƒ½é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨Emacsï¼Œç•Œé¢æ˜¯ç»ˆç«¯ç•Œé¢ã€‚<br>äºŒè¿›åˆ¶å®‰è£…å¯ä»¥å°†Emacså®‰è£…åˆ°Applicationsä¸­ï¼Œé€šè¿‡Spotlightæœç´¢å¿«é€Ÿå¯åŠ¨ï¼Œå¹¶æœ‰å›¾å½¢ç•Œé¢ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
          <category> Emacs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Emacs </tag>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB between ... and ... æ“ä½œ</title>
      <link href="/2016/07/11/MongoDB-between-and-%E6%93%8D%E4%BD%9C/"/>
      <url>/2016/07/11/MongoDB-between-and-%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>MongoDBä¸­ç±»ä¼¼SQLçš„between andæ“ä½œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.find( &#123; field: &#123; $gt: value1, $lt: value2 &#125; &#125; );</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
